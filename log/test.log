  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1010.7ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1019.3ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.0ms)[0m  [1m[35mALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.0ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 13:14:57.805766', '2020-10-26 13:14:57.805766', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 13:14:57.805766', '2020-10-26 13:14:57.805766', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$ka3N1fSn3qAU5XDyDotDMOchk4g0tkYdyesGcy8WJja/SvpuBPvtq', '2020-10-26 13:14:57.805766', '2020-10-26 13:14:57.805766', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$cCYEU4oGSydUxzdZy4NtDuaficugAbAN1KTuKalWX0CWbeXc3hVKG', '2020-10-26 13:14:57.805766', '2020-10-26 13:14:57.805766', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$/Xn0tsCcfrBxX0FvzSjpJudTlzeBt89hlNitm/y/aRHPWRphxufdK', '2020-10-26 13:14:57.805766', '2020-10-26 13:14:57.805766', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 13:14:57.811680', '2020-10-26 13:14:57.811680', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 13:14:57.811680', '2020-10-26 13:14:57.811680', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 13:14:57.811680', '2020-10-26 13:14:57.811680', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 13:14:57.811680', '2020-10-26 13:14:57.811680', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 13:14:57.811680', '2020-10-26 13:14:57.811680', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 13:14:57.811680', '2020-10-26 13:14:57.811680', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 13:14:57.816077', '2020-10-26 13:14:57.816077', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 13:14:57.816077', '2020-10-26 13:14:57.816077', DEFAULT, DEFAULT)[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.8ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 13:14:57.808809', '2020-10-26 13:14:57.808809', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 13:14:57.808809', '2020-10-26 13:14:57.808809', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$dD1IuxsiKb6RUXecRR5IF.UIxd527o.tJtER/mAS36/2eIldesbJ.', '2020-10-26 13:14:57.808809', '2020-10-26 13:14:57.808809', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$88rZRYpIFzNj2NWf5gafX.w7HFnXJ9Dktl04tkoJ/KVjHMYWeZouu', '2020-10-26 13:14:57.808809', '2020-10-26 13:14:57.808809', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$SFx5WCEAZP/kTkDk2PWWb.dKdbLanC/PVs/KUlPpksd8i4pThJCoe', '2020-10-26 13:14:57.808809', '2020-10-26 13:14:57.808809', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 13:14:57.814470', '2020-10-26 13:14:57.814470', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 13:14:57.814470', '2020-10-26 13:14:57.814470', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 13:14:57.814470', '2020-10-26 13:14:57.814470', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 13:14:57.814470', '2020-10-26 13:14:57.814470', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 13:14:57.814470', '2020-10-26 13:14:57.814470', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 13:14:57.814470', '2020-10-26 13:14:57.814470', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 13:14:57.818830', '2020-10-26 13:14:57.818830', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 13:14:57.818830', '2020-10-26 13:14:57.818830', DEFAULT, DEFAULT)[0m
  [1m[35m (37.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (34.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:14:58 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:14:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 247ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 6585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:14:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 246ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 6585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:14:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 08:14:58 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-10-26 08:14:58 -0500
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 0.5ms | Allocations: 2152)
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 123)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:14:58 -0500
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:14:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:14:58 -0500
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 569)
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:14:58 -0500
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-10-26 08:14:59 -0500
Completed 200 OK in 240ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-10-26 08:14:59 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
[31mUnpermitted parameter: :format[0m
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$hAnlX7VFdckjJT55NDlHAu4ueAWG8UK53bFfdCeCHCG5ry5qONcIO"], ["created_at", "2020-10-26 13:14:59.069802"], ["updated_at", "2020-10-26 13:14:59.069802"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 7ms (Views: 0.3ms | ActiveRecord: 1.8ms | Allocations: 2257)
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:14:59 -0500
Completed 422 Unprocessable Entity in 10ms (Views: 0.3ms | ActiveRecord: 1.6ms | Allocations: 5632)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:14:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:14:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:14:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 08:14:59 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1598)
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "new_name"], ["updated_at", "2020-10-26 13:14:59.569094"], ["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:14:59 -0500
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:14:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 242ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:14:59 -0500
Completed 200 OK in 241ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 568)
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:14:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:00 -0500
Completed 200 OK in 240ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 560)
Processing by Api::V1::UsersController#login as JSON
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 08:15:00 -0500
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 363)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 1201)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 08:15:00 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 08:15:00 -0500
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.5ms | ActiveRecord: 0.5ms | Allocations: 1433)
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 18ms (Views: 0.5ms | ActiveRecord: 1.6ms | Allocations: 6489)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 249ms (Views: 0.4ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 249ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 08:15:01 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 13ms (Views: 0.4ms | ActiveRecord: 1.3ms | Allocations: 5948)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
Completed 200 OK in 242ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:01 -0500
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-10-26 08:15:01 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#update as JSON
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-10-26 13:15:01.095267"], ["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.3ms | ActiveRecord: 2.4ms | Allocations: 2437)
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:01 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 252ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:01 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 251ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:01 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 08:15:01 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 1595)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:01 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:01 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 269)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_the_proper_built_type
-----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PropertyTest: test_Should_create_a_property
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["hood", "Belen"], ["city", "Pizza"], ["user_id", 99], ["created_at", "2020-10-26 13:15:01.660716"], ["updated_at", "2020-10-26 13:15:01.660716"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_create,_save,_and_destroy_a_property
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.8ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 13:15:01.667828"], ["updated_at", "2020-10-26 13:15:01.667828"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 12]]
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[36mProperty Destroy (0.4ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 12]]
  [1m[36mProperty Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_have_successfully_created_a_property
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 13:15:01.681350"], ["updated_at", "2020-10-26 13:15:01.681350"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_a_user_id
-----------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:01 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 248ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:01 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 249ms (Views: 6.0ms | ActiveRecord: 0.2ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:01 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 08:15:02 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 5ms (Views: 2.1ms | ActiveRecord: 0.5ms | Allocations: 2065)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:02 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 242ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:02 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 242ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:02 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 08:15:02 -0500
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.2ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.2ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 1.1ms | Allocations: 6365)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:02 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 248ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:02 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 247ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:02 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-10-26 08:15:02 -0500
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.3ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-10-26 13:15:02.898574"], ["updated_at", "2020-10-26 13:15:02.898574"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued PhotoQualityJob (Job ID: 1d88f5c3-e448-4ab7-b02c-5697ad2d7d2d) to Test(default) with arguments: 298486375
Completed 201 Created in 59ms (Views: 0.3ms | ActiveRecord: 1.5ms | Allocations: 29041)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:02 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 242ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:02 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:03 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 08:15:03 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.5ms | Allocations: 1596)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:03 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:03 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:03 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 08:15:03 -0500
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.2ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.7ms | Allocations: 1570)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:03 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:03 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:03 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.3ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-10-26 08:15:03 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
PhotoTest: test_Should_create,_save_and_delete_a_property,_as_well_as_inspecting_the_link
-----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.4ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.linkdeprueba.com"], ["property_id", 1], ["created_at", "2020-10-26 13:15:03.929597"], ["updated_at", "2020-10-26 13:15:03.929597"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.3ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 298486375]]
  [1m[36mPhoto Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "photos" WHERE "photos"."property_id" = $1 LIMIT $2[0m  [["property_id", 1], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_property_id
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_url
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PhotoTest: test_Should_successfully_create_a_photo
--------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.3ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.zeldadeprueba.com"], ["property_id", 2], ["created_at", "2020-10-26 13:15:03.945273"], ["updated_at", "2020-10-26 13:15:03.945273"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:03 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 244ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:04 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 243ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:04 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 08:15:04 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.2ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 5ms (Views: 1.1ms | ActiveRecord: 0.9ms | Allocations: 1849)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:04 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 08:15:04 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.5ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-10-26 13:15:04.447559"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.6ms | ActiveRecord: 1.5ms | Allocations: 2893)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:04 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 243ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:04 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:04 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 08:15:04 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-10-26 13:15:04.876922"], ["updated_at", "2020-10-26 13:15:04.876922"], ["admon", "80000"], ["rooms", "3"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 8ms (Views: 0.4ms | ActiveRecord: 1.1ms | Allocations: 3489)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:04 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 243ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 08:15:04 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.3ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 13:15:04.947822"], ["updated_at", "2020-10-26 13:15:04.947822"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 6ms (Views: 0.6ms | ActiveRecord: 0.9ms | Allocations: 2578)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:04 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 244ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:05 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 242ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:05 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-10-26 08:15:05 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:05 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 245ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 08:15:05 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-10-26 13:15:05.452751"], ["updated_at", "2020-10-26 13:15:05.452751"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 7ms (Views: 0.6ms | ActiveRecord: 1.2ms | Allocations: 2704)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:05 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 251ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:05 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 246ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:05 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 08:15:05 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 404 Not Found in 3ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1458)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:05 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 242ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 08:15:05 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.4ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-10-26 13:15:05.959420"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.5ms | ActiveRecord: 1.4ms | Allocations: 2734)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:05 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 243ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 239ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 08:15:06 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 13:15:06.377674"], ["updated_at", "2020-10-26 13:15:06.377674"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 7ms (Views: 0.6ms | ActiveRecord: 1.1ms | Allocations: 2696)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 246ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-10-26 08:15:06 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
Completed 200 OK in 4ms (Views: 1.0ms | ActiveRecord: 0.8ms | Allocations: 1583)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 255ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 248ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-10-26 08:15:06 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
Completed 200 OK in 7ms (Views: 3.4ms | ActiveRecord: 0.8ms | Allocations: 3672)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 242ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 08:15:06 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 244ms (Views: 0.3ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:07 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:07 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-10-26 08:15:07 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Destroy (0.5ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.5ms | Allocations: 1544)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$UCtHFlLRjtw1qW8Za4wGa.UxLRh1jBHLlozxlsABXRQWCHG7cFsl2"], ["created_at", "2020-10-26 13:15:07.402856"], ["updated_at", "2020-10-26 13:15:07.402856"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$MNzKOU1quAnaCtAm5hw0z.Anpig7jEDUX6FSE0lmrGW4ZlHFiTVGS"], ["created_at", "2020-10-26 13:15:07.412972"], ["updated_at", "2020-10-26 13:15:07.412972"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$fhH4EU2yHbNE6sp19gDnc.HCsevBbhTsdlwtwRWOqU.FLkcK5VtCa"], ["created_at", "2020-10-26 13:15:07.430538"], ["updated_at", "2020-10-26 13:15:07.430538"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$5ttjxxCRTAvmdpFsPt1tEuRQzVFu3lJIkO4zFguwb7MNrBRKrSkTi"], ["created_at", "2020-10-26 13:15:07.440743"], ["updated_at", "2020-10-26 13:15:07.440743"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$.NBB6ckSIsMBnntfKwdo3eYjF7U25FVmCoCVrUqWj7rK9uUMDmoki"], ["created_at", "2020-10-26 13:15:07.456293"], ["updated_at", "2020-10-26 13:15:07.456293"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Completed 200 OK in 244ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-10-26 08:15:07 -0500
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$62OvNUR7Z10O.F1BNBnXX.FLcuCjd59JWBJNruiVnf.Fjtu0NmkiC"], ["created_at", "2020-10-26 13:15:07.471618"], ["updated_at", "2020-10-26 13:15:07.471618"], ["full_name", "valid"], ["cellphone", "3001234567"]]
Completed 404 Not Found in 8ms (Views: 0.2ms | ActiveRecord: 1.4ms | Allocations: 1458)
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$IUyxe8E2wQHP4ahE6nC6m.12ZBKFkpWhJf/vIo15bwbltfFuR/hMO"], ["created_at", "2020-10-26 13:15:07.479878"], ["updated_at", "2020-10-26 13:15:07.479878"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.9ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486381]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (1.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486381]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$MVRNkja1rE6rRhmbiWOkO.ZHLJqxi4Uc75rFJ5RF0vXxI51dSJe1O"], ["created_at", "2020-10-26 13:15:07.495716"], ["updated_at", "2020-10-26 13:15:07.495716"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$RS2J6.TnF7SiNAuPz2rI7eoQXdctwKQG2EurDOUwfYi5kQ4UtBB2K"], ["created_at", "2020-10-26 13:15:07.501779"], ["updated_at", "2020-10-26 13:15:07.501779"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486382]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486382]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$8zJg6eWcBsCySwK078hY9OtVdHf22KRoAYPkSog8xzwCgGEzzO05y"], ["created_at", "2020-10-26 13:15:07.507381"], ["updated_at", "2020-10-26 13:15:07.507381"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$VRGUyK1j5qWpl7e5/1DbsuWsKrbdfGtxygDGBRbqtlD9ieRsyqT1C"], ["created_at", "2020-10-26 13:15:07.513428"], ["updated_at", "2020-10-26 13:15:07.513428"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486383]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486383]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (966.6ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.0ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (973.3ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.1ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.8ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 13:17:51.481911', '2020-10-26 13:17:51.481911', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 13:17:51.481911', '2020-10-26 13:17:51.481911', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$Cl2KVJReovBXsSmXj1RfMeSRI54sftp3ATZZXNiTiSEcaCYI6b8E2', '2020-10-26 13:17:51.481911', '2020-10-26 13:17:51.481911', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$OZl24NREZD6UxudsoboAM.QYtomvPUJD2yIL29TfqD0VWDJgy6q/O', '2020-10-26 13:17:51.481911', '2020-10-26 13:17:51.481911', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$3YO/NuzW3cvTE8kx5j1MB.Rnik9PfNpSRaQemnMErqHhJVPq402ZC', '2020-10-26 13:17:51.481911', '2020-10-26 13:17:51.481911', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 13:17:51.488957', '2020-10-26 13:17:51.488957', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 13:17:51.488957', '2020-10-26 13:17:51.488957', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 13:17:51.488957', '2020-10-26 13:17:51.488957', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 13:17:51.488957', '2020-10-26 13:17:51.488957', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 13:17:51.488957', '2020-10-26 13:17:51.488957', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 13:17:51.488957', '2020-10-26 13:17:51.488957', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 13:17:51.494313', '2020-10-26 13:17:51.494313', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 13:17:51.494313', '2020-10-26 13:17:51.494313', DEFAULT, DEFAULT)[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 13:17:51.484901', '2020-10-26 13:17:51.484901', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 13:17:51.484901', '2020-10-26 13:17:51.484901', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$ej3mo3I24szuxMW.EJnXgekXxL1DZnyWtPapnUKLE9.CzhYmWipBi', '2020-10-26 13:17:51.484901', '2020-10-26 13:17:51.484901', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$8bOXjtXBQUFkTI0CogmqLe7i55dZj/mj35nHD1yR66cAHR9Zct5E.', '2020-10-26 13:17:51.484901', '2020-10-26 13:17:51.484901', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$0q9BpHPfzHNghtaDJoUSY.KjueTpnUEMocN5MufD.jQ9rrW.6qgVO', '2020-10-26 13:17:51.484901', '2020-10-26 13:17:51.484901', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 13:17:51.492268', '2020-10-26 13:17:51.492268', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 13:17:51.492268', '2020-10-26 13:17:51.492268', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 13:17:51.492268', '2020-10-26 13:17:51.492268', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 13:17:51.492268', '2020-10-26 13:17:51.492268', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 13:17:51.492268', '2020-10-26 13:17:51.492268', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 13:17:51.492268', '2020-10-26 13:17:51.492268', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 13:17:51.498242', '2020-10-26 13:17:51.498242', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 13:17:51.498242', '2020-10-26 13:17:51.498242', DEFAULT, DEFAULT)[0m
  [1m[35m (13.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (21.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:51 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 256ms (Views: 0.6ms | ActiveRecord: 0.5ms | Allocations: 6585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 255ms (Views: 0.8ms | ActiveRecord: 0.5ms | Allocations: 6585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 242ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 08:17:52 -0500
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
Completed 200 OK in 243ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[36mPhoto Load (0.3ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 08:17:52 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.5ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 24ms (Views: 0.2ms | ActiveRecord: 2.2ms | Allocations: 6690)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.2ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 53ms (Views: 3.1ms | ActiveRecord: 1.0ms | Allocations: 26496)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 245ms (Views: 0.4ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 242ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 284ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 283ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 337ms (Views: 0.9ms | ActiveRecord: 0.9ms | Allocations: 560)
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 08:17:53 -0500
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
Completed 200 OK in 316ms (Views: 0.9ms | ActiveRecord: 0.5ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 08:17:53 -0500
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.3ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
Completed 200 OK in 10ms (Views: 0.4ms | ActiveRecord: 1.1ms | Allocations: 1447)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 11ms (Views: 0.2ms | ActiveRecord: 1.6ms | Allocations: 1599)
  [1m[35m (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:53 -0500
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
----------------------------------------------------------------
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:53 -0500
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 268ms (Views: 0.9ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 267ms (Views: 1.3ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 244ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 246ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-10-26 08:17:54 -0500
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-10-26 08:17:54 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$lgnPkiAKOAcB/Jn9dayJyu2nwpJYGtmwjFszlw9Wd90gxAM/4SzYC"], ["created_at", "2020-10-26 13:17:54.222939"], ["updated_at", "2020-10-26 13:17:54.222939"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (1.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$9zdRsfB0XOGxMlqq8FhD4Odnhgm.ZYoznXxesNkvXPapiHxYaDLTK"], ["created_at", "2020-10-26 13:17:54.242741"], ["updated_at", "2020-10-26 13:17:54.242741"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$CJwGGO3Q8WAcq2fYaZFQkOfbNM7g3DxafddYwG9.nQBwLV/emDEuC"], ["created_at", "2020-10-26 13:17:54.265805"], ["updated_at", "2020-10-26 13:17:54.265805"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.7ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-10-26 13:17:54.271592"], ["updated_at", "2020-10-26 13:17:54.271592"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
[ActiveJob] Enqueued PhotoQualityJob (Job ID: 6fe17d29-d6c6-49fc-b3cf-a74ca0e5ea43) to Test(default) with arguments: 298486375
Completed 201 Created in 77ms (Views: 0.3ms | ActiveRecord: 2.4ms | Allocations: 26238)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$0FAgkHMmgMVjvyIM3rLN7OCbhvz8Y1yxP9RlH0v8UilR.B9Q0yTy6"], ["created_at", "2020-10-26 13:17:54.288859"], ["updated_at", "2020-10-26 13:17:54.288859"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$Ot0IW6tMYigFfVMaBtmSnuRpGOrLRlQ1NDYcDTs3V8WlHnwW..bNG"], ["created_at", "2020-10-26 13:17:54.289080"], ["updated_at", "2020-10-26 13:17:54.289080"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$CRN3xqW2s/IzeyiRb.BYxOlo22lxV7bYP19P0OZ.8T.vCXBRowMp."], ["created_at", "2020-10-26 13:17:54.311509"], ["updated_at", "2020-10-26 13:17:54.311509"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$bg6QHh1R/vTWJZ5xeJ80nuU.ElzONEz9TG9OiIFH4ZtPa2fPn1zhG"], ["created_at", "2020-10-26 13:17:54.331438"], ["updated_at", "2020-10-26 13:17:54.331438"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$6pmgdeWoXEu3C/pO50Z8AufxXBI1wyXTI89EyWppAtCTLlZ4R9KBW"], ["created_at", "2020-10-26 13:17:54.342925"], ["updated_at", "2020-10-26 13:17:54.342925"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$8qOXWrjLtVpIgXY75dPj7eVjtG1S5898I/vcnWqyAGujtnD8Z3ESy"], ["created_at", "2020-10-26 13:17:54.357938"], ["updated_at", "2020-10-26 13:17:54.357938"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[36mUser Destroy (1.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$tBZx0Fez/7EArLBXNHsYdOlj.9dJMQf8pBKYsQe.lei1qlzNMPVzW"], ["created_at", "2020-10-26 13:17:54.371498"], ["updated_at", "2020-10-26 13:17:54.371498"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$IhTLSbRIj0N6Yispka8M7ugZq6VokV5S39k1/gyM/iZZgYKCgiNuO"], ["created_at", "2020-10-26 13:17:54.377326"], ["updated_at", "2020-10-26 13:17:54.377326"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486381]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486381]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
--------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:54 -0500
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:54 -0500
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 249ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 569)
Completed 200 OK in 252ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:54 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-10-26 08:17:54 -0500
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-10-26 08:17:54 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Destroy (0.7ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 1.8ms | Allocations: 1594)
Completed 200 OK in 6ms (Views: 2.7ms | ActiveRecord: 0.9ms | Allocations: 3726)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:54 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 242ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:55 -0500
Completed 200 OK in 243ms (Views: 0.3ms | ActiveRecord: 0.8ms | Allocations: 568)
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:55 -0500
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 08:17:55 -0500
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-10-26 08:17:55 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 1.0ms | ActiveRecord: 0.8ms | Allocations: 1581)
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-10-26 13:17:55.394256"], ["updated_at", "2020-10-26 13:17:55.394256"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 201 Created in 8ms (Views: 0.6ms | ActiveRecord: 1.1ms | Allocations: 3407)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:55 -0500
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 243ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:55 -0500
Completed 200 OK in 242ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:55 -0500
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 08:17:55 -0500
Completed 200 OK in 240ms (Views: 0.3ms | ActiveRecord: 0.1ms | Allocations: 560)
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 08:17:55 -0500
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 404 Not Found in 4ms (Views: 0.2ms | ActiveRecord: 0.9ms | Allocations: 1458)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-10-26 13:17:55.896299"], ["updated_at", "2020-10-26 13:17:55.896299"], ["admon", "80000"], ["rooms", "3"]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:55 -0500
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 6ms (Views: 0.4ms | ActiveRecord: 1.1ms | Allocations: 2739)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 242ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 244ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 239ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 08:17:56 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[36mProperty Update (0.4ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-10-26 13:17:56.392079"], ["id", 1]]
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 08:17:56 -0500
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.5ms | ActiveRecord: 1.3ms | Allocations: 4110)
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:56 -0500
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 13:17:56.404584"], ["updated_at", "2020-10-26 13:17:56.404584"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 13ms (Views: 0.6ms | ActiveRecord: 1.6ms | Allocations: 2578)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 245ms (Views: 0.4ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 242ms (Views: 0.3ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 560)
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-10-26 08:17:56 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 404 Not Found in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1458)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:56 -0500
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 08:17:56 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.6ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-10-26 13:17:56.907106"], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.4ms | ActiveRecord: 1.8ms | Allocations: 2785)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 243ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 242ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 08:17:57 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 13:17:57.394435"], ["updated_at", "2020-10-26 13:17:57.394435"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 7ms (Views: 0.6ms | ActiveRecord: 1.2ms | Allocations: 2721)
Completed 200 OK in 240ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 08:17:57 -0500
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 123)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:57 -0500
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 242ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-10-26 08:17:57 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 120)
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 08:17:57 -0500
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:57 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 8ms (Views: 0.4ms | ActiveRecord: 1.7ms | Allocations: 2367)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 248ms (Views: 0.4ms | ActiveRecord: 0.1ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 247ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 08:17:58 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 3ms (Views: 1.4ms | ActiveRecord: 0.4ms | Allocations: 2064)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-10-26 08:17:58 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 9ms (Views: 0.2ms | ActiveRecord: 1.0ms | Allocations: 3695)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 247ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 246ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 247ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-10-26 08:17:58 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 251ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 08:17:58 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.6ms | Allocations: 1433)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 251ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 254ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 248ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 08:17:59 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 9ms (Views: 0.3ms | ActiveRecord: 1.4ms | Allocations: 1941)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 254ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:59 -0500
Processing by Api::V1::UsersController#login as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 363)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 250ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 249ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 08:17:59 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 1595)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-10-26 08:17:59 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$LcO/mP0GDUQwnViYxfqI5.8OTbcokdoN7MfAzoNdU96x57fPYJMUS"], ["created_at", "2020-10-26 13:17:59.954672"], ["updated_at", "2020-10-26 13:17:59.954672"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 4ms (Views: 0.3ms | ActiveRecord: 0.9ms | Allocations: 1491)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 243ms (Views: 0.3ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:18:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 243ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:18:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-10-26 08:18:00 -0500
Processing by Api::V1::UsersController#update as JSON
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-10-26 13:18:00.421544"], ["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 1.2ms | Allocations: 2462)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:18:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 243ms (Views: 1.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:18:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 269)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:18:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:18:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:18:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 08:18:00 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 1029)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:18:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 08:18:00 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 7ms (Views: 0.7ms | ActiveRecord: 0.5ms | Allocations: 1859)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:18:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 254ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:18:01 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 253ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:18:01 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 242ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 08:18:01 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 1595)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_have_successfully_created_a_property
--------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 13:18:01.429199"], ["updated_at", "2020-10-26 13:18:01.429199"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 248ms (ActiveRecord: 0.2ms | Allocations: 359)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (11.8ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (3.6ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1005.6ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (1005.7ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.6ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 15:35:19.093817', '2020-10-26 15:35:19.093817', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 15:35:19.093817', '2020-10-26 15:35:19.093817', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$/d7daUCJIQoVw0cHxpH0ee9dkwzg1jXWlCPGpWUb1lO87ruPEtux.', '2020-10-26 15:35:19.093817', '2020-10-26 15:35:19.093817', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$4PZDjQeuhUniR/GhPvVLtOgb8g54T4Lr.EO6.FPkSsYI1XVXQucLe', '2020-10-26 15:35:19.093817', '2020-10-26 15:35:19.093817', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$ejme4mlR/dsNkmqHN9qczO1fhikSlrBylBODx2nzmW5aEqqDxfMni', '2020-10-26 15:35:19.093817', '2020-10-26 15:35:19.093817', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:35:19.106834', '2020-10-26 15:35:19.106834', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:35:19.106834', '2020-10-26 15:35:19.106834', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:35:19.106834', '2020-10-26 15:35:19.106834', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:35:19.106834', '2020-10-26 15:35:19.106834', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 15:35:19.106834', '2020-10-26 15:35:19.106834', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 15:35:19.106834', '2020-10-26 15:35:19.106834', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 15:35:19.115750', '2020-10-26 15:35:19.115750', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 15:35:19.115750', '2020-10-26 15:35:19.115750', DEFAULT, DEFAULT)[0m
  [1m[35m (34.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.3ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 15:35:19.140949', '2020-10-26 15:35:19.140949', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 15:35:19.140949', '2020-10-26 15:35:19.140949', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$48CWkQ9QxA2YMc6AV0foC.jLaz4hTCmDr6n9ByQyslVlFT4MRGbhq', '2020-10-26 15:35:19.140949', '2020-10-26 15:35:19.140949', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$FX6aJVuqES6roIYczZqUj.I6aakLn/G9wjKZWNPXLJxLS/K7uI16W', '2020-10-26 15:35:19.140949', '2020-10-26 15:35:19.140949', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$UcByoPKGZC9B.nWz9tTTke1lj0VoMymnYkV9apDnzfQPzAD1Y00WW', '2020-10-26 15:35:19.140949', '2020-10-26 15:35:19.140949', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:35:19.161853', '2020-10-26 15:35:19.161853', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:35:19.161853', '2020-10-26 15:35:19.161853', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:35:19.161853', '2020-10-26 15:35:19.161853', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:35:19.161853', '2020-10-26 15:35:19.161853', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 15:35:19.161853', '2020-10-26 15:35:19.161853', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 15:35:19.161853', '2020-10-26 15:35:19.161853', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 15:35:19.168988', '2020-10-26 15:35:19.168988', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 15:35:19.168988', '2020-10-26 15:35:19.168988', DEFAULT, DEFAULT)[0m
  [1m[35m (13.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:19 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:19 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 514ms (Views: 1.7ms | ActiveRecord: 0.5ms | Allocations: 6586)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:20 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 505ms (Views: 1.3ms | ActiveRecord: 10.6ms | Allocations: 6586)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:20 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 282ms (Views: 1.7ms | ActiveRecord: 2.3ms | Allocations: 560)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-10-26 10:35:20 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
Completed 200 OK in 67ms (Views: 9.9ms | ActiveRecord: 1.6ms | Allocations: 5904)
  [1m[35m (10.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:20 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 373ms (Views: 2.0ms | ActiveRecord: 0.3ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 10:35:20 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.6ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-10-26 15:35:20.725262"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 170ms (Views: 0.5ms | ActiveRecord: 3.2ms | Allocations: 27003)
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:20 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 397ms (Views: 1.3ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:20 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 301ms (Views: 1.5ms | ActiveRecord: 1.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 308ms (Views: 0.5ms | ActiveRecord: 0.8ms | Allocations: 561)
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-10-26 10:35:21 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 123)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 455ms (Views: 1.1ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 10:35:21 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 404 Not Found in 8ms (Views: 0.2ms | ActiveRecord: 3.5ms | Allocations: 1458)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 456ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 446ms (Views: 2.1ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 457ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 10:35:22 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:22 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 291ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-10-26 10:35:22 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
Completed 200 OK in 23ms (Views: 3.2ms | ActiveRecord: 2.0ms | Allocations: 3651)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.6ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:22 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (12.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 340ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:22 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (5.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 339ms (Views: 1.0ms | ActiveRecord: 12.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:22 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 374ms (Views: 0.5ms | ActiveRecord: 5.8ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 10:35:22 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.7ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-10-26 15:35:22.973511"], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 157ms (Views: 0.5ms | ActiveRecord: 2.7ms | Allocations: 24794)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:22 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 408ms (Views: 0.7ms | ActiveRecord: 0.5ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:35:23 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 15:35:23.085406"], ["updated_at", "2020-10-26 15:35:23.085406"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 11ms (Views: 1.2ms | ActiveRecord: 1.9ms | Allocations: 2753)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 473ms (Views: 1.9ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 395ms (Views: 2.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 336ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:35:23 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.9ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-10-26 15:35:23.814125"], ["updated_at", "2020-10-26 15:35:23.814125"], ["admon", "80000"], ["rooms", "3"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 21ms (Views: 4.7ms | ActiveRecord: 2.0ms | Allocations: 2796)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
Completed 200 OK in 332ms (Views: 0.4ms | ActiveRecord: 0.5ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:23 -0500
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-10-26 10:35:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.6ms | Allocations: 1458)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 571ms (Views: 1.1ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 677ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 547ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (4.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:35:24 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 483ms (Views: 1.8ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:35:25 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (2.7ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 15:35:25.018594"], ["updated_at", "2020-10-26 15:35:25.018594"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Completed 201 Created in 33ms (Views: 0.7ms | ActiveRecord: 4.8ms | Allocations: 2578)
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-10-26 15:35:25.021981"], ["updated_at", "2020-10-26 15:35:25.021981"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 18ms (Views: 0.8ms | ActiveRecord: 1.9ms | Allocations: 2704)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
  [1m[35m (6.6ms)[0m  [1m[31mROLLBACK[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_create,_save,_and_destroy_a_property
--------------------------------------------------------------
  [1m[35m (4.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (19.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.8ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 15:35:25.099232"], ["updated_at", "2020-10-26 15:35:25.099232"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 13]]
  [1m[36mProperty Load (0.9ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[36mProperty Destroy (3.7ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 13]]
  [1m[36mProperty Exists? (6.4ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PropertyTest: test_Should_create_a_property
-------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["hood", "Belen"], ["city", "Pizza"], ["user_id", 99], ["created_at", "2020-10-26 15:35:25.142308"], ["updated_at", "2020-10-26 15:35:25.142308"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_a_user_id
-----------------------------------------------------------------
  [1m[35m (2.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_elevator_attribute
---------------------------------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "elevator") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 15:35:25.182230"], ["updated_at", "2020-10-26 15:35:25.182230"], ["build_area", "hola"], ["elevator", true]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_have_successfully_created_a_property
--------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.1ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 15:35:25.202888"], ["updated_at", "2020-10-26 15:35:25.202888"]]
  [1m[35m (2.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_the_proper_built_type
-----------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (3.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
  [1m[35m (8.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (6.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$LYmTREwmNk7femtoJ8fu/uR2xbavNX/06FOeG0ABssq3Gu8OUY/R2"], ["created_at", "2020-10-26 15:35:25.272849"], ["updated_at", "2020-10-26 15:35:25.272849"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (2.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (4.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$2oIQj7kmLHlJUer/ncW6VOdg4zpuVtxGNVtYBTdNaZ.gfS9v7psE6"], ["created_at", "2020-10-26 15:35:25.337577"], ["updated_at", "2020-10-26 15:35:25.337577"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$R8mU2Sbih3omo46.4VJazemZjYvRS02bYvsiRurrt52l4IFxwTuDO"], ["created_at", "2020-10-26 15:35:25.356846"], ["updated_at", "2020-10-26 15:35:25.356846"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (7.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (1.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (8.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$KagEkagGN6CYqONl.q8OkeVCOLzUfqKjI0x/gRcpuDLY0fRZsh4sS"], ["created_at", "2020-10-26 15:35:25.414164"], ["updated_at", "2020-10-26 15:35:25.414164"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (10.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$p8GDmz4FdGn8pJfRKZySweaFKPRcj1gQ/482sIYuBB9SGOlgjmF56"], ["created_at", "2020-10-26 15:35:25.457760"], ["updated_at", "2020-10-26 15:35:25.457760"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (7.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
Completed 200 OK in 461ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:25 -0500
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$So/VbmJkso6vy0P0hqZU.OpmtplvYX9T.caPnIFrWfHgROazu5O4q"], ["created_at", "2020-10-26 15:35:25.510129"], ["updated_at", "2020-10-26 15:35:25.510129"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[35m (6.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[36mUser Destroy (2.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (5.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (6.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (3.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$1RH5.CKRkj.X8PbuV25ag.8VopWZBpc3PBDUYWnOP9Uqx3q/izZAO"], ["created_at", "2020-10-26 15:35:25.559852"], ["updated_at", "2020-10-26 15:35:25.559852"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486381]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486381]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$0ep.QHPp0oXdmfLbo6O7oO/XDeYix5iX9GOhFTBvks20cG0.1o6Gm"], ["created_at", "2020-10-26 15:35:25.591996"], ["updated_at", "2020-10-26 15:35:25.591996"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486382]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486382]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
  [1m[35m (4.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$93KbDooU24lQom.S0dZ3ru8lzojNIQ0Khg3jmpaIERrscA.3W0eEW"], ["created_at", "2020-10-26 15:35:25.619022"], ["updated_at", "2020-10-26 15:35:25.619022"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486383]]
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486383]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$tgkTWE8qJRSRdhubh6xNKuIXCB1XMq.YRJ5eNCSS4ix3M29A8xek6"], ["created_at", "2020-10-26 15:35:25.648945"], ["updated_at", "2020-10-26 15:35:25.648945"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486384]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486384]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$XGcnWD5uhRKX7D2SGCczfeQzVbK5JQVmOhMOJ3w8suaeoQuT3of3O"], ["created_at", "2020-10-26 15:35:25.684584"], ["updated_at", "2020-10-26 15:35:25.684584"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486385]]
  [1m[36mUser Destroy (1.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486385]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 440ms (Views: 1.3ms | ActiveRecord: 3.2ms | Allocations: 560)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-10-26 10:35:25 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (1.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Destroy (0.6ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 3.1ms | Allocations: 1561)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 409ms (Views: 2.8ms | ActiveRecord: 0.5ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 316ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 347ms (Views: 0.9ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 3ms (Views: 0.3ms | ActiveRecord: 2.0ms | Allocations: 269)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 273ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (2.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-10-26 10:35:26 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$UPU4TLGLK/ui9o2mkIjIY.SqFFCstZL7hB3o9GQB7Gb1062XBkIhe"], ["created_at", "2020-10-26 15:35:26.605426"], ["updated_at", "2020-10-26 15:35:26.605426"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 14ms (Views: 0.5ms | ActiveRecord: 4.1ms | Allocations: 2153)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 307ms (Views: 3.7ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 418ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 353ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Completed 200 OK in 317ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 10:35:27 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:27 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
Processing by Api::V1::UsersController#login as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 6ms (Views: 0.4ms | ActiveRecord: 0.6ms | Allocations: 1595)
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (10.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 401 Unauthorized in 15ms (Views: 3.5ms | ActiveRecord: 10.0ms | Allocations: 365)
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:27 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:27 -0500
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 350ms (Views: 0.6ms | ActiveRecord: 0.7ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:27 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 385ms (Views: 0.5ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:27 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 339ms (Views: 1.0ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (1.6ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "new_name"], ["updated_at", "2020-10-26 15:35:28.084609"], ["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.9ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 439ms (Views: 1.2ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 10:35:28 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 10ms (Views: 4.0ms | ActiveRecord: 3.5ms | Allocations: 2065)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 351ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 396ms (Views: 0.5ms | ActiveRecord: 0.9ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 290ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 561)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:35:28 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.5ms | ActiveRecord: 0.7ms | Allocations: 1433)
Completed 200 OK in 287ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-10-26 10:35:28 -0500
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:28 -0500
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 13ms (Views: 0.6ms | ActiveRecord: 0.7ms | Allocations: 3507)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 334ms (Views: 2.4ms | ActiveRecord: 1.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 391ms (Views: 0.6ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 307ms (Views: 0.5ms | ActiveRecord: 0.7ms | Allocations: 560)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:35:29 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 361ms (Views: 0.6ms | ActiveRecord: 0.8ms | Allocations: 560)
Completed 204 No Content in 8ms (Views: 0.7ms | ActiveRecord: 1.9ms | Allocations: 1956)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:35:29 -0500
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:29 -0500
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 7ms (Views: 1.5ms | ActiveRecord: 1.3ms | Allocations: 1859)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 379ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 473ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 295ms (Views: 1.2ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:35:30 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (2.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 14ms (Views: 0.5ms | ActiveRecord: 4.4ms | Allocations: 2367)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 359ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 10:35:30 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 25ms (Views: 0.5ms | ActiveRecord: 4.6ms | Allocations: 1595)
  [1m[35m (16.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (13.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 427ms (Views: 0.6ms | ActiveRecord: 0.9ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 500ms (Views: 0.6ms | ActiveRecord: 13.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 438ms (Views: 0.9ms | ActiveRecord: 1.1ms | Allocations: 560)
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-10-26 10:35:31 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 123)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 361ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-10-26 10:35:31 -0500
Processing by Api::V1::UsersController#update as JSON
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-10-26 15:35:31.306938"], ["id", 100]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.4ms | ActiveRecord: 2.7ms | Allocations: 2463)
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 331ms (Views: 0.5ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 349ms (Views: 0.9ms | ActiveRecord: 0.9ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 268ms (Views: 1.1ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 10:35:31 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 1029)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 406ms (Views: 5.0ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 465ms (Views: 0.6ms | ActiveRecord: 0.8ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 512ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (8.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-10-26 10:35:32 -0500
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.8ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-10-26 15:35:32.650497"], ["updated_at", "2020-10-26 15:35:32.650497"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued PhotoQualityJob (Job ID: 0b863c24-09ba-4e2a-b708-d6f347d47d94) to Test(default) with arguments: 298486375
Completed 201 Created in 24ms (Views: 0.5ms | ActiveRecord: 2.5ms | Allocations: 7799)
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (4.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 503ms (Views: 2.1ms | ActiveRecord: 0.4ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 363ms (Views: 0.7ms | ActiveRecord: 2.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
Completed 200 OK in 323ms (Views: 1.0ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 10:35:33 -0500
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mPhoto Load (1.2ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 7ms (Views: 1.7ms | ActiveRecord: 2.0ms | Allocations: 1839)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 487ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 621ms (Views: 0.8ms | ActiveRecord: 0.5ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 308ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 427ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 10:35:34 -0500
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (3.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.4ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 19ms (Views: 0.6ms | ActiveRecord: 4.6ms | Allocations: 1570)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 292ms (Views: 0.9ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 10:35:34 -0500
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.2ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.3ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 26ms (Views: 0.2ms | ActiveRecord: 2.6ms | Allocations: 6315)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 382ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 572ms (Views: 0.5ms | ActiveRecord: 2.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 374ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 386ms (Views: 1.3ms | ActiveRecord: 1.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 397ms (Views: 1.7ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 10:35:35 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (10.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 34ms (Views: 2.0ms | ActiveRecord: 11.2ms | Allocations: 1596)
  [1m[35m (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PhotoTest: test_Should_successfully_create_a_photo
--------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Completed 200 OK in 423ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[36mProperty Load (0.9ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-10-26 10:35:35 -0500
  [1m[36mPhoto Create (0.9ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.zeldadeprueba.com"], ["property_id", 2], ["created_at", "2020-10-26 15:35:35.561127"], ["updated_at", "2020-10-26 15:35:35.561127"]]
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
PhotoTest: test_Should_create,_save_and_delete_a_property,_as_well_as_inspecting_the_link
-----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.5ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.linkdeprueba.com"], ["property_id", 1], ["created_at", "2020-10-26 15:35:35.579265"], ["updated_at", "2020-10-26 15:35:35.579265"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.3ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 298486376]]
  [1m[36mPhoto Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "photos" WHERE "photos"."property_id" = $1 LIMIT $2[0m  [["property_id", 1], ["LIMIT", 1]]
  [1m[35m (2.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_property_id
---------------------------------------------------------------
-------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_url
-------------------------------------------------------
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.7ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1421.6ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1434.5ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (2.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.0ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 15:36:12.563953', '2020-10-26 15:36:12.563953', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 15:36:12.563953', '2020-10-26 15:36:12.563953', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$gdNQ/XtOov9TgtDgXCMave6rHryf1nJGzlUVolmI8dyTygrDt9Rey', '2020-10-26 15:36:12.563953', '2020-10-26 15:36:12.563953', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$YzSiT0kZU/ay.4dyvbS06.XTMuJhgWr.JBDk5sD8wN4EwO7wu8Fqu', '2020-10-26 15:36:12.563953', '2020-10-26 15:36:12.563953', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$UfM1dXHOuC0mRahsYca.ue1rA6zNqSCRDdCPzGBW8y/LEUwCmmo.m', '2020-10-26 15:36:12.563953', '2020-10-26 15:36:12.563953', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:36:12.577279', '2020-10-26 15:36:12.577279', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:36:12.577279', '2020-10-26 15:36:12.577279', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:36:12.577279', '2020-10-26 15:36:12.577279', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:36:12.577279', '2020-10-26 15:36:12.577279', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 15:36:12.577279', '2020-10-26 15:36:12.577279', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 15:36:12.577279', '2020-10-26 15:36:12.577279', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 15:36:12.587918', '2020-10-26 15:36:12.587918', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 15:36:12.587918', '2020-10-26 15:36:12.587918', DEFAULT, DEFAULT)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.9ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 15:36:12.596997', '2020-10-26 15:36:12.596997', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 15:36:12.596997', '2020-10-26 15:36:12.596997', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$IALI0wV.LWVprRAKgTgkROMbMpfR4EH5bQDoGpn0.xE5PaIZjSFq2', '2020-10-26 15:36:12.596997', '2020-10-26 15:36:12.596997', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$9gR/OLL/OGpkxUAHIpwGwumC9mqrld7wULp/n2rhun7G5OCdXtnXy', '2020-10-26 15:36:12.596997', '2020-10-26 15:36:12.596997', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$zVmNhz4WOm6O2WB2Zi6DP.6Zb59vu9tED23bZAcq0cjs../AfarHK', '2020-10-26 15:36:12.596997', '2020-10-26 15:36:12.596997', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:36:12.612048', '2020-10-26 15:36:12.612048', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:36:12.612048', '2020-10-26 15:36:12.612048', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:36:12.612048', '2020-10-26 15:36:12.612048', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:36:12.612048', '2020-10-26 15:36:12.612048', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 15:36:12.612048', '2020-10-26 15:36:12.612048', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 15:36:12.612048', '2020-10-26 15:36:12.612048', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 15:36:12.621759', '2020-10-26 15:36:12.621759', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 15:36:12.621759', '2020-10-26 15:36:12.621759', DEFAULT, DEFAULT)[0m
  [1m[35m (33.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (14.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PhotoTest: test_Should_successfully_create_a_photo
--------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_property_id
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPhoto Create (1.0ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.zeldadeprueba.com"], ["property_id", 2], ["created_at", "2020-10-26 15:36:12.807543"], ["updated_at", "2020-10-26 15:36:12.807543"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_url
-------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
PhotoTest: test_Should_create,_save_and_delete_a_property,_as_well_as_inspecting_the_link
-----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPhoto Create (1.1ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.linkdeprueba.com"], ["property_id", 1], ["created_at", "2020-10-26 15:36:12.973740"], ["updated_at", "2020-10-26 15:36:12.973740"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.4ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 298486375]]
  [1m[36mPhoto Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "photos" WHERE "photos"."property_id" = $1 LIMIT $2[0m  [["property_id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:13 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:13 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 299ms (Views: 0.8ms | ActiveRecord: 0.5ms | Allocations: 6320)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:13 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 345ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:36:13 -0500
Completed 200 OK in 433ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 6320)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:13 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (4.1ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-10-26 15:36:13.752789"], ["updated_at", "2020-10-26 15:36:13.752789"], ["admon", "80000"], ["rooms", "3"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 47ms (Views: 6.8ms | ActiveRecord: 7.6ms | Allocations: 3792)
  [1m[35m (3.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (1.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:13 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 429ms (Views: 0.6ms | ActiveRecord: 0.7ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 10:36:14 -0500
Completed 200 OK in 368ms (Views: 0.7ms | ActiveRecord: 0.8ms | Allocations: 568)
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:14 -0500
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.7ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-10-26 15:36:14.170329"], ["id", 1]]
  [1m[35m (1.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 22ms (Views: 0.8ms | ActiveRecord: 5.1ms | Allocations: 3929)
  [1m[35m (4.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:14 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 287ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 10:36:14 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 123)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:14 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 400ms (Views: 1.0ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:14 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 346ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:14 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 277ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-10-26 10:36:14 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 404 Not Found in 5ms (Views: 0.1ms | ActiveRecord: 0.9ms | Allocations: 1458)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:14 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 420ms (Views: 0.9ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (2.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:36:15 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (1.0ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 15:36:15.279233"], ["updated_at", "2020-10-26 15:36:15.279233"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 40ms (Views: 0.6ms | ActiveRecord: 2.7ms | Allocations: 2696)
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:15 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 535ms (Views: 0.4ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:15 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 471ms (Views: 0.5ms | ActiveRecord: 1.3ms | Allocations: 560)
Completed 200 OK in 594ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:15 -0500
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:36:15 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.9ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-10-26 15:36:15.920804"], ["updated_at", "2020-10-26 15:36:15.920804"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 15ms (Views: 0.6ms | ActiveRecord: 2.0ms | Allocations: 2728)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:15 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 440ms (Views: 0.6ms | ActiveRecord: 1.6ms | Allocations: 560)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-10-26 10:36:16 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (4.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (2.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
Completed 200 OK in 48ms (Views: 5.8ms | ActiveRecord: 8.0ms | Allocations: 3703)
  [1m[35m (7.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:16 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 505ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:16 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 335ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:16 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 446ms (Views: 0.9ms | ActiveRecord: 0.5ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 10:36:16 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (4.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 404 Not Found in 19ms (Views: 0.2ms | ActiveRecord: 5.6ms | Allocations: 1458)
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:16 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (7.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 388ms (Views: 0.5ms | ActiveRecord: 3.2ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-10-26 10:36:17 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Destroy (0.6ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.3ms | ActiveRecord: 1.8ms | Allocations: 1677)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:17 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 344ms (Views: 1.3ms | ActiveRecord: 7.8ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:17 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (5.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 309ms (Views: 0.5ms | ActiveRecord: 5.4ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 10:36:17 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 391ms (Views: 1.0ms | ActiveRecord: 1.7ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:17 -0500
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.6ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-10-26 15:36:17.630569"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 20ms (Views: 0.6ms | ActiveRecord: 6.0ms | Allocations: 2724)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:17 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 366ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:36:18 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
Completed 200 OK in 365ms (Views: 0.6ms | ActiveRecord: 1.2ms | Allocations: 568)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:18 -0500
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.8ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 15:36:18.013519"], ["updated_at", "2020-10-26 15:36:18.013519"]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 201 Created in 12ms (Views: 1.3ms | ActiveRecord: 1.8ms | Allocations: 2578)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:18 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 295ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-10-26 10:36:18 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
Completed 200 OK in 10ms (Views: 5.3ms | ActiveRecord: 1.3ms | Allocations: 3650)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (2.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$gmkMW28FmZ1TYV3fEt7jIOmjDV7zl4wIjwhvxhD/whauAHtQ1F7uy"], ["created_at", "2020-10-26 15:36:18.351339"], ["updated_at", "2020-10-26 15:36:18.351339"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (2.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Destroy (2.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$dM2DjfbYqN43WjBbnPSjduFufLrmD1mLBqgP6tUiQE9LTFJuWiusu"], ["created_at", "2020-10-26 15:36:18.432124"], ["updated_at", "2020-10-26 15:36:18.432124"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (1.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$Xu9tmlK2fTVGTKOuF4TwHusENn2ATvL0jnM4STDO6JDmS1pAbTxxW"], ["created_at", "2020-10-26 15:36:18.483446"], ["updated_at", "2020-10-26 15:36:18.483446"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Completed 200 OK in 483ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:18 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (9.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (11.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[35m (6.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$jwQy0K.3V4d0HAPhP25Wl.k38MZnPqF7U8/BA/Gs5VQu/LSdd9lnC"], ["created_at", "2020-10-26 15:36:18.571668"], ["updated_at", "2020-10-26 15:36:18.571668"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$v6JwZN8babQ213cxj7mZhOIBTiA92awhixUyBdZltndiaVaQOeSTm"], ["created_at", "2020-10-26 15:36:18.579854"], ["updated_at", "2020-10-26 15:36:18.579854"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Destroy (1.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
  [1m[35m (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$/CzUjOrV6v.34ezKBOG0AuhvGq5z3vlW6PuDDErsf/9TimGr6Cboe"], ["created_at", "2020-10-26 15:36:18.613507"], ["updated_at", "2020-10-26 15:36:18.613507"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (5.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (2.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[36mUser Destroy (3.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$YNpIjzHmBK7kQJdKbmLu/erfLoRXj7n1ufpCVFUiPY8ojPzOmfhQW"], ["created_at", "2020-10-26 15:36:18.672353"], ["updated_at", "2020-10-26 15:36:18.672353"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (3.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486381]]
  [1m[36mUser Destroy (1.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486381]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$QVHFvSF2M5aZESUAQ8WAYegy73F0D7gH.LPQps7QMsljaGCDAwh7."], ["created_at", "2020-10-26 15:36:18.704475"], ["updated_at", "2020-10-26 15:36:18.704475"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486382]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (1.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486382]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
  [1m[35m (3.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$u85n9Yn618dAGiWLp2oQbeQM8/u4Pn6ZFHVpO2eeSwtv5y1RcT.Be"], ["created_at", "2020-10-26 15:36:18.744560"], ["updated_at", "2020-10-26 15:36:18.744560"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486383]]
  [1m[36mUser Destroy (0.9ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486383]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$ezbBGTo4GmACAKgwggkaxe.gKy7P8ebdeNsmE.5/7QBBG.ZTgpPdC"], ["created_at", "2020-10-26 15:36:18.820708"], ["updated_at", "2020-10-26 15:36:18.820708"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (8.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (8.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486384]]
  [1m[36mUser Destroy (2.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486384]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 360ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-10-26 10:36:18 -0500
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$xHNIrL8L4C3gYqKvnLIBt.ekcM6LeJn277kLU4OQpLrpALExMMuSu"], ["created_at", "2020-10-26 15:36:18.889448"], ["updated_at", "2020-10-26 15:36:18.889448"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:18 -0500
Processing by Api::V1::UsersController#login as JSON
  [1m[35m (5.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486385]]
  [1m[36mUser Destroy (0.9ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486385]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.8ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:18 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 349ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:19 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 365ms (Views: 0.5ms | ActiveRecord: 0.9ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:19 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 367ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:19 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 414ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:19 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 332ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 10:36:20 -0500
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.6ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 11ms (Views: 1.1ms | ActiveRecord: 2.2ms | Allocations: 1623)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:20 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 522ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 10:36:20 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 5ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1631)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:20 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 384ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:20 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 520ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:20 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 328ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:20 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 300ms (Views: 0.8ms | ActiveRecord: 0.4ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 367ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-10-26 10:36:21 -0500
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.5ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-10-26 15:36:21.220018"], ["updated_at", "2020-10-26 15:36:21.220018"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued PhotoQualityJob (Job ID: b25bc9c0-9d27-4cdc-b0dd-155c8b3210c9) to Test(default) with arguments: 298486376
Completed 201 Created in 19ms (Views: 1.8ms | ActiveRecord: 2.1ms | Allocations: 2754)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 414ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-10-26 10:36:21 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 313ms (Views: 1.2ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 407ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 398ms (Views: 0.6ms | ActiveRecord: 1.0ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 371ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:22 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 469ms (Views: 1.3ms | ActiveRecord: 0.5ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 10:36:22 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.3ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 12ms (Views: 4.1ms | ActiveRecord: 1.1ms | Allocations: 1848)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:22 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (7.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 335ms (Views: 0.6ms | ActiveRecord: 4.8ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 10:36:22 -0500
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.3ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.3ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 19ms (Views: 0.2ms | ActiveRecord: 1.7ms | Allocations: 1618)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:22 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 437ms (Views: 0.6ms | ActiveRecord: 7.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:22 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 338ms (Views: 0.6ms | ActiveRecord: 0.9ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:22 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 337ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 269)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 291ms (Views: 1.0ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 10:36:23 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 10ms (Views: 4.5ms | ActiveRecord: 0.5ms | Allocations: 2065)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 320ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 371ms (Views: 0.6ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 304ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:36:23 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 12ms (Views: 0.4ms | ActiveRecord: 3.5ms | Allocations: 1859)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 406ms (Views: 0.6ms | ActiveRecord: 4.4ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:36:24 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (2.9ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 60ms (Views: 0.5ms | ActiveRecord: 5.6ms | Allocations: 2382)
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 388ms (Views: 0.7ms | ActiveRecord: 4.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 419ms (Views: 0.7ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 355ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "new_name"], ["updated_at", "2020-10-26 15:36:24.676038"], ["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 327ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 439ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-10-26 10:36:25 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$k9OJp67/pp9Fe529FkapKeNx85BkDT1a5cVuFwkSC5bigLYKg4Nte"], ["created_at", "2020-10-26 15:36:25.072632"], ["updated_at", "2020-10-26 15:36:25.072632"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 17ms (Views: 2.7ms | ActiveRecord: 4.0ms | Allocations: 2153)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 574ms (Views: 0.4ms | ActiveRecord: 0.7ms | Allocations: 561)
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-10-26 10:36:25 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 123)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 515ms (Views: 0.8ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 372ms (Views: 1.8ms | ActiveRecord: 0.9ms | Allocations: 560)
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-10-26 10:36:26 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
Completed 200 OK in 416ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
[31mUnpermitted parameter: :format[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[35m (3.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[35m (2.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 18ms (Views: 0.2ms | ActiveRecord: 6.0ms | Allocations: 3906)
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (6.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 374ms (Views: 0.9ms | ActiveRecord: 6.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (11.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 488ms (Views: 0.4ms | ActiveRecord: 0.8ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:36:26 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (4.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 20ms (Views: 1.0ms | ActiveRecord: 9.4ms | Allocations: 1941)
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 382ms (Views: 0.6ms | ActiveRecord: 11.0ms | Allocations: 560)
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-10-26 10:36:26 -0500
Processing by Api::V1::UsersController#update as JSON
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
  [1m[36mUser Load (19.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (6.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
Completed 200 OK in 307ms (Views: 2.5ms | ActiveRecord: 1.5ms | Allocations: 568)
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Exists? (5.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Update (4.0ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-10-26 15:36:26.868147"], ["id", 100]]
  [1m[35m (6.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 65ms (Views: 0.4ms | ActiveRecord: 43.1ms | Allocations: 2498)
  [1m[35m (10.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 354ms (Views: 0.5ms | ActiveRecord: 2.8ms | Allocations: 560)
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 10:36:27 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
Completed 200 OK in 311ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:27 -0500
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 11ms (Views: 0.2ms | ActiveRecord: 5.9ms | Allocations: 1595)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:27 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 377ms (Views: 0.9ms | ActiveRecord: 2.9ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:27 -0500
Processing by Api::V1::UsersController#login as JSON
Completed 200 OK in 371ms (Views: 0.5ms | ActiveRecord: 0.9ms | Allocations: 568)
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 401 Unauthorized in 7ms (Views: 0.4ms | ActiveRecord: 2.9ms | Allocations: 365)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:27 -0500
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:27 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 317ms (Views: 0.5ms | ActiveRecord: 3.8ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:36:27 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 33ms (Views: 0.4ms | ActiveRecord: 5.5ms | Allocations: 1433)
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (8.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (6.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 499ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 343ms (Views: 0.5ms | ActiveRecord: 6.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 310ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 10:36:28 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 19ms (Views: 0.2ms | ActiveRecord: 1.9ms | Allocations: 1029)
  [1m[35m (3.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_elevator_attribute
---------------------------------------------------------------------------
  [1m[35m (5.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (2.1ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "elevator") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 15:36:28.497976"], ["updated_at", "2020-10-26 15:36:28.497976"], ["build_area", "hola"], ["elevator", true]]
  [1m[35m (3.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_have_successfully_created_a_property
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (5.2ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 15:36:28.513534"], ["updated_at", "2020-10-26 15:36:28.513534"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_the_proper_built_type
-----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_create,_save,_and_destroy_a_property
--------------------------------------------------------------
  [1m[35m (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.9ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 15:36:28.570208"], ["updated_at", "2020-10-26 15:36:28.570208"]]
  [1m[35m (5.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 16]]
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[36mProperty Destroy (6.9ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 16]]
  [1m[36mProperty Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PropertyTest: test_Should_create_a_property
-------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (10.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["hood", "Belen"], ["city", "Pizza"], ["user_id", 99], ["created_at", "2020-10-26 15:36:28.629292"], ["updated_at", "2020-10-26 15:36:28.629292"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_a_user_id
-----------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 322ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 10:36:28 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 10ms (Views: 0.2ms | ActiveRecord: 4.8ms | Allocations: 1595)
  [1m[35m (6.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.3ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (11.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (985.9ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (945.2ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (10.6ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.5ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 15:51:43.090793', '2020-10-26 15:51:43.090793', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 15:51:43.090793', '2020-10-26 15:51:43.090793', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$/M.Hfbt1obGBp5hUxEd5Ke4MUAJ0i2hkb6JfCrhArYPHAAXrIc2Xq', '2020-10-26 15:51:43.090793', '2020-10-26 15:51:43.090793', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$.3F13NeazUUMaa4EthkgPO02aq1Z8r97jsWJ4XjOPh/WpIL2dRwHW', '2020-10-26 15:51:43.090793', '2020-10-26 15:51:43.090793', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$unMnRqGumzAnPmVJtLRKd.TIC5R4J0oe9PWoX0wggjjCxvu2i3Mxa', '2020-10-26 15:51:43.090793', '2020-10-26 15:51:43.090793', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:51:43.144934', '2020-10-26 15:51:43.144934', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:51:43.144934', '2020-10-26 15:51:43.144934', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:51:43.144934', '2020-10-26 15:51:43.144934', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:51:43.144934', '2020-10-26 15:51:43.144934', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 15:51:43.144934', '2020-10-26 15:51:43.144934', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 15:51:43.144934', '2020-10-26 15:51:43.144934', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 15:51:43.168377', '2020-10-26 15:51:43.168377', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 15:51:43.168377', '2020-10-26 15:51:43.168377', DEFAULT, DEFAULT)[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.9ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.6ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 15:51:43.152514', '2020-10-26 15:51:43.152514', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 15:51:43.152514', '2020-10-26 15:51:43.152514', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$VdhQCnN48o7WX4kDBGSy4eNb3sJuo4AZxLcSI30yFxXt9oKGf40Z.', '2020-10-26 15:51:43.152514', '2020-10-26 15:51:43.152514', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$I8u3zdXtX/trwhEdzlG4weqTEQMwhzqR768FK4kyUMNcXnzqkBOPS', '2020-10-26 15:51:43.152514', '2020-10-26 15:51:43.152514', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$9Vk3yNN1rQQbjzAa1pYsy.aCPTgYWKML24W3FBz4mZOFG2pNmGGii', '2020-10-26 15:51:43.152514', '2020-10-26 15:51:43.152514', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:51:43.171161', '2020-10-26 15:51:43.171161', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:51:43.171161', '2020-10-26 15:51:43.171161', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:51:43.171161', '2020-10-26 15:51:43.171161', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:51:43.171161', '2020-10-26 15:51:43.171161', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 15:51:43.171161', '2020-10-26 15:51:43.171161', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 15:51:43.171161', '2020-10-26 15:51:43.171161', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 15:51:43.196939', '2020-10-26 15:51:43.196939', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 15:51:43.196939', '2020-10-26 15:51:43.196939', DEFAULT, DEFAULT)[0m
  [1m[35m (44.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (38.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_create,_save,_and_destroy_a_property
--------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_the_proper_built_type
-----------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 15:51:43.482022"], ["updated_at", "2020-10-26 15:51:43.482022"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 11]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[36mProperty Destroy (0.7ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 11]]
  [1m[36mProperty Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PropertyTest: test_Should_create_a_property
-------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.8ms)[0m  [1m[32mINSERT INTO "properties" ("hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["hood", "Belen"], ["city", "Pizza"], ["user_id", 99], ["created_at", "2020-10-26 15:51:43.509902"], ["updated_at", "2020-10-26 15:51:43.509902"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_elevator_attribute
---------------------------------------------------------------------------
  [1m[35m (5.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.0ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "elevator") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 15:51:43.538470"], ["updated_at", "2020-10-26 15:51:43.538470"], ["build_area", "hola"], ["elevator", true]]
  [1m[35m (6.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_a_user_id
-----------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_have_successfully_created_a_property
--------------------------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_url
-------------------------------------------------------
  [1m[36mProperty Create (1.2ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 15:51:43.592084"], ["updated_at", "2020-10-26 15:51:43.592084"]]
  [1m[35m (18.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
PhotoTest: test_Should_create,_save_and_delete_a_property,_as_well_as_inspecting_the_link
-----------------------------------------------------------------------------------------
  [1m[35m (4.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (13.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (2.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_property_id
---------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PhotoTest: test_Should_successfully_create_a_photo
--------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProperty Load (2.9ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPhoto Create (7.3ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.linkdeprueba.com"], ["property_id", 1], ["created_at", "2020-10-26 15:51:43.802309"], ["updated_at", "2020-10-26 15:51:43.802309"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPhoto Create (3.7ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.zeldadeprueba.com"], ["property_id", 2], ["created_at", "2020-10-26 15:51:43.805524"], ["updated_at", "2020-10-26 15:51:43.805524"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPhoto Destroy (2.9ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 298486375]]
  [1m[36mPhoto Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "photos" WHERE "photos"."property_id" = $1 LIMIT $2[0m  [["property_id", 1], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.9ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:44 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 317ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 847)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 412ms (Views: 1.7ms | ActiveRecord: 1.1ms | Allocations: 842)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 385ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 326ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 322ms (Views: 3.5ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 10:51:45 -0500
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
Completed 200 OK in 389ms (Views: 0.6ms | ActiveRecord: 2.6ms | Allocations: 560)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-10-26 10:51:45 -0500
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (1.0ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (7.7ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 29ms (Views: 0.2ms | ActiveRecord: 12.3ms | Allocations: 1949)
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 158)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
  [1m[35m (5.7ms)[0m  [1m[31mROLLBACK[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:45 -0500
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 383ms (Views: 1.0ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 387ms (Views: 0.6ms | ActiveRecord: 1.9ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 287ms (Views: 1.2ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 380ms (Views: 1.7ms | ActiveRecord: 0.6ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 397ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 10:51:46 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
Completed 200 OK in 309ms (Views: 1.0ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 10:51:46 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 7ms (Views: 0.3ms | ActiveRecord: 0.8ms | Allocations: 1884)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:46 -0500
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.4ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 29ms (Views: 2.7ms | ActiveRecord: 4.1ms | Allocations: 1905)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.8ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 418ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
Completed 200 OK in 381ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 568)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 373ms (Views: 1.0ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 392ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 322ms (Views: 1.1ms | ActiveRecord: 0.5ms | Allocations: 560)
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-10-26 10:51:47 -0500
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.5ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-10-26 15:51:47.481609"], ["updated_at", "2020-10-26 15:51:47.481609"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued PhotoQualityJob (Job ID: e91d7c16-9a17-4a14-8cd8-46b90b5c7514) to Test(default) with arguments: 298486376
Completed 201 Created in 20ms (Views: 1.2ms | ActiveRecord: 2.2ms | Allocations: 2760)
  [1m[35m (3.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (3.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Completed 200 OK in 412ms (Views: 0.8ms | ActiveRecord: 0.8ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:47 -0500
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 10:51:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.5ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 20ms (Views: 1.0ms | ActiveRecord: 3.5ms | Allocations: 1594)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 379ms (Views: 0.5ms | ActiveRecord: 0.9ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 565ms (Views: 0.9ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 344ms (Views: 2.2ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:51:48 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 15:51:48.283746"], ["updated_at", "2020-10-26 15:51:48.283746"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 14ms (Views: 0.8ms | ActiveRecord: 1.6ms | Allocations: 2629)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 388ms (Views: 0.5ms | ActiveRecord: 1.3ms | Allocations: 560)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-10-26 10:51:48 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (2.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
Completed 200 OK in 38ms (Views: 14.9ms | ActiveRecord: 3.1ms | Allocations: 3753)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 423ms (Views: 2.1ms | ActiveRecord: 1.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 427ms (Views: 2.7ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 445ms (Views: 7.7ms | ActiveRecord: 0.4ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 10:51:49 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.5ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-10-26 15:51:49.206977"], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.7ms | ActiveRecord: 2.0ms | Allocations: 2785)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 519ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 560)
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-10-26 10:51:49 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 404 Not Found in 5ms (Views: 0.2ms | ActiveRecord: 1.0ms | Allocations: 1572)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 478ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 439ms (Views: 1.4ms | ActiveRecord: 1.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 352ms (Views: 0.5ms | ActiveRecord: 0.5ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:51:50 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.8ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-10-26 15:51:50.071924"], ["updated_at", "2020-10-26 15:51:50.071924"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 17ms (Views: 1.1ms | ActiveRecord: 2.8ms | Allocations: 2704)
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 410ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Completed 200 OK in 352ms (Views: 1.6ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:50 -0500
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-10-26 10:51:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (5.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Destroy (2.4ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 36ms (Views: 0.2ms | ActiveRecord: 9.8ms | Allocations: 1564)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (2.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 333ms (Views: 2.2ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 10:51:50 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 123)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 421ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 316ms (Views: 0.7ms | ActiveRecord: 0.9ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 404ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-10-26 10:51:51 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 321ms (Views: 0.6ms | ActiveRecord: 0.5ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 10:51:51 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (6.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (7.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.6ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-10-26 15:51:51.488927"], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 31ms (Views: 0.7ms | ActiveRecord: 19.4ms | Allocations: 2724)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (6.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 362ms (Views: 2.1ms | ActiveRecord: 2.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 308ms (Views: 0.7ms | ActiveRecord: 6.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 364ms (Views: 2.2ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-10-26 10:51:52 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
Completed 200 OK in 14ms (Views: 5.2ms | ActiveRecord: 1.5ms | Allocations: 3649)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.8ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (5.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 535ms (Views: 13.7ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:51:52 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
  [1m[36mUser Load (3.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (6.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (7.7ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 15:51:52.326164"], ["updated_at", "2020-10-26 15:51:52.326164"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 39ms (Views: 0.6ms | ActiveRecord: 19.4ms | Allocations: 2769)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 501ms (Views: 0.6ms | ActiveRecord: 5.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (8.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 466ms (Views: 3.0ms | ActiveRecord: 1.1ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 400ms (Views: 0.5ms | ActiveRecord: 8.4ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:51:53 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (2.2ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-10-26 15:51:53.162718"], ["updated_at", "2020-10-26 15:51:53.162718"], ["admon", "80000"], ["rooms", "3"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 18ms (Views: 0.9ms | ActiveRecord: 4.3ms | Allocations: 2736)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$JNSVQQCPpcSLMJ93ThImt.lfScFL8n4U3Kj2Dp9nzGCa0a0MPjldO"], ["created_at", "2020-10-26 15:51:53.191050"], ["updated_at", "2020-10-26 15:51:53.191050"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$/lRkepRpRk6DJCwVQxStc.zZ.Ue12VDLsiGszg.1IBfRj/Za1P6hm"], ["created_at", "2020-10-26 15:51:53.240269"], ["updated_at", "2020-10-26 15:51:53.240269"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
Completed 200 OK in 428ms (Views: 1.2ms | ActiveRecord: 0.3ms | Allocations: 560)
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 10:51:53 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 404 Not Found in 5ms (Views: 0.4ms | ActiveRecord: 1.1ms | Allocations: 1458)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$pgLSZ0HhtVIFEzhhTOWB1eJS64zPK0ZCshkWtZZ1W75783t8.TgKm"], ["created_at", "2020-10-26 15:51:53.277377"], ["updated_at", "2020-10-26 15:51:53.277377"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (5.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[35m (1.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$RaKoMUFLZMqRyCCvwCo8EeUjjicyN1sq/612d...HO9xuoJycBKRa"], ["created_at", "2020-10-26 15:51:53.306170"], ["updated_at", "2020-10-26 15:51:53.306170"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (6.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Destroy (4.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (3.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (12.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$oRHTRsuLIvfMDVmciwfRG./bhVn7c1qVmfNBmjCXPLoT8EYI9MpI."], ["created_at", "2020-10-26 15:51:53.343523"], ["updated_at", "2020-10-26 15:51:53.343523"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$J9uMHE5G9DK91HpsvnMWruaZM4Nx80T.m4TOTMGBOHG.S3Fk9BvVG"], ["created_at", "2020-10-26 15:51:53.356260"], ["updated_at", "2020-10-26 15:51:53.356260"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Create (2.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$EooEvDPcbrKCp96hpFMt6.HfIKnlNzflAsTfkZg3wZpQjgW3Ygbqy"], ["created_at", "2020-10-26 15:51:53.354852"], ["updated_at", "2020-10-26 15:51:53.354852"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (1.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (2.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
  [1m[35m (4.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$GlYt2zTkXQmsXRn9s1zLN.tbmbFsLSKEApQlHWqaMZPWzShQMUWEu"], ["created_at", "2020-10-26 15:51:53.414030"], ["updated_at", "2020-10-26 15:51:53.414030"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$mZUC8poy/ygqKUtdzGu.Uel7moQV1OQCzj9I9XYC7ljuhHU0JQAv."], ["created_at", "2020-10-26 15:51:53.416267"], ["updated_at", "2020-10-26 15:51:53.416267"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (9.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[36mUser Destroy (2.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$W9jqELhdxY2d7DRFzrIIQuo9ciVpIsxIs7uNGdLQTc4BihLy3a/di"], ["created_at", "2020-10-26 15:51:53.461316"], ["updated_at", "2020-10-26 15:51:53.461316"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$ztNOd8P2sXCFGn0Npvr92ev4uKEwSHtxSYlMkv2UYF8rnZedmr/T."], ["created_at", "2020-10-26 15:51:53.459827"], ["updated_at", "2020-10-26 15:51:53.459827"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (1.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Destroy (1.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Destroy (1.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (2.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 376ms (Views: 0.7ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 375ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 311ms (Views: 0.7ms | ActiveRecord: 1.5ms | Allocations: 560)
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-10-26 10:51:54 -0500
Processing by Api::V1::UsersController#update as JSON
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-10-26 15:51:54.214036"], ["id", 100]]
  [1m[35m (8.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 27ms (Views: 0.4ms | ActiveRecord: 13.7ms | Allocations: 2498)
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 436ms (Views: 1.0ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 10:51:54 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 17ms (Views: 2.1ms | ActiveRecord: 0.6ms | Allocations: 2064)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 360ms (Views: 0.6ms | ActiveRecord: 1.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 268ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-10-26 10:51:54 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 8ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 3777)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 523ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 275ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 315ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:51:55 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 9ms (Views: 1.4ms | ActiveRecord: 1.8ms | Allocations: 1941)
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 372ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:51:55 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 13ms (Views: 0.5ms | ActiveRecord: 0.9ms | Allocations: 1433)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 319ms (Views: 1.3ms | ActiveRecord: 1.9ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 408ms (Views: 1.8ms | ActiveRecord: 2.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 433ms (Views: 1.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 3ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 269)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.9ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 407ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:51:56 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 372ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 33ms (Views: 0.5ms | ActiveRecord: 1.1ms | Allocations: 1859)
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 397ms (Views: 0.5ms | ActiveRecord: 0.8ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:56 -0500
Processing by Api::V1::UsersController#login as JSON
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 401 Unauthorized in 6ms (Views: 0.3ms | ActiveRecord: 0.6ms | Allocations: 365)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 388ms (Views: 11.9ms | ActiveRecord: 0.6ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 301ms (Views: 0.9ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 508ms (Views: 0.7ms | ActiveRecord: 3.0ms | Allocations: 560)
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 10:51:57 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 51ms (Views: 0.1ms | ActiveRecord: 1.9ms | Allocations: 1595)
  [1m[35m (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 383ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (2.2ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "new_name"], ["updated_at", "2020-10-26 15:51:57.570081"], ["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 416ms (Views: 1.1ms | ActiveRecord: 5.0ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 542ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 529ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 10:51:58 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 7ms (Views: 0.2ms | ActiveRecord: 2.4ms | Allocations: 1029)
  [1m[35m (10.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (7.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 471ms (Views: 0.9ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:51:58 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 8ms (Views: 0.5ms | ActiveRecord: 1.4ms | Allocations: 2367)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 303ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 534ms (Views: 0.8ms | ActiveRecord: 7.0ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 449ms (Views: 7.6ms | ActiveRecord: 1.7ms | Allocations: 560)
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-10-26 10:51:59 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 471ms (Views: 0.7ms | ActiveRecord: 1.9ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 10:51:59 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.1ms | ActiveRecord: 0.5ms | Allocations: 1595)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 348ms (Views: 0.9ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 400ms (Views: 0.8ms | ActiveRecord: 0.7ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-10-26 10:52:00 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$.ZXpjKwwr6s89Zjwv4TtfuJPbtTUoM6TGVvvgpj5Q4qPD6STydb0K"], ["created_at", "2020-10-26 15:52:00.209284"], ["updated_at", "2020-10-26 15:52:00.209284"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 18ms (Views: 0.6ms | ActiveRecord: 2.0ms | Allocations: 1491)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1057.2ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1068.7ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.2ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 15:52:22.681149', '2020-10-26 15:52:22.681149', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 15:52:22.681149', '2020-10-26 15:52:22.681149', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$QyjZ1kC3.TTSfwMXlaE1NOC1kpoE0rI3a4b1/pMQPzsniKipxovo2', '2020-10-26 15:52:22.681149', '2020-10-26 15:52:22.681149', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$fycHBEYEOPhWXUywBvgbbeIwlB93xH4WzrPE4oBV/GXmLIquQROmC', '2020-10-26 15:52:22.681149', '2020-10-26 15:52:22.681149', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$.wHUWdWH9MHJJmjbfedZXuixrcbLh5VZyows5gj2EknNegsuYcfHy', '2020-10-26 15:52:22.681149', '2020-10-26 15:52:22.681149', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:52:22.696389', '2020-10-26 15:52:22.696389', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:52:22.696389', '2020-10-26 15:52:22.696389', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:52:22.696389', '2020-10-26 15:52:22.696389', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:52:22.696389', '2020-10-26 15:52:22.696389', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 15:52:22.696389', '2020-10-26 15:52:22.696389', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 15:52:22.696389', '2020-10-26 15:52:22.696389', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 15:52:22.705495', '2020-10-26 15:52:22.705495', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 15:52:22.705495', '2020-10-26 15:52:22.705495', DEFAULT, DEFAULT)[0m
  [1m[35m (70.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_create,_save,_and_destroy_a_property
--------------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 15:52:22.783439', '2020-10-26 15:52:22.783439', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 15:52:22.783439', '2020-10-26 15:52:22.783439', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$WPs3VLgJo13rpnSn5XVygOU/LDiFH5EgP/A4d9Qkw498B1sX.IsV.', '2020-10-26 15:52:22.783439', '2020-10-26 15:52:22.783439', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$tudjTcBqAe8.6Ilv/rv/KuKNjL2yixvIh9pngjFKSA88pWjuV9.I6', '2020-10-26 15:52:22.783439', '2020-10-26 15:52:22.783439', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$e4YbkEKuTzVdH2lZ.rDbSejdjN2g7ZfcTWiNZIEVZuFda5VQ3HDHO', '2020-10-26 15:52:22.783439', '2020-10-26 15:52:22.783439', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:52:22.805869', '2020-10-26 15:52:22.805869', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:52:22.805869', '2020-10-26 15:52:22.805869', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:52:22.805869', '2020-10-26 15:52:22.805869', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:52:22.805869', '2020-10-26 15:52:22.805869', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 15:52:22.805869', '2020-10-26 15:52:22.805869', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 15:52:22.805869', '2020-10-26 15:52:22.805869', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 15:52:22.821177', '2020-10-26 15:52:22.821177', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 15:52:22.821177', '2020-10-26 15:52:22.821177', DEFAULT, DEFAULT)[0m
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (2.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PropertyTest: test_Should_create_a_property
-------------------------------------------
  [1m[35m (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.1ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 15:52:23.105080"], ["updated_at", "2020-10-26 15:52:23.105080"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["hood", "Belen"], ["city", "Pizza"], ["user_id", 99], ["created_at", "2020-10-26 15:52:23.108912"], ["updated_at", "2020-10-26 15:52:23.108912"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_elevator_attribute
---------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "elevator") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 15:52:23.123997"], ["updated_at", "2020-10-26 15:52:23.123997"], ["build_area", "hola"], ["elevator", true]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 11]]
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_have_successfully_created_a_property
--------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Destroy (2.1ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 11]]
  [1m[36mProperty Create (0.8ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 15:52:23.156620"], ["updated_at", "2020-10-26 15:52:23.156620"]]
  [1m[36mProperty Exists? (2.7ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_a_user_id
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
-----------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_the_proper_built_type
-----------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 340ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 842)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (10.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 423ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 847)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 358ms (Views: 0.5ms | ActiveRecord: 10.5ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 418ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 373ms (Views: 1.2ms | ActiveRecord: 0.8ms | Allocations: 560)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-10-26 10:52:24 -0500
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.6ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-10-26 15:52:24.549359"], ["updated_at", "2020-10-26 15:52:24.549359"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued PhotoQualityJob (Job ID: 50e7d334-d748-4ab1-9319-e5236819a7f1) to Test(default) with arguments: 298486375
Completed 201 Created in 75ms (Views: 0.7ms | ActiveRecord: 4.6ms | Allocations: 8204)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (10.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 469ms (Views: 2.3ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-10-26 10:52:24 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 158)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 476ms (Views: 1.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 502ms (Views: 0.8ms | ActiveRecord: 2.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 333ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 304ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 312ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 10:52:25 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (7.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 21ms (Views: 0.4ms | ActiveRecord: 8.9ms | Allocations: 1599)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 310ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 10:52:25 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.3ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 13ms (Views: 1.7ms | ActiveRecord: 1.3ms | Allocations: 4203)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 386ms (Views: 1.0ms | ActiveRecord: 1.8ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 352ms (Views: 1.0ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 290ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 533ms (Views: 0.4ms | ActiveRecord: 3.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 284ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 10:52:26 -0500
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.2ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.3ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 18ms (Views: 0.1ms | ActiveRecord: 1.6ms | Allocations: 6315)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
  [1m[35m (8.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$95PuUxBNkub5k2zoEtBrM.yhBZS5sJTxai4ql8XczUQPw1MlCBNau"], ["created_at", "2020-10-26 15:52:26.987799"], ["updated_at", "2020-10-26 15:52:26.987799"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (6.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (19.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$Zv9HsjoDdQDXMxL45mnwauL7CW3W8aHtjn2QM1jZtyqniuDVgIImy"], ["created_at", "2020-10-26 15:52:27.043174"], ["updated_at", "2020-10-26 15:52:27.043174"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (3.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$DrMgsBcbIKu12os4g1BZQeLJ.kcQjxU3QA.wuz00v2uxVRweRrpG2"], ["created_at", "2020-10-26 15:52:27.057429"], ["updated_at", "2020-10-26 15:52:27.057429"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Destroy (6.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
  [1m[35m (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
Completed 200 OK in 393ms (Views: 0.7ms | ActiveRecord: 0.6ms | Allocations: 560)
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 10:52:27 -0500
  [1m[36mUser Create (12.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$sv.f/6.WThtt1kSj18TEhuqaAc/RBf/AFNm/BqNG1Fg.UGktUBYjq"], ["created_at", "2020-10-26 15:52:27.097177"], ["updated_at", "2020-10-26 15:52:27.097177"], ["full_name", "valid"], ["cellphone", "3001234567"]]
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[35m (1.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.3ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 7ms (Views: 0.6ms | ActiveRecord: 1.2ms | Allocations: 1570)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (10.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$TjzYpbNlcrdzQxATIzGBp.Jr7.f0YWuGZQQ5FxQo6jdVGSwiFm9X2"], ["created_at", "2020-10-26 15:52:27.134834"], ["updated_at", "2020-10-26 15:52:27.134834"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (2.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (2.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (2.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$IJhMbmlbnCNX539QQ2wmNOCB3o/Cc.MqiFhoMAlsxfPonWxVO15uS"], ["created_at", "2020-10-26 15:52:27.150648"], ["updated_at", "2020-10-26 15:52:27.150648"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (1.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (7.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (13.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[35m (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$GW/lBkAq4EVrrFcCHhHMM.vQHZvpXZNVaa1/GBVcEUhyjOAKihqJS"], ["created_at", "2020-10-26 15:52:27.196897"], ["updated_at", "2020-10-26 15:52:27.196897"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (10.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
  [1m[36mProperty Load (1.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[35m (4.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$gTq/uM0dGFarNgrtVGazNOKllF8lf18tzAF5kIdMNqpgVJFprWTxm"], ["created_at", "2020-10-26 15:52:27.239400"], ["updated_at", "2020-10-26 15:52:27.239400"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (2.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$6S5B67zUl/x6NJx2cGk9de0IntFpZirlYIx8F8aOY2oXrubQuWggy"], ["created_at", "2020-10-26 15:52:27.244732"], ["updated_at", "2020-10-26 15:52:27.244732"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Destroy (1.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (3.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$nkHXZysO6gifcv35Lu9R4OJGtYXddDruE.CGhKx4rptti53WhDzzi"], ["created_at", "2020-10-26 15:52:27.275131"], ["updated_at", "2020-10-26 15:52:27.275131"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$PRmNPL2Bq4SbYwnmF/KUiuGhM/xmY0GXeI4If5Ok7MBl0cGjNsGOO"], ["created_at", "2020-10-26 15:52:27.283020"], ["updated_at", "2020-10-26 15:52:27.283020"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
PhotoTest: test_Should_create,_save_and_delete_a_property,_as_well_as_inspecting_the_link
-----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486381]]
  [1m[36mPhoto Create (0.8ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.linkdeprueba.com"], ["property_id", 1], ["created_at", "2020-10-26 15:52:27.302599"], ["updated_at", "2020-10-26 15:52:27.302599"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486381]]
  [1m[36mPhoto Destroy (0.5ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPhoto Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "photos" WHERE "photos"."property_id" = $1 LIMIT $2[0m  [["property_id", 1], ["LIMIT", 1]]
  [1m[35m (13.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_property_id
---------------------------------------------------------------
  [1m[35m (6.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_url
-------------------------------------------------------
  [1m[35m (2.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PhotoTest: test_Should_successfully_create_a_photo
--------------------------------------------------
  [1m[35m (2.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.6ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.zeldadeprueba.com"], ["property_id", 2], ["created_at", "2020-10-26 15:52:27.351630"], ["updated_at", "2020-10-26 15:52:27.351630"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:27 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[35m (3.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:27 -0500
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 332ms (Views: 0.9ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:27 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 450ms (Views: 0.5ms | ActiveRecord: 4.5ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:27 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 282ms (Views: 0.5ms | ActiveRecord: 0.8ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 10:52:28 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1595)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 485ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:52:28 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (2.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 17ms (Views: 0.5ms | ActiveRecord: 8.0ms | Allocations: 2367)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 469ms (Views: 0.6ms | ActiveRecord: 1.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 409ms (Views: 0.5ms | ActiveRecord: 5.0ms | Allocations: 561)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "new_name"], ["updated_at", "2020-10-26 15:52:28.905404"], ["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 505ms (Views: 0.6ms | ActiveRecord: 3.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:28 -0500
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:28 -0500
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 275ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 269)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 458ms (Views: 0.5ms | ActiveRecord: 1.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 530ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 510ms (Views: 0.6ms | ActiveRecord: 2.0ms | Allocations: 560)
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 10:52:29 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (12.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 31ms (Views: 0.2ms | ActiveRecord: 12.9ms | Allocations: 1595)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 384ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-10-26 10:52:30 -0500
Processing by Api::V1::UsersController#update as JSON
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-10-26 15:52:30.140681"], ["id", 100]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 17ms (Views: 1.3ms | ActiveRecord: 7.4ms | Allocations: 2500)
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 428ms (Views: 1.1ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 474ms (Views: 0.5ms | ActiveRecord: 0.7ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 395ms (Views: 0.6ms | ActiveRecord: 2.4ms | Allocations: 560)
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-10-26 10:52:30 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
  [1m[35m (2.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 16ms (Views: 0.3ms | ActiveRecord: 2.9ms | Allocations: 3729)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 415ms (Views: 1.3ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:52:31 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (7.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (1.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 53ms (Views: 1.5ms | ActiveRecord: 12.9ms | Allocations: 1941)
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 382ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 291ms (Views: 1.4ms | ActiveRecord: 0.8ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 10:52:31 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (11.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 15ms (Views: 0.2ms | ActiveRecord: 11.8ms | Allocations: 1029)
  [1m[35m (2.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (6.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 464ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 357ms (Views: 0.7ms | ActiveRecord: 6.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 306ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:52:31 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (9.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 52ms (Views: 0.6ms | ActiveRecord: 10.1ms | Allocations: 1859)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 348ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:52:32 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 21ms (Views: 0.5ms | ActiveRecord: 1.2ms | Allocations: 1433)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (7.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 381ms (Views: 1.2ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 284ms (Views: 1.2ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-10-26 10:52:32 -0500
Completed 200 OK in 396ms (Views: 3.8ms | ActiveRecord: 7.7ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:32 -0500
Processing by Api::V1::UsersController#show as JSON
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"user_id"=>"1"}
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 309ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:33 -0500
Processing by Api::V1::UsersController#login as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 401 Unauthorized in 3ms (Views: 0.3ms | ActiveRecord: 0.3ms | Allocations: 363)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 457ms (Views: 0.6ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 417ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 385ms (Views: 0.8ms | ActiveRecord: 0.5ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-10-26 10:52:33 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$VYTCDZEz7XyvEliKem9/lO2j/9RcbZHWCBcE6SsVX.eTYvAfto.72"], ["created_at", "2020-10-26 15:52:33.606465"], ["updated_at", "2020-10-26 15:52:33.606465"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 6ms (Views: 0.4ms | ActiveRecord: 1.0ms | Allocations: 1492)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 436ms (Views: 0.5ms | ActiveRecord: 0.9ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 10:52:33 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
Completed 200 OK in 284ms (Views: 8.5ms | ActiveRecord: 0.8ms | Allocations: 568)
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 45ms (Views: 34.0ms | ActiveRecord: 2.4ms | Allocations: 2066)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 374ms (Views: 0.8ms | ActiveRecord: 0.6ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:52:34 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 15:52:34.307595"], ["updated_at", "2020-10-26 15:52:34.307595"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 13ms (Views: 0.7ms | ActiveRecord: 2.0ms | Allocations: 2747)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 422ms (Views: 1.6ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 340ms (Views: 10.3ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 396ms (Views: 1.2ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-10-26 10:52:34 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (1.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
Completed 200 OK in 9ms (Views: 2.3ms | ActiveRecord: 2.7ms | Allocations: 1631)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 635ms (Views: 4.2ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (3.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:52:35 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (3.1ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-10-26 15:52:35.319548"], ["updated_at", "2020-10-26 15:52:35.319548"], ["admon", "80000"], ["rooms", "3"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 22ms (Views: 2.2ms | ActiveRecord: 4.8ms | Allocations: 2736)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 531ms (Views: 0.6ms | ActiveRecord: 1.1ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 368ms (Views: 2.1ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 10:52:35 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 404 Not Found in 5ms (Views: 0.2ms | ActiveRecord: 0.9ms | Allocations: 1458)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 380ms (Views: 1.4ms | ActiveRecord: 1.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 362ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:52:36 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-10-26 15:52:36.165581"], ["updated_at", "2020-10-26 15:52:36.165581"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 53ms (Views: 0.9ms | ActiveRecord: 2.9ms | Allocations: 2705)
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 560ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 448ms (Views: 0.7ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 429ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 10:52:36 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 364ms (Views: 0.6ms | ActiveRecord: 0.8ms | Allocations: 560)
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-10-26 10:52:37 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 421ms (Views: 1.0ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 370ms (Views: 0.7ms | ActiveRecord: 1.1ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 309ms (Views: 0.6ms | ActiveRecord: 1.6ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 10:52:37 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (8.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (4.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (1.7ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-10-26 15:52:37.522813"], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 51ms (Views: 1.8ms | ActiveRecord: 16.1ms | Allocations: 2746)
  [1m[35m (4.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 321ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 469ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 10:52:37 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.7ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-10-26 15:52:37.908724"], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.9ms | ActiveRecord: 2.0ms | Allocations: 2749)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 359ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:52:38 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 15:52:38.261420"], ["updated_at", "2020-10-26 15:52:38.261420"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 12ms (Views: 0.7ms | ActiveRecord: 1.4ms | Allocations: 2578)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 361ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 402ms (Views: 1.3ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-10-26 10:52:38 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
Completed 200 OK in 14ms (Views: 6.1ms | ActiveRecord: 1.5ms | Allocations: 3648)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 452ms (Views: 0.6ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 342ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-10-26 10:52:39 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (3.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Destroy (4.8ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 16ms (Views: 0.2ms | ActiveRecord: 8.9ms | Allocations: 1544)
  [1m[35m (4.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 442ms (Views: 0.8ms | ActiveRecord: 0.7ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 278ms (Views: 1.1ms | ActiveRecord: 1.6ms | Allocations: 560)
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-10-26 10:52:39 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 404 Not Found in 12ms (Views: 0.2ms | ActiveRecord: 7.2ms | Allocations: 1458)
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (4.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (1.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.3ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (974.2ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (976.1ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.5ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 15:57:31.408638', '2020-10-26 15:57:31.408638', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 15:57:31.408638', '2020-10-26 15:57:31.408638', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$WzQXXYwJZNn.5wVYJ0RjOOYpJTTdZeAhomNY9xqzBnSSlkTqPohni', '2020-10-26 15:57:31.408638', '2020-10-26 15:57:31.408638', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$Ij5eeauiSudemkI1LLzkAeWRWpt/ZSddKZjcO3b0q4Nemu1qH4gm2', '2020-10-26 15:57:31.408638', '2020-10-26 15:57:31.408638', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$cp1s/1c82qJxyN0QepjM2.Vr238xW3BNbIa.S5444WtHDqpbqRckm', '2020-10-26 15:57:31.408638', '2020-10-26 15:57:31.408638', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:57:31.422497', '2020-10-26 15:57:31.422497', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:57:31.422497', '2020-10-26 15:57:31.422497', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:57:31.422497', '2020-10-26 15:57:31.422497', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:57:31.422497', '2020-10-26 15:57:31.422497', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 15:57:31.422497', '2020-10-26 15:57:31.422497', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 15:57:31.422497', '2020-10-26 15:57:31.422497', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 15:57:31.436550', '2020-10-26 15:57:31.436550', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 15:57:31.436550', '2020-10-26 15:57:31.436550', DEFAULT, DEFAULT)[0m
  [1m[35m (39.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.0ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 15:57:31.487952', '2020-10-26 15:57:31.487952', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 15:57:31.487952', '2020-10-26 15:57:31.487952', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$6HAkC10yndaZAYIh.xFkYuwDnRprSLwO054AUPmzo5Bm71vAh8hqW', '2020-10-26 15:57:31.487952', '2020-10-26 15:57:31.487952', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$VcqzXluP4216j/Yfmjbso.UFTN7P6/8ouB/A39FYdNQD6vgR7UzG6', '2020-10-26 15:57:31.487952', '2020-10-26 15:57:31.487952', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$EveITZODfNtpI548FLMhAO43HGCQ1ve02Q3HFTIe18V66Y3CgxbhW', '2020-10-26 15:57:31.487952', '2020-10-26 15:57:31.487952', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:57:31.509709', '2020-10-26 15:57:31.509709', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:57:31.509709', '2020-10-26 15:57:31.509709', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:57:31.509709', '2020-10-26 15:57:31.509709', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:57:31.509709', '2020-10-26 15:57:31.509709', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 15:57:31.509709', '2020-10-26 15:57:31.509709', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 15:57:31.509709', '2020-10-26 15:57:31.509709', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 15:57:31.523274', '2020-10-26 15:57:31.523274', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 15:57:31.523274', '2020-10-26 15:57:31.523274', DEFAULT, DEFAULT)[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_have_successfully_created_a_property
--------------------------------------------------------------
  [1m[35m (10.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PropertyTest: test_Should_create_a_property
-------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 15:57:31.762277"], ["updated_at", "2020-10-26 15:57:31.762277"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_a_user_id
-----------------------------------------------------------------
  [1m[36mProperty Create (6.7ms)[0m  [1m[32mINSERT INTO "properties" ("hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["hood", "Belen"], ["city", "Pizza"], ["user_id", 99], ["created_at", "2020-10-26 15:57:31.771588"], ["updated_at", "2020-10-26 15:57:31.771588"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_the_proper_built_type
-----------------------------------------------------------------------------
  [1m[35m (3.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_create,_save,_and_destroy_a_property
--------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 15:57:31.820541"], ["updated_at", "2020-10-26 15:57:31.820541"]]
  [1m[35m (8.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 12]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[36mProperty Destroy (0.7ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 12]]
  [1m[36mProperty Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_elevator_attribute
---------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (12.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PhotoTest: test_Should_successfully_create_a_photo
--------------------------------------------------
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "elevator") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 15:57:31.886527"], ["updated_at", "2020-10-26 15:57:31.886527"], ["build_area", "hola"], ["elevator", true]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
PhotoTest: test_Should_create,_save_and_delete_a_property,_as_well_as_inspecting_the_link
-----------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPhoto Create (1.0ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.zeldadeprueba.com"], ["property_id", 2], ["created_at", "2020-10-26 15:57:31.911877"], ["updated_at", "2020-10-26 15:57:31.911877"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_property_id
---------------------------------------------------------------
  [1m[35m (1.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPhoto Create (1.0ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.linkdeprueba.com"], ["property_id", 1], ["created_at", "2020-10-26 15:57:31.934603"], ["updated_at", "2020-10-26 15:57:31.934603"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.4ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_url
-------------------------------------------------------
  [1m[36mPhoto Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "photos" WHERE "photos"."property_id" = $1 LIMIT $2[0m  [["property_id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:32 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 335ms (Views: 0.8ms | ActiveRecord: 2.9ms | Allocations: 846)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 375ms (Views: 0.6ms | ActiveRecord: 1.1ms | Allocations: 841)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 267ms (Views: 1.3ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:57:32 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 13ms (Views: 1.3ms | ActiveRecord: 2.3ms | Allocations: 2484)
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 350ms (Views: 1.2ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 10:57:32 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 7ms (Views: 0.2ms | ActiveRecord: 0.9ms | Allocations: 1886)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (7.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 569ms (Views: 7.2ms | ActiveRecord: 1.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 483ms (Views: 1.5ms | ActiveRecord: 7.7ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 504ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 474ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 561)
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:33 -0500
Processing by Api::V1::UsersController#login as JSON
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 401 Unauthorized in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms | Allocations: 366)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (9.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "new_name"], ["updated_at", "2020-10-26 15:57:33.819560"], ["id", 100]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:33 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:33 -0500
Processing by Api::V1::UsersController#login as JSON
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 318ms (Views: 1.1ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 348ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 302ms (Views: 0.5ms | ActiveRecord: 2.2ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 10:57:34 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 343ms (Views: 0.6ms | ActiveRecord: 1.9ms | Allocations: 560)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 8ms (Views: 0.3ms | ActiveRecord: 1.3ms | Allocations: 1029)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 10:57:34 -0500
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 7ms (Views: 3.3ms | ActiveRecord: 1.1ms | Allocations: 2065)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:34 -0500
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 365ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 381ms (Views: 1.3ms | ActiveRecord: 1.8ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 335ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-10-26 10:57:35 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 333ms (Views: 0.7ms | ActiveRecord: 5.0ms | Allocations: 560)
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$p/IuU3m4Mo3.vYynYMbL6.5OlJr2O2vMxBBanugl8de3O7WvUQKtu"], ["created_at", "2020-10-26 15:57:35.259016"], ["updated_at", "2020-10-26 15:57:35.259016"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 10:57:35 -0500
Completed 201 Created in 14ms (Views: 1.0ms | ActiveRecord: 2.1ms | Allocations: 1520)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:35 -0500
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 7ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1595)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 432ms (Views: 0.7ms | ActiveRecord: 1.9ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 491ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 289ms (Views: 1.4ms | ActiveRecord: 1.0ms | Allocations: 560)
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-10-26 10:57:36 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 123)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 403ms (Views: 1.1ms | ActiveRecord: 1.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 269)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 415ms (Views: 1.2ms | ActiveRecord: 1.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 275ms (Views: 3.4ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 281ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:57:36 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (7.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 27ms (Views: 1.7ms | ActiveRecord: 7.7ms | Allocations: 1433)
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (10.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 380ms (Views: 1.2ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:57:36 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (13.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (1.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (4.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 66ms (Views: 1.4ms | ActiveRecord: 22.2ms | Allocations: 4524)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 491ms (Views: 0.8ms | ActiveRecord: 10.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 551ms (Views: 0.5ms | ActiveRecord: 1.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 377ms (Views: 0.6ms | ActiveRecord: 0.6ms | Allocations: 560)
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-10-26 10:57:37 -0500
Processing by Api::V1::UsersController#update as JSON
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-10-26 15:57:37.675427"], ["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 1.2ms | ActiveRecord: 1.4ms | Allocations: 2436)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 426ms (Views: 0.4ms | ActiveRecord: 1.7ms | Allocations: 560)
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-10-26 10:57:37 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 25ms (Views: 0.3ms | ActiveRecord: 5.4ms | Allocations: 4515)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$VZ2o0uzDOsFYJfIdMTQ2wOkAdrB8jZiu2YOIxGl78QHFx0vzcHJ5e"], ["created_at", "2020-10-26 15:57:37.976900"], ["updated_at", "2020-10-26 15:57:37.976900"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (1.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Destroy (2.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$zVA40Rslvzn/8SJ8IrKg0uFxG9yp7hLkPcNH623p/D8Rh3wlDSjKe"], ["created_at", "2020-10-26 15:57:38.032139"], ["updated_at", "2020-10-26 15:57:38.032139"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$VUL2PrAGSAimQDUJ.DqD0.9S3WGJfMZskJG0U8f60l0DiUF753Sla"], ["created_at", "2020-10-26 15:57:38.070191"], ["updated_at", "2020-10-26 15:57:38.070191"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Completed 200 OK in 385ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:38 -0500
  [1m[36mUser Exists? (12.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$MeEauAUCc0Jw.6IK0c66y.M3CtOCzhniV6vOuhYjjwmamzJmuEamG"], ["created_at", "2020-10-26 15:57:38.093893"], ["updated_at", "2020-10-26 15:57:38.093893"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Destroy (1.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (2.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Destroy (3.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (3.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$MVJYidiEab8OITRAf.qvRO13jFPrk9h4a8pVMmRvLPMpTIbqG3fBa"], ["created_at", "2020-10-26 15:57:38.171304"], ["updated_at", "2020-10-26 15:57:38.171304"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$fKzX5yv7iE5W3Hu5ddM5peAtwslBWfTReQr3EAy.i82KhjE7urRxO"], ["created_at", "2020-10-26 15:57:38.215267"], ["updated_at", "2020-10-26 15:57:38.215267"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (8.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$2QX0P83akSWNlxZjV.YpAer5LekJl4hxIcnQWrn89TX5Lwi0.17xu"], ["created_at", "2020-10-26 15:57:38.256607"], ["updated_at", "2020-10-26 15:57:38.256607"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (7.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (2.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486381]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486381]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
  [1m[35m (4.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (2.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$sQHBxcoCDvBaaBldiegqm.x89gbIyblEmc2/aQ8/SO4.igtuPwT6C"], ["created_at", "2020-10-26 15:57:38.336195"], ["updated_at", "2020-10-26 15:57:38.336195"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (3.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (6.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (4.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486382]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486382]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[35m (3.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$hCPqm.y9YrpNlPHzBWQw3emfsGAFNmBJb5i5yX4gohqFTBcp6nrNW"], ["created_at", "2020-10-26 15:57:38.389145"], ["updated_at", "2020-10-26 15:57:38.389145"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (2.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486383]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486383]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$Je3rA6ht8PHjsvltofgg1OhuvZoezu/1tqoph1z14cON6E73R2ry."], ["created_at", "2020-10-26 15:57:38.437700"], ["updated_at", "2020-10-26 15:57:38.437700"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486384]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486384]]
  [1m[35m (1.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (2.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$4NjpCjyD38HqaRPskfpaa.nQ4hArFmjONwm2MgNM5fc0u2K37Tg6O"], ["created_at", "2020-10-26 15:57:38.507986"], ["updated_at", "2020-10-26 15:57:38.507986"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486385]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486385]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 497ms (Views: 0.5ms | ActiveRecord: 2.0ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:57:38 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (6.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 13ms (Views: 0.3ms | ActiveRecord: 6.4ms | Allocations: 1859)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (1.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (7.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 489ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 463ms (Views: 0.5ms | ActiveRecord: 7.1ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 385ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Completed 200 OK in 299ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:57:39 -0500
  [1m[35m (4.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:57:39 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mUser Load (6.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 15:57:39.434132"], ["updated_at", "2020-10-26 15:57:39.434132"]]
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 17ms (Views: 1.0ms | ActiveRecord: 4.5ms | Allocations: 2629)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (2.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (2.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-10-26 15:57:39.446177"], ["updated_at", "2020-10-26 15:57:39.446177"], ["admon", "80000"], ["rooms", "3"]]
  [1m[35m (3.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 37ms (Views: 0.7ms | ActiveRecord: 13.9ms | Allocations: 2787)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 350ms (Views: 0.7ms | ActiveRecord: 0.8ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 403ms (Views: 1.1ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 272ms (Views: 0.5ms | ActiveRecord: 0.9ms | Allocations: 560)
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-10-26 10:57:40 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
Completed 200 OK in 34ms (Views: 13.7ms | ActiveRecord: 1.2ms | Allocations: 3648)
  [1m[35m (2.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 349ms (Views: 0.8ms | ActiveRecord: 0.8ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 10:57:40 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 483ms (Views: 1.6ms | ActiveRecord: 3.8ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 434ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 445ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-10-26 10:57:41 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (1.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Destroy (0.6ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 35ms (Views: 18.1ms | ActiveRecord: 2.6ms | Allocations: 1658)
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 489ms (Views: 0.9ms | ActiveRecord: 4.5ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 10:57:41 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (7.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (4.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (2.1ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-10-26 15:57:41.202752"], ["id", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 32ms (Views: 0.9ms | ActiveRecord: 15.7ms | Allocations: 2899)
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 457ms (Views: 1.0ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 495ms (Views: 1.1ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 684ms (Views: 3.4ms | ActiveRecord: 0.4ms | Allocations: 560)
Completed 200 OK in 539ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-10-26 10:57:42 -0500
  [1m[35m (3.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:57:42 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (10.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
[31mUnpermitted parameter: :format[0m
Completed 200 OK in 34ms (Views: 5.2ms | ActiveRecord: 12.4ms | Allocations: 1582)
  [1m[35m (5.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.9ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 15:57:42.349703"], ["updated_at", "2020-10-26 15:57:42.349703"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
  [1m[35m (11.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:42 -0500
Completed 201 Created in 71ms (Views: 0.9ms | ActiveRecord: 14.7ms | Allocations: 2696)
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[35m (2.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 850ms (Views: 0.7ms | ActiveRecord: 4.8ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 1001ms (Views: 3.6ms | ActiveRecord: 2.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 327ms (Views: 0.7ms | ActiveRecord: 1.2ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 10:57:43 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 404 Not Found in 5ms (Views: 0.3ms | ActiveRecord: 1.2ms | Allocations: 1458)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:43 -0500
Completed 200 OK in 479ms (Views: 1.0ms | ActiveRecord: 0.2ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 10:57:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (2.9ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (4.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.8ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-10-26 15:57:43.767623"], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 32ms (Views: 1.4ms | ActiveRecord: 13.0ms | Allocations: 2743)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (12.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 384ms (Views: 2.1ms | ActiveRecord: 2.7ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 617ms (Views: 1.6ms | ActiveRecord: 12.8ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (8.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 330ms (Views: 0.8ms | ActiveRecord: 0.9ms | Allocations: 560)
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:57:44 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (3.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (7.1ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-10-26 15:57:44.472185"], ["updated_at", "2020-10-26 15:57:44.472185"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 21ms (Views: 0.6ms | ActiveRecord: 11.5ms | Allocations: 2704)
  [1m[35m (11.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (5.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 416ms (Views: 1.7ms | ActiveRecord: 8.2ms | Allocations: 560)
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-10-26 10:57:44 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 507ms (Views: 1.8ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 446ms (Views: 0.9ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 476ms (Views: 3.2ms | ActiveRecord: 0.2ms | Allocations: 560)
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-10-26 10:57:45 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 404 Not Found in 8ms (Views: 1.3ms | ActiveRecord: 1.3ms | Allocations: 1458)
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 555ms (Views: 1.0ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (6.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 620ms (Views: 0.5ms | ActiveRecord: 0.7ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 408ms (Views: 0.6ms | ActiveRecord: 6.1ms | Allocations: 560)
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 10:57:46 -0500
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.2ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.5ms | ActiveRecord: 0.7ms | Allocations: 1627)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 438ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 561)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 380ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 344ms (Views: 0.9ms | ActiveRecord: 3.1ms | Allocations: 560)
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-10-26 10:57:46 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 155)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 347ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 432ms (Views: 0.5ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 423ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-10-26 10:57:47 -0500
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.8ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-10-26 15:57:47.505129"], ["updated_at", "2020-10-26 15:57:47.505129"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued PhotoQualityJob (Job ID: 125fa5ef-32bd-4b74-9531-711d0f6540e8) to Test(default) with arguments: 298486376
Completed 201 Created in 17ms (Views: 0.5ms | ActiveRecord: 3.0ms | Allocations: 2754)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 319ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 412ms (Views: 2.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 313ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 10:57:48 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.3ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 17ms (Views: 3.6ms | ActiveRecord: 2.2ms | Allocations: 1869)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 355ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 376ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 403ms (Views: 1.1ms | ActiveRecord: 0.5ms | Allocations: 560)
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 10:57:48 -0500
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.3ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.3ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 3.6ms | Allocations: 1475)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 352ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 264ms (Views: 0.4ms | ActiveRecord: 0.7ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 10:57:49 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 8ms (Views: 0.2ms | ActiveRecord: 1.8ms | Allocations: 1596)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (2.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.6ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1003.1ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1009.0ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (18.4ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 15:58:46.984106', '2020-10-26 15:58:46.984106', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 15:58:46.984106', '2020-10-26 15:58:46.984106', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$eTcpKv2L1M5v.Q1NwfEVzOX4PfFK4QSIQKuNXglFzSnRNm4Oscc0W', '2020-10-26 15:58:46.984106', '2020-10-26 15:58:46.984106', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$AuKTkfLOglgdbuE5ktSFlOWhbpoMJFX/ugUb7O3L6wiWC909qRjAi', '2020-10-26 15:58:46.984106', '2020-10-26 15:58:46.984106', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$J6e0xnnpxZtS5S4e6JCk5uycN1x2gibof1ZPlAo3hF.sI5E9Np0wK', '2020-10-26 15:58:46.984106', '2020-10-26 15:58:46.984106', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:58:47.009505', '2020-10-26 15:58:47.009505', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:58:47.009505', '2020-10-26 15:58:47.009505', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:58:47.009505', '2020-10-26 15:58:47.009505', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:58:47.009505', '2020-10-26 15:58:47.009505', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 15:58:47.009505', '2020-10-26 15:58:47.009505', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 15:58:47.009505', '2020-10-26 15:58:47.009505', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 15:58:47.029760', '2020-10-26 15:58:47.029760', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 15:58:47.029760', '2020-10-26 15:58:47.029760', DEFAULT, DEFAULT)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.6ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 15:58:47.079598', '2020-10-26 15:58:47.079598', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 15:58:47.079598', '2020-10-26 15:58:47.079598', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$OtzWbEp.q/arsQf/X3TjueKKCW.5iElhc4kHvfkXmdSF67NV5aWLm', '2020-10-26 15:58:47.079598', '2020-10-26 15:58:47.079598', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$WyO9EpjhB9b/mYz44m40C.QOVa/3mkEzdmLrVirD1Uhb8/69UR8lK', '2020-10-26 15:58:47.079598', '2020-10-26 15:58:47.079598', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$WMFUJ2N0Bnb3DNKSahlE0O/fboKkWeaChfRHBzqTMoprlSlWmFJ/W', '2020-10-26 15:58:47.079598', '2020-10-26 15:58:47.079598', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:58:47.101114', '2020-10-26 15:58:47.101114', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:58:47.101114', '2020-10-26 15:58:47.101114', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:58:47.101114', '2020-10-26 15:58:47.101114', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:58:47.101114', '2020-10-26 15:58:47.101114', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 15:58:47.101114', '2020-10-26 15:58:47.101114', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 15:58:47.101114', '2020-10-26 15:58:47.101114', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 15:58:47.110810', '2020-10-26 15:58:47.110810', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 15:58:47.110810', '2020-10-26 15:58:47.110810', DEFAULT, DEFAULT)[0m
  [1m[35m (216.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (207.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:47 -0500
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 320ms (Views: 1.7ms | ActiveRecord: 1.1ms | Allocations: 6585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 289ms (Views: 1.5ms | ActiveRecord: 0.7ms | Allocations: 6585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 290ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-10-26 10:58:48 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (13.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (2.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
Completed 200 OK in 299ms (Views: 1.0ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:58:48 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
Completed 200 OK in 116ms (Views: 82.1ms | ActiveRecord: 15.7ms | Allocations: 24445)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
  [1m[36mUser Load (11.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:48 -0500
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (2.1ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-10-26 15:58:48.702814"], ["updated_at", "2020-10-26 15:58:48.702814"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 138ms (Views: 0.6ms | ActiveRecord: 14.2ms | Allocations: 26801)
  [1m[35m (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 326ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 386ms (Views: 0.7ms | ActiveRecord: 2.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 297ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-10-26 10:58:49 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Destroy (0.7ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 2.1ms | Allocations: 1697)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 345ms (Views: 0.5ms | ActiveRecord: 0.6ms | Allocations: 560)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-10-26 10:58:49 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
Completed 200 OK in 18ms (Views: 2.5ms | ActiveRecord: 1.2ms | Allocations: 3702)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 406ms (Views: 1.8ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 337ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 339ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-10-26 10:58:50 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 123)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 272ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:58:50 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 15:58:50.147621"], ["updated_at", "2020-10-26 15:58:50.147621"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 12ms (Views: 0.9ms | ActiveRecord: 2.6ms | Allocations: 2698)
  [1m[35m (6.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (3.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 452ms (Views: 6.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 385ms (Views: 0.6ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 310ms (Views: 1.1ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:58:50 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (1.0ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 15:58:50.821029"], ["updated_at", "2020-10-26 15:58:50.821029"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 27ms (Views: 2.6ms | ActiveRecord: 2.6ms | Allocations: 5902)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 400ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 10:58:50 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (1.0ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-10-26 15:58:51.013498"], ["id", 1]]
  [1m[35m (1.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 50ms (Views: 4.6ms | ActiveRecord: 7.7ms | Allocations: 2918)
  [1m[35m (2.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 418ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 415ms (Views: 0.6ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 286ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 560)
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-10-26 10:58:51 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[36mUser Load (11.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 404 Not Found in 23ms (Views: 0.3ms | ActiveRecord: 14.5ms | Allocations: 1458)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 367ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 10:58:51 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (2.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.6ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-10-26 15:58:51.878732"], ["id", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 33ms (Views: 1.0ms | ActiveRecord: 4.8ms | Allocations: 2724)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 335ms (Views: 1.3ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 321ms (Views: 4.0ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 382ms (Views: 0.5ms | ActiveRecord: 0.5ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:58:52 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (4.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (1.0ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-10-26 15:58:52.386109"], ["updated_at", "2020-10-26 15:58:52.386109"], ["admon", "80000"], ["rooms", "3"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 54ms (Views: 0.8ms | ActiveRecord: 7.5ms | Allocations: 2739)
  [1m[35m (5.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 288ms (Views: 0.6ms | ActiveRecord: 0.6ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 10:58:52 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 123)
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 345ms (Views: 0.7ms | ActiveRecord: 4.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 314ms (Views: 0.8ms | ActiveRecord: 1.0ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 269ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 10:58:53 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 404 Not Found in 23ms (Views: 0.2ms | ActiveRecord: 1.2ms | Allocations: 1458)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 284ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 306ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 337ms (Views: 0.9ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 10:58:53 -0500
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.3ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 25ms (Views: 0.6ms | ActiveRecord: 0.9ms | Allocations: 6346)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 321ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 354ms (Views: 0.9ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 330ms (Views: 0.6ms | ActiveRecord: 0.6ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 10:58:54 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 10ms (Views: 0.4ms | ActiveRecord: 1.0ms | Allocations: 1631)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 351ms (Views: 2.1ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 368ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 361ms (Views: 1.2ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 10:58:54 -0500
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.3ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.3ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 1.3ms | Allocations: 1492)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 289ms (Views: 0.9ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 347ms (Views: 0.9ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 279ms (Views: 1.0ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-10-26 10:58:55 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 347ms (Views: 0.9ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 313ms (Views: 0.6ms | ActiveRecord: 1.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 274ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 329ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 10:58:55 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mPhoto Load (1.6ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 8ms (Views: 2.4ms | ActiveRecord: 2.3ms | Allocations: 1848)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 304ms (Views: 0.9ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:55 -0500
Completed 200 OK in 344ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-10-26 10:58:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.9ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.6ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-10-26 15:58:56.068215"], ["updated_at", "2020-10-26 15:58:56.068215"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued PhotoQualityJob (Job ID: 55440354-6114-41ac-94b4-6fa31f586e24) to Test(default) with arguments: 298486375
Completed 201 Created in 40ms (Views: 0.4ms | ActiveRecord: 2.9ms | Allocations: 7760)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 301ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 10:58:56 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 8ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1595)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 382ms (Views: 0.8ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 326ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 327ms (Views: 2.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:58:56 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 0.5ms | Allocations: 1859)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 391ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-10-26 10:58:57 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 386ms (Views: 0.4ms | ActiveRecord: 1.9ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 320ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 296ms (Views: 0.6ms | ActiveRecord: 1.6ms | Allocations: 560)
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-10-26 10:58:57 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (3.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
  [1m[35m (2.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 22ms (Views: 0.3ms | ActiveRecord: 10.8ms | Allocations: 5463)
  [1m[35m (2.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 325ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:58:57 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (13.9ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (5.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 29ms (Views: 0.5ms | ActiveRecord: 23.6ms | Allocations: 1956)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (3.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 314ms (Views: 0.5ms | ActiveRecord: 1.1ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 275ms (Views: 0.5ms | ActiveRecord: 3.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 305ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 269)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 269ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (4.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:58:58 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 10ms (Views: 0.7ms | ActiveRecord: 2.3ms | Allocations: 2367)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 410ms (Views: 1.1ms | ActiveRecord: 1.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 404ms (Views: 6.0ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 484ms (Views: 0.5ms | ActiveRecord: 0.9ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:59 -0500
Processing by Api::V1::UsersController#login as JSON
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 363)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 448ms (Views: 0.6ms | ActiveRecord: 0.8ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-10-26 10:58:59 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$Mmb5P34gs9jxXiSJ5VymiOz.vR8PpSREFxE9IzxRpk2xckHFOgRIG"], ["created_at", "2020-10-26 15:58:59.273502"], ["updated_at", "2020-10-26 15:58:59.273502"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 12ms (Views: 0.4ms | ActiveRecord: 2.8ms | Allocations: 2153)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 489ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 418ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 325ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 10:58:59 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 1595)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 281ms (Views: 1.2ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "new_name"], ["updated_at", "2020-10-26 15:58:59.991301"], ["id", 100]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 331ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 322ms (Views: 2.0ms | ActiveRecord: 0.2ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 299ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 10:59:00 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 8ms (Views: 2.8ms | ActiveRecord: 1.0ms | Allocations: 2064)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 384ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:59:00 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (13.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 32ms (Views: 0.7ms | ActiveRecord: 13.9ms | Allocations: 1433)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 339ms (Views: 0.4ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 375ms (Views: 2.2ms | ActiveRecord: 0.7ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:01 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 324ms (Views: 0.8ms | ActiveRecord: 0.4ms | Allocations: 560)
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-10-26 10:59:01 -0500
Processing by Api::V1::UsersController#update as JSON
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (5.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-10-26 15:59:01.317004"], ["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 23ms (Views: 0.8ms | ActiveRecord: 9.9ms | Allocations: 2530)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_create,_save,_and_destroy_a_property
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 15:59:01.338515"], ["updated_at", "2020-10-26 15:59:01.338515"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 13]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[36mProperty Destroy (0.4ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 13]]
  [1m[36mProperty Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_elevator_attribute
---------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.8ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "elevator") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 15:59:01.397625"], ["updated_at", "2020-10-26 15:59:01.397625"], ["build_area", "hola"], ["elevator", true]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_a_user_id
-----------------------------------------------------------------
  [1m[35m (2.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_the_proper_built_type
-----------------------------------------------------------------------------
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PropertyTest: test_Should_create_a_property
-------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["hood", "Belen"], ["city", "Pizza"], ["user_id", 99], ["created_at", "2020-10-26 15:59:01.474045"], ["updated_at", "2020-10-26 15:59:01.474045"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_have_successfully_created_a_property
--------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 15:59:01.485720"], ["updated_at", "2020-10-26 15:59:01.485720"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
PhotoTest: test_Should_create,_save_and_delete_a_property,_as_well_as_inspecting_the_link
-----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPhoto Create (1.2ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.linkdeprueba.com"], ["property_id", 1], ["created_at", "2020-10-26 15:59:01.520350"], ["updated_at", "2020-10-26 15:59:01.520350"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.4ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 298486376]]
Completed 200 OK in 333ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[36mPhoto Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "photos" WHERE "photos"."property_id" = $1 LIMIT $2[0m  [["property_id", 1], ["LIMIT", 1]]
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 10:59:01 -0500
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_property_id
---------------------------------------------------------------
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 5ms (Views: 0.3ms | ActiveRecord: 0.4ms | Allocations: 1029)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PhotoTest: test_Should_successfully_create_a_photo
--------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_url
-------------------------------------------------------
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.7ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.zeldadeprueba.com"], ["property_id", 2], ["created_at", "2020-10-26 15:59:01.551795"], ["updated_at", "2020-10-26 15:59:01.551795"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (5.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$.BKxoFS3PBQYZWm3sLXyVuIgHN8hBpTrMLjRiyfXcnNQ7fd./FQzK"], ["created_at", "2020-10-26 15:59:01.609969"], ["updated_at", "2020-10-26 15:59:01.609969"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$RALlLJ7s350A.7znS8tsJeE66hJMsbq9QNxBnEa3dimmDQiKYNLtq"], ["created_at", "2020-10-26 15:59:01.617047"], ["updated_at", "2020-10-26 15:59:01.617047"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$tWMtkMWOGgyvjNQnH18U7.8.6Y3s8L92mzztqwUCXNi7sHk6lKjNW"], ["created_at", "2020-10-26 15:59:01.666472"], ["updated_at", "2020-10-26 15:59:01.666472"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (3.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$jyxblOczrJWL0zFQU7GFFOoTY2OvTM7uS7H9K1L31.PuqKoZsv2l2"], ["created_at", "2020-10-26 15:59:01.680608"], ["updated_at", "2020-10-26 15:59:01.680608"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (2.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (8.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$FmKKGNN/Fe7VxEQFFFVZ9uyvJkjd1QRUrC5mktVLsw7FGi58QXxXa"], ["created_at", "2020-10-26 15:59:01.725395"], ["updated_at", "2020-10-26 15:59:01.725395"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (2.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$hapPm/sfzfJfzALIwOovSuBABO2u6mdQuKtl/AcgpkqBywjwBp81."], ["created_at", "2020-10-26 15:59:01.723537"], ["updated_at", "2020-10-26 15:59:01.723537"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$IFyjpbdr2Ti2AL3ig2peQ.EPAdmv1ax1hN69GQxdyDuggOyYnnez."], ["created_at", "2020-10-26 15:59:01.738213"], ["updated_at", "2020-10-26 15:59:01.738213"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mProperty Load (2.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Destroy (1.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (6.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mProperty Load (1.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Destroy (1.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (2.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$ZVBwkJDAhH2c2.OQiNovGuLexlMlOPZFIIV1DavO9NXQbQ.5NoNQO"], ["created_at", "2020-10-26 15:59:01.771796"], ["updated_at", "2020-10-26 15:59:01.771796"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$o8CpGFrY81.ajhtKHAxJZeyXKTMV3fGcBQi05Fv4mHdjvCKSecoMm"], ["created_at", "2020-10-26 15:59:01.789823"], ["updated_at", "2020-10-26 15:59:01.789823"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
  [1m[35m (2.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$wqAGuBypzAEAM0DU2MisauUzdVLS0auBLdew8ts4rz66.PlUov/8S"], ["created_at", "2020-10-26 15:59:01.825623"], ["updated_at", "2020-10-26 15:59:01.825623"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Destroy (2.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (7.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (8.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$ZVRh6hwEnaGbOamJAAdrs.Ay/GbIHOmxQene9s73nt6qH4Uka4jR6"], ["created_at", "2020-10-26 15:59:01.859811"], ["updated_at", "2020-10-26 15:59:01.859811"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (2.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (4.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.9ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (2.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.6ms)[0m  [1m[35mALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (4.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1000.1ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1007.7ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.8ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 15:59:42.754902', '2020-10-26 15:59:42.754902', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 15:59:42.754902', '2020-10-26 15:59:42.754902', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$WBzgZuaYofRLGggjRy9I0.BQM1FmBOJAXdAgFTQeaHsG5t6L2zray', '2020-10-26 15:59:42.754902', '2020-10-26 15:59:42.754902', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$nidbr21f.B6YaOfuHIo8q.LLafTFwLXbEvRgr3JCQgOdoqV5QMf1O', '2020-10-26 15:59:42.754902', '2020-10-26 15:59:42.754902', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$pLbjYsow7sDy9PmWXyzptuZYr6qHN42zU3Sb.k0Hx6TJvEsgBM1tu', '2020-10-26 15:59:42.754902', '2020-10-26 15:59:42.754902', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:59:42.764690', '2020-10-26 15:59:42.764690', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:59:42.764690', '2020-10-26 15:59:42.764690', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:59:42.764690', '2020-10-26 15:59:42.764690', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:59:42.764690', '2020-10-26 15:59:42.764690', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 15:59:42.764690', '2020-10-26 15:59:42.764690', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 15:59:42.764690', '2020-10-26 15:59:42.764690', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 15:59:42.776425', '2020-10-26 15:59:42.776425', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 15:59:42.776425', '2020-10-26 15:59:42.776425', DEFAULT, DEFAULT)[0m
  [1m[35m (32.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (2.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.7ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 15:59:42.907003', '2020-10-26 15:59:42.907003', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 15:59:42.907003', '2020-10-26 15:59:42.907003', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$O3bHhro.9BM296r5Ndlj/.79LDByOMhzIQDVfEW9b4.auWvyh0eum', '2020-10-26 15:59:42.907003', '2020-10-26 15:59:42.907003', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$gCUYYjPYBJ.iOp7SFJPXTucRofd0qkxscCqgfRFW1wm74m6aJLyHO', '2020-10-26 15:59:42.907003', '2020-10-26 15:59:42.907003', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$A1E6aF/gh8P6Q7drj2HQPOXLNh8xe258/DJWb2aqb8hlQysE4SidK', '2020-10-26 15:59:42.907003', '2020-10-26 15:59:42.907003', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:59:42.920067', '2020-10-26 15:59:42.920067', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:59:42.920067', '2020-10-26 15:59:42.920067', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:59:42.920067', '2020-10-26 15:59:42.920067', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:59:42.920067', '2020-10-26 15:59:42.920067', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 15:59:42.920067', '2020-10-26 15:59:42.920067', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 15:59:42.920067', '2020-10-26 15:59:42.920067', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 15:59:42.928143', '2020-10-26 15:59:42.928143', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 15:59:42.928143', '2020-10-26 15:59:42.928143', DEFAULT, DEFAULT)[0m
  [1m[35m (9.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 310ms (Views: 1.0ms | ActiveRecord: 1.3ms | Allocations: 6585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 326ms (Views: 0.8ms | ActiveRecord: 0.8ms | Allocations: 6585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 316ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-10-26 10:59:43 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (7.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Destroy (0.7ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 99ms (Views: 0.2ms | ActiveRecord: 10.3ms | Allocations: 22436)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 339ms (Views: 0.5ms | ActiveRecord: 1.5ms | Allocations: 560)
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-10-26 10:59:43 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
Completed 200 OK in 85ms (Views: 68.7ms | ActiveRecord: 1.3ms | Allocations: 24445)
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 443ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 366ms (Views: 0.6ms | ActiveRecord: 3.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 279ms (Views: 0.7ms | ActiveRecord: 0.9ms | Allocations: 560)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-10-26 10:59:44 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
Completed 200 OK in 19ms (Views: 3.6ms | ActiveRecord: 2.3ms | Allocations: 5537)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 319ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 10:59:44 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 123)
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 271ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 416ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 265ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-10-26 10:59:45 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 404 Not Found in 21ms (Views: 0.6ms | ActiveRecord: 1.6ms | Allocations: 1575)
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 399ms (Views: 0.9ms | ActiveRecord: 0.9ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:59:45 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-10-26 15:59:45.307037"], ["updated_at", "2020-10-26 15:59:45.307037"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 15ms (Views: 0.7ms | ActiveRecord: 1.8ms | Allocations: 4223)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 343ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 365ms (Views: 0.8ms | ActiveRecord: 0.7ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 306ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-10-26 10:59:45 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 299ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 10:59:45 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (1.4ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-10-26 15:59:46.000319"], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.6ms | ActiveRecord: 2.8ms | Allocations: 2792)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 382ms (Views: 0.7ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 381ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 290ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:59:46 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
  [1m[36mUser Load (5.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (2.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-10-26 15:59:46.544352"], ["updated_at", "2020-10-26 15:59:46.544352"], ["admon", "80000"], ["rooms", "3"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 64ms (Views: 1.3ms | ActiveRecord: 9.1ms | Allocations: 6080)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (5.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 382ms (Views: 0.6ms | ActiveRecord: 0.6ms | Allocations: 561)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:59:46 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (1.2ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 15:59:46.817492"], ["updated_at", "2020-10-26 15:59:46.817492"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 40ms (Views: 5.4ms | ActiveRecord: 6.6ms | Allocations: 2696)
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 396ms (Views: 1.1ms | ActiveRecord: 0.2ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 385ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 311ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 10:59:47 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.6ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-10-26 15:59:47.303753"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.7ms | ActiveRecord: 2.0ms | Allocations: 2782)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 337ms (Views: 0.7ms | ActiveRecord: 0.9ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:59:47 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.8ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 15:59:47.585421"], ["updated_at", "2020-10-26 15:59:47.585421"]]
  [1m[35m (11.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 22ms (Views: 1.0ms | ActiveRecord: 13.4ms | Allocations: 2578)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 455ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 359ms (Views: 0.8ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 423ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 10:59:48 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (2.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 404 Not Found in 10ms (Views: 0.3ms | ActiveRecord: 5.8ms | Allocations: 1458)
  [1m[35m (9.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 318ms (Views: 2.1ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (11.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 10:59:48 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (4.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 34ms (Views: 0.2ms | ActiveRecord: 5.4ms | Allocations: 1598)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (9.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 433ms (Views: 1.4ms | ActiveRecord: 1.1ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 366ms (Views: 0.5ms | ActiveRecord: 1.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 294ms (Views: 0.7ms | ActiveRecord: 0.7ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:59:49 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 14ms (Views: 1.0ms | ActiveRecord: 5.8ms | Allocations: 1433)
Completed 200 OK in 371ms (Views: 1.3ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 10:59:49 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:49 -0500
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 10ms (Views: 0.2ms | ActiveRecord: 0.5ms | Allocations: 1029)
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 344ms (Views: 0.6ms | ActiveRecord: 1.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 358ms (Views: 1.1ms | ActiveRecord: 1.1ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 274ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 269)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 292ms (Views: 1.4ms | ActiveRecord: 4.7ms | Allocations: 560)
  [1m[35m (6.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:59:49 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (6.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 33ms (Views: 0.6ms | ActiveRecord: 8.1ms | Allocations: 4517)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 373ms (Views: 0.9ms | ActiveRecord: 2.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 356ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 313ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-10-26 10:59:50 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 297ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:59:50 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 8ms (Views: 0.6ms | ActiveRecord: 1.3ms | Allocations: 1859)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 315ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 294ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 271ms (Views: 1.1ms | ActiveRecord: 0.4ms | Allocations: 560)
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-10-26 10:59:51 -0500
Processing by Api::V1::UsersController#update as JSON
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (4.5ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-10-26 15:59:51.061839"], ["id", 100]]
Completed 200 OK in 283ms (Views: 2.3ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "new_name"], ["updated_at", "2020-10-26 15:59:51.081181"], ["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 61ms (Views: 1.3ms | ActiveRecord: 8.0ms | Allocations: 3039)
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 317ms (Views: 0.8ms | ActiveRecord: 0.7ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 366ms (Views: 0.9ms | ActiveRecord: 1.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 273ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-10-26 10:59:51 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 10ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 4918)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 364ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 10:59:51 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 18ms (Views: 2.9ms | ActiveRecord: 2.3ms | Allocations: 2064)
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 371ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 524ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 489ms (Views: 0.5ms | ActiveRecord: 0.6ms | Allocations: 560)
  [1m[35m (1.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:59:52 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (8.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 31ms (Views: 12.5ms | ActiveRecord: 10.4ms | Allocations: 1941)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 338ms (Views: 0.8ms | ActiveRecord: 0.5ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-10-26 10:59:52 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$1QlOBA2n4IJ6imFaOcwhQOAu8dMg9nj.FSOX4cArRzjsZlm0O3hA2"], ["created_at", "2020-10-26 15:59:52.747322"], ["updated_at", "2020-10-26 15:59:52.747322"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 11ms (Views: 1.5ms | ActiveRecord: 1.9ms | Allocations: 1518)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 314ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 363ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 364ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 10:59:53 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 6ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1595)
  [1m[35m (2.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_create,_save,_and_destroy_a_property
--------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 15:59:53.467762"], ["updated_at", "2020-10-26 15:59:53.467762"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 14]]
  [1m[36mProperty Load (2.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[36mProperty Destroy (1.6ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 14]]
  [1m[36mProperty Exists? (8.4ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PropertyTest: test_Should_create_a_property
-------------------------------------------
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["hood", "Belen"], ["city", "Pizza"], ["user_id", 99], ["created_at", "2020-10-26 15:59:53.519884"], ["updated_at", "2020-10-26 15:59:53.519884"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_elevator_attribute
---------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 477ms (Views: 1.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:53 -0500
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_have_successfully_created_a_property
--------------------------------------------------------------
Processing by Api::V1::UsersController#login as JSON
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (3.1ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 15:59:53.584273"], ["updated_at", "2020-10-26 15:59:53.584273"]]
Completed 401 Unauthorized in 14ms (Views: 9.2ms | ActiveRecord: 2.1ms | Allocations: 363)
  [1m[35m (2.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_the_proper_built_type
-----------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_a_user_id
-----------------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PhotoTest: test_Should_successfully_create_a_photo
--------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (5.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
PhotoTest: test_Should_create,_save_and_delete_a_property,_as_well_as_inspecting_the_link
-----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (2.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPhoto Create (1.0ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.zeldadeprueba.com"], ["property_id", 2], ["created_at", "2020-10-26 15:59:53.645355"], ["updated_at", "2020-10-26 15:59:53.645355"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_property_id
---------------------------------------------------------------
  [1m[35m (2.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.7ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_url
-------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (4.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.9ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$cZJ4QkkvPVW.NCWK4FL8aed2PSNZoN2fza9OmeLHgC2BkylZcbG4u"], ["created_at", "2020-10-26 15:59:53.706830"], ["updated_at", "2020-10-26 15:59:53.706830"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPhoto Create (0.5ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.linkdeprueba.com"], ["property_id", 1], ["created_at", "2020-10-26 15:59:53.711349"], ["updated_at", "2020-10-26 15:59:53.711349"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (8.6ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 298486375]]
  [1m[36mPhoto Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "photos" WHERE "photos"."property_id" = $1 LIMIT $2[0m  [["property_id", 1], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (13.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (2.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Destroy (4.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[35m (6.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
---------------------------------------------------------------------------------
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$hxt1YbsD2IX8pmyCWzFBrOYslpTbaWELzhhfKWvDuuD0i01P/pLUa"], ["created_at", "2020-10-26 15:59:53.771819"], ["updated_at", "2020-10-26 15:59:53.771819"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (3.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (2.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$vC8jCM0vIfOEJxlvi10GcuabQSmfHh6X9drh.yyvSyGe2FU80E5.i"], ["created_at", "2020-10-26 15:59:53.805299"], ["updated_at", "2020-10-26 15:59:53.805299"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (1.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (2.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
  [1m[36mUser Create (5.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$7bdoenVQecOqP4QDuiuQoe4TK2c9yrCLPe/G2pvU0DkNS2Pj7kApO"], ["created_at", "2020-10-26 15:59:53.809933"], ["updated_at", "2020-10-26 15:59:53.809933"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (7.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$InHJT00BNHR9CbIDNbEr0O2EnjqHF4/X9rKmjHzrV7yvDCGSvDOCS"], ["created_at", "2020-10-26 15:59:53.854774"], ["updated_at", "2020-10-26 15:59:53.854774"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[35m (1.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[36mUser Exists? (10.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (3.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Create (2.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$8KxVWm7H6FWRgYcFla1EUOKzhDpklf/zS87ekhd4lRwoWObLBiLWC"], ["created_at", "2020-10-26 15:59:53.892596"], ["updated_at", "2020-10-26 15:59:53.892596"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Destroy (0.9ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (5.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
  [1m[36mUser Exists? (6.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (3.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (1.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$4JrThy8daI5aeFtsAfETRu8zOvA2mCFgjG74wdkOAacfOxPiHnXuq"], ["created_at", "2020-10-26 15:59:53.914819"], ["updated_at", "2020-10-26 15:59:53.914819"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Destroy (3.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$0GCuA6R4telQQiaZLIv0VecytdsitX1WVqw9cGjhH0NIZ5E8.XdCm"], ["created_at", "2020-10-26 15:59:53.958997"], ["updated_at", "2020-10-26 15:59:53.958997"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (7.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (1.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[35m (3.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (1.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Destroy (3.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
  [1m[35m (2.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (4.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$HCzvDY9iERBNfpR/NWLdZO/gezCbz5Ox7V9opRr5VUpMe139WpCha"], ["created_at", "2020-10-26 15:59:54.010525"], ["updated_at", "2020-10-26 15:59:54.010525"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$Z3lhT0xxG3/P7dH4.Mzx2OOf4K9hpc8Bhb03xA0J/b9cfWXPbf.oC"], ["created_at", "2020-10-26 15:59:54.019897"], ["updated_at", "2020-10-26 15:59:54.019897"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$YdWCL3Mkv7DTUT2jh91C9OYh7dO4xOBnwho/DK7vT30dulYe4NyKm"], ["created_at", "2020-10-26 15:59:54.022823"], ["updated_at", "2020-10-26 15:59:54.022823"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:54 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 367ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 453ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 293ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 310ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 313ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 10:59:55 -0500
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.4ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.4ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 33ms (Views: 0.3ms | ActiveRecord: 2.7ms | Allocations: 1653)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 402ms (Views: 0.5ms | ActiveRecord: 1.3ms | Allocations: 560)
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 10:59:55 -0500
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.2ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 10ms (Views: 0.5ms | ActiveRecord: 0.7ms | Allocations: 1623)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 336ms (Views: 0.6ms | ActiveRecord: 0.8ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 300ms (Views: 0.8ms | ActiveRecord: 0.8ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 297ms (Views: 0.9ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 335ms (Views: 1.2ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 417ms (Views: 1.4ms | ActiveRecord: 0.6ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 10:59:56 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (7.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (1.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mPhoto Load (4.7ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 31ms (Views: 8.3ms | ActiveRecord: 14.0ms | Allocations: 1849)
  [1m[35m (2.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 359ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 10:59:56 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (4.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 21ms (Views: 0.4ms | ActiveRecord: 5.1ms | Allocations: 1596)
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 375ms (Views: 0.4ms | ActiveRecord: 3.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 276ms (Views: 0.5ms | ActiveRecord: 1.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 323ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:56 -0500
Completed 200 OK in 354ms (Views: 1.2ms | ActiveRecord: 0.3ms | Allocations: 560)
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:56 -0500
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 277ms (Views: 0.5ms | ActiveRecord: 1.7ms | Allocations: 560)
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-10-26 10:59:57 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (3.5ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 318ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-10-26 10:59:57 -0500
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (1.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPhoto Create (8.0ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-10-26 15:59:57.315386"], ["updated_at", "2020-10-26 15:59:57.315386"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued PhotoQualityJob (Job ID: e4b95c01-2a5d-4384-b562-c173e0aaaf43) to Test(default) with arguments: 298486376
Completed 201 Created in 61ms (Views: 0.3ms | ActiveRecord: 14.9ms | Allocations: 2754)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (4.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (780.9ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (778.9ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.7ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 16:05:33.531647', '2020-10-26 16:05:33.531647', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 16:05:33.531647', '2020-10-26 16:05:33.531647', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$6pWl8CQCbfINfKD3wOP7ieMQ4LIFZGImkqyIfz.I2ozp3VY1FstxG', '2020-10-26 16:05:33.531647', '2020-10-26 16:05:33.531647', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$I7xMNUrV2PAG49cMD9VJWuySuJ3sxVVbGxZeq8LvqZj5JKYH/iNtO', '2020-10-26 16:05:33.531647', '2020-10-26 16:05:33.531647', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$jgGgZB/uOUHFqdG/eaFt8eDPYDRaLgMn84nf0KhsfeZXULZtIg0Dy', '2020-10-26 16:05:33.531647', '2020-10-26 16:05:33.531647', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 16:05:33.541990', '2020-10-26 16:05:33.541990', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 16:05:33.541990', '2020-10-26 16:05:33.541990', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 16:05:33.541990', '2020-10-26 16:05:33.541990', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 16:05:33.541990', '2020-10-26 16:05:33.541990', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 16:05:33.541990', '2020-10-26 16:05:33.541990', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 16:05:33.541990', '2020-10-26 16:05:33.541990', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 16:05:33.556315', '2020-10-26 16:05:33.556315', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 16:05:33.556315', '2020-10-26 16:05:33.556315', DEFAULT, DEFAULT)[0m
  [1m[35m (55.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (5.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.0ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 16:05:33.608707', '2020-10-26 16:05:33.608707', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 16:05:33.608707', '2020-10-26 16:05:33.608707', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$wgMeLTrGy4usqd9o3PMHtOy5DdzTPS/IdXvg06ThxXT8zP.4EA1ZK', '2020-10-26 16:05:33.608707', '2020-10-26 16:05:33.608707', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$KCnlsArS5oi37kM4tFN1X.Vy/oAPie8rtZZ84TYe2qacvmoHAU8AW', '2020-10-26 16:05:33.608707', '2020-10-26 16:05:33.608707', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$m3GFkDBQFGCkv.CqGVKhf.WLoA4msHJalL2abfndMVWmagcFO0Gxe', '2020-10-26 16:05:33.608707', '2020-10-26 16:05:33.608707', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 16:05:33.631512', '2020-10-26 16:05:33.631512', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 16:05:33.631512', '2020-10-26 16:05:33.631512', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 16:05:33.631512', '2020-10-26 16:05:33.631512', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 16:05:33.631512', '2020-10-26 16:05:33.631512', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 16:05:33.631512', '2020-10-26 16:05:33.631512', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 16:05:33.631512', '2020-10-26 16:05:33.631512', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 16:05:33.636165', '2020-10-26 16:05:33.636165', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 16:05:33.636165', '2020-10-26 16:05:33.636165', DEFAULT, DEFAULT)[0m
  [1m[35m (13.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[35m (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$6wwhpwN/vjgj.Hm9I2EDiOtFsB9Csgh8eZQvBIBnbXY6PJzvQ91Tu"], ["created_at", "2020-10-26 16:05:33.769749"], ["updated_at", "2020-10-26 16:05:33.769749"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$KUUq6RXuV2g.u65i9v5AbOLYD.CNbY1axKdBHJ6HNMtNIAfrJLrua"], ["created_at", "2020-10-26 16:05:33.776991"], ["updated_at", "2020-10-26 16:05:33.776991"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Destroy (1.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$Ea7zQ6hneMt0pFr9HdSt0.kfVBCPv9gL3jeUkom28YhcbZpDIrZCm"], ["created_at", "2020-10-26 16:05:33.811140"], ["updated_at", "2020-10-26 16:05:33.811140"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (2.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (11.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$QwGVOuj9gA96xuGBcru5Xu18BiB4fMFowydTUKejIzxh9EoI60So6"], ["created_at", "2020-10-26 16:05:33.833524"], ["updated_at", "2020-10-26 16:05:33.833524"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (9.9ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$whtj1W5AlLfppGID2ozAqu.4kqBQtVlws1vMav0sXhprFZPDXcRXK"], ["created_at", "2020-10-26 16:05:33.855568"], ["updated_at", "2020-10-26 16:05:33.855568"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (2.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$jdqyW.hVEyQJ1ZIgZkqE5eXrx/l6O9fNBo0joSd.A5X7R8ij4XjJW"], ["created_at", "2020-10-26 16:05:33.873935"], ["updated_at", "2020-10-26 16:05:33.873935"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mProperty Load (4.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (3.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[35m (3.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Destroy (1.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$EzKx3EGZ69IQrZSoiRGjeeLn/7vcbIfcYRFvYshQbjRVRCGBWldN6"], ["created_at", "2020-10-26 16:05:33.924364"], ["updated_at", "2020-10-26 16:05:33.924364"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Create (3.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$2E9PZilPPc5H/D/o..6yNOftC88V8P3BP4FwSFQmkZqz26LHh5.C2"], ["created_at", "2020-10-26 16:05:33.918472"], ["updated_at", "2020-10-26 16:05:33.918472"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Destroy (2.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[36mUser Exists? (2.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.9ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Destroy (0.9ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (2.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$1I32m9050hUsdIp6tTLlP.aLGpEbEGRcRuzcDckk0Dx9lQz055QSW"], ["created_at", "2020-10-26 16:05:33.974522"], ["updated_at", "2020-10-26 16:05:33.974522"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Exists? (2.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (2.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$ZmAsNiK35M7OQteAi8MJ1e482Bj0W9LDSFWub2aQmVk26WFgSLoO."], ["created_at", "2020-10-26 16:05:33.985571"], ["updated_at", "2020-10-26 16:05:33.985571"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (3.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[36mProperty Load (1.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[35m (1.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (2.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (3.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[35m (3.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (1.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_url
-------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$0vpZDp2650CtFozZJ8skBuVIf29dOWFH6FTB2sthvHtjM5gGxgPLS"], ["created_at", "2020-10-26 16:05:34.030938"], ["updated_at", "2020-10-26 16:05:34.030938"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (7.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PhotoTest: test_Should_successfully_create_a_photo
--------------------------------------------------
  [1m[35m (3.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_property_id
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
PhotoTest: test_Should_create,_save_and_delete_a_property,_as_well_as_inspecting_the_link
-----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPhoto Create (1.0ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.linkdeprueba.com"], ["property_id", 1], ["created_at", "2020-10-26 16:05:34.148887"], ["updated_at", "2020-10-26 16:05:34.148887"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.5ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 298486375]]
  [1m[36mPhoto Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "photos" WHERE "photos"."property_id" = $1 LIMIT $2[0m  [["property_id", 1], ["LIMIT", 1]]
  [1m[35m (8.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPhoto Create (1.6ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.zeldadeprueba.com"], ["property_id", 2], ["created_at", "2020-10-26 16:05:34.169708"], ["updated_at", "2020-10-26 16:05:34.169708"]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
  [1m[35m (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:34 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 308ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 715)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 372ms (Views: 0.9ms | ActiveRecord: 0.5ms | Allocations: 859)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 334ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 330ms (Views: 0.5ms | ActiveRecord: 0.6ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 316ms (Views: 0.7ms | ActiveRecord: 0.9ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 11:05:35 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 11ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1925)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 424ms (Views: 7.7ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[35m (6.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-10-26 11:05:35 -0500
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[36mUser Load (12.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (1.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.8ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-10-26 16:05:35.420159"], ["updated_at", "2020-10-26 16:05:35.420159"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued PhotoQualityJob (Job ID: 674a8e7e-c7db-4666-959a-993fe2b23128) to Test(default) with arguments: 298486376
Completed 201 Created in 69ms (Views: 1.7ms | ActiveRecord: 17.9ms | Allocations: 3215)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 396ms (Views: 0.6ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 406ms (Views: 1.1ms | ActiveRecord: 4.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 330ms (Views: 0.6ms | ActiveRecord: 0.8ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 329ms (Views: 0.8ms | ActiveRecord: 0.4ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 352ms (Views: 0.7ms | ActiveRecord: 2.3ms | Allocations: 560)
  [1m[35m (1.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 11:05:36 -0500
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (7.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.4ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.6ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 20ms (Views: 0.3ms | ActiveRecord: 9.5ms | Allocations: 1619)
  [1m[35m (3.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 288ms (Views: 2.7ms | ActiveRecord: 3.7ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 11:05:36 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (6.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (1.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mPhoto Load (1.6ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 28ms (Views: 5.8ms | ActiveRecord: 11.5ms | Allocations: 1849)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 394ms (Views: 2.6ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 323ms (Views: 0.8ms | ActiveRecord: 0.8ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 374ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 350ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 295ms (Views: 1.0ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-10-26 11:05:37 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 410ms (Views: 1.4ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 11:05:37 -0500
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (7.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.2ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 22ms (Views: 0.5ms | ActiveRecord: 7.9ms | Allocations: 1570)
  [1m[35m (7.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 449ms (Views: 1.0ms | ActiveRecord: 1.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 354ms (Views: 0.7ms | ActiveRecord: 3.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 324ms (Views: 0.9ms | ActiveRecord: 3.0ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 11:05:38 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 8ms (Views: 4.2ms | ActiveRecord: 0.9ms | Allocations: 2066)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 326ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-10-26 11:05:38 -0500
Processing by Api::V1::UsersController#update as JSON
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (1.2ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-10-26 16:05:38.478075"], ["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 25ms (Views: 0.6ms | ActiveRecord: 3.2ms | Allocations: 2498)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (10.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 293ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 433ms (Views: 0.8ms | ActiveRecord: 10.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 317ms (Views: 1.1ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-10-26 11:05:39 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (3.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 307ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-10-26 11:05:39 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$5yEppdBe9VDTN18oChDXG.3hFbHVa0NRs1.2A.v5YbcVZG0lipofi"], ["created_at", "2020-10-26 16:05:39.274652"], ["updated_at", "2020-10-26 16:05:39.274652"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 15ms (Views: 0.9ms | ActiveRecord: 0.8ms | Allocations: 1491)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 410ms (Views: 0.5ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 398ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 349ms (Views: 0.9ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-10-26 11:05:39 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 11ms (Views: 0.3ms | ActiveRecord: 0.9ms | Allocations: 3509)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 406ms (Views: 1.0ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "new_name"], ["updated_at", "2020-10-26 16:05:40.107830"], ["id", 100]]
  [1m[35m (1.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 295ms (Views: 0.8ms | ActiveRecord: 1.1ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 287ms (Views: 1.0ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 11:05:40 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (5.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 22ms (Views: 0.1ms | ActiveRecord: 7.2ms | Allocations: 1595)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 435ms (Views: 4.7ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 342ms (Views: 0.8ms | ActiveRecord: 0.8ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 11:05:40 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (5.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 12ms (Views: 0.5ms | ActiveRecord: 5.6ms | Allocations: 1859)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 414ms (Views: 0.9ms | ActiveRecord: 0.5ms | Allocations: 568)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:40 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 311ms (Views: 0.8ms | ActiveRecord: 0.8ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 11:05:41 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (2.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 14ms (Views: 1.1ms | ActiveRecord: 3.8ms | Allocations: 2367)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 389ms (Views: 1.1ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 281ms (Views: 1.0ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 11:05:41 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 350ms (Views: 1.0ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:41 -0500
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 27ms (Views: 0.2ms | ActiveRecord: 1.1ms | Allocations: 1598)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 305ms (Views: 0.7ms | ActiveRecord: 1.1ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 399ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 11:05:42 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 22ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 1030)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 317ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:42 -0500
Processing by Api::V1::UsersController#login as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 401 Unauthorized in 3ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 363)
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 320ms (Views: 0.7ms | ActiveRecord: 1.0ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 298ms (Views: 1.0ms | ActiveRecord: 1.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 365ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 11:05:42 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 7ms (Views: 0.5ms | ActiveRecord: 3.6ms | Allocations: 1433)
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 314ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 561)
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 11:05:42 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (1.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 14ms (Views: 0.7ms | ActiveRecord: 5.1ms | Allocations: 1941)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_have_successfully_created_a_property
--------------------------------------------------------------
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.0ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 16:05:43.010955"], ["updated_at", "2020-10-26 16:05:43.010955"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_the_proper_built_type
-----------------------------------------------------------------------------
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_create,_save,_and_destroy_a_property
--------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 16:05:43.041109"], ["updated_at", "2020-10-26 16:05:43.041109"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 12]]
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[36mProperty Destroy (0.6ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 12]]
  [1m[36mProperty Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_elevator_attribute
---------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_a_user_id
-----------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PropertyTest: test_Should_create_a_property
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["hood", "Belen"], ["city", "Pizza"], ["user_id", 99], ["created_at", "2020-10-26 16:05:43.109487"], ["updated_at", "2020-10-26 16:05:43.109487"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 444ms (Views: 0.5ms | ActiveRecord: 1.0ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 319ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 319ms (Views: 0.6ms | ActiveRecord: 2.4ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 3ms (Views: 0.3ms | ActiveRecord: 0.6ms | Allocations: 269)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 353ms (Views: 0.5ms | ActiveRecord: 1.7ms | Allocations: 560)
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-10-26 11:05:43 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (1.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 404 Not Found in 7ms (Views: 0.2ms | ActiveRecord: 1.8ms | Allocations: 1507)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 344ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 314ms (Views: 1.1ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 337ms (Views: 0.7ms | ActiveRecord: 1.2ms | Allocations: 560)
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 11:05:44 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (1.0ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 16:05:44.324884"], ["updated_at", "2020-10-26 16:05:44.324884"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 13ms (Views: 0.6ms | ActiveRecord: 2.0ms | Allocations: 3449)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 272ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 11:05:44 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.7ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-10-26 16:05:44.429406"], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.6ms | ActiveRecord: 2.4ms | Allocations: 2749)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 422ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 340ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 328ms (Views: 1.0ms | ActiveRecord: 0.5ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 11:05:45 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-10-26 16:05:45.105539"], ["updated_at", "2020-10-26 16:05:45.105539"], ["admon", "80000"], ["rooms", "3"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 9ms (Views: 0.6ms | ActiveRecord: 1.4ms | Allocations: 2737)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Completed 200 OK in 308ms (Views: 0.4ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 11:05:45 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 404 Not Found in 9ms (Views: 0.3ms | ActiveRecord: 1.6ms | Allocations: 1458)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
--------------------------------------------------------------
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 329ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 425ms (Views: 1.3ms | ActiveRecord: 2.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 328ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-10-26 11:05:45 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
Completed 200 OK in 31ms (Views: 18.7ms | ActiveRecord: 1.0ms | Allocations: 3672)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 288ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 11:05:45 -0500
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (1.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (1.5ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-10-26 16:05:45.867391"], ["id", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:45 -0500
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
Completed 200 OK in 37ms (Views: 12.7ms | ActiveRecord: 3.9ms | Allocations: 2899)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (8.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 331ms (Views: 0.5ms | ActiveRecord: 0.9ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 367ms (Views: 1.1ms | ActiveRecord: 0.9ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 285ms (Views: 2.4ms | ActiveRecord: 1.1ms | Allocations: 560)
  [1m[35m (8.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-10-26 11:05:46 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Destroy (0.4ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 1.9ms | Allocations: 1544)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 383ms (Views: 1.2ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 11:05:46 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 16:05:46.716655"], ["updated_at", "2020-10-26 16:05:46.716655"]]
  [1m[35m (1.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 10ms (Views: 0.6ms | ActiveRecord: 3.2ms | Allocations: 2578)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 440ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 371ms (Views: 0.7ms | ActiveRecord: 4.1ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 349ms (Views: 7.3ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 11:05:47 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
  [1m[36mUser Load (12.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (7.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (1.3ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-10-26 16:05:47.377933"], ["updated_at", "2020-10-26 16:05:47.377933"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 54ms (Views: 2.3ms | ActiveRecord: 22.9ms | Allocations: 2704)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 426ms (Views: 0.4ms | ActiveRecord: 2.3ms | Allocations: 560)
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-10-26 11:05:47 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 311ms (Views: 0.7ms | ActiveRecord: 2.1ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 468ms (Views: 1.0ms | ActiveRecord: 1.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 303ms (Views: 0.4ms | ActiveRecord: 0.7ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 11:05:48 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 332ms (Views: 8.3ms | ActiveRecord: 2.0ms | Allocations: 560)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-10-26 11:05:48 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (7.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (1.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
Completed 200 OK in 30ms (Views: 1.5ms | ActiveRecord: 11.4ms | Allocations: 1583)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
