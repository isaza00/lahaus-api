  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1010.7ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1019.3ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.0ms)[0m  [1m[35mALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.0ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 13:14:57.805766', '2020-10-26 13:14:57.805766', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 13:14:57.805766', '2020-10-26 13:14:57.805766', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$ka3N1fSn3qAU5XDyDotDMOchk4g0tkYdyesGcy8WJja/SvpuBPvtq', '2020-10-26 13:14:57.805766', '2020-10-26 13:14:57.805766', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$cCYEU4oGSydUxzdZy4NtDuaficugAbAN1KTuKalWX0CWbeXc3hVKG', '2020-10-26 13:14:57.805766', '2020-10-26 13:14:57.805766', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$/Xn0tsCcfrBxX0FvzSjpJudTlzeBt89hlNitm/y/aRHPWRphxufdK', '2020-10-26 13:14:57.805766', '2020-10-26 13:14:57.805766', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 13:14:57.811680', '2020-10-26 13:14:57.811680', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 13:14:57.811680', '2020-10-26 13:14:57.811680', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 13:14:57.811680', '2020-10-26 13:14:57.811680', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 13:14:57.811680', '2020-10-26 13:14:57.811680', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 13:14:57.811680', '2020-10-26 13:14:57.811680', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 13:14:57.811680', '2020-10-26 13:14:57.811680', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 13:14:57.816077', '2020-10-26 13:14:57.816077', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 13:14:57.816077', '2020-10-26 13:14:57.816077', DEFAULT, DEFAULT)[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.8ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 13:14:57.808809', '2020-10-26 13:14:57.808809', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 13:14:57.808809', '2020-10-26 13:14:57.808809', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$dD1IuxsiKb6RUXecRR5IF.UIxd527o.tJtER/mAS36/2eIldesbJ.', '2020-10-26 13:14:57.808809', '2020-10-26 13:14:57.808809', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$88rZRYpIFzNj2NWf5gafX.w7HFnXJ9Dktl04tkoJ/KVjHMYWeZouu', '2020-10-26 13:14:57.808809', '2020-10-26 13:14:57.808809', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$SFx5WCEAZP/kTkDk2PWWb.dKdbLanC/PVs/KUlPpksd8i4pThJCoe', '2020-10-26 13:14:57.808809', '2020-10-26 13:14:57.808809', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 13:14:57.814470', '2020-10-26 13:14:57.814470', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 13:14:57.814470', '2020-10-26 13:14:57.814470', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 13:14:57.814470', '2020-10-26 13:14:57.814470', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 13:14:57.814470', '2020-10-26 13:14:57.814470', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 13:14:57.814470', '2020-10-26 13:14:57.814470', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 13:14:57.814470', '2020-10-26 13:14:57.814470', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 13:14:57.818830', '2020-10-26 13:14:57.818830', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 13:14:57.818830', '2020-10-26 13:14:57.818830', DEFAULT, DEFAULT)[0m
  [1m[35m (37.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (34.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:14:58 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:14:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 247ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 6585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:14:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 246ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 6585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:14:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 08:14:58 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-10-26 08:14:58 -0500
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 0.5ms | Allocations: 2152)
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 123)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:14:58 -0500
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:14:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:14:58 -0500
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 569)
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:14:58 -0500
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-10-26 08:14:59 -0500
Completed 200 OK in 240ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-10-26 08:14:59 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
[31mUnpermitted parameter: :format[0m
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$hAnlX7VFdckjJT55NDlHAu4ueAWG8UK53bFfdCeCHCG5ry5qONcIO"], ["created_at", "2020-10-26 13:14:59.069802"], ["updated_at", "2020-10-26 13:14:59.069802"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 7ms (Views: 0.3ms | ActiveRecord: 1.8ms | Allocations: 2257)
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:14:59 -0500
Completed 422 Unprocessable Entity in 10ms (Views: 0.3ms | ActiveRecord: 1.6ms | Allocations: 5632)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:14:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:14:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:14:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 08:14:59 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1598)
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "new_name"], ["updated_at", "2020-10-26 13:14:59.569094"], ["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:14:59 -0500
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:14:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 242ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:14:59 -0500
Completed 200 OK in 241ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 568)
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:14:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:00 -0500
Completed 200 OK in 240ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 560)
Processing by Api::V1::UsersController#login as JSON
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 08:15:00 -0500
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 363)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 1201)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 08:15:00 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 08:15:00 -0500
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.5ms | ActiveRecord: 0.5ms | Allocations: 1433)
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 18ms (Views: 0.5ms | ActiveRecord: 1.6ms | Allocations: 6489)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 249ms (Views: 0.4ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 249ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 08:15:01 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 13ms (Views: 0.4ms | ActiveRecord: 1.3ms | Allocations: 5948)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
Completed 200 OK in 242ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:01 -0500
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-10-26 08:15:01 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#update as JSON
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-10-26 13:15:01.095267"], ["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.3ms | ActiveRecord: 2.4ms | Allocations: 2437)
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:01 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 252ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:01 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 251ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:01 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 08:15:01 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 1595)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:01 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:01 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 269)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_the_proper_built_type
-----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PropertyTest: test_Should_create_a_property
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["hood", "Belen"], ["city", "Pizza"], ["user_id", 99], ["created_at", "2020-10-26 13:15:01.660716"], ["updated_at", "2020-10-26 13:15:01.660716"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_create,_save,_and_destroy_a_property
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.8ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 13:15:01.667828"], ["updated_at", "2020-10-26 13:15:01.667828"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 12]]
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[36mProperty Destroy (0.4ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 12]]
  [1m[36mProperty Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_have_successfully_created_a_property
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 13:15:01.681350"], ["updated_at", "2020-10-26 13:15:01.681350"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_a_user_id
-----------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:01 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 248ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:01 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 249ms (Views: 6.0ms | ActiveRecord: 0.2ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:01 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 08:15:02 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 5ms (Views: 2.1ms | ActiveRecord: 0.5ms | Allocations: 2065)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:02 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 242ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:02 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 242ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:02 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 08:15:02 -0500
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.2ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.2ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 1.1ms | Allocations: 6365)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:02 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 248ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:02 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 247ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:02 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-10-26 08:15:02 -0500
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.3ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-10-26 13:15:02.898574"], ["updated_at", "2020-10-26 13:15:02.898574"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued PhotoQualityJob (Job ID: 1d88f5c3-e448-4ab7-b02c-5697ad2d7d2d) to Test(default) with arguments: 298486375
Completed 201 Created in 59ms (Views: 0.3ms | ActiveRecord: 1.5ms | Allocations: 29041)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:02 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 242ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:02 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:03 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 08:15:03 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.5ms | Allocations: 1596)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:03 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:03 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:03 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 08:15:03 -0500
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.2ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.7ms | Allocations: 1570)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:03 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:03 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:03 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.3ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-10-26 08:15:03 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
PhotoTest: test_Should_create,_save_and_delete_a_property,_as_well_as_inspecting_the_link
-----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.4ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.linkdeprueba.com"], ["property_id", 1], ["created_at", "2020-10-26 13:15:03.929597"], ["updated_at", "2020-10-26 13:15:03.929597"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.3ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 298486375]]
  [1m[36mPhoto Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "photos" WHERE "photos"."property_id" = $1 LIMIT $2[0m  [["property_id", 1], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_property_id
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_url
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PhotoTest: test_Should_successfully_create_a_photo
--------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.3ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.zeldadeprueba.com"], ["property_id", 2], ["created_at", "2020-10-26 13:15:03.945273"], ["updated_at", "2020-10-26 13:15:03.945273"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:03 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 244ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:04 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 243ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:04 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 08:15:04 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.2ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 5ms (Views: 1.1ms | ActiveRecord: 0.9ms | Allocations: 1849)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:04 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 08:15:04 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.5ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-10-26 13:15:04.447559"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.6ms | ActiveRecord: 1.5ms | Allocations: 2893)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:04 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 243ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:04 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:04 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 08:15:04 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-10-26 13:15:04.876922"], ["updated_at", "2020-10-26 13:15:04.876922"], ["admon", "80000"], ["rooms", "3"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 8ms (Views: 0.4ms | ActiveRecord: 1.1ms | Allocations: 3489)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:04 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 243ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 08:15:04 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.3ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 13:15:04.947822"], ["updated_at", "2020-10-26 13:15:04.947822"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 6ms (Views: 0.6ms | ActiveRecord: 0.9ms | Allocations: 2578)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:04 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 244ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:05 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 242ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:05 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-10-26 08:15:05 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:05 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 245ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 08:15:05 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-10-26 13:15:05.452751"], ["updated_at", "2020-10-26 13:15:05.452751"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 7ms (Views: 0.6ms | ActiveRecord: 1.2ms | Allocations: 2704)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:05 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 251ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:05 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 246ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:05 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 08:15:05 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 404 Not Found in 3ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1458)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:05 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 242ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 08:15:05 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.4ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-10-26 13:15:05.959420"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.5ms | ActiveRecord: 1.4ms | Allocations: 2734)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:05 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 243ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 239ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 08:15:06 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 13:15:06.377674"], ["updated_at", "2020-10-26 13:15:06.377674"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 7ms (Views: 0.6ms | ActiveRecord: 1.1ms | Allocations: 2696)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 246ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-10-26 08:15:06 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
Completed 200 OK in 4ms (Views: 1.0ms | ActiveRecord: 0.8ms | Allocations: 1583)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 255ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 248ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-10-26 08:15:06 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
Completed 200 OK in 7ms (Views: 3.4ms | ActiveRecord: 0.8ms | Allocations: 3672)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 242ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 08:15:06 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 244ms (Views: 0.3ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:07 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:15:07 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-10-26 08:15:07 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Destroy (0.5ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.5ms | Allocations: 1544)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$UCtHFlLRjtw1qW8Za4wGa.UxLRh1jBHLlozxlsABXRQWCHG7cFsl2"], ["created_at", "2020-10-26 13:15:07.402856"], ["updated_at", "2020-10-26 13:15:07.402856"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$MNzKOU1quAnaCtAm5hw0z.Anpig7jEDUX6FSE0lmrGW4ZlHFiTVGS"], ["created_at", "2020-10-26 13:15:07.412972"], ["updated_at", "2020-10-26 13:15:07.412972"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$fhH4EU2yHbNE6sp19gDnc.HCsevBbhTsdlwtwRWOqU.FLkcK5VtCa"], ["created_at", "2020-10-26 13:15:07.430538"], ["updated_at", "2020-10-26 13:15:07.430538"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$5ttjxxCRTAvmdpFsPt1tEuRQzVFu3lJIkO4zFguwb7MNrBRKrSkTi"], ["created_at", "2020-10-26 13:15:07.440743"], ["updated_at", "2020-10-26 13:15:07.440743"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$.NBB6ckSIsMBnntfKwdo3eYjF7U25FVmCoCVrUqWj7rK9uUMDmoki"], ["created_at", "2020-10-26 13:15:07.456293"], ["updated_at", "2020-10-26 13:15:07.456293"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Completed 200 OK in 244ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-10-26 08:15:07 -0500
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$62OvNUR7Z10O.F1BNBnXX.FLcuCjd59JWBJNruiVnf.Fjtu0NmkiC"], ["created_at", "2020-10-26 13:15:07.471618"], ["updated_at", "2020-10-26 13:15:07.471618"], ["full_name", "valid"], ["cellphone", "3001234567"]]
Completed 404 Not Found in 8ms (Views: 0.2ms | ActiveRecord: 1.4ms | Allocations: 1458)
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$IUyxe8E2wQHP4ahE6nC6m.12ZBKFkpWhJf/vIo15bwbltfFuR/hMO"], ["created_at", "2020-10-26 13:15:07.479878"], ["updated_at", "2020-10-26 13:15:07.479878"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.9ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486381]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (1.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486381]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$MVRNkja1rE6rRhmbiWOkO.ZHLJqxi4Uc75rFJ5RF0vXxI51dSJe1O"], ["created_at", "2020-10-26 13:15:07.495716"], ["updated_at", "2020-10-26 13:15:07.495716"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$RS2J6.TnF7SiNAuPz2rI7eoQXdctwKQG2EurDOUwfYi5kQ4UtBB2K"], ["created_at", "2020-10-26 13:15:07.501779"], ["updated_at", "2020-10-26 13:15:07.501779"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486382]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486382]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$8zJg6eWcBsCySwK078hY9OtVdHf22KRoAYPkSog8xzwCgGEzzO05y"], ["created_at", "2020-10-26 13:15:07.507381"], ["updated_at", "2020-10-26 13:15:07.507381"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$VRGUyK1j5qWpl7e5/1DbsuWsKrbdfGtxygDGBRbqtlD9ieRsyqT1C"], ["created_at", "2020-10-26 13:15:07.513428"], ["updated_at", "2020-10-26 13:15:07.513428"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486383]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486383]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (966.6ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.0ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (973.3ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.1ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.8ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 13:17:51.481911', '2020-10-26 13:17:51.481911', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 13:17:51.481911', '2020-10-26 13:17:51.481911', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$Cl2KVJReovBXsSmXj1RfMeSRI54sftp3ATZZXNiTiSEcaCYI6b8E2', '2020-10-26 13:17:51.481911', '2020-10-26 13:17:51.481911', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$OZl24NREZD6UxudsoboAM.QYtomvPUJD2yIL29TfqD0VWDJgy6q/O', '2020-10-26 13:17:51.481911', '2020-10-26 13:17:51.481911', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$3YO/NuzW3cvTE8kx5j1MB.Rnik9PfNpSRaQemnMErqHhJVPq402ZC', '2020-10-26 13:17:51.481911', '2020-10-26 13:17:51.481911', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 13:17:51.488957', '2020-10-26 13:17:51.488957', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 13:17:51.488957', '2020-10-26 13:17:51.488957', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 13:17:51.488957', '2020-10-26 13:17:51.488957', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 13:17:51.488957', '2020-10-26 13:17:51.488957', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 13:17:51.488957', '2020-10-26 13:17:51.488957', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 13:17:51.488957', '2020-10-26 13:17:51.488957', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 13:17:51.494313', '2020-10-26 13:17:51.494313', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 13:17:51.494313', '2020-10-26 13:17:51.494313', DEFAULT, DEFAULT)[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 13:17:51.484901', '2020-10-26 13:17:51.484901', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 13:17:51.484901', '2020-10-26 13:17:51.484901', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$ej3mo3I24szuxMW.EJnXgekXxL1DZnyWtPapnUKLE9.CzhYmWipBi', '2020-10-26 13:17:51.484901', '2020-10-26 13:17:51.484901', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$8bOXjtXBQUFkTI0CogmqLe7i55dZj/mj35nHD1yR66cAHR9Zct5E.', '2020-10-26 13:17:51.484901', '2020-10-26 13:17:51.484901', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$0q9BpHPfzHNghtaDJoUSY.KjueTpnUEMocN5MufD.jQ9rrW.6qgVO', '2020-10-26 13:17:51.484901', '2020-10-26 13:17:51.484901', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 13:17:51.492268', '2020-10-26 13:17:51.492268', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 13:17:51.492268', '2020-10-26 13:17:51.492268', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 13:17:51.492268', '2020-10-26 13:17:51.492268', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 13:17:51.492268', '2020-10-26 13:17:51.492268', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 13:17:51.492268', '2020-10-26 13:17:51.492268', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 13:17:51.492268', '2020-10-26 13:17:51.492268', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 13:17:51.498242', '2020-10-26 13:17:51.498242', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 13:17:51.498242', '2020-10-26 13:17:51.498242', DEFAULT, DEFAULT)[0m
  [1m[35m (13.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (21.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:51 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 256ms (Views: 0.6ms | ActiveRecord: 0.5ms | Allocations: 6585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 255ms (Views: 0.8ms | ActiveRecord: 0.5ms | Allocations: 6585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 242ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 08:17:52 -0500
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
Completed 200 OK in 243ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[36mPhoto Load (0.3ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 08:17:52 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.5ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 24ms (Views: 0.2ms | ActiveRecord: 2.2ms | Allocations: 6690)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.2ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 53ms (Views: 3.1ms | ActiveRecord: 1.0ms | Allocations: 26496)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 245ms (Views: 0.4ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 242ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 284ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 283ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 337ms (Views: 0.9ms | ActiveRecord: 0.9ms | Allocations: 560)
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 08:17:53 -0500
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
Completed 200 OK in 316ms (Views: 0.9ms | ActiveRecord: 0.5ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 08:17:53 -0500
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.3ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
Completed 200 OK in 10ms (Views: 0.4ms | ActiveRecord: 1.1ms | Allocations: 1447)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 11ms (Views: 0.2ms | ActiveRecord: 1.6ms | Allocations: 1599)
  [1m[35m (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:53 -0500
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
----------------------------------------------------------------
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:53 -0500
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 268ms (Views: 0.9ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 267ms (Views: 1.3ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 244ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 246ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-10-26 08:17:54 -0500
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-10-26 08:17:54 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$lgnPkiAKOAcB/Jn9dayJyu2nwpJYGtmwjFszlw9Wd90gxAM/4SzYC"], ["created_at", "2020-10-26 13:17:54.222939"], ["updated_at", "2020-10-26 13:17:54.222939"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (1.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$9zdRsfB0XOGxMlqq8FhD4Odnhgm.ZYoznXxesNkvXPapiHxYaDLTK"], ["created_at", "2020-10-26 13:17:54.242741"], ["updated_at", "2020-10-26 13:17:54.242741"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$CJwGGO3Q8WAcq2fYaZFQkOfbNM7g3DxafddYwG9.nQBwLV/emDEuC"], ["created_at", "2020-10-26 13:17:54.265805"], ["updated_at", "2020-10-26 13:17:54.265805"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.7ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-10-26 13:17:54.271592"], ["updated_at", "2020-10-26 13:17:54.271592"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
[ActiveJob] Enqueued PhotoQualityJob (Job ID: 6fe17d29-d6c6-49fc-b3cf-a74ca0e5ea43) to Test(default) with arguments: 298486375
Completed 201 Created in 77ms (Views: 0.3ms | ActiveRecord: 2.4ms | Allocations: 26238)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$0FAgkHMmgMVjvyIM3rLN7OCbhvz8Y1yxP9RlH0v8UilR.B9Q0yTy6"], ["created_at", "2020-10-26 13:17:54.288859"], ["updated_at", "2020-10-26 13:17:54.288859"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$Ot0IW6tMYigFfVMaBtmSnuRpGOrLRlQ1NDYcDTs3V8WlHnwW..bNG"], ["created_at", "2020-10-26 13:17:54.289080"], ["updated_at", "2020-10-26 13:17:54.289080"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$CRN3xqW2s/IzeyiRb.BYxOlo22lxV7bYP19P0OZ.8T.vCXBRowMp."], ["created_at", "2020-10-26 13:17:54.311509"], ["updated_at", "2020-10-26 13:17:54.311509"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$bg6QHh1R/vTWJZ5xeJ80nuU.ElzONEz9TG9OiIFH4ZtPa2fPn1zhG"], ["created_at", "2020-10-26 13:17:54.331438"], ["updated_at", "2020-10-26 13:17:54.331438"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$6pmgdeWoXEu3C/pO50Z8AufxXBI1wyXTI89EyWppAtCTLlZ4R9KBW"], ["created_at", "2020-10-26 13:17:54.342925"], ["updated_at", "2020-10-26 13:17:54.342925"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$8qOXWrjLtVpIgXY75dPj7eVjtG1S5898I/vcnWqyAGujtnD8Z3ESy"], ["created_at", "2020-10-26 13:17:54.357938"], ["updated_at", "2020-10-26 13:17:54.357938"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[36mUser Destroy (1.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$tBZx0Fez/7EArLBXNHsYdOlj.9dJMQf8pBKYsQe.lei1qlzNMPVzW"], ["created_at", "2020-10-26 13:17:54.371498"], ["updated_at", "2020-10-26 13:17:54.371498"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$IhTLSbRIj0N6Yispka8M7ugZq6VokV5S39k1/gyM/iZZgYKCgiNuO"], ["created_at", "2020-10-26 13:17:54.377326"], ["updated_at", "2020-10-26 13:17:54.377326"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486381]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486381]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
--------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:54 -0500
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:54 -0500
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 249ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 569)
Completed 200 OK in 252ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:54 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-10-26 08:17:54 -0500
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-10-26 08:17:54 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Destroy (0.7ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 1.8ms | Allocations: 1594)
Completed 200 OK in 6ms (Views: 2.7ms | ActiveRecord: 0.9ms | Allocations: 3726)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:54 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 242ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:55 -0500
Completed 200 OK in 243ms (Views: 0.3ms | ActiveRecord: 0.8ms | Allocations: 568)
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:55 -0500
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 08:17:55 -0500
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-10-26 08:17:55 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 1.0ms | ActiveRecord: 0.8ms | Allocations: 1581)
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-10-26 13:17:55.394256"], ["updated_at", "2020-10-26 13:17:55.394256"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 201 Created in 8ms (Views: 0.6ms | ActiveRecord: 1.1ms | Allocations: 3407)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:55 -0500
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 243ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:55 -0500
Completed 200 OK in 242ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:55 -0500
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 08:17:55 -0500
Completed 200 OK in 240ms (Views: 0.3ms | ActiveRecord: 0.1ms | Allocations: 560)
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 08:17:55 -0500
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 404 Not Found in 4ms (Views: 0.2ms | ActiveRecord: 0.9ms | Allocations: 1458)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-10-26 13:17:55.896299"], ["updated_at", "2020-10-26 13:17:55.896299"], ["admon", "80000"], ["rooms", "3"]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:55 -0500
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 6ms (Views: 0.4ms | ActiveRecord: 1.1ms | Allocations: 2739)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 242ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 244ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 239ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 08:17:56 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[36mProperty Update (0.4ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-10-26 13:17:56.392079"], ["id", 1]]
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 08:17:56 -0500
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.5ms | ActiveRecord: 1.3ms | Allocations: 4110)
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:56 -0500
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 13:17:56.404584"], ["updated_at", "2020-10-26 13:17:56.404584"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 13ms (Views: 0.6ms | ActiveRecord: 1.6ms | Allocations: 2578)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 245ms (Views: 0.4ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 242ms (Views: 0.3ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 560)
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-10-26 08:17:56 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 404 Not Found in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1458)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:56 -0500
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 08:17:56 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.6ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-10-26 13:17:56.907106"], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.4ms | ActiveRecord: 1.8ms | Allocations: 2785)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 243ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 242ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 08:17:57 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 13:17:57.394435"], ["updated_at", "2020-10-26 13:17:57.394435"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 7ms (Views: 0.6ms | ActiveRecord: 1.2ms | Allocations: 2721)
Completed 200 OK in 240ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 08:17:57 -0500
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 123)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:57 -0500
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 242ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-10-26 08:17:57 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 120)
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 08:17:57 -0500
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:57 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 8ms (Views: 0.4ms | ActiveRecord: 1.7ms | Allocations: 2367)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 248ms (Views: 0.4ms | ActiveRecord: 0.1ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 247ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 08:17:58 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 3ms (Views: 1.4ms | ActiveRecord: 0.4ms | Allocations: 2064)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-10-26 08:17:58 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 9ms (Views: 0.2ms | ActiveRecord: 1.0ms | Allocations: 3695)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 247ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 246ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 247ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-10-26 08:17:58 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 251ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 08:17:58 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.6ms | Allocations: 1433)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 251ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 254ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 248ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 08:17:59 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 9ms (Views: 0.3ms | ActiveRecord: 1.4ms | Allocations: 1941)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 254ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:59 -0500
Processing by Api::V1::UsersController#login as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 363)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 250ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 249ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 08:17:59 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 1595)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-10-26 08:17:59 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$LcO/mP0GDUQwnViYxfqI5.8OTbcokdoN7MfAzoNdU96x57fPYJMUS"], ["created_at", "2020-10-26 13:17:59.954672"], ["updated_at", "2020-10-26 13:17:59.954672"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 4ms (Views: 0.3ms | ActiveRecord: 0.9ms | Allocations: 1491)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:17:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 243ms (Views: 0.3ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:18:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 243ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:18:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-10-26 08:18:00 -0500
Processing by Api::V1::UsersController#update as JSON
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-10-26 13:18:00.421544"], ["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 1.2ms | Allocations: 2462)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:18:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 243ms (Views: 1.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:18:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 269)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:18:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:18:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:18:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 08:18:00 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 1029)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:18:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 241ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 08:18:00 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 7ms (Views: 0.7ms | ActiveRecord: 0.5ms | Allocations: 1859)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:18:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 254ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:18:01 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 253ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 08:18:01 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 242ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 08:18:01 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 1595)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_have_successfully_created_a_property
--------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 13:18:01.429199"], ["updated_at", "2020-10-26 13:18:01.429199"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 248ms (ActiveRecord: 0.2ms | Allocations: 359)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (11.8ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (3.6ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1005.6ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (1005.7ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.6ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 15:35:19.093817', '2020-10-26 15:35:19.093817', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 15:35:19.093817', '2020-10-26 15:35:19.093817', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$/d7daUCJIQoVw0cHxpH0ee9dkwzg1jXWlCPGpWUb1lO87ruPEtux.', '2020-10-26 15:35:19.093817', '2020-10-26 15:35:19.093817', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$4PZDjQeuhUniR/GhPvVLtOgb8g54T4Lr.EO6.FPkSsYI1XVXQucLe', '2020-10-26 15:35:19.093817', '2020-10-26 15:35:19.093817', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$ejme4mlR/dsNkmqHN9qczO1fhikSlrBylBODx2nzmW5aEqqDxfMni', '2020-10-26 15:35:19.093817', '2020-10-26 15:35:19.093817', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:35:19.106834', '2020-10-26 15:35:19.106834', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:35:19.106834', '2020-10-26 15:35:19.106834', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:35:19.106834', '2020-10-26 15:35:19.106834', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:35:19.106834', '2020-10-26 15:35:19.106834', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 15:35:19.106834', '2020-10-26 15:35:19.106834', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 15:35:19.106834', '2020-10-26 15:35:19.106834', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 15:35:19.115750', '2020-10-26 15:35:19.115750', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 15:35:19.115750', '2020-10-26 15:35:19.115750', DEFAULT, DEFAULT)[0m
  [1m[35m (34.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.3ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 15:35:19.140949', '2020-10-26 15:35:19.140949', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 15:35:19.140949', '2020-10-26 15:35:19.140949', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$48CWkQ9QxA2YMc6AV0foC.jLaz4hTCmDr6n9ByQyslVlFT4MRGbhq', '2020-10-26 15:35:19.140949', '2020-10-26 15:35:19.140949', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$FX6aJVuqES6roIYczZqUj.I6aakLn/G9wjKZWNPXLJxLS/K7uI16W', '2020-10-26 15:35:19.140949', '2020-10-26 15:35:19.140949', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$UcByoPKGZC9B.nWz9tTTke1lj0VoMymnYkV9apDnzfQPzAD1Y00WW', '2020-10-26 15:35:19.140949', '2020-10-26 15:35:19.140949', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:35:19.161853', '2020-10-26 15:35:19.161853', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:35:19.161853', '2020-10-26 15:35:19.161853', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:35:19.161853', '2020-10-26 15:35:19.161853', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:35:19.161853', '2020-10-26 15:35:19.161853', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 15:35:19.161853', '2020-10-26 15:35:19.161853', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 15:35:19.161853', '2020-10-26 15:35:19.161853', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 15:35:19.168988', '2020-10-26 15:35:19.168988', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 15:35:19.168988', '2020-10-26 15:35:19.168988', DEFAULT, DEFAULT)[0m
  [1m[35m (13.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:19 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:19 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 514ms (Views: 1.7ms | ActiveRecord: 0.5ms | Allocations: 6586)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:20 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 505ms (Views: 1.3ms | ActiveRecord: 10.6ms | Allocations: 6586)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:20 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 282ms (Views: 1.7ms | ActiveRecord: 2.3ms | Allocations: 560)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-10-26 10:35:20 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
Completed 200 OK in 67ms (Views: 9.9ms | ActiveRecord: 1.6ms | Allocations: 5904)
  [1m[35m (10.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:20 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 373ms (Views: 2.0ms | ActiveRecord: 0.3ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 10:35:20 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.6ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-10-26 15:35:20.725262"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 170ms (Views: 0.5ms | ActiveRecord: 3.2ms | Allocations: 27003)
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:20 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 397ms (Views: 1.3ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:20 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 301ms (Views: 1.5ms | ActiveRecord: 1.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 308ms (Views: 0.5ms | ActiveRecord: 0.8ms | Allocations: 561)
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-10-26 10:35:21 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 123)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 455ms (Views: 1.1ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 10:35:21 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 404 Not Found in 8ms (Views: 0.2ms | ActiveRecord: 3.5ms | Allocations: 1458)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 456ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 446ms (Views: 2.1ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 457ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 10:35:22 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:22 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 291ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-10-26 10:35:22 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
Completed 200 OK in 23ms (Views: 3.2ms | ActiveRecord: 2.0ms | Allocations: 3651)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.6ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:22 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (12.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 340ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:22 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (5.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 339ms (Views: 1.0ms | ActiveRecord: 12.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:22 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 374ms (Views: 0.5ms | ActiveRecord: 5.8ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 10:35:22 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.7ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-10-26 15:35:22.973511"], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 157ms (Views: 0.5ms | ActiveRecord: 2.7ms | Allocations: 24794)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:22 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 408ms (Views: 0.7ms | ActiveRecord: 0.5ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:35:23 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 15:35:23.085406"], ["updated_at", "2020-10-26 15:35:23.085406"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 11ms (Views: 1.2ms | ActiveRecord: 1.9ms | Allocations: 2753)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 473ms (Views: 1.9ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 395ms (Views: 2.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 336ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:35:23 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.9ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-10-26 15:35:23.814125"], ["updated_at", "2020-10-26 15:35:23.814125"], ["admon", "80000"], ["rooms", "3"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 21ms (Views: 4.7ms | ActiveRecord: 2.0ms | Allocations: 2796)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
Completed 200 OK in 332ms (Views: 0.4ms | ActiveRecord: 0.5ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:23 -0500
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-10-26 10:35:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.6ms | Allocations: 1458)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 571ms (Views: 1.1ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 677ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 547ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (4.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:35:24 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 483ms (Views: 1.8ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:35:25 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (2.7ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 15:35:25.018594"], ["updated_at", "2020-10-26 15:35:25.018594"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Completed 201 Created in 33ms (Views: 0.7ms | ActiveRecord: 4.8ms | Allocations: 2578)
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-10-26 15:35:25.021981"], ["updated_at", "2020-10-26 15:35:25.021981"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 18ms (Views: 0.8ms | ActiveRecord: 1.9ms | Allocations: 2704)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
  [1m[35m (6.6ms)[0m  [1m[31mROLLBACK[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_create,_save,_and_destroy_a_property
--------------------------------------------------------------
  [1m[35m (4.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (19.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.8ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 15:35:25.099232"], ["updated_at", "2020-10-26 15:35:25.099232"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 13]]
  [1m[36mProperty Load (0.9ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[36mProperty Destroy (3.7ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 13]]
  [1m[36mProperty Exists? (6.4ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PropertyTest: test_Should_create_a_property
-------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["hood", "Belen"], ["city", "Pizza"], ["user_id", 99], ["created_at", "2020-10-26 15:35:25.142308"], ["updated_at", "2020-10-26 15:35:25.142308"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_a_user_id
-----------------------------------------------------------------
  [1m[35m (2.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_elevator_attribute
---------------------------------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "elevator") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 15:35:25.182230"], ["updated_at", "2020-10-26 15:35:25.182230"], ["build_area", "hola"], ["elevator", true]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_have_successfully_created_a_property
--------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.1ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 15:35:25.202888"], ["updated_at", "2020-10-26 15:35:25.202888"]]
  [1m[35m (2.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_the_proper_built_type
-----------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (3.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
  [1m[35m (8.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (6.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$LYmTREwmNk7femtoJ8fu/uR2xbavNX/06FOeG0ABssq3Gu8OUY/R2"], ["created_at", "2020-10-26 15:35:25.272849"], ["updated_at", "2020-10-26 15:35:25.272849"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (2.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (4.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$2oIQj7kmLHlJUer/ncW6VOdg4zpuVtxGNVtYBTdNaZ.gfS9v7psE6"], ["created_at", "2020-10-26 15:35:25.337577"], ["updated_at", "2020-10-26 15:35:25.337577"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$R8mU2Sbih3omo46.4VJazemZjYvRS02bYvsiRurrt52l4IFxwTuDO"], ["created_at", "2020-10-26 15:35:25.356846"], ["updated_at", "2020-10-26 15:35:25.356846"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (7.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (1.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (8.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$KagEkagGN6CYqONl.q8OkeVCOLzUfqKjI0x/gRcpuDLY0fRZsh4sS"], ["created_at", "2020-10-26 15:35:25.414164"], ["updated_at", "2020-10-26 15:35:25.414164"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (10.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$p8GDmz4FdGn8pJfRKZySweaFKPRcj1gQ/482sIYuBB9SGOlgjmF56"], ["created_at", "2020-10-26 15:35:25.457760"], ["updated_at", "2020-10-26 15:35:25.457760"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (7.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
Completed 200 OK in 461ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:25 -0500
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$So/VbmJkso6vy0P0hqZU.OpmtplvYX9T.caPnIFrWfHgROazu5O4q"], ["created_at", "2020-10-26 15:35:25.510129"], ["updated_at", "2020-10-26 15:35:25.510129"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[35m (6.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[36mUser Destroy (2.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (5.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (6.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (3.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$1RH5.CKRkj.X8PbuV25ag.8VopWZBpc3PBDUYWnOP9Uqx3q/izZAO"], ["created_at", "2020-10-26 15:35:25.559852"], ["updated_at", "2020-10-26 15:35:25.559852"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486381]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486381]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$0ep.QHPp0oXdmfLbo6O7oO/XDeYix5iX9GOhFTBvks20cG0.1o6Gm"], ["created_at", "2020-10-26 15:35:25.591996"], ["updated_at", "2020-10-26 15:35:25.591996"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486382]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486382]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
  [1m[35m (4.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$93KbDooU24lQom.S0dZ3ru8lzojNIQ0Khg3jmpaIERrscA.3W0eEW"], ["created_at", "2020-10-26 15:35:25.619022"], ["updated_at", "2020-10-26 15:35:25.619022"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486383]]
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486383]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$tgkTWE8qJRSRdhubh6xNKuIXCB1XMq.YRJ5eNCSS4ix3M29A8xek6"], ["created_at", "2020-10-26 15:35:25.648945"], ["updated_at", "2020-10-26 15:35:25.648945"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486384]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486384]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$XGcnWD5uhRKX7D2SGCczfeQzVbK5JQVmOhMOJ3w8suaeoQuT3of3O"], ["created_at", "2020-10-26 15:35:25.684584"], ["updated_at", "2020-10-26 15:35:25.684584"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486385]]
  [1m[36mUser Destroy (1.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486385]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 440ms (Views: 1.3ms | ActiveRecord: 3.2ms | Allocations: 560)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-10-26 10:35:25 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (1.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Destroy (0.6ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 3.1ms | Allocations: 1561)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 409ms (Views: 2.8ms | ActiveRecord: 0.5ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 316ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 347ms (Views: 0.9ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 3ms (Views: 0.3ms | ActiveRecord: 2.0ms | Allocations: 269)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 273ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (2.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-10-26 10:35:26 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$UPU4TLGLK/ui9o2mkIjIY.SqFFCstZL7hB3o9GQB7Gb1062XBkIhe"], ["created_at", "2020-10-26 15:35:26.605426"], ["updated_at", "2020-10-26 15:35:26.605426"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 14ms (Views: 0.5ms | ActiveRecord: 4.1ms | Allocations: 2153)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 307ms (Views: 3.7ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 418ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 353ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Completed 200 OK in 317ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 10:35:27 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:27 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
Processing by Api::V1::UsersController#login as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 6ms (Views: 0.4ms | ActiveRecord: 0.6ms | Allocations: 1595)
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (10.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 401 Unauthorized in 15ms (Views: 3.5ms | ActiveRecord: 10.0ms | Allocations: 365)
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:27 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:27 -0500
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 350ms (Views: 0.6ms | ActiveRecord: 0.7ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:27 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 385ms (Views: 0.5ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:27 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 339ms (Views: 1.0ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (1.6ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "new_name"], ["updated_at", "2020-10-26 15:35:28.084609"], ["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.9ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 439ms (Views: 1.2ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 10:35:28 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 10ms (Views: 4.0ms | ActiveRecord: 3.5ms | Allocations: 2065)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 351ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 396ms (Views: 0.5ms | ActiveRecord: 0.9ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 290ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 561)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:35:28 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.5ms | ActiveRecord: 0.7ms | Allocations: 1433)
Completed 200 OK in 287ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-10-26 10:35:28 -0500
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:28 -0500
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 13ms (Views: 0.6ms | ActiveRecord: 0.7ms | Allocations: 3507)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 334ms (Views: 2.4ms | ActiveRecord: 1.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 391ms (Views: 0.6ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 307ms (Views: 0.5ms | ActiveRecord: 0.7ms | Allocations: 560)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:35:29 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 361ms (Views: 0.6ms | ActiveRecord: 0.8ms | Allocations: 560)
Completed 204 No Content in 8ms (Views: 0.7ms | ActiveRecord: 1.9ms | Allocations: 1956)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:35:29 -0500
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:29 -0500
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 7ms (Views: 1.5ms | ActiveRecord: 1.3ms | Allocations: 1859)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 379ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 473ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 295ms (Views: 1.2ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:35:30 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (2.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 14ms (Views: 0.5ms | ActiveRecord: 4.4ms | Allocations: 2367)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 359ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 10:35:30 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 25ms (Views: 0.5ms | ActiveRecord: 4.6ms | Allocations: 1595)
  [1m[35m (16.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (13.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 427ms (Views: 0.6ms | ActiveRecord: 0.9ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 500ms (Views: 0.6ms | ActiveRecord: 13.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 438ms (Views: 0.9ms | ActiveRecord: 1.1ms | Allocations: 560)
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-10-26 10:35:31 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 123)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 361ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-10-26 10:35:31 -0500
Processing by Api::V1::UsersController#update as JSON
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-10-26 15:35:31.306938"], ["id", 100]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.4ms | ActiveRecord: 2.7ms | Allocations: 2463)
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 331ms (Views: 0.5ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 349ms (Views: 0.9ms | ActiveRecord: 0.9ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 268ms (Views: 1.1ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 10:35:31 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 1029)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 406ms (Views: 5.0ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 465ms (Views: 0.6ms | ActiveRecord: 0.8ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 512ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (8.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-10-26 10:35:32 -0500
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.8ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-10-26 15:35:32.650497"], ["updated_at", "2020-10-26 15:35:32.650497"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued PhotoQualityJob (Job ID: 0b863c24-09ba-4e2a-b708-d6f347d47d94) to Test(default) with arguments: 298486375
Completed 201 Created in 24ms (Views: 0.5ms | ActiveRecord: 2.5ms | Allocations: 7799)
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (4.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 503ms (Views: 2.1ms | ActiveRecord: 0.4ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 363ms (Views: 0.7ms | ActiveRecord: 2.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
Completed 200 OK in 323ms (Views: 1.0ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 10:35:33 -0500
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mPhoto Load (1.2ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 7ms (Views: 1.7ms | ActiveRecord: 2.0ms | Allocations: 1839)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 487ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 621ms (Views: 0.8ms | ActiveRecord: 0.5ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 308ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 427ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 10:35:34 -0500
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (3.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.4ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 19ms (Views: 0.6ms | ActiveRecord: 4.6ms | Allocations: 1570)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 292ms (Views: 0.9ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 10:35:34 -0500
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.2ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.3ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 26ms (Views: 0.2ms | ActiveRecord: 2.6ms | Allocations: 6315)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 382ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 572ms (Views: 0.5ms | ActiveRecord: 2.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 374ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 386ms (Views: 1.3ms | ActiveRecord: 1.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:35:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 397ms (Views: 1.7ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 10:35:35 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (10.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 34ms (Views: 2.0ms | ActiveRecord: 11.2ms | Allocations: 1596)
  [1m[35m (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PhotoTest: test_Should_successfully_create_a_photo
--------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Completed 200 OK in 423ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[36mProperty Load (0.9ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-10-26 10:35:35 -0500
  [1m[36mPhoto Create (0.9ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.zeldadeprueba.com"], ["property_id", 2], ["created_at", "2020-10-26 15:35:35.561127"], ["updated_at", "2020-10-26 15:35:35.561127"]]
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
PhotoTest: test_Should_create,_save_and_delete_a_property,_as_well_as_inspecting_the_link
-----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.5ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.linkdeprueba.com"], ["property_id", 1], ["created_at", "2020-10-26 15:35:35.579265"], ["updated_at", "2020-10-26 15:35:35.579265"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.3ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 298486376]]
  [1m[36mPhoto Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "photos" WHERE "photos"."property_id" = $1 LIMIT $2[0m  [["property_id", 1], ["LIMIT", 1]]
  [1m[35m (2.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_property_id
---------------------------------------------------------------
-------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_url
-------------------------------------------------------
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.7ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1421.6ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1434.5ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (2.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.0ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 15:36:12.563953', '2020-10-26 15:36:12.563953', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 15:36:12.563953', '2020-10-26 15:36:12.563953', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$gdNQ/XtOov9TgtDgXCMave6rHryf1nJGzlUVolmI8dyTygrDt9Rey', '2020-10-26 15:36:12.563953', '2020-10-26 15:36:12.563953', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$YzSiT0kZU/ay.4dyvbS06.XTMuJhgWr.JBDk5sD8wN4EwO7wu8Fqu', '2020-10-26 15:36:12.563953', '2020-10-26 15:36:12.563953', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$UfM1dXHOuC0mRahsYca.ue1rA6zNqSCRDdCPzGBW8y/LEUwCmmo.m', '2020-10-26 15:36:12.563953', '2020-10-26 15:36:12.563953', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:36:12.577279', '2020-10-26 15:36:12.577279', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:36:12.577279', '2020-10-26 15:36:12.577279', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:36:12.577279', '2020-10-26 15:36:12.577279', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:36:12.577279', '2020-10-26 15:36:12.577279', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 15:36:12.577279', '2020-10-26 15:36:12.577279', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 15:36:12.577279', '2020-10-26 15:36:12.577279', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 15:36:12.587918', '2020-10-26 15:36:12.587918', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 15:36:12.587918', '2020-10-26 15:36:12.587918', DEFAULT, DEFAULT)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.9ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 15:36:12.596997', '2020-10-26 15:36:12.596997', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 15:36:12.596997', '2020-10-26 15:36:12.596997', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$IALI0wV.LWVprRAKgTgkROMbMpfR4EH5bQDoGpn0.xE5PaIZjSFq2', '2020-10-26 15:36:12.596997', '2020-10-26 15:36:12.596997', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$9gR/OLL/OGpkxUAHIpwGwumC9mqrld7wULp/n2rhun7G5OCdXtnXy', '2020-10-26 15:36:12.596997', '2020-10-26 15:36:12.596997', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$zVmNhz4WOm6O2WB2Zi6DP.6Zb59vu9tED23bZAcq0cjs../AfarHK', '2020-10-26 15:36:12.596997', '2020-10-26 15:36:12.596997', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:36:12.612048', '2020-10-26 15:36:12.612048', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:36:12.612048', '2020-10-26 15:36:12.612048', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:36:12.612048', '2020-10-26 15:36:12.612048', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:36:12.612048', '2020-10-26 15:36:12.612048', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 15:36:12.612048', '2020-10-26 15:36:12.612048', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 15:36:12.612048', '2020-10-26 15:36:12.612048', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 15:36:12.621759', '2020-10-26 15:36:12.621759', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 15:36:12.621759', '2020-10-26 15:36:12.621759', DEFAULT, DEFAULT)[0m
  [1m[35m (33.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (14.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PhotoTest: test_Should_successfully_create_a_photo
--------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_property_id
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPhoto Create (1.0ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.zeldadeprueba.com"], ["property_id", 2], ["created_at", "2020-10-26 15:36:12.807543"], ["updated_at", "2020-10-26 15:36:12.807543"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_url
-------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
PhotoTest: test_Should_create,_save_and_delete_a_property,_as_well_as_inspecting_the_link
-----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPhoto Create (1.1ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.linkdeprueba.com"], ["property_id", 1], ["created_at", "2020-10-26 15:36:12.973740"], ["updated_at", "2020-10-26 15:36:12.973740"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.4ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 298486375]]
  [1m[36mPhoto Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "photos" WHERE "photos"."property_id" = $1 LIMIT $2[0m  [["property_id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:13 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:13 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 299ms (Views: 0.8ms | ActiveRecord: 0.5ms | Allocations: 6320)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:13 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 345ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:36:13 -0500
Completed 200 OK in 433ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 6320)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:13 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (4.1ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-10-26 15:36:13.752789"], ["updated_at", "2020-10-26 15:36:13.752789"], ["admon", "80000"], ["rooms", "3"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 47ms (Views: 6.8ms | ActiveRecord: 7.6ms | Allocations: 3792)
  [1m[35m (3.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (1.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:13 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 429ms (Views: 0.6ms | ActiveRecord: 0.7ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 10:36:14 -0500
Completed 200 OK in 368ms (Views: 0.7ms | ActiveRecord: 0.8ms | Allocations: 568)
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:14 -0500
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.7ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-10-26 15:36:14.170329"], ["id", 1]]
  [1m[35m (1.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 22ms (Views: 0.8ms | ActiveRecord: 5.1ms | Allocations: 3929)
  [1m[35m (4.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:14 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 287ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 10:36:14 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 123)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:14 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 400ms (Views: 1.0ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:14 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 346ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:14 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 277ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-10-26 10:36:14 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 404 Not Found in 5ms (Views: 0.1ms | ActiveRecord: 0.9ms | Allocations: 1458)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:14 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 420ms (Views: 0.9ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (2.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:36:15 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (1.0ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 15:36:15.279233"], ["updated_at", "2020-10-26 15:36:15.279233"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 40ms (Views: 0.6ms | ActiveRecord: 2.7ms | Allocations: 2696)
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:15 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 535ms (Views: 0.4ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:15 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 471ms (Views: 0.5ms | ActiveRecord: 1.3ms | Allocations: 560)
Completed 200 OK in 594ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:15 -0500
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:36:15 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.9ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-10-26 15:36:15.920804"], ["updated_at", "2020-10-26 15:36:15.920804"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 15ms (Views: 0.6ms | ActiveRecord: 2.0ms | Allocations: 2728)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:15 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 440ms (Views: 0.6ms | ActiveRecord: 1.6ms | Allocations: 560)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-10-26 10:36:16 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (4.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (2.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
Completed 200 OK in 48ms (Views: 5.8ms | ActiveRecord: 8.0ms | Allocations: 3703)
  [1m[35m (7.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:16 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 505ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:16 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 335ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:16 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 446ms (Views: 0.9ms | ActiveRecord: 0.5ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 10:36:16 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (4.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 404 Not Found in 19ms (Views: 0.2ms | ActiveRecord: 5.6ms | Allocations: 1458)
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:16 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (7.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 388ms (Views: 0.5ms | ActiveRecord: 3.2ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-10-26 10:36:17 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Destroy (0.6ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.3ms | ActiveRecord: 1.8ms | Allocations: 1677)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:17 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 344ms (Views: 1.3ms | ActiveRecord: 7.8ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:17 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (5.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 309ms (Views: 0.5ms | ActiveRecord: 5.4ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 10:36:17 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 391ms (Views: 1.0ms | ActiveRecord: 1.7ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:17 -0500
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.6ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-10-26 15:36:17.630569"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 20ms (Views: 0.6ms | ActiveRecord: 6.0ms | Allocations: 2724)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:17 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 366ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:36:18 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
Completed 200 OK in 365ms (Views: 0.6ms | ActiveRecord: 1.2ms | Allocations: 568)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:18 -0500
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.8ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 15:36:18.013519"], ["updated_at", "2020-10-26 15:36:18.013519"]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 201 Created in 12ms (Views: 1.3ms | ActiveRecord: 1.8ms | Allocations: 2578)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:18 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 295ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-10-26 10:36:18 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
Completed 200 OK in 10ms (Views: 5.3ms | ActiveRecord: 1.3ms | Allocations: 3650)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (2.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$gmkMW28FmZ1TYV3fEt7jIOmjDV7zl4wIjwhvxhD/whauAHtQ1F7uy"], ["created_at", "2020-10-26 15:36:18.351339"], ["updated_at", "2020-10-26 15:36:18.351339"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (2.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Destroy (2.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$dM2DjfbYqN43WjBbnPSjduFufLrmD1mLBqgP6tUiQE9LTFJuWiusu"], ["created_at", "2020-10-26 15:36:18.432124"], ["updated_at", "2020-10-26 15:36:18.432124"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (1.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$Xu9tmlK2fTVGTKOuF4TwHusENn2ATvL0jnM4STDO6JDmS1pAbTxxW"], ["created_at", "2020-10-26 15:36:18.483446"], ["updated_at", "2020-10-26 15:36:18.483446"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Completed 200 OK in 483ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:18 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (9.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (11.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[35m (6.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$jwQy0K.3V4d0HAPhP25Wl.k38MZnPqF7U8/BA/Gs5VQu/LSdd9lnC"], ["created_at", "2020-10-26 15:36:18.571668"], ["updated_at", "2020-10-26 15:36:18.571668"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$v6JwZN8babQ213cxj7mZhOIBTiA92awhixUyBdZltndiaVaQOeSTm"], ["created_at", "2020-10-26 15:36:18.579854"], ["updated_at", "2020-10-26 15:36:18.579854"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Destroy (1.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
  [1m[35m (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$/CzUjOrV6v.34ezKBOG0AuhvGq5z3vlW6PuDDErsf/9TimGr6Cboe"], ["created_at", "2020-10-26 15:36:18.613507"], ["updated_at", "2020-10-26 15:36:18.613507"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (5.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (2.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[36mUser Destroy (3.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$YNpIjzHmBK7kQJdKbmLu/erfLoRXj7n1ufpCVFUiPY8ojPzOmfhQW"], ["created_at", "2020-10-26 15:36:18.672353"], ["updated_at", "2020-10-26 15:36:18.672353"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (3.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486381]]
  [1m[36mUser Destroy (1.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486381]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$QVHFvSF2M5aZESUAQ8WAYegy73F0D7gH.LPQps7QMsljaGCDAwh7."], ["created_at", "2020-10-26 15:36:18.704475"], ["updated_at", "2020-10-26 15:36:18.704475"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486382]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (1.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486382]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
  [1m[35m (3.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$u85n9Yn618dAGiWLp2oQbeQM8/u4Pn6ZFHVpO2eeSwtv5y1RcT.Be"], ["created_at", "2020-10-26 15:36:18.744560"], ["updated_at", "2020-10-26 15:36:18.744560"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486383]]
  [1m[36mUser Destroy (0.9ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486383]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$ezbBGTo4GmACAKgwggkaxe.gKy7P8ebdeNsmE.5/7QBBG.ZTgpPdC"], ["created_at", "2020-10-26 15:36:18.820708"], ["updated_at", "2020-10-26 15:36:18.820708"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (8.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (8.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486384]]
  [1m[36mUser Destroy (2.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486384]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 360ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-10-26 10:36:18 -0500
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$xHNIrL8L4C3gYqKvnLIBt.ekcM6LeJn277kLU4OQpLrpALExMMuSu"], ["created_at", "2020-10-26 15:36:18.889448"], ["updated_at", "2020-10-26 15:36:18.889448"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:18 -0500
Processing by Api::V1::UsersController#login as JSON
  [1m[35m (5.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486385]]
  [1m[36mUser Destroy (0.9ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486385]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.8ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:18 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 349ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:19 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 365ms (Views: 0.5ms | ActiveRecord: 0.9ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:19 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 367ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:19 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 414ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:19 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 332ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 10:36:20 -0500
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.6ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 11ms (Views: 1.1ms | ActiveRecord: 2.2ms | Allocations: 1623)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:20 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 522ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 10:36:20 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 5ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1631)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:20 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 384ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:20 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 520ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:20 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 328ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:20 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 300ms (Views: 0.8ms | ActiveRecord: 0.4ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 367ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-10-26 10:36:21 -0500
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.5ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-10-26 15:36:21.220018"], ["updated_at", "2020-10-26 15:36:21.220018"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued PhotoQualityJob (Job ID: b25bc9c0-9d27-4cdc-b0dd-155c8b3210c9) to Test(default) with arguments: 298486376
Completed 201 Created in 19ms (Views: 1.8ms | ActiveRecord: 2.1ms | Allocations: 2754)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 414ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-10-26 10:36:21 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 313ms (Views: 1.2ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 407ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 398ms (Views: 0.6ms | ActiveRecord: 1.0ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 371ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:22 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 469ms (Views: 1.3ms | ActiveRecord: 0.5ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 10:36:22 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.3ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 12ms (Views: 4.1ms | ActiveRecord: 1.1ms | Allocations: 1848)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:22 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (7.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 335ms (Views: 0.6ms | ActiveRecord: 4.8ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 10:36:22 -0500
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.3ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.3ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 19ms (Views: 0.2ms | ActiveRecord: 1.7ms | Allocations: 1618)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:22 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 437ms (Views: 0.6ms | ActiveRecord: 7.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:22 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 338ms (Views: 0.6ms | ActiveRecord: 0.9ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:22 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 337ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 269)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 291ms (Views: 1.0ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 10:36:23 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 10ms (Views: 4.5ms | ActiveRecord: 0.5ms | Allocations: 2065)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 320ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 371ms (Views: 0.6ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 304ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:36:23 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 12ms (Views: 0.4ms | ActiveRecord: 3.5ms | Allocations: 1859)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 406ms (Views: 0.6ms | ActiveRecord: 4.4ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:36:24 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (2.9ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 60ms (Views: 0.5ms | ActiveRecord: 5.6ms | Allocations: 2382)
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 388ms (Views: 0.7ms | ActiveRecord: 4.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 419ms (Views: 0.7ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 355ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "new_name"], ["updated_at", "2020-10-26 15:36:24.676038"], ["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 327ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 439ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-10-26 10:36:25 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$k9OJp67/pp9Fe529FkapKeNx85BkDT1a5cVuFwkSC5bigLYKg4Nte"], ["created_at", "2020-10-26 15:36:25.072632"], ["updated_at", "2020-10-26 15:36:25.072632"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 17ms (Views: 2.7ms | ActiveRecord: 4.0ms | Allocations: 2153)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 574ms (Views: 0.4ms | ActiveRecord: 0.7ms | Allocations: 561)
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-10-26 10:36:25 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 123)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 515ms (Views: 0.8ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 372ms (Views: 1.8ms | ActiveRecord: 0.9ms | Allocations: 560)
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-10-26 10:36:26 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
Completed 200 OK in 416ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
[31mUnpermitted parameter: :format[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[35m (3.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[35m (2.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 18ms (Views: 0.2ms | ActiveRecord: 6.0ms | Allocations: 3906)
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (6.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 374ms (Views: 0.9ms | ActiveRecord: 6.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (11.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 488ms (Views: 0.4ms | ActiveRecord: 0.8ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:36:26 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (4.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 20ms (Views: 1.0ms | ActiveRecord: 9.4ms | Allocations: 1941)
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 382ms (Views: 0.6ms | ActiveRecord: 11.0ms | Allocations: 560)
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-10-26 10:36:26 -0500
Processing by Api::V1::UsersController#update as JSON
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
  [1m[36mUser Load (19.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (6.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
Completed 200 OK in 307ms (Views: 2.5ms | ActiveRecord: 1.5ms | Allocations: 568)
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Exists? (5.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Update (4.0ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-10-26 15:36:26.868147"], ["id", 100]]
  [1m[35m (6.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 65ms (Views: 0.4ms | ActiveRecord: 43.1ms | Allocations: 2498)
  [1m[35m (10.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 354ms (Views: 0.5ms | ActiveRecord: 2.8ms | Allocations: 560)
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 10:36:27 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
Completed 200 OK in 311ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:27 -0500
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 11ms (Views: 0.2ms | ActiveRecord: 5.9ms | Allocations: 1595)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:27 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 377ms (Views: 0.9ms | ActiveRecord: 2.9ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:27 -0500
Processing by Api::V1::UsersController#login as JSON
Completed 200 OK in 371ms (Views: 0.5ms | ActiveRecord: 0.9ms | Allocations: 568)
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 401 Unauthorized in 7ms (Views: 0.4ms | ActiveRecord: 2.9ms | Allocations: 365)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:27 -0500
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:27 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 317ms (Views: 0.5ms | ActiveRecord: 3.8ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:36:27 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 33ms (Views: 0.4ms | ActiveRecord: 5.5ms | Allocations: 1433)
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (8.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (6.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 499ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 343ms (Views: 0.5ms | ActiveRecord: 6.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:36:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 310ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 10:36:28 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 19ms (Views: 0.2ms | ActiveRecord: 1.9ms | Allocations: 1029)
  [1m[35m (3.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_elevator_attribute
---------------------------------------------------------------------------
  [1m[35m (5.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (2.1ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "elevator") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 15:36:28.497976"], ["updated_at", "2020-10-26 15:36:28.497976"], ["build_area", "hola"], ["elevator", true]]
  [1m[35m (3.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_have_successfully_created_a_property
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (5.2ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 15:36:28.513534"], ["updated_at", "2020-10-26 15:36:28.513534"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_the_proper_built_type
-----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_create,_save,_and_destroy_a_property
--------------------------------------------------------------
  [1m[35m (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.9ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 15:36:28.570208"], ["updated_at", "2020-10-26 15:36:28.570208"]]
  [1m[35m (5.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 16]]
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[36mProperty Destroy (6.9ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 16]]
  [1m[36mProperty Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PropertyTest: test_Should_create_a_property
-------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (10.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["hood", "Belen"], ["city", "Pizza"], ["user_id", 99], ["created_at", "2020-10-26 15:36:28.629292"], ["updated_at", "2020-10-26 15:36:28.629292"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_a_user_id
-----------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 322ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 10:36:28 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 10ms (Views: 0.2ms | ActiveRecord: 4.8ms | Allocations: 1595)
  [1m[35m (6.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.3ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (11.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (985.9ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (945.2ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (10.6ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.5ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 15:51:43.090793', '2020-10-26 15:51:43.090793', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 15:51:43.090793', '2020-10-26 15:51:43.090793', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$/M.Hfbt1obGBp5hUxEd5Ke4MUAJ0i2hkb6JfCrhArYPHAAXrIc2Xq', '2020-10-26 15:51:43.090793', '2020-10-26 15:51:43.090793', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$.3F13NeazUUMaa4EthkgPO02aq1Z8r97jsWJ4XjOPh/WpIL2dRwHW', '2020-10-26 15:51:43.090793', '2020-10-26 15:51:43.090793', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$unMnRqGumzAnPmVJtLRKd.TIC5R4J0oe9PWoX0wggjjCxvu2i3Mxa', '2020-10-26 15:51:43.090793', '2020-10-26 15:51:43.090793', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:51:43.144934', '2020-10-26 15:51:43.144934', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:51:43.144934', '2020-10-26 15:51:43.144934', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:51:43.144934', '2020-10-26 15:51:43.144934', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:51:43.144934', '2020-10-26 15:51:43.144934', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 15:51:43.144934', '2020-10-26 15:51:43.144934', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 15:51:43.144934', '2020-10-26 15:51:43.144934', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 15:51:43.168377', '2020-10-26 15:51:43.168377', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 15:51:43.168377', '2020-10-26 15:51:43.168377', DEFAULT, DEFAULT)[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.9ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.6ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 15:51:43.152514', '2020-10-26 15:51:43.152514', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 15:51:43.152514', '2020-10-26 15:51:43.152514', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$VdhQCnN48o7WX4kDBGSy4eNb3sJuo4AZxLcSI30yFxXt9oKGf40Z.', '2020-10-26 15:51:43.152514', '2020-10-26 15:51:43.152514', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$I8u3zdXtX/trwhEdzlG4weqTEQMwhzqR768FK4kyUMNcXnzqkBOPS', '2020-10-26 15:51:43.152514', '2020-10-26 15:51:43.152514', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$9Vk3yNN1rQQbjzAa1pYsy.aCPTgYWKML24W3FBz4mZOFG2pNmGGii', '2020-10-26 15:51:43.152514', '2020-10-26 15:51:43.152514', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:51:43.171161', '2020-10-26 15:51:43.171161', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:51:43.171161', '2020-10-26 15:51:43.171161', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:51:43.171161', '2020-10-26 15:51:43.171161', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:51:43.171161', '2020-10-26 15:51:43.171161', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 15:51:43.171161', '2020-10-26 15:51:43.171161', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 15:51:43.171161', '2020-10-26 15:51:43.171161', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 15:51:43.196939', '2020-10-26 15:51:43.196939', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 15:51:43.196939', '2020-10-26 15:51:43.196939', DEFAULT, DEFAULT)[0m
  [1m[35m (44.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (38.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_create,_save,_and_destroy_a_property
--------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_the_proper_built_type
-----------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 15:51:43.482022"], ["updated_at", "2020-10-26 15:51:43.482022"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 11]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[36mProperty Destroy (0.7ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 11]]
  [1m[36mProperty Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PropertyTest: test_Should_create_a_property
-------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.8ms)[0m  [1m[32mINSERT INTO "properties" ("hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["hood", "Belen"], ["city", "Pizza"], ["user_id", 99], ["created_at", "2020-10-26 15:51:43.509902"], ["updated_at", "2020-10-26 15:51:43.509902"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_elevator_attribute
---------------------------------------------------------------------------
  [1m[35m (5.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.0ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "elevator") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 15:51:43.538470"], ["updated_at", "2020-10-26 15:51:43.538470"], ["build_area", "hola"], ["elevator", true]]
  [1m[35m (6.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_a_user_id
-----------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_have_successfully_created_a_property
--------------------------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_url
-------------------------------------------------------
  [1m[36mProperty Create (1.2ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 15:51:43.592084"], ["updated_at", "2020-10-26 15:51:43.592084"]]
  [1m[35m (18.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
PhotoTest: test_Should_create,_save_and_delete_a_property,_as_well_as_inspecting_the_link
-----------------------------------------------------------------------------------------
  [1m[35m (4.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (13.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (2.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_property_id
---------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PhotoTest: test_Should_successfully_create_a_photo
--------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProperty Load (2.9ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPhoto Create (7.3ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.linkdeprueba.com"], ["property_id", 1], ["created_at", "2020-10-26 15:51:43.802309"], ["updated_at", "2020-10-26 15:51:43.802309"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPhoto Create (3.7ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.zeldadeprueba.com"], ["property_id", 2], ["created_at", "2020-10-26 15:51:43.805524"], ["updated_at", "2020-10-26 15:51:43.805524"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPhoto Destroy (2.9ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 298486375]]
  [1m[36mPhoto Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "photos" WHERE "photos"."property_id" = $1 LIMIT $2[0m  [["property_id", 1], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.9ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:44 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 317ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 847)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 412ms (Views: 1.7ms | ActiveRecord: 1.1ms | Allocations: 842)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 385ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 326ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 322ms (Views: 3.5ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 10:51:45 -0500
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
Completed 200 OK in 389ms (Views: 0.6ms | ActiveRecord: 2.6ms | Allocations: 560)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-10-26 10:51:45 -0500
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (1.0ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (7.7ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 29ms (Views: 0.2ms | ActiveRecord: 12.3ms | Allocations: 1949)
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 158)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
  [1m[35m (5.7ms)[0m  [1m[31mROLLBACK[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:45 -0500
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 383ms (Views: 1.0ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 387ms (Views: 0.6ms | ActiveRecord: 1.9ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 287ms (Views: 1.2ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 380ms (Views: 1.7ms | ActiveRecord: 0.6ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 397ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 10:51:46 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
Completed 200 OK in 309ms (Views: 1.0ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 10:51:46 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 7ms (Views: 0.3ms | ActiveRecord: 0.8ms | Allocations: 1884)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:46 -0500
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.4ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 29ms (Views: 2.7ms | ActiveRecord: 4.1ms | Allocations: 1905)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.8ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 418ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
Completed 200 OK in 381ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 568)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 373ms (Views: 1.0ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 392ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 322ms (Views: 1.1ms | ActiveRecord: 0.5ms | Allocations: 560)
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-10-26 10:51:47 -0500
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.5ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-10-26 15:51:47.481609"], ["updated_at", "2020-10-26 15:51:47.481609"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued PhotoQualityJob (Job ID: e91d7c16-9a17-4a14-8cd8-46b90b5c7514) to Test(default) with arguments: 298486376
Completed 201 Created in 20ms (Views: 1.2ms | ActiveRecord: 2.2ms | Allocations: 2760)
  [1m[35m (3.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (3.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Completed 200 OK in 412ms (Views: 0.8ms | ActiveRecord: 0.8ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:47 -0500
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 10:51:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.5ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 20ms (Views: 1.0ms | ActiveRecord: 3.5ms | Allocations: 1594)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 379ms (Views: 0.5ms | ActiveRecord: 0.9ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 565ms (Views: 0.9ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 344ms (Views: 2.2ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:51:48 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 15:51:48.283746"], ["updated_at", "2020-10-26 15:51:48.283746"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 14ms (Views: 0.8ms | ActiveRecord: 1.6ms | Allocations: 2629)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 388ms (Views: 0.5ms | ActiveRecord: 1.3ms | Allocations: 560)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-10-26 10:51:48 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (2.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
Completed 200 OK in 38ms (Views: 14.9ms | ActiveRecord: 3.1ms | Allocations: 3753)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 423ms (Views: 2.1ms | ActiveRecord: 1.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 427ms (Views: 2.7ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 445ms (Views: 7.7ms | ActiveRecord: 0.4ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 10:51:49 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.5ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-10-26 15:51:49.206977"], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.7ms | ActiveRecord: 2.0ms | Allocations: 2785)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 519ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 560)
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-10-26 10:51:49 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 404 Not Found in 5ms (Views: 0.2ms | ActiveRecord: 1.0ms | Allocations: 1572)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 478ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 439ms (Views: 1.4ms | ActiveRecord: 1.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 352ms (Views: 0.5ms | ActiveRecord: 0.5ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:51:50 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.8ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-10-26 15:51:50.071924"], ["updated_at", "2020-10-26 15:51:50.071924"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 17ms (Views: 1.1ms | ActiveRecord: 2.8ms | Allocations: 2704)
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 410ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Completed 200 OK in 352ms (Views: 1.6ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:50 -0500
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-10-26 10:51:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (5.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Destroy (2.4ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 36ms (Views: 0.2ms | ActiveRecord: 9.8ms | Allocations: 1564)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (2.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 333ms (Views: 2.2ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 10:51:50 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 123)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 421ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 316ms (Views: 0.7ms | ActiveRecord: 0.9ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 404ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-10-26 10:51:51 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 321ms (Views: 0.6ms | ActiveRecord: 0.5ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 10:51:51 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (6.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (7.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.6ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-10-26 15:51:51.488927"], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 31ms (Views: 0.7ms | ActiveRecord: 19.4ms | Allocations: 2724)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (6.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 362ms (Views: 2.1ms | ActiveRecord: 2.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 308ms (Views: 0.7ms | ActiveRecord: 6.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 364ms (Views: 2.2ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-10-26 10:51:52 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
Completed 200 OK in 14ms (Views: 5.2ms | ActiveRecord: 1.5ms | Allocations: 3649)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.8ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (5.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 535ms (Views: 13.7ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:51:52 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
  [1m[36mUser Load (3.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (6.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (7.7ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 15:51:52.326164"], ["updated_at", "2020-10-26 15:51:52.326164"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 39ms (Views: 0.6ms | ActiveRecord: 19.4ms | Allocations: 2769)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 501ms (Views: 0.6ms | ActiveRecord: 5.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (8.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 466ms (Views: 3.0ms | ActiveRecord: 1.1ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 400ms (Views: 0.5ms | ActiveRecord: 8.4ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:51:53 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (2.2ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-10-26 15:51:53.162718"], ["updated_at", "2020-10-26 15:51:53.162718"], ["admon", "80000"], ["rooms", "3"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 18ms (Views: 0.9ms | ActiveRecord: 4.3ms | Allocations: 2736)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$JNSVQQCPpcSLMJ93ThImt.lfScFL8n4U3Kj2Dp9nzGCa0a0MPjldO"], ["created_at", "2020-10-26 15:51:53.191050"], ["updated_at", "2020-10-26 15:51:53.191050"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$/lRkepRpRk6DJCwVQxStc.zZ.Ue12VDLsiGszg.1IBfRj/Za1P6hm"], ["created_at", "2020-10-26 15:51:53.240269"], ["updated_at", "2020-10-26 15:51:53.240269"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
Completed 200 OK in 428ms (Views: 1.2ms | ActiveRecord: 0.3ms | Allocations: 560)
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 10:51:53 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 404 Not Found in 5ms (Views: 0.4ms | ActiveRecord: 1.1ms | Allocations: 1458)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$pgLSZ0HhtVIFEzhhTOWB1eJS64zPK0ZCshkWtZZ1W75783t8.TgKm"], ["created_at", "2020-10-26 15:51:53.277377"], ["updated_at", "2020-10-26 15:51:53.277377"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (5.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[35m (1.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$RaKoMUFLZMqRyCCvwCo8EeUjjicyN1sq/612d...HO9xuoJycBKRa"], ["created_at", "2020-10-26 15:51:53.306170"], ["updated_at", "2020-10-26 15:51:53.306170"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (6.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Destroy (4.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (3.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (12.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$oRHTRsuLIvfMDVmciwfRG./bhVn7c1qVmfNBmjCXPLoT8EYI9MpI."], ["created_at", "2020-10-26 15:51:53.343523"], ["updated_at", "2020-10-26 15:51:53.343523"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$J9uMHE5G9DK91HpsvnMWruaZM4Nx80T.m4TOTMGBOHG.S3Fk9BvVG"], ["created_at", "2020-10-26 15:51:53.356260"], ["updated_at", "2020-10-26 15:51:53.356260"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Create (2.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$EooEvDPcbrKCp96hpFMt6.HfIKnlNzflAsTfkZg3wZpQjgW3Ygbqy"], ["created_at", "2020-10-26 15:51:53.354852"], ["updated_at", "2020-10-26 15:51:53.354852"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (1.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (2.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
  [1m[35m (4.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$GlYt2zTkXQmsXRn9s1zLN.tbmbFsLSKEApQlHWqaMZPWzShQMUWEu"], ["created_at", "2020-10-26 15:51:53.414030"], ["updated_at", "2020-10-26 15:51:53.414030"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$mZUC8poy/ygqKUtdzGu.Uel7moQV1OQCzj9I9XYC7ljuhHU0JQAv."], ["created_at", "2020-10-26 15:51:53.416267"], ["updated_at", "2020-10-26 15:51:53.416267"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (9.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[36mUser Destroy (2.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$W9jqELhdxY2d7DRFzrIIQuo9ciVpIsxIs7uNGdLQTc4BihLy3a/di"], ["created_at", "2020-10-26 15:51:53.461316"], ["updated_at", "2020-10-26 15:51:53.461316"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$ztNOd8P2sXCFGn0Npvr92ev4uKEwSHtxSYlMkv2UYF8rnZedmr/T."], ["created_at", "2020-10-26 15:51:53.459827"], ["updated_at", "2020-10-26 15:51:53.459827"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (1.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Destroy (1.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Destroy (1.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (2.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 376ms (Views: 0.7ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 375ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 311ms (Views: 0.7ms | ActiveRecord: 1.5ms | Allocations: 560)
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-10-26 10:51:54 -0500
Processing by Api::V1::UsersController#update as JSON
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-10-26 15:51:54.214036"], ["id", 100]]
  [1m[35m (8.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 27ms (Views: 0.4ms | ActiveRecord: 13.7ms | Allocations: 2498)
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 436ms (Views: 1.0ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 10:51:54 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 17ms (Views: 2.1ms | ActiveRecord: 0.6ms | Allocations: 2064)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 360ms (Views: 0.6ms | ActiveRecord: 1.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 268ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-10-26 10:51:54 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 8ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 3777)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 523ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 275ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 315ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:51:55 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 9ms (Views: 1.4ms | ActiveRecord: 1.8ms | Allocations: 1941)
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 372ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:51:55 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 13ms (Views: 0.5ms | ActiveRecord: 0.9ms | Allocations: 1433)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 319ms (Views: 1.3ms | ActiveRecord: 1.9ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 408ms (Views: 1.8ms | ActiveRecord: 2.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 433ms (Views: 1.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 3ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 269)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.9ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 407ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:51:56 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 372ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 33ms (Views: 0.5ms | ActiveRecord: 1.1ms | Allocations: 1859)
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 397ms (Views: 0.5ms | ActiveRecord: 0.8ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:56 -0500
Processing by Api::V1::UsersController#login as JSON
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 401 Unauthorized in 6ms (Views: 0.3ms | ActiveRecord: 0.6ms | Allocations: 365)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 388ms (Views: 11.9ms | ActiveRecord: 0.6ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 301ms (Views: 0.9ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 508ms (Views: 0.7ms | ActiveRecord: 3.0ms | Allocations: 560)
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 10:51:57 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 51ms (Views: 0.1ms | ActiveRecord: 1.9ms | Allocations: 1595)
  [1m[35m (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 383ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (2.2ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "new_name"], ["updated_at", "2020-10-26 15:51:57.570081"], ["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 416ms (Views: 1.1ms | ActiveRecord: 5.0ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 542ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 529ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 10:51:58 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 7ms (Views: 0.2ms | ActiveRecord: 2.4ms | Allocations: 1029)
  [1m[35m (10.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (7.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 471ms (Views: 0.9ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:51:58 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 8ms (Views: 0.5ms | ActiveRecord: 1.4ms | Allocations: 2367)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 303ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 534ms (Views: 0.8ms | ActiveRecord: 7.0ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 449ms (Views: 7.6ms | ActiveRecord: 1.7ms | Allocations: 560)
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-10-26 10:51:59 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 471ms (Views: 0.7ms | ActiveRecord: 1.9ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 10:51:59 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.1ms | ActiveRecord: 0.5ms | Allocations: 1595)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 348ms (Views: 0.9ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:51:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 400ms (Views: 0.8ms | ActiveRecord: 0.7ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-10-26 10:52:00 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$.ZXpjKwwr6s89Zjwv4TtfuJPbtTUoM6TGVvvgpj5Q4qPD6STydb0K"], ["created_at", "2020-10-26 15:52:00.209284"], ["updated_at", "2020-10-26 15:52:00.209284"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 18ms (Views: 0.6ms | ActiveRecord: 2.0ms | Allocations: 1491)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1057.2ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1068.7ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.2ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 15:52:22.681149', '2020-10-26 15:52:22.681149', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 15:52:22.681149', '2020-10-26 15:52:22.681149', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$QyjZ1kC3.TTSfwMXlaE1NOC1kpoE0rI3a4b1/pMQPzsniKipxovo2', '2020-10-26 15:52:22.681149', '2020-10-26 15:52:22.681149', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$fycHBEYEOPhWXUywBvgbbeIwlB93xH4WzrPE4oBV/GXmLIquQROmC', '2020-10-26 15:52:22.681149', '2020-10-26 15:52:22.681149', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$.wHUWdWH9MHJJmjbfedZXuixrcbLh5VZyows5gj2EknNegsuYcfHy', '2020-10-26 15:52:22.681149', '2020-10-26 15:52:22.681149', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:52:22.696389', '2020-10-26 15:52:22.696389', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:52:22.696389', '2020-10-26 15:52:22.696389', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:52:22.696389', '2020-10-26 15:52:22.696389', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:52:22.696389', '2020-10-26 15:52:22.696389', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 15:52:22.696389', '2020-10-26 15:52:22.696389', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 15:52:22.696389', '2020-10-26 15:52:22.696389', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 15:52:22.705495', '2020-10-26 15:52:22.705495', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 15:52:22.705495', '2020-10-26 15:52:22.705495', DEFAULT, DEFAULT)[0m
  [1m[35m (70.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_create,_save,_and_destroy_a_property
--------------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 15:52:22.783439', '2020-10-26 15:52:22.783439', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 15:52:22.783439', '2020-10-26 15:52:22.783439', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$WPs3VLgJo13rpnSn5XVygOU/LDiFH5EgP/A4d9Qkw498B1sX.IsV.', '2020-10-26 15:52:22.783439', '2020-10-26 15:52:22.783439', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$tudjTcBqAe8.6Ilv/rv/KuKNjL2yixvIh9pngjFKSA88pWjuV9.I6', '2020-10-26 15:52:22.783439', '2020-10-26 15:52:22.783439', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$e4YbkEKuTzVdH2lZ.rDbSejdjN2g7ZfcTWiNZIEVZuFda5VQ3HDHO', '2020-10-26 15:52:22.783439', '2020-10-26 15:52:22.783439', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:52:22.805869', '2020-10-26 15:52:22.805869', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:52:22.805869', '2020-10-26 15:52:22.805869', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:52:22.805869', '2020-10-26 15:52:22.805869', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:52:22.805869', '2020-10-26 15:52:22.805869', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 15:52:22.805869', '2020-10-26 15:52:22.805869', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 15:52:22.805869', '2020-10-26 15:52:22.805869', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 15:52:22.821177', '2020-10-26 15:52:22.821177', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 15:52:22.821177', '2020-10-26 15:52:22.821177', DEFAULT, DEFAULT)[0m
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (2.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PropertyTest: test_Should_create_a_property
-------------------------------------------
  [1m[35m (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.1ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 15:52:23.105080"], ["updated_at", "2020-10-26 15:52:23.105080"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["hood", "Belen"], ["city", "Pizza"], ["user_id", 99], ["created_at", "2020-10-26 15:52:23.108912"], ["updated_at", "2020-10-26 15:52:23.108912"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_elevator_attribute
---------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "elevator") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 15:52:23.123997"], ["updated_at", "2020-10-26 15:52:23.123997"], ["build_area", "hola"], ["elevator", true]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 11]]
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_have_successfully_created_a_property
--------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Destroy (2.1ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 11]]
  [1m[36mProperty Create (0.8ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 15:52:23.156620"], ["updated_at", "2020-10-26 15:52:23.156620"]]
  [1m[36mProperty Exists? (2.7ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_a_user_id
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
-----------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_the_proper_built_type
-----------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 340ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 842)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (10.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 423ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 847)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 358ms (Views: 0.5ms | ActiveRecord: 10.5ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 418ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 373ms (Views: 1.2ms | ActiveRecord: 0.8ms | Allocations: 560)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-10-26 10:52:24 -0500
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.6ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-10-26 15:52:24.549359"], ["updated_at", "2020-10-26 15:52:24.549359"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued PhotoQualityJob (Job ID: 50e7d334-d748-4ab1-9319-e5236819a7f1) to Test(default) with arguments: 298486375
Completed 201 Created in 75ms (Views: 0.7ms | ActiveRecord: 4.6ms | Allocations: 8204)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (10.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 469ms (Views: 2.3ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-10-26 10:52:24 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 158)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 476ms (Views: 1.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 502ms (Views: 0.8ms | ActiveRecord: 2.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 333ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 304ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 312ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 10:52:25 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (7.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 21ms (Views: 0.4ms | ActiveRecord: 8.9ms | Allocations: 1599)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 310ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 10:52:25 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.3ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 13ms (Views: 1.7ms | ActiveRecord: 1.3ms | Allocations: 4203)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 386ms (Views: 1.0ms | ActiveRecord: 1.8ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 352ms (Views: 1.0ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 290ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 533ms (Views: 0.4ms | ActiveRecord: 3.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 284ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 10:52:26 -0500
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.2ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.3ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 18ms (Views: 0.1ms | ActiveRecord: 1.6ms | Allocations: 6315)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
  [1m[35m (8.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$95PuUxBNkub5k2zoEtBrM.yhBZS5sJTxai4ql8XczUQPw1MlCBNau"], ["created_at", "2020-10-26 15:52:26.987799"], ["updated_at", "2020-10-26 15:52:26.987799"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (6.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (19.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$Zv9HsjoDdQDXMxL45mnwauL7CW3W8aHtjn2QM1jZtyqniuDVgIImy"], ["created_at", "2020-10-26 15:52:27.043174"], ["updated_at", "2020-10-26 15:52:27.043174"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (3.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$DrMgsBcbIKu12os4g1BZQeLJ.kcQjxU3QA.wuz00v2uxVRweRrpG2"], ["created_at", "2020-10-26 15:52:27.057429"], ["updated_at", "2020-10-26 15:52:27.057429"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Destroy (6.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
  [1m[35m (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
Completed 200 OK in 393ms (Views: 0.7ms | ActiveRecord: 0.6ms | Allocations: 560)
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 10:52:27 -0500
  [1m[36mUser Create (12.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$sv.f/6.WThtt1kSj18TEhuqaAc/RBf/AFNm/BqNG1Fg.UGktUBYjq"], ["created_at", "2020-10-26 15:52:27.097177"], ["updated_at", "2020-10-26 15:52:27.097177"], ["full_name", "valid"], ["cellphone", "3001234567"]]
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[35m (1.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.3ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 7ms (Views: 0.6ms | ActiveRecord: 1.2ms | Allocations: 1570)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (10.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$TjzYpbNlcrdzQxATIzGBp.Jr7.f0YWuGZQQ5FxQo6jdVGSwiFm9X2"], ["created_at", "2020-10-26 15:52:27.134834"], ["updated_at", "2020-10-26 15:52:27.134834"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (2.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (2.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (2.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$IJhMbmlbnCNX539QQ2wmNOCB3o/Cc.MqiFhoMAlsxfPonWxVO15uS"], ["created_at", "2020-10-26 15:52:27.150648"], ["updated_at", "2020-10-26 15:52:27.150648"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (1.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (7.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (13.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[35m (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$GW/lBkAq4EVrrFcCHhHMM.vQHZvpXZNVaa1/GBVcEUhyjOAKihqJS"], ["created_at", "2020-10-26 15:52:27.196897"], ["updated_at", "2020-10-26 15:52:27.196897"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (10.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
  [1m[36mProperty Load (1.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[35m (4.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$gTq/uM0dGFarNgrtVGazNOKllF8lf18tzAF5kIdMNqpgVJFprWTxm"], ["created_at", "2020-10-26 15:52:27.239400"], ["updated_at", "2020-10-26 15:52:27.239400"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (2.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$6S5B67zUl/x6NJx2cGk9de0IntFpZirlYIx8F8aOY2oXrubQuWggy"], ["created_at", "2020-10-26 15:52:27.244732"], ["updated_at", "2020-10-26 15:52:27.244732"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Destroy (1.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (3.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$nkHXZysO6gifcv35Lu9R4OJGtYXddDruE.CGhKx4rptti53WhDzzi"], ["created_at", "2020-10-26 15:52:27.275131"], ["updated_at", "2020-10-26 15:52:27.275131"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$PRmNPL2Bq4SbYwnmF/KUiuGhM/xmY0GXeI4If5Ok7MBl0cGjNsGOO"], ["created_at", "2020-10-26 15:52:27.283020"], ["updated_at", "2020-10-26 15:52:27.283020"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
PhotoTest: test_Should_create,_save_and_delete_a_property,_as_well_as_inspecting_the_link
-----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486381]]
  [1m[36mPhoto Create (0.8ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.linkdeprueba.com"], ["property_id", 1], ["created_at", "2020-10-26 15:52:27.302599"], ["updated_at", "2020-10-26 15:52:27.302599"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486381]]
  [1m[36mPhoto Destroy (0.5ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPhoto Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "photos" WHERE "photos"."property_id" = $1 LIMIT $2[0m  [["property_id", 1], ["LIMIT", 1]]
  [1m[35m (13.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_property_id
---------------------------------------------------------------
  [1m[35m (6.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_url
-------------------------------------------------------
  [1m[35m (2.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PhotoTest: test_Should_successfully_create_a_photo
--------------------------------------------------
  [1m[35m (2.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.6ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.zeldadeprueba.com"], ["property_id", 2], ["created_at", "2020-10-26 15:52:27.351630"], ["updated_at", "2020-10-26 15:52:27.351630"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:27 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[35m (3.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:27 -0500
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 332ms (Views: 0.9ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:27 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 450ms (Views: 0.5ms | ActiveRecord: 4.5ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:27 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 282ms (Views: 0.5ms | ActiveRecord: 0.8ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 10:52:28 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1595)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 485ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:52:28 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (2.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 17ms (Views: 0.5ms | ActiveRecord: 8.0ms | Allocations: 2367)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 469ms (Views: 0.6ms | ActiveRecord: 1.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 409ms (Views: 0.5ms | ActiveRecord: 5.0ms | Allocations: 561)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "new_name"], ["updated_at", "2020-10-26 15:52:28.905404"], ["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 505ms (Views: 0.6ms | ActiveRecord: 3.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:28 -0500
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:28 -0500
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 275ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 269)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 458ms (Views: 0.5ms | ActiveRecord: 1.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 530ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 510ms (Views: 0.6ms | ActiveRecord: 2.0ms | Allocations: 560)
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 10:52:29 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (12.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 31ms (Views: 0.2ms | ActiveRecord: 12.9ms | Allocations: 1595)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 384ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-10-26 10:52:30 -0500
Processing by Api::V1::UsersController#update as JSON
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-10-26 15:52:30.140681"], ["id", 100]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 17ms (Views: 1.3ms | ActiveRecord: 7.4ms | Allocations: 2500)
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 428ms (Views: 1.1ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 474ms (Views: 0.5ms | ActiveRecord: 0.7ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 395ms (Views: 0.6ms | ActiveRecord: 2.4ms | Allocations: 560)
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-10-26 10:52:30 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
  [1m[35m (2.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 16ms (Views: 0.3ms | ActiveRecord: 2.9ms | Allocations: 3729)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 415ms (Views: 1.3ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:52:31 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (7.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (1.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 53ms (Views: 1.5ms | ActiveRecord: 12.9ms | Allocations: 1941)
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 382ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 291ms (Views: 1.4ms | ActiveRecord: 0.8ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 10:52:31 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (11.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 15ms (Views: 0.2ms | ActiveRecord: 11.8ms | Allocations: 1029)
  [1m[35m (2.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (6.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 464ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 357ms (Views: 0.7ms | ActiveRecord: 6.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 306ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:52:31 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (9.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 52ms (Views: 0.6ms | ActiveRecord: 10.1ms | Allocations: 1859)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 348ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:52:32 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 21ms (Views: 0.5ms | ActiveRecord: 1.2ms | Allocations: 1433)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (7.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 381ms (Views: 1.2ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 284ms (Views: 1.2ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-10-26 10:52:32 -0500
Completed 200 OK in 396ms (Views: 3.8ms | ActiveRecord: 7.7ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:32 -0500
Processing by Api::V1::UsersController#show as JSON
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"user_id"=>"1"}
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 309ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:33 -0500
Processing by Api::V1::UsersController#login as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 401 Unauthorized in 3ms (Views: 0.3ms | ActiveRecord: 0.3ms | Allocations: 363)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 457ms (Views: 0.6ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 417ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 385ms (Views: 0.8ms | ActiveRecord: 0.5ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-10-26 10:52:33 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$VYTCDZEz7XyvEliKem9/lO2j/9RcbZHWCBcE6SsVX.eTYvAfto.72"], ["created_at", "2020-10-26 15:52:33.606465"], ["updated_at", "2020-10-26 15:52:33.606465"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 6ms (Views: 0.4ms | ActiveRecord: 1.0ms | Allocations: 1492)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 436ms (Views: 0.5ms | ActiveRecord: 0.9ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 10:52:33 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
Completed 200 OK in 284ms (Views: 8.5ms | ActiveRecord: 0.8ms | Allocations: 568)
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 45ms (Views: 34.0ms | ActiveRecord: 2.4ms | Allocations: 2066)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 374ms (Views: 0.8ms | ActiveRecord: 0.6ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:52:34 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 15:52:34.307595"], ["updated_at", "2020-10-26 15:52:34.307595"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 13ms (Views: 0.7ms | ActiveRecord: 2.0ms | Allocations: 2747)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 422ms (Views: 1.6ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 340ms (Views: 10.3ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 396ms (Views: 1.2ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-10-26 10:52:34 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (1.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
Completed 200 OK in 9ms (Views: 2.3ms | ActiveRecord: 2.7ms | Allocations: 1631)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 635ms (Views: 4.2ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (3.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:52:35 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (3.1ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-10-26 15:52:35.319548"], ["updated_at", "2020-10-26 15:52:35.319548"], ["admon", "80000"], ["rooms", "3"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 22ms (Views: 2.2ms | ActiveRecord: 4.8ms | Allocations: 2736)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 531ms (Views: 0.6ms | ActiveRecord: 1.1ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 368ms (Views: 2.1ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 10:52:35 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 404 Not Found in 5ms (Views: 0.2ms | ActiveRecord: 0.9ms | Allocations: 1458)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 380ms (Views: 1.4ms | ActiveRecord: 1.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 362ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:52:36 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-10-26 15:52:36.165581"], ["updated_at", "2020-10-26 15:52:36.165581"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 53ms (Views: 0.9ms | ActiveRecord: 2.9ms | Allocations: 2705)
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 560ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 448ms (Views: 0.7ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 429ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 10:52:36 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 364ms (Views: 0.6ms | ActiveRecord: 0.8ms | Allocations: 560)
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-10-26 10:52:37 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 421ms (Views: 1.0ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 370ms (Views: 0.7ms | ActiveRecord: 1.1ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 309ms (Views: 0.6ms | ActiveRecord: 1.6ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 10:52:37 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (8.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (4.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (1.7ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-10-26 15:52:37.522813"], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 51ms (Views: 1.8ms | ActiveRecord: 16.1ms | Allocations: 2746)
  [1m[35m (4.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 321ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 469ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 10:52:37 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.7ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-10-26 15:52:37.908724"], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.9ms | ActiveRecord: 2.0ms | Allocations: 2749)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 359ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:52:38 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 15:52:38.261420"], ["updated_at", "2020-10-26 15:52:38.261420"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 12ms (Views: 0.7ms | ActiveRecord: 1.4ms | Allocations: 2578)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 361ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 402ms (Views: 1.3ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-10-26 10:52:38 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
Completed 200 OK in 14ms (Views: 6.1ms | ActiveRecord: 1.5ms | Allocations: 3648)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 452ms (Views: 0.6ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 342ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-10-26 10:52:39 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (3.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Destroy (4.8ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 16ms (Views: 0.2ms | ActiveRecord: 8.9ms | Allocations: 1544)
  [1m[35m (4.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 442ms (Views: 0.8ms | ActiveRecord: 0.7ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:52:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 278ms (Views: 1.1ms | ActiveRecord: 1.6ms | Allocations: 560)
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-10-26 10:52:39 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 404 Not Found in 12ms (Views: 0.2ms | ActiveRecord: 7.2ms | Allocations: 1458)
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (4.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (1.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.3ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (974.2ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (976.1ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.5ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 15:57:31.408638', '2020-10-26 15:57:31.408638', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 15:57:31.408638', '2020-10-26 15:57:31.408638', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$WzQXXYwJZNn.5wVYJ0RjOOYpJTTdZeAhomNY9xqzBnSSlkTqPohni', '2020-10-26 15:57:31.408638', '2020-10-26 15:57:31.408638', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$Ij5eeauiSudemkI1LLzkAeWRWpt/ZSddKZjcO3b0q4Nemu1qH4gm2', '2020-10-26 15:57:31.408638', '2020-10-26 15:57:31.408638', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$cp1s/1c82qJxyN0QepjM2.Vr238xW3BNbIa.S5444WtHDqpbqRckm', '2020-10-26 15:57:31.408638', '2020-10-26 15:57:31.408638', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:57:31.422497', '2020-10-26 15:57:31.422497', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:57:31.422497', '2020-10-26 15:57:31.422497', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:57:31.422497', '2020-10-26 15:57:31.422497', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:57:31.422497', '2020-10-26 15:57:31.422497', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 15:57:31.422497', '2020-10-26 15:57:31.422497', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 15:57:31.422497', '2020-10-26 15:57:31.422497', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 15:57:31.436550', '2020-10-26 15:57:31.436550', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 15:57:31.436550', '2020-10-26 15:57:31.436550', DEFAULT, DEFAULT)[0m
  [1m[35m (39.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.0ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 15:57:31.487952', '2020-10-26 15:57:31.487952', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 15:57:31.487952', '2020-10-26 15:57:31.487952', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$6HAkC10yndaZAYIh.xFkYuwDnRprSLwO054AUPmzo5Bm71vAh8hqW', '2020-10-26 15:57:31.487952', '2020-10-26 15:57:31.487952', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$VcqzXluP4216j/Yfmjbso.UFTN7P6/8ouB/A39FYdNQD6vgR7UzG6', '2020-10-26 15:57:31.487952', '2020-10-26 15:57:31.487952', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$EveITZODfNtpI548FLMhAO43HGCQ1ve02Q3HFTIe18V66Y3CgxbhW', '2020-10-26 15:57:31.487952', '2020-10-26 15:57:31.487952', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:57:31.509709', '2020-10-26 15:57:31.509709', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:57:31.509709', '2020-10-26 15:57:31.509709', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:57:31.509709', '2020-10-26 15:57:31.509709', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:57:31.509709', '2020-10-26 15:57:31.509709', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 15:57:31.509709', '2020-10-26 15:57:31.509709', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 15:57:31.509709', '2020-10-26 15:57:31.509709', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 15:57:31.523274', '2020-10-26 15:57:31.523274', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 15:57:31.523274', '2020-10-26 15:57:31.523274', DEFAULT, DEFAULT)[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_have_successfully_created_a_property
--------------------------------------------------------------
  [1m[35m (10.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PropertyTest: test_Should_create_a_property
-------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 15:57:31.762277"], ["updated_at", "2020-10-26 15:57:31.762277"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_a_user_id
-----------------------------------------------------------------
  [1m[36mProperty Create (6.7ms)[0m  [1m[32mINSERT INTO "properties" ("hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["hood", "Belen"], ["city", "Pizza"], ["user_id", 99], ["created_at", "2020-10-26 15:57:31.771588"], ["updated_at", "2020-10-26 15:57:31.771588"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_the_proper_built_type
-----------------------------------------------------------------------------
  [1m[35m (3.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_create,_save,_and_destroy_a_property
--------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 15:57:31.820541"], ["updated_at", "2020-10-26 15:57:31.820541"]]
  [1m[35m (8.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 12]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[36mProperty Destroy (0.7ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 12]]
  [1m[36mProperty Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_elevator_attribute
---------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (12.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PhotoTest: test_Should_successfully_create_a_photo
--------------------------------------------------
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "elevator") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 15:57:31.886527"], ["updated_at", "2020-10-26 15:57:31.886527"], ["build_area", "hola"], ["elevator", true]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
PhotoTest: test_Should_create,_save_and_delete_a_property,_as_well_as_inspecting_the_link
-----------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPhoto Create (1.0ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.zeldadeprueba.com"], ["property_id", 2], ["created_at", "2020-10-26 15:57:31.911877"], ["updated_at", "2020-10-26 15:57:31.911877"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_property_id
---------------------------------------------------------------
  [1m[35m (1.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPhoto Create (1.0ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.linkdeprueba.com"], ["property_id", 1], ["created_at", "2020-10-26 15:57:31.934603"], ["updated_at", "2020-10-26 15:57:31.934603"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.4ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_url
-------------------------------------------------------
  [1m[36mPhoto Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "photos" WHERE "photos"."property_id" = $1 LIMIT $2[0m  [["property_id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:32 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 335ms (Views: 0.8ms | ActiveRecord: 2.9ms | Allocations: 846)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 375ms (Views: 0.6ms | ActiveRecord: 1.1ms | Allocations: 841)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 267ms (Views: 1.3ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:57:32 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 13ms (Views: 1.3ms | ActiveRecord: 2.3ms | Allocations: 2484)
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 350ms (Views: 1.2ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 10:57:32 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 7ms (Views: 0.2ms | ActiveRecord: 0.9ms | Allocations: 1886)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (7.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 569ms (Views: 7.2ms | ActiveRecord: 1.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 483ms (Views: 1.5ms | ActiveRecord: 7.7ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 504ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 474ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 561)
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:33 -0500
Processing by Api::V1::UsersController#login as JSON
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 401 Unauthorized in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms | Allocations: 366)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (9.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "new_name"], ["updated_at", "2020-10-26 15:57:33.819560"], ["id", 100]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:33 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:33 -0500
Processing by Api::V1::UsersController#login as JSON
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 318ms (Views: 1.1ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 348ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 302ms (Views: 0.5ms | ActiveRecord: 2.2ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 10:57:34 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 343ms (Views: 0.6ms | ActiveRecord: 1.9ms | Allocations: 560)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 8ms (Views: 0.3ms | ActiveRecord: 1.3ms | Allocations: 1029)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 10:57:34 -0500
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 7ms (Views: 3.3ms | ActiveRecord: 1.1ms | Allocations: 2065)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:34 -0500
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 365ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 381ms (Views: 1.3ms | ActiveRecord: 1.8ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 335ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-10-26 10:57:35 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 333ms (Views: 0.7ms | ActiveRecord: 5.0ms | Allocations: 560)
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$p/IuU3m4Mo3.vYynYMbL6.5OlJr2O2vMxBBanugl8de3O7WvUQKtu"], ["created_at", "2020-10-26 15:57:35.259016"], ["updated_at", "2020-10-26 15:57:35.259016"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 10:57:35 -0500
Completed 201 Created in 14ms (Views: 1.0ms | ActiveRecord: 2.1ms | Allocations: 1520)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:35 -0500
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 7ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1595)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 432ms (Views: 0.7ms | ActiveRecord: 1.9ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 491ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 289ms (Views: 1.4ms | ActiveRecord: 1.0ms | Allocations: 560)
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-10-26 10:57:36 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 123)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 403ms (Views: 1.1ms | ActiveRecord: 1.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 269)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 415ms (Views: 1.2ms | ActiveRecord: 1.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 275ms (Views: 3.4ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 281ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:57:36 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (7.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 27ms (Views: 1.7ms | ActiveRecord: 7.7ms | Allocations: 1433)
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (10.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 380ms (Views: 1.2ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:57:36 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (13.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (1.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (4.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 66ms (Views: 1.4ms | ActiveRecord: 22.2ms | Allocations: 4524)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 491ms (Views: 0.8ms | ActiveRecord: 10.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 551ms (Views: 0.5ms | ActiveRecord: 1.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 377ms (Views: 0.6ms | ActiveRecord: 0.6ms | Allocations: 560)
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-10-26 10:57:37 -0500
Processing by Api::V1::UsersController#update as JSON
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-10-26 15:57:37.675427"], ["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 1.2ms | ActiveRecord: 1.4ms | Allocations: 2436)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 426ms (Views: 0.4ms | ActiveRecord: 1.7ms | Allocations: 560)
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-10-26 10:57:37 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 25ms (Views: 0.3ms | ActiveRecord: 5.4ms | Allocations: 4515)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$VZ2o0uzDOsFYJfIdMTQ2wOkAdrB8jZiu2YOIxGl78QHFx0vzcHJ5e"], ["created_at", "2020-10-26 15:57:37.976900"], ["updated_at", "2020-10-26 15:57:37.976900"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (1.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Destroy (2.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$zVA40Rslvzn/8SJ8IrKg0uFxG9yp7hLkPcNH623p/D8Rh3wlDSjKe"], ["created_at", "2020-10-26 15:57:38.032139"], ["updated_at", "2020-10-26 15:57:38.032139"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$VUL2PrAGSAimQDUJ.DqD0.9S3WGJfMZskJG0U8f60l0DiUF753Sla"], ["created_at", "2020-10-26 15:57:38.070191"], ["updated_at", "2020-10-26 15:57:38.070191"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Completed 200 OK in 385ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:38 -0500
  [1m[36mUser Exists? (12.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$MeEauAUCc0Jw.6IK0c66y.M3CtOCzhniV6vOuhYjjwmamzJmuEamG"], ["created_at", "2020-10-26 15:57:38.093893"], ["updated_at", "2020-10-26 15:57:38.093893"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Destroy (1.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (2.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Destroy (3.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (3.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$MVJYidiEab8OITRAf.qvRO13jFPrk9h4a8pVMmRvLPMpTIbqG3fBa"], ["created_at", "2020-10-26 15:57:38.171304"], ["updated_at", "2020-10-26 15:57:38.171304"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$fKzX5yv7iE5W3Hu5ddM5peAtwslBWfTReQr3EAy.i82KhjE7urRxO"], ["created_at", "2020-10-26 15:57:38.215267"], ["updated_at", "2020-10-26 15:57:38.215267"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (8.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$2QX0P83akSWNlxZjV.YpAer5LekJl4hxIcnQWrn89TX5Lwi0.17xu"], ["created_at", "2020-10-26 15:57:38.256607"], ["updated_at", "2020-10-26 15:57:38.256607"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (7.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (2.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486381]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486381]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
  [1m[35m (4.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (2.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$sQHBxcoCDvBaaBldiegqm.x89gbIyblEmc2/aQ8/SO4.igtuPwT6C"], ["created_at", "2020-10-26 15:57:38.336195"], ["updated_at", "2020-10-26 15:57:38.336195"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (3.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (6.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (4.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486382]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486382]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[35m (3.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$hCPqm.y9YrpNlPHzBWQw3emfsGAFNmBJb5i5yX4gohqFTBcp6nrNW"], ["created_at", "2020-10-26 15:57:38.389145"], ["updated_at", "2020-10-26 15:57:38.389145"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (2.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486383]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486383]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$Je3rA6ht8PHjsvltofgg1OhuvZoezu/1tqoph1z14cON6E73R2ry."], ["created_at", "2020-10-26 15:57:38.437700"], ["updated_at", "2020-10-26 15:57:38.437700"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486384]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486384]]
  [1m[35m (1.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (2.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$4NjpCjyD38HqaRPskfpaa.nQ4hArFmjONwm2MgNM5fc0u2K37Tg6O"], ["created_at", "2020-10-26 15:57:38.507986"], ["updated_at", "2020-10-26 15:57:38.507986"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486385]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486385]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 497ms (Views: 0.5ms | ActiveRecord: 2.0ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:57:38 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (6.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 13ms (Views: 0.3ms | ActiveRecord: 6.4ms | Allocations: 1859)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (1.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (7.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 489ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 463ms (Views: 0.5ms | ActiveRecord: 7.1ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 385ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Completed 200 OK in 299ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:57:39 -0500
  [1m[35m (4.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:57:39 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mUser Load (6.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 15:57:39.434132"], ["updated_at", "2020-10-26 15:57:39.434132"]]
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 17ms (Views: 1.0ms | ActiveRecord: 4.5ms | Allocations: 2629)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (2.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (2.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-10-26 15:57:39.446177"], ["updated_at", "2020-10-26 15:57:39.446177"], ["admon", "80000"], ["rooms", "3"]]
  [1m[35m (3.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 37ms (Views: 0.7ms | ActiveRecord: 13.9ms | Allocations: 2787)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 350ms (Views: 0.7ms | ActiveRecord: 0.8ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 403ms (Views: 1.1ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 272ms (Views: 0.5ms | ActiveRecord: 0.9ms | Allocations: 560)
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-10-26 10:57:40 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
Completed 200 OK in 34ms (Views: 13.7ms | ActiveRecord: 1.2ms | Allocations: 3648)
  [1m[35m (2.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 349ms (Views: 0.8ms | ActiveRecord: 0.8ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 10:57:40 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 483ms (Views: 1.6ms | ActiveRecord: 3.8ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 434ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 445ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-10-26 10:57:41 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (1.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Destroy (0.6ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 35ms (Views: 18.1ms | ActiveRecord: 2.6ms | Allocations: 1658)
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 489ms (Views: 0.9ms | ActiveRecord: 4.5ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 10:57:41 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (7.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (4.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (2.1ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-10-26 15:57:41.202752"], ["id", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 32ms (Views: 0.9ms | ActiveRecord: 15.7ms | Allocations: 2899)
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 457ms (Views: 1.0ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 495ms (Views: 1.1ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 684ms (Views: 3.4ms | ActiveRecord: 0.4ms | Allocations: 560)
Completed 200 OK in 539ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-10-26 10:57:42 -0500
  [1m[35m (3.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:57:42 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (10.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
[31mUnpermitted parameter: :format[0m
Completed 200 OK in 34ms (Views: 5.2ms | ActiveRecord: 12.4ms | Allocations: 1582)
  [1m[35m (5.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.9ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 15:57:42.349703"], ["updated_at", "2020-10-26 15:57:42.349703"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
  [1m[35m (11.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:42 -0500
Completed 201 Created in 71ms (Views: 0.9ms | ActiveRecord: 14.7ms | Allocations: 2696)
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[35m (2.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 850ms (Views: 0.7ms | ActiveRecord: 4.8ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 1001ms (Views: 3.6ms | ActiveRecord: 2.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 327ms (Views: 0.7ms | ActiveRecord: 1.2ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 10:57:43 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 404 Not Found in 5ms (Views: 0.3ms | ActiveRecord: 1.2ms | Allocations: 1458)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:43 -0500
Completed 200 OK in 479ms (Views: 1.0ms | ActiveRecord: 0.2ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 10:57:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (2.9ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (4.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.8ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-10-26 15:57:43.767623"], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 32ms (Views: 1.4ms | ActiveRecord: 13.0ms | Allocations: 2743)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (12.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 384ms (Views: 2.1ms | ActiveRecord: 2.7ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 617ms (Views: 1.6ms | ActiveRecord: 12.8ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (8.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 330ms (Views: 0.8ms | ActiveRecord: 0.9ms | Allocations: 560)
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:57:44 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (3.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (7.1ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-10-26 15:57:44.472185"], ["updated_at", "2020-10-26 15:57:44.472185"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 21ms (Views: 0.6ms | ActiveRecord: 11.5ms | Allocations: 2704)
  [1m[35m (11.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (5.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 416ms (Views: 1.7ms | ActiveRecord: 8.2ms | Allocations: 560)
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-10-26 10:57:44 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 507ms (Views: 1.8ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 446ms (Views: 0.9ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 476ms (Views: 3.2ms | ActiveRecord: 0.2ms | Allocations: 560)
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-10-26 10:57:45 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 404 Not Found in 8ms (Views: 1.3ms | ActiveRecord: 1.3ms | Allocations: 1458)
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 555ms (Views: 1.0ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (6.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 620ms (Views: 0.5ms | ActiveRecord: 0.7ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 408ms (Views: 0.6ms | ActiveRecord: 6.1ms | Allocations: 560)
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 10:57:46 -0500
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.2ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.5ms | ActiveRecord: 0.7ms | Allocations: 1627)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 438ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 561)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 380ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 344ms (Views: 0.9ms | ActiveRecord: 3.1ms | Allocations: 560)
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-10-26 10:57:46 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 155)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 347ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 432ms (Views: 0.5ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 423ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-10-26 10:57:47 -0500
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.8ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-10-26 15:57:47.505129"], ["updated_at", "2020-10-26 15:57:47.505129"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued PhotoQualityJob (Job ID: 125fa5ef-32bd-4b74-9531-711d0f6540e8) to Test(default) with arguments: 298486376
Completed 201 Created in 17ms (Views: 0.5ms | ActiveRecord: 3.0ms | Allocations: 2754)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 319ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 412ms (Views: 2.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 313ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 10:57:48 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.3ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 17ms (Views: 3.6ms | ActiveRecord: 2.2ms | Allocations: 1869)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 355ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 376ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 403ms (Views: 1.1ms | ActiveRecord: 0.5ms | Allocations: 560)
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 10:57:48 -0500
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.3ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.3ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 3.6ms | Allocations: 1475)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 352ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:57:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 264ms (Views: 0.4ms | ActiveRecord: 0.7ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 10:57:49 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 8ms (Views: 0.2ms | ActiveRecord: 1.8ms | Allocations: 1596)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (2.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.6ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1003.1ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1009.0ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (18.4ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 15:58:46.984106', '2020-10-26 15:58:46.984106', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 15:58:46.984106', '2020-10-26 15:58:46.984106', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$eTcpKv2L1M5v.Q1NwfEVzOX4PfFK4QSIQKuNXglFzSnRNm4Oscc0W', '2020-10-26 15:58:46.984106', '2020-10-26 15:58:46.984106', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$AuKTkfLOglgdbuE5ktSFlOWhbpoMJFX/ugUb7O3L6wiWC909qRjAi', '2020-10-26 15:58:46.984106', '2020-10-26 15:58:46.984106', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$J6e0xnnpxZtS5S4e6JCk5uycN1x2gibof1ZPlAo3hF.sI5E9Np0wK', '2020-10-26 15:58:46.984106', '2020-10-26 15:58:46.984106', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:58:47.009505', '2020-10-26 15:58:47.009505', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:58:47.009505', '2020-10-26 15:58:47.009505', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:58:47.009505', '2020-10-26 15:58:47.009505', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:58:47.009505', '2020-10-26 15:58:47.009505', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 15:58:47.009505', '2020-10-26 15:58:47.009505', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 15:58:47.009505', '2020-10-26 15:58:47.009505', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 15:58:47.029760', '2020-10-26 15:58:47.029760', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 15:58:47.029760', '2020-10-26 15:58:47.029760', DEFAULT, DEFAULT)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.6ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 15:58:47.079598', '2020-10-26 15:58:47.079598', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 15:58:47.079598', '2020-10-26 15:58:47.079598', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$OtzWbEp.q/arsQf/X3TjueKKCW.5iElhc4kHvfkXmdSF67NV5aWLm', '2020-10-26 15:58:47.079598', '2020-10-26 15:58:47.079598', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$WyO9EpjhB9b/mYz44m40C.QOVa/3mkEzdmLrVirD1Uhb8/69UR8lK', '2020-10-26 15:58:47.079598', '2020-10-26 15:58:47.079598', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$WMFUJ2N0Bnb3DNKSahlE0O/fboKkWeaChfRHBzqTMoprlSlWmFJ/W', '2020-10-26 15:58:47.079598', '2020-10-26 15:58:47.079598', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:58:47.101114', '2020-10-26 15:58:47.101114', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:58:47.101114', '2020-10-26 15:58:47.101114', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:58:47.101114', '2020-10-26 15:58:47.101114', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:58:47.101114', '2020-10-26 15:58:47.101114', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 15:58:47.101114', '2020-10-26 15:58:47.101114', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 15:58:47.101114', '2020-10-26 15:58:47.101114', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 15:58:47.110810', '2020-10-26 15:58:47.110810', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 15:58:47.110810', '2020-10-26 15:58:47.110810', DEFAULT, DEFAULT)[0m
  [1m[35m (216.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (207.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:47 -0500
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 320ms (Views: 1.7ms | ActiveRecord: 1.1ms | Allocations: 6585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 289ms (Views: 1.5ms | ActiveRecord: 0.7ms | Allocations: 6585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 290ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-10-26 10:58:48 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (13.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (2.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
Completed 200 OK in 299ms (Views: 1.0ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:58:48 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
Completed 200 OK in 116ms (Views: 82.1ms | ActiveRecord: 15.7ms | Allocations: 24445)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
  [1m[36mUser Load (11.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:48 -0500
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (2.1ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-10-26 15:58:48.702814"], ["updated_at", "2020-10-26 15:58:48.702814"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 138ms (Views: 0.6ms | ActiveRecord: 14.2ms | Allocations: 26801)
  [1m[35m (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 326ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 386ms (Views: 0.7ms | ActiveRecord: 2.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 297ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-10-26 10:58:49 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Destroy (0.7ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 2.1ms | Allocations: 1697)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 345ms (Views: 0.5ms | ActiveRecord: 0.6ms | Allocations: 560)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-10-26 10:58:49 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
Completed 200 OK in 18ms (Views: 2.5ms | ActiveRecord: 1.2ms | Allocations: 3702)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 406ms (Views: 1.8ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 337ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 339ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-10-26 10:58:50 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 123)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 272ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:58:50 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 15:58:50.147621"], ["updated_at", "2020-10-26 15:58:50.147621"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 12ms (Views: 0.9ms | ActiveRecord: 2.6ms | Allocations: 2698)
  [1m[35m (6.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (3.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 452ms (Views: 6.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 385ms (Views: 0.6ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 310ms (Views: 1.1ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:58:50 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (1.0ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 15:58:50.821029"], ["updated_at", "2020-10-26 15:58:50.821029"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 27ms (Views: 2.6ms | ActiveRecord: 2.6ms | Allocations: 5902)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 400ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 10:58:50 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (1.0ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-10-26 15:58:51.013498"], ["id", 1]]
  [1m[35m (1.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 50ms (Views: 4.6ms | ActiveRecord: 7.7ms | Allocations: 2918)
  [1m[35m (2.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 418ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 415ms (Views: 0.6ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 286ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 560)
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-10-26 10:58:51 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[36mUser Load (11.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 404 Not Found in 23ms (Views: 0.3ms | ActiveRecord: 14.5ms | Allocations: 1458)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 367ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 10:58:51 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (2.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.6ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-10-26 15:58:51.878732"], ["id", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 33ms (Views: 1.0ms | ActiveRecord: 4.8ms | Allocations: 2724)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 335ms (Views: 1.3ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 321ms (Views: 4.0ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 382ms (Views: 0.5ms | ActiveRecord: 0.5ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:58:52 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (4.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (1.0ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-10-26 15:58:52.386109"], ["updated_at", "2020-10-26 15:58:52.386109"], ["admon", "80000"], ["rooms", "3"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 54ms (Views: 0.8ms | ActiveRecord: 7.5ms | Allocations: 2739)
  [1m[35m (5.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 288ms (Views: 0.6ms | ActiveRecord: 0.6ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 10:58:52 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 123)
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 345ms (Views: 0.7ms | ActiveRecord: 4.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 314ms (Views: 0.8ms | ActiveRecord: 1.0ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 269ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 10:58:53 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 404 Not Found in 23ms (Views: 0.2ms | ActiveRecord: 1.2ms | Allocations: 1458)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 284ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 306ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 337ms (Views: 0.9ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 10:58:53 -0500
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.3ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 25ms (Views: 0.6ms | ActiveRecord: 0.9ms | Allocations: 6346)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 321ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 354ms (Views: 0.9ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 330ms (Views: 0.6ms | ActiveRecord: 0.6ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 10:58:54 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 10ms (Views: 0.4ms | ActiveRecord: 1.0ms | Allocations: 1631)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 351ms (Views: 2.1ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 368ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 361ms (Views: 1.2ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 10:58:54 -0500
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.3ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.3ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 1.3ms | Allocations: 1492)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 289ms (Views: 0.9ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 347ms (Views: 0.9ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 279ms (Views: 1.0ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-10-26 10:58:55 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 347ms (Views: 0.9ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 313ms (Views: 0.6ms | ActiveRecord: 1.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 274ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 329ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 10:58:55 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mPhoto Load (1.6ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 8ms (Views: 2.4ms | ActiveRecord: 2.3ms | Allocations: 1848)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 304ms (Views: 0.9ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:55 -0500
Completed 200 OK in 344ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-10-26 10:58:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.9ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.6ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-10-26 15:58:56.068215"], ["updated_at", "2020-10-26 15:58:56.068215"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued PhotoQualityJob (Job ID: 55440354-6114-41ac-94b4-6fa31f586e24) to Test(default) with arguments: 298486375
Completed 201 Created in 40ms (Views: 0.4ms | ActiveRecord: 2.9ms | Allocations: 7760)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 301ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 10:58:56 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 8ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1595)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 382ms (Views: 0.8ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 326ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 327ms (Views: 2.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:58:56 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 0.5ms | Allocations: 1859)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 391ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-10-26 10:58:57 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 386ms (Views: 0.4ms | ActiveRecord: 1.9ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 320ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 296ms (Views: 0.6ms | ActiveRecord: 1.6ms | Allocations: 560)
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-10-26 10:58:57 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (3.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
  [1m[35m (2.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 22ms (Views: 0.3ms | ActiveRecord: 10.8ms | Allocations: 5463)
  [1m[35m (2.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 325ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:58:57 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (13.9ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (5.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 29ms (Views: 0.5ms | ActiveRecord: 23.6ms | Allocations: 1956)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (3.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 314ms (Views: 0.5ms | ActiveRecord: 1.1ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 275ms (Views: 0.5ms | ActiveRecord: 3.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 305ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 269)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 269ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (4.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:58:58 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 10ms (Views: 0.7ms | ActiveRecord: 2.3ms | Allocations: 2367)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 410ms (Views: 1.1ms | ActiveRecord: 1.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 404ms (Views: 6.0ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 484ms (Views: 0.5ms | ActiveRecord: 0.9ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:59 -0500
Processing by Api::V1::UsersController#login as JSON
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 363)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 448ms (Views: 0.6ms | ActiveRecord: 0.8ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-10-26 10:58:59 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$Mmb5P34gs9jxXiSJ5VymiOz.vR8PpSREFxE9IzxRpk2xckHFOgRIG"], ["created_at", "2020-10-26 15:58:59.273502"], ["updated_at", "2020-10-26 15:58:59.273502"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 12ms (Views: 0.4ms | ActiveRecord: 2.8ms | Allocations: 2153)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 489ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 418ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 325ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 10:58:59 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 1595)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:58:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 281ms (Views: 1.2ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "new_name"], ["updated_at", "2020-10-26 15:58:59.991301"], ["id", 100]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 331ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 322ms (Views: 2.0ms | ActiveRecord: 0.2ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 299ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 10:59:00 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 8ms (Views: 2.8ms | ActiveRecord: 1.0ms | Allocations: 2064)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 384ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:59:00 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (13.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 32ms (Views: 0.7ms | ActiveRecord: 13.9ms | Allocations: 1433)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 339ms (Views: 0.4ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 375ms (Views: 2.2ms | ActiveRecord: 0.7ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:01 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 324ms (Views: 0.8ms | ActiveRecord: 0.4ms | Allocations: 560)
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-10-26 10:59:01 -0500
Processing by Api::V1::UsersController#update as JSON
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (5.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-10-26 15:59:01.317004"], ["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 23ms (Views: 0.8ms | ActiveRecord: 9.9ms | Allocations: 2530)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_create,_save,_and_destroy_a_property
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 15:59:01.338515"], ["updated_at", "2020-10-26 15:59:01.338515"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 13]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[36mProperty Destroy (0.4ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 13]]
  [1m[36mProperty Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_elevator_attribute
---------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.8ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "elevator") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 15:59:01.397625"], ["updated_at", "2020-10-26 15:59:01.397625"], ["build_area", "hola"], ["elevator", true]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_a_user_id
-----------------------------------------------------------------
  [1m[35m (2.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_the_proper_built_type
-----------------------------------------------------------------------------
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PropertyTest: test_Should_create_a_property
-------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["hood", "Belen"], ["city", "Pizza"], ["user_id", 99], ["created_at", "2020-10-26 15:59:01.474045"], ["updated_at", "2020-10-26 15:59:01.474045"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_have_successfully_created_a_property
--------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 15:59:01.485720"], ["updated_at", "2020-10-26 15:59:01.485720"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
PhotoTest: test_Should_create,_save_and_delete_a_property,_as_well_as_inspecting_the_link
-----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPhoto Create (1.2ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.linkdeprueba.com"], ["property_id", 1], ["created_at", "2020-10-26 15:59:01.520350"], ["updated_at", "2020-10-26 15:59:01.520350"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.4ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 298486376]]
Completed 200 OK in 333ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[36mPhoto Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "photos" WHERE "photos"."property_id" = $1 LIMIT $2[0m  [["property_id", 1], ["LIMIT", 1]]
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 10:59:01 -0500
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_property_id
---------------------------------------------------------------
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 5ms (Views: 0.3ms | ActiveRecord: 0.4ms | Allocations: 1029)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PhotoTest: test_Should_successfully_create_a_photo
--------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_url
-------------------------------------------------------
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.7ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.zeldadeprueba.com"], ["property_id", 2], ["created_at", "2020-10-26 15:59:01.551795"], ["updated_at", "2020-10-26 15:59:01.551795"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (5.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$.BKxoFS3PBQYZWm3sLXyVuIgHN8hBpTrMLjRiyfXcnNQ7fd./FQzK"], ["created_at", "2020-10-26 15:59:01.609969"], ["updated_at", "2020-10-26 15:59:01.609969"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$RALlLJ7s350A.7znS8tsJeE66hJMsbq9QNxBnEa3dimmDQiKYNLtq"], ["created_at", "2020-10-26 15:59:01.617047"], ["updated_at", "2020-10-26 15:59:01.617047"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$tWMtkMWOGgyvjNQnH18U7.8.6Y3s8L92mzztqwUCXNi7sHk6lKjNW"], ["created_at", "2020-10-26 15:59:01.666472"], ["updated_at", "2020-10-26 15:59:01.666472"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (3.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$jyxblOczrJWL0zFQU7GFFOoTY2OvTM7uS7H9K1L31.PuqKoZsv2l2"], ["created_at", "2020-10-26 15:59:01.680608"], ["updated_at", "2020-10-26 15:59:01.680608"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (2.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (8.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$FmKKGNN/Fe7VxEQFFFVZ9uyvJkjd1QRUrC5mktVLsw7FGi58QXxXa"], ["created_at", "2020-10-26 15:59:01.725395"], ["updated_at", "2020-10-26 15:59:01.725395"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (2.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$hapPm/sfzfJfzALIwOovSuBABO2u6mdQuKtl/AcgpkqBywjwBp81."], ["created_at", "2020-10-26 15:59:01.723537"], ["updated_at", "2020-10-26 15:59:01.723537"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$IFyjpbdr2Ti2AL3ig2peQ.EPAdmv1ax1hN69GQxdyDuggOyYnnez."], ["created_at", "2020-10-26 15:59:01.738213"], ["updated_at", "2020-10-26 15:59:01.738213"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mProperty Load (2.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Destroy (1.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (6.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mProperty Load (1.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Destroy (1.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (2.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$ZVBwkJDAhH2c2.OQiNovGuLexlMlOPZFIIV1DavO9NXQbQ.5NoNQO"], ["created_at", "2020-10-26 15:59:01.771796"], ["updated_at", "2020-10-26 15:59:01.771796"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$o8CpGFrY81.ajhtKHAxJZeyXKTMV3fGcBQi05Fv4mHdjvCKSecoMm"], ["created_at", "2020-10-26 15:59:01.789823"], ["updated_at", "2020-10-26 15:59:01.789823"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
  [1m[35m (2.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$wqAGuBypzAEAM0DU2MisauUzdVLS0auBLdew8ts4rz66.PlUov/8S"], ["created_at", "2020-10-26 15:59:01.825623"], ["updated_at", "2020-10-26 15:59:01.825623"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Destroy (2.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (7.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (8.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$ZVRh6hwEnaGbOamJAAdrs.Ay/GbIHOmxQene9s73nt6qH4Uka4jR6"], ["created_at", "2020-10-26 15:59:01.859811"], ["updated_at", "2020-10-26 15:59:01.859811"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (2.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (4.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.9ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (2.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.6ms)[0m  [1m[35mALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (4.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1000.1ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1007.7ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.8ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 15:59:42.754902', '2020-10-26 15:59:42.754902', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 15:59:42.754902', '2020-10-26 15:59:42.754902', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$WBzgZuaYofRLGggjRy9I0.BQM1FmBOJAXdAgFTQeaHsG5t6L2zray', '2020-10-26 15:59:42.754902', '2020-10-26 15:59:42.754902', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$nidbr21f.B6YaOfuHIo8q.LLafTFwLXbEvRgr3JCQgOdoqV5QMf1O', '2020-10-26 15:59:42.754902', '2020-10-26 15:59:42.754902', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$pLbjYsow7sDy9PmWXyzptuZYr6qHN42zU3Sb.k0Hx6TJvEsgBM1tu', '2020-10-26 15:59:42.754902', '2020-10-26 15:59:42.754902', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:59:42.764690', '2020-10-26 15:59:42.764690', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:59:42.764690', '2020-10-26 15:59:42.764690', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:59:42.764690', '2020-10-26 15:59:42.764690', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:59:42.764690', '2020-10-26 15:59:42.764690', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 15:59:42.764690', '2020-10-26 15:59:42.764690', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 15:59:42.764690', '2020-10-26 15:59:42.764690', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 15:59:42.776425', '2020-10-26 15:59:42.776425', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 15:59:42.776425', '2020-10-26 15:59:42.776425', DEFAULT, DEFAULT)[0m
  [1m[35m (32.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (2.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.7ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 15:59:42.907003', '2020-10-26 15:59:42.907003', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 15:59:42.907003', '2020-10-26 15:59:42.907003', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$O3bHhro.9BM296r5Ndlj/.79LDByOMhzIQDVfEW9b4.auWvyh0eum', '2020-10-26 15:59:42.907003', '2020-10-26 15:59:42.907003', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$gCUYYjPYBJ.iOp7SFJPXTucRofd0qkxscCqgfRFW1wm74m6aJLyHO', '2020-10-26 15:59:42.907003', '2020-10-26 15:59:42.907003', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$A1E6aF/gh8P6Q7drj2HQPOXLNh8xe258/DJWb2aqb8hlQysE4SidK', '2020-10-26 15:59:42.907003', '2020-10-26 15:59:42.907003', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:59:42.920067', '2020-10-26 15:59:42.920067', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:59:42.920067', '2020-10-26 15:59:42.920067', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:59:42.920067', '2020-10-26 15:59:42.920067', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 15:59:42.920067', '2020-10-26 15:59:42.920067', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 15:59:42.920067', '2020-10-26 15:59:42.920067', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 15:59:42.920067', '2020-10-26 15:59:42.920067', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 15:59:42.928143', '2020-10-26 15:59:42.928143', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 15:59:42.928143', '2020-10-26 15:59:42.928143', DEFAULT, DEFAULT)[0m
  [1m[35m (9.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 310ms (Views: 1.0ms | ActiveRecord: 1.3ms | Allocations: 6585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 326ms (Views: 0.8ms | ActiveRecord: 0.8ms | Allocations: 6585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 316ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-10-26 10:59:43 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (7.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Destroy (0.7ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 99ms (Views: 0.2ms | ActiveRecord: 10.3ms | Allocations: 22436)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 339ms (Views: 0.5ms | ActiveRecord: 1.5ms | Allocations: 560)
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-10-26 10:59:43 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
Completed 200 OK in 85ms (Views: 68.7ms | ActiveRecord: 1.3ms | Allocations: 24445)
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 443ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 366ms (Views: 0.6ms | ActiveRecord: 3.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 279ms (Views: 0.7ms | ActiveRecord: 0.9ms | Allocations: 560)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-10-26 10:59:44 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
Completed 200 OK in 19ms (Views: 3.6ms | ActiveRecord: 2.3ms | Allocations: 5537)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 319ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 10:59:44 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 123)
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 271ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 416ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 265ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-10-26 10:59:45 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 404 Not Found in 21ms (Views: 0.6ms | ActiveRecord: 1.6ms | Allocations: 1575)
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 399ms (Views: 0.9ms | ActiveRecord: 0.9ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:59:45 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-10-26 15:59:45.307037"], ["updated_at", "2020-10-26 15:59:45.307037"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 15ms (Views: 0.7ms | ActiveRecord: 1.8ms | Allocations: 4223)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 343ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 365ms (Views: 0.8ms | ActiveRecord: 0.7ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 306ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-10-26 10:59:45 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 299ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 10:59:45 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (1.4ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-10-26 15:59:46.000319"], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.6ms | ActiveRecord: 2.8ms | Allocations: 2792)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 382ms (Views: 0.7ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 381ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 290ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:59:46 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
  [1m[36mUser Load (5.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (2.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-10-26 15:59:46.544352"], ["updated_at", "2020-10-26 15:59:46.544352"], ["admon", "80000"], ["rooms", "3"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 64ms (Views: 1.3ms | ActiveRecord: 9.1ms | Allocations: 6080)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (5.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 382ms (Views: 0.6ms | ActiveRecord: 0.6ms | Allocations: 561)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:59:46 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (1.2ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 15:59:46.817492"], ["updated_at", "2020-10-26 15:59:46.817492"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 40ms (Views: 5.4ms | ActiveRecord: 6.6ms | Allocations: 2696)
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 396ms (Views: 1.1ms | ActiveRecord: 0.2ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 385ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 311ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 10:59:47 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.6ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-10-26 15:59:47.303753"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.7ms | ActiveRecord: 2.0ms | Allocations: 2782)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 337ms (Views: 0.7ms | ActiveRecord: 0.9ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 10:59:47 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.8ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 15:59:47.585421"], ["updated_at", "2020-10-26 15:59:47.585421"]]
  [1m[35m (11.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 22ms (Views: 1.0ms | ActiveRecord: 13.4ms | Allocations: 2578)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 455ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 359ms (Views: 0.8ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 423ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 10:59:48 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (2.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 404 Not Found in 10ms (Views: 0.3ms | ActiveRecord: 5.8ms | Allocations: 1458)
  [1m[35m (9.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 318ms (Views: 2.1ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (11.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 10:59:48 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (4.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 34ms (Views: 0.2ms | ActiveRecord: 5.4ms | Allocations: 1598)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (9.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 433ms (Views: 1.4ms | ActiveRecord: 1.1ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 366ms (Views: 0.5ms | ActiveRecord: 1.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 294ms (Views: 0.7ms | ActiveRecord: 0.7ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:59:49 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 14ms (Views: 1.0ms | ActiveRecord: 5.8ms | Allocations: 1433)
Completed 200 OK in 371ms (Views: 1.3ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 10:59:49 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:49 -0500
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 10ms (Views: 0.2ms | ActiveRecord: 0.5ms | Allocations: 1029)
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 344ms (Views: 0.6ms | ActiveRecord: 1.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 358ms (Views: 1.1ms | ActiveRecord: 1.1ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 274ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 269)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 292ms (Views: 1.4ms | ActiveRecord: 4.7ms | Allocations: 560)
  [1m[35m (6.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:59:49 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (6.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 33ms (Views: 0.6ms | ActiveRecord: 8.1ms | Allocations: 4517)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 373ms (Views: 0.9ms | ActiveRecord: 2.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 356ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 313ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-10-26 10:59:50 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 297ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:59:50 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 8ms (Views: 0.6ms | ActiveRecord: 1.3ms | Allocations: 1859)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 315ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 294ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 271ms (Views: 1.1ms | ActiveRecord: 0.4ms | Allocations: 560)
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-10-26 10:59:51 -0500
Processing by Api::V1::UsersController#update as JSON
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (4.5ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-10-26 15:59:51.061839"], ["id", 100]]
Completed 200 OK in 283ms (Views: 2.3ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "new_name"], ["updated_at", "2020-10-26 15:59:51.081181"], ["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 61ms (Views: 1.3ms | ActiveRecord: 8.0ms | Allocations: 3039)
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 317ms (Views: 0.8ms | ActiveRecord: 0.7ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 366ms (Views: 0.9ms | ActiveRecord: 1.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 273ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-10-26 10:59:51 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 10ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 4918)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 364ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 10:59:51 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 18ms (Views: 2.9ms | ActiveRecord: 2.3ms | Allocations: 2064)
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 371ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 524ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 489ms (Views: 0.5ms | ActiveRecord: 0.6ms | Allocations: 560)
  [1m[35m (1.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 10:59:52 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (8.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 31ms (Views: 12.5ms | ActiveRecord: 10.4ms | Allocations: 1941)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 338ms (Views: 0.8ms | ActiveRecord: 0.5ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-10-26 10:59:52 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$1QlOBA2n4IJ6imFaOcwhQOAu8dMg9nj.FSOX4cArRzjsZlm0O3hA2"], ["created_at", "2020-10-26 15:59:52.747322"], ["updated_at", "2020-10-26 15:59:52.747322"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 11ms (Views: 1.5ms | ActiveRecord: 1.9ms | Allocations: 1518)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 314ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 363ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 364ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 10:59:53 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 6ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1595)
  [1m[35m (2.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_create,_save,_and_destroy_a_property
--------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 15:59:53.467762"], ["updated_at", "2020-10-26 15:59:53.467762"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 14]]
  [1m[36mProperty Load (2.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[36mProperty Destroy (1.6ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 14]]
  [1m[36mProperty Exists? (8.4ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PropertyTest: test_Should_create_a_property
-------------------------------------------
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["hood", "Belen"], ["city", "Pizza"], ["user_id", 99], ["created_at", "2020-10-26 15:59:53.519884"], ["updated_at", "2020-10-26 15:59:53.519884"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_elevator_attribute
---------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 477ms (Views: 1.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:53 -0500
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_have_successfully_created_a_property
--------------------------------------------------------------
Processing by Api::V1::UsersController#login as JSON
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (3.1ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 15:59:53.584273"], ["updated_at", "2020-10-26 15:59:53.584273"]]
Completed 401 Unauthorized in 14ms (Views: 9.2ms | ActiveRecord: 2.1ms | Allocations: 363)
  [1m[35m (2.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_the_proper_built_type
-----------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_a_user_id
-----------------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PhotoTest: test_Should_successfully_create_a_photo
--------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (5.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
PhotoTest: test_Should_create,_save_and_delete_a_property,_as_well_as_inspecting_the_link
-----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (2.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPhoto Create (1.0ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.zeldadeprueba.com"], ["property_id", 2], ["created_at", "2020-10-26 15:59:53.645355"], ["updated_at", "2020-10-26 15:59:53.645355"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_property_id
---------------------------------------------------------------
  [1m[35m (2.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.7ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_url
-------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (4.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.9ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$cZJ4QkkvPVW.NCWK4FL8aed2PSNZoN2fza9OmeLHgC2BkylZcbG4u"], ["created_at", "2020-10-26 15:59:53.706830"], ["updated_at", "2020-10-26 15:59:53.706830"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPhoto Create (0.5ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.linkdeprueba.com"], ["property_id", 1], ["created_at", "2020-10-26 15:59:53.711349"], ["updated_at", "2020-10-26 15:59:53.711349"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (8.6ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 298486375]]
  [1m[36mPhoto Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "photos" WHERE "photos"."property_id" = $1 LIMIT $2[0m  [["property_id", 1], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (13.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (2.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Destroy (4.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[35m (6.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
---------------------------------------------------------------------------------
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$hxt1YbsD2IX8pmyCWzFBrOYslpTbaWELzhhfKWvDuuD0i01P/pLUa"], ["created_at", "2020-10-26 15:59:53.771819"], ["updated_at", "2020-10-26 15:59:53.771819"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (3.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (2.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$vC8jCM0vIfOEJxlvi10GcuabQSmfHh6X9drh.yyvSyGe2FU80E5.i"], ["created_at", "2020-10-26 15:59:53.805299"], ["updated_at", "2020-10-26 15:59:53.805299"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (1.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (2.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
  [1m[36mUser Create (5.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$7bdoenVQecOqP4QDuiuQoe4TK2c9yrCLPe/G2pvU0DkNS2Pj7kApO"], ["created_at", "2020-10-26 15:59:53.809933"], ["updated_at", "2020-10-26 15:59:53.809933"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (7.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$InHJT00BNHR9CbIDNbEr0O2EnjqHF4/X9rKmjHzrV7yvDCGSvDOCS"], ["created_at", "2020-10-26 15:59:53.854774"], ["updated_at", "2020-10-26 15:59:53.854774"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[35m (1.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[36mUser Exists? (10.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (3.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Create (2.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$8KxVWm7H6FWRgYcFla1EUOKzhDpklf/zS87ekhd4lRwoWObLBiLWC"], ["created_at", "2020-10-26 15:59:53.892596"], ["updated_at", "2020-10-26 15:59:53.892596"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Destroy (0.9ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (5.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
  [1m[36mUser Exists? (6.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (3.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (1.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$4JrThy8daI5aeFtsAfETRu8zOvA2mCFgjG74wdkOAacfOxPiHnXuq"], ["created_at", "2020-10-26 15:59:53.914819"], ["updated_at", "2020-10-26 15:59:53.914819"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Destroy (3.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$0GCuA6R4telQQiaZLIv0VecytdsitX1WVqw9cGjhH0NIZ5E8.XdCm"], ["created_at", "2020-10-26 15:59:53.958997"], ["updated_at", "2020-10-26 15:59:53.958997"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (7.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (1.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[35m (3.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (1.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Destroy (3.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
  [1m[35m (2.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (4.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$HCzvDY9iERBNfpR/NWLdZO/gezCbz5Ox7V9opRr5VUpMe139WpCha"], ["created_at", "2020-10-26 15:59:54.010525"], ["updated_at", "2020-10-26 15:59:54.010525"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$Z3lhT0xxG3/P7dH4.Mzx2OOf4K9hpc8Bhb03xA0J/b9cfWXPbf.oC"], ["created_at", "2020-10-26 15:59:54.019897"], ["updated_at", "2020-10-26 15:59:54.019897"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$YdWCL3Mkv7DTUT2jh91C9OYh7dO4xOBnwho/DK7vT30dulYe4NyKm"], ["created_at", "2020-10-26 15:59:54.022823"], ["updated_at", "2020-10-26 15:59:54.022823"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:54 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 367ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 453ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 293ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 310ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 313ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 10:59:55 -0500
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.4ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.4ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 33ms (Views: 0.3ms | ActiveRecord: 2.7ms | Allocations: 1653)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 402ms (Views: 0.5ms | ActiveRecord: 1.3ms | Allocations: 560)
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 10:59:55 -0500
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.2ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 10ms (Views: 0.5ms | ActiveRecord: 0.7ms | Allocations: 1623)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 336ms (Views: 0.6ms | ActiveRecord: 0.8ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 300ms (Views: 0.8ms | ActiveRecord: 0.8ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 297ms (Views: 0.9ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 335ms (Views: 1.2ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 417ms (Views: 1.4ms | ActiveRecord: 0.6ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 10:59:56 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (7.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (1.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mPhoto Load (4.7ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 31ms (Views: 8.3ms | ActiveRecord: 14.0ms | Allocations: 1849)
  [1m[35m (2.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 359ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 10:59:56 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (4.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 21ms (Views: 0.4ms | ActiveRecord: 5.1ms | Allocations: 1596)
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 375ms (Views: 0.4ms | ActiveRecord: 3.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 276ms (Views: 0.5ms | ActiveRecord: 1.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 323ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:56 -0500
Completed 200 OK in 354ms (Views: 1.2ms | ActiveRecord: 0.3ms | Allocations: 560)
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 10:59:56 -0500
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 277ms (Views: 0.5ms | ActiveRecord: 1.7ms | Allocations: 560)
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-10-26 10:59:57 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (3.5ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 318ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-10-26 10:59:57 -0500
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (1.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPhoto Create (8.0ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-10-26 15:59:57.315386"], ["updated_at", "2020-10-26 15:59:57.315386"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued PhotoQualityJob (Job ID: e4b95c01-2a5d-4384-b562-c173e0aaaf43) to Test(default) with arguments: 298486376
Completed 201 Created in 61ms (Views: 0.3ms | ActiveRecord: 14.9ms | Allocations: 2754)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (4.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (780.9ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (778.9ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.7ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 16:05:33.531647', '2020-10-26 16:05:33.531647', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 16:05:33.531647', '2020-10-26 16:05:33.531647', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$6pWl8CQCbfINfKD3wOP7ieMQ4LIFZGImkqyIfz.I2ozp3VY1FstxG', '2020-10-26 16:05:33.531647', '2020-10-26 16:05:33.531647', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$I7xMNUrV2PAG49cMD9VJWuySuJ3sxVVbGxZeq8LvqZj5JKYH/iNtO', '2020-10-26 16:05:33.531647', '2020-10-26 16:05:33.531647', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$jgGgZB/uOUHFqdG/eaFt8eDPYDRaLgMn84nf0KhsfeZXULZtIg0Dy', '2020-10-26 16:05:33.531647', '2020-10-26 16:05:33.531647', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 16:05:33.541990', '2020-10-26 16:05:33.541990', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 16:05:33.541990', '2020-10-26 16:05:33.541990', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 16:05:33.541990', '2020-10-26 16:05:33.541990', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 16:05:33.541990', '2020-10-26 16:05:33.541990', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 16:05:33.541990', '2020-10-26 16:05:33.541990', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 16:05:33.541990', '2020-10-26 16:05:33.541990', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 16:05:33.556315', '2020-10-26 16:05:33.556315', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 16:05:33.556315', '2020-10-26 16:05:33.556315', DEFAULT, DEFAULT)[0m
  [1m[35m (55.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (5.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.0ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 16:05:33.608707', '2020-10-26 16:05:33.608707', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 16:05:33.608707', '2020-10-26 16:05:33.608707', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$wgMeLTrGy4usqd9o3PMHtOy5DdzTPS/IdXvg06ThxXT8zP.4EA1ZK', '2020-10-26 16:05:33.608707', '2020-10-26 16:05:33.608707', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$KCnlsArS5oi37kM4tFN1X.Vy/oAPie8rtZZ84TYe2qacvmoHAU8AW', '2020-10-26 16:05:33.608707', '2020-10-26 16:05:33.608707', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$m3GFkDBQFGCkv.CqGVKhf.WLoA4msHJalL2abfndMVWmagcFO0Gxe', '2020-10-26 16:05:33.608707', '2020-10-26 16:05:33.608707', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 16:05:33.631512', '2020-10-26 16:05:33.631512', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 16:05:33.631512', '2020-10-26 16:05:33.631512', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 16:05:33.631512', '2020-10-26 16:05:33.631512', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 16:05:33.631512', '2020-10-26 16:05:33.631512', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 16:05:33.631512', '2020-10-26 16:05:33.631512', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 16:05:33.631512', '2020-10-26 16:05:33.631512', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 16:05:33.636165', '2020-10-26 16:05:33.636165', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 16:05:33.636165', '2020-10-26 16:05:33.636165', DEFAULT, DEFAULT)[0m
  [1m[35m (13.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[35m (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$6wwhpwN/vjgj.Hm9I2EDiOtFsB9Csgh8eZQvBIBnbXY6PJzvQ91Tu"], ["created_at", "2020-10-26 16:05:33.769749"], ["updated_at", "2020-10-26 16:05:33.769749"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$KUUq6RXuV2g.u65i9v5AbOLYD.CNbY1axKdBHJ6HNMtNIAfrJLrua"], ["created_at", "2020-10-26 16:05:33.776991"], ["updated_at", "2020-10-26 16:05:33.776991"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Destroy (1.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$Ea7zQ6hneMt0pFr9HdSt0.kfVBCPv9gL3jeUkom28YhcbZpDIrZCm"], ["created_at", "2020-10-26 16:05:33.811140"], ["updated_at", "2020-10-26 16:05:33.811140"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (2.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (11.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$QwGVOuj9gA96xuGBcru5Xu18BiB4fMFowydTUKejIzxh9EoI60So6"], ["created_at", "2020-10-26 16:05:33.833524"], ["updated_at", "2020-10-26 16:05:33.833524"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (9.9ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$whtj1W5AlLfppGID2ozAqu.4kqBQtVlws1vMav0sXhprFZPDXcRXK"], ["created_at", "2020-10-26 16:05:33.855568"], ["updated_at", "2020-10-26 16:05:33.855568"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (2.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$jdqyW.hVEyQJ1ZIgZkqE5eXrx/l6O9fNBo0joSd.A5X7R8ij4XjJW"], ["created_at", "2020-10-26 16:05:33.873935"], ["updated_at", "2020-10-26 16:05:33.873935"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mProperty Load (4.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (3.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[35m (3.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Destroy (1.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$EzKx3EGZ69IQrZSoiRGjeeLn/7vcbIfcYRFvYshQbjRVRCGBWldN6"], ["created_at", "2020-10-26 16:05:33.924364"], ["updated_at", "2020-10-26 16:05:33.924364"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Create (3.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$2E9PZilPPc5H/D/o..6yNOftC88V8P3BP4FwSFQmkZqz26LHh5.C2"], ["created_at", "2020-10-26 16:05:33.918472"], ["updated_at", "2020-10-26 16:05:33.918472"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Destroy (2.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[36mUser Exists? (2.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.9ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Destroy (0.9ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (2.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$1I32m9050hUsdIp6tTLlP.aLGpEbEGRcRuzcDckk0Dx9lQz055QSW"], ["created_at", "2020-10-26 16:05:33.974522"], ["updated_at", "2020-10-26 16:05:33.974522"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Exists? (2.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (2.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$ZmAsNiK35M7OQteAi8MJ1e482Bj0W9LDSFWub2aQmVk26WFgSLoO."], ["created_at", "2020-10-26 16:05:33.985571"], ["updated_at", "2020-10-26 16:05:33.985571"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (3.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[36mProperty Load (1.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[35m (1.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (2.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (3.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[35m (3.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (1.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_url
-------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$0vpZDp2650CtFozZJ8skBuVIf29dOWFH6FTB2sthvHtjM5gGxgPLS"], ["created_at", "2020-10-26 16:05:34.030938"], ["updated_at", "2020-10-26 16:05:34.030938"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (7.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PhotoTest: test_Should_successfully_create_a_photo
--------------------------------------------------
  [1m[35m (3.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_property_id
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
PhotoTest: test_Should_create,_save_and_delete_a_property,_as_well_as_inspecting_the_link
-----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPhoto Create (1.0ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.linkdeprueba.com"], ["property_id", 1], ["created_at", "2020-10-26 16:05:34.148887"], ["updated_at", "2020-10-26 16:05:34.148887"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.5ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 298486375]]
  [1m[36mPhoto Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "photos" WHERE "photos"."property_id" = $1 LIMIT $2[0m  [["property_id", 1], ["LIMIT", 1]]
  [1m[35m (8.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPhoto Create (1.6ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.zeldadeprueba.com"], ["property_id", 2], ["created_at", "2020-10-26 16:05:34.169708"], ["updated_at", "2020-10-26 16:05:34.169708"]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
  [1m[35m (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:34 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 308ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 715)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 372ms (Views: 0.9ms | ActiveRecord: 0.5ms | Allocations: 859)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 334ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 330ms (Views: 0.5ms | ActiveRecord: 0.6ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 316ms (Views: 0.7ms | ActiveRecord: 0.9ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 11:05:35 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 11ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1925)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 424ms (Views: 7.7ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[35m (6.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-10-26 11:05:35 -0500
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[36mUser Load (12.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (1.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.8ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-10-26 16:05:35.420159"], ["updated_at", "2020-10-26 16:05:35.420159"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued PhotoQualityJob (Job ID: 674a8e7e-c7db-4666-959a-993fe2b23128) to Test(default) with arguments: 298486376
Completed 201 Created in 69ms (Views: 1.7ms | ActiveRecord: 17.9ms | Allocations: 3215)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 396ms (Views: 0.6ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 406ms (Views: 1.1ms | ActiveRecord: 4.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 330ms (Views: 0.6ms | ActiveRecord: 0.8ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 329ms (Views: 0.8ms | ActiveRecord: 0.4ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 352ms (Views: 0.7ms | ActiveRecord: 2.3ms | Allocations: 560)
  [1m[35m (1.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 11:05:36 -0500
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (7.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.4ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.6ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 20ms (Views: 0.3ms | ActiveRecord: 9.5ms | Allocations: 1619)
  [1m[35m (3.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 288ms (Views: 2.7ms | ActiveRecord: 3.7ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 11:05:36 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (6.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (1.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mPhoto Load (1.6ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 28ms (Views: 5.8ms | ActiveRecord: 11.5ms | Allocations: 1849)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 394ms (Views: 2.6ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 323ms (Views: 0.8ms | ActiveRecord: 0.8ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 374ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 350ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 295ms (Views: 1.0ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-10-26 11:05:37 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 410ms (Views: 1.4ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 11:05:37 -0500
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (7.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.2ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 22ms (Views: 0.5ms | ActiveRecord: 7.9ms | Allocations: 1570)
  [1m[35m (7.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 449ms (Views: 1.0ms | ActiveRecord: 1.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 354ms (Views: 0.7ms | ActiveRecord: 3.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 324ms (Views: 0.9ms | ActiveRecord: 3.0ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 11:05:38 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 8ms (Views: 4.2ms | ActiveRecord: 0.9ms | Allocations: 2066)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 326ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-10-26 11:05:38 -0500
Processing by Api::V1::UsersController#update as JSON
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (1.2ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-10-26 16:05:38.478075"], ["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 25ms (Views: 0.6ms | ActiveRecord: 3.2ms | Allocations: 2498)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (10.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 293ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 433ms (Views: 0.8ms | ActiveRecord: 10.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 317ms (Views: 1.1ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-10-26 11:05:39 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (3.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 307ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-10-26 11:05:39 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$5yEppdBe9VDTN18oChDXG.3hFbHVa0NRs1.2A.v5YbcVZG0lipofi"], ["created_at", "2020-10-26 16:05:39.274652"], ["updated_at", "2020-10-26 16:05:39.274652"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 15ms (Views: 0.9ms | ActiveRecord: 0.8ms | Allocations: 1491)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 410ms (Views: 0.5ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 398ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 349ms (Views: 0.9ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-10-26 11:05:39 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 11ms (Views: 0.3ms | ActiveRecord: 0.9ms | Allocations: 3509)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 406ms (Views: 1.0ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "new_name"], ["updated_at", "2020-10-26 16:05:40.107830"], ["id", 100]]
  [1m[35m (1.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 295ms (Views: 0.8ms | ActiveRecord: 1.1ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 287ms (Views: 1.0ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 11:05:40 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (5.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 22ms (Views: 0.1ms | ActiveRecord: 7.2ms | Allocations: 1595)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 435ms (Views: 4.7ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 342ms (Views: 0.8ms | ActiveRecord: 0.8ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 11:05:40 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (5.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 12ms (Views: 0.5ms | ActiveRecord: 5.6ms | Allocations: 1859)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 414ms (Views: 0.9ms | ActiveRecord: 0.5ms | Allocations: 568)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:40 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 311ms (Views: 0.8ms | ActiveRecord: 0.8ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 11:05:41 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (2.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 14ms (Views: 1.1ms | ActiveRecord: 3.8ms | Allocations: 2367)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 389ms (Views: 1.1ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 281ms (Views: 1.0ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 11:05:41 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 350ms (Views: 1.0ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:41 -0500
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 27ms (Views: 0.2ms | ActiveRecord: 1.1ms | Allocations: 1598)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 305ms (Views: 0.7ms | ActiveRecord: 1.1ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 399ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 11:05:42 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 22ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 1030)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 317ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:42 -0500
Processing by Api::V1::UsersController#login as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 401 Unauthorized in 3ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 363)
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 320ms (Views: 0.7ms | ActiveRecord: 1.0ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 298ms (Views: 1.0ms | ActiveRecord: 1.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 365ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 11:05:42 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 7ms (Views: 0.5ms | ActiveRecord: 3.6ms | Allocations: 1433)
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 314ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 561)
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 11:05:42 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (1.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 14ms (Views: 0.7ms | ActiveRecord: 5.1ms | Allocations: 1941)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_have_successfully_created_a_property
--------------------------------------------------------------
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.0ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 16:05:43.010955"], ["updated_at", "2020-10-26 16:05:43.010955"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_the_proper_built_type
-----------------------------------------------------------------------------
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_create,_save,_and_destroy_a_property
--------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 16:05:43.041109"], ["updated_at", "2020-10-26 16:05:43.041109"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 12]]
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[36mProperty Destroy (0.6ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 12]]
  [1m[36mProperty Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_elevator_attribute
---------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_a_user_id
-----------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PropertyTest: test_Should_create_a_property
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["hood", "Belen"], ["city", "Pizza"], ["user_id", 99], ["created_at", "2020-10-26 16:05:43.109487"], ["updated_at", "2020-10-26 16:05:43.109487"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 444ms (Views: 0.5ms | ActiveRecord: 1.0ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 319ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 319ms (Views: 0.6ms | ActiveRecord: 2.4ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 3ms (Views: 0.3ms | ActiveRecord: 0.6ms | Allocations: 269)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 353ms (Views: 0.5ms | ActiveRecord: 1.7ms | Allocations: 560)
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-10-26 11:05:43 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (1.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 404 Not Found in 7ms (Views: 0.2ms | ActiveRecord: 1.8ms | Allocations: 1507)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 344ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 314ms (Views: 1.1ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 337ms (Views: 0.7ms | ActiveRecord: 1.2ms | Allocations: 560)
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 11:05:44 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (1.0ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 16:05:44.324884"], ["updated_at", "2020-10-26 16:05:44.324884"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 13ms (Views: 0.6ms | ActiveRecord: 2.0ms | Allocations: 3449)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 272ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 11:05:44 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.7ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-10-26 16:05:44.429406"], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.6ms | ActiveRecord: 2.4ms | Allocations: 2749)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 422ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 340ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 328ms (Views: 1.0ms | ActiveRecord: 0.5ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 11:05:45 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-10-26 16:05:45.105539"], ["updated_at", "2020-10-26 16:05:45.105539"], ["admon", "80000"], ["rooms", "3"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 9ms (Views: 0.6ms | ActiveRecord: 1.4ms | Allocations: 2737)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Completed 200 OK in 308ms (Views: 0.4ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 11:05:45 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 404 Not Found in 9ms (Views: 0.3ms | ActiveRecord: 1.6ms | Allocations: 1458)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
--------------------------------------------------------------
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 329ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 425ms (Views: 1.3ms | ActiveRecord: 2.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 328ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-10-26 11:05:45 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
Completed 200 OK in 31ms (Views: 18.7ms | ActiveRecord: 1.0ms | Allocations: 3672)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 288ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 11:05:45 -0500
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (1.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (1.5ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-10-26 16:05:45.867391"], ["id", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:45 -0500
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
Completed 200 OK in 37ms (Views: 12.7ms | ActiveRecord: 3.9ms | Allocations: 2899)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (8.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 331ms (Views: 0.5ms | ActiveRecord: 0.9ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 367ms (Views: 1.1ms | ActiveRecord: 0.9ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 285ms (Views: 2.4ms | ActiveRecord: 1.1ms | Allocations: 560)
  [1m[35m (8.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-10-26 11:05:46 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Destroy (0.4ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 1.9ms | Allocations: 1544)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 383ms (Views: 1.2ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 11:05:46 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 16:05:46.716655"], ["updated_at", "2020-10-26 16:05:46.716655"]]
  [1m[35m (1.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 10ms (Views: 0.6ms | ActiveRecord: 3.2ms | Allocations: 2578)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 440ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 371ms (Views: 0.7ms | ActiveRecord: 4.1ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 349ms (Views: 7.3ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 11:05:47 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
  [1m[36mUser Load (12.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (7.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (1.3ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-10-26 16:05:47.377933"], ["updated_at", "2020-10-26 16:05:47.377933"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 54ms (Views: 2.3ms | ActiveRecord: 22.9ms | Allocations: 2704)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 426ms (Views: 0.4ms | ActiveRecord: 2.3ms | Allocations: 560)
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-10-26 11:05:47 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 311ms (Views: 0.7ms | ActiveRecord: 2.1ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 468ms (Views: 1.0ms | ActiveRecord: 1.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 11:05:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 303ms (Views: 0.4ms | ActiveRecord: 0.7ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 11:05:48 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 332ms (Views: 8.3ms | ActiveRecord: 2.0ms | Allocations: 560)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-10-26 11:05:48 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (7.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (1.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
Completed 200 OK in 30ms (Views: 1.5ms | ActiveRecord: 11.4ms | Allocations: 1583)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (3.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (3.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (969.5ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (954.9ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.2ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 17:36:47.598175', '2020-10-26 17:36:47.598175', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 17:36:47.598175', '2020-10-26 17:36:47.598175', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$tdMB0EUIwuVfY60Iz7mXWuvlXs55JH5LvX1mVh4Uu5EpATfuNUCmO', '2020-10-26 17:36:47.598175', '2020-10-26 17:36:47.598175', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$rbh0sPZ8D/t.SR9yhtYx3eDXpIWkb6zWjKd4yzxjcCTTCbN/dijha', '2020-10-26 17:36:47.598175', '2020-10-26 17:36:47.598175', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$inwbLjJRJkkUmjmdOnu57.VNqlZJVEshobxC4ilknbeiAo0VzoqqW', '2020-10-26 17:36:47.598175', '2020-10-26 17:36:47.598175', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:36:47.609197', '2020-10-26 17:36:47.609197', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:36:47.609197', '2020-10-26 17:36:47.609197', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:36:47.609197', '2020-10-26 17:36:47.609197', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:36:47.609197', '2020-10-26 17:36:47.609197', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 17:36:47.609197', '2020-10-26 17:36:47.609197', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 17:36:47.609197', '2020-10-26 17:36:47.609197', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 17:36:47.616380', '2020-10-26 17:36:47.616380', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 17:36:47.616380', '2020-10-26 17:36:47.616380', DEFAULT, DEFAULT)[0m
  [1m[35m (22.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (12.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 17:36:47.620393', '2020-10-26 17:36:47.620393', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 17:36:47.620393', '2020-10-26 17:36:47.620393', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$VMBTkpJR.UXR.jiDnZVnFOU9kzxVqB00Bz/YiOdJTjPF/O70rUPW.', '2020-10-26 17:36:47.620393', '2020-10-26 17:36:47.620393', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$Zczv3umqFpjIOIf3cDSLiOMCmF1mj6ZjP3k8qQVK4Hqi4QHEXW1J6', '2020-10-26 17:36:47.620393', '2020-10-26 17:36:47.620393', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$LF7dmcChN56LZ8YaAXZyk.6oLOMv1L7jKpqlH0LuOO.xnnBztiSoy', '2020-10-26 17:36:47.620393', '2020-10-26 17:36:47.620393', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:36:47.633008', '2020-10-26 17:36:47.633008', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:36:47.633008', '2020-10-26 17:36:47.633008', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:36:47.633008', '2020-10-26 17:36:47.633008', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:36:47.633008', '2020-10-26 17:36:47.633008', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 17:36:47.633008', '2020-10-26 17:36:47.633008', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 17:36:47.633008', '2020-10-26 17:36:47.633008', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 17:36:47.648533', '2020-10-26 17:36:47.648533', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 17:36:47.648533', '2020-10-26 17:36:47.648533', DEFAULT, DEFAULT)[0m
  [1m[35m (7.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:47 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 316ms (Views: 2.1ms | ActiveRecord: 1.4ms | Allocations: 6583)
Completed 200 OK in 322ms (Views: 1.8ms | ActiveRecord: 1.0ms | Allocations: 6583)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:48 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:48 -0500
Processing by Api::V1::UsersController#login as JSON
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 273ms (Views: 0.6ms | ActiveRecord: 0.6ms | Allocations: 561)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 278ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 561)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 276ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-10-26 12:36:48 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 158)
Completed 200 OK in 277ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 12:36:48 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 7ms (Views: 0.2ms | ActiveRecord: 0.9ms | Allocations: 1925)
  [1m[35m (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 298ms (Views: 0.4ms | ActiveRecord: 2.8ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 347ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 286ms (Views: 1.1ms | ActiveRecord: 0.9ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 273ms (Views: 0.6ms | ActiveRecord: 1.1ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 263ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 12:36:49 -0500
Completed 200 OK in 273ms (Views: 0.9ms | ActiveRecord: 0.9ms | Allocations: 560)
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 12:36:49 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.3ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 27ms (Views: 1.1ms | ActiveRecord: 1.3ms | Allocations: 6596)
  [1m[35m (5.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.2ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 216ms (Views: 12.6ms | ActiveRecord: 3.7ms | Allocations: 26154)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 283ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 295ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 270ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 264ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 267ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 12:36:50 -0500
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.2ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.3ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.4ms | Allocations: 1511)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 275ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-10-26 12:36:50 -0500
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.4ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-10-26 17:36:50.842597"], ["updated_at", "2020-10-26 17:36:50.842597"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued PhotoQualityJob (Job ID: f358747c-33cf-4420-bafc-6908d2fc1d04) to Test(default) with arguments: 298486375
Completed 201 Created in 29ms (Views: 1.2ms | ActiveRecord: 2.7ms | Allocations: 8574)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 346ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 332ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 284ms (Views: 0.7ms | ActiveRecord: 0.8ms | Allocations: 560)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:36:51 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-10-26 17:36:51.351815"], ["updated_at", "2020-10-26 17:36:51.351815"], ["admon", "80000"], ["rooms", "3"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 62ms (Views: 0.5ms | ActiveRecord: 1.6ms | Allocations: 26527)
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 292ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:36:51 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (2.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 17:36:51.524915"], ["updated_at", "2020-10-26 17:36:51.524915"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 27ms (Views: 0.9ms | ActiveRecord: 3.6ms | Allocations: 3453)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 314ms (Views: 2.1ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 294ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 269ms (Views: 1.2ms | ActiveRecord: 0.3ms | Allocations: 560)
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-10-26 12:36:51 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[36mUser Load (5.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 404 Not Found in 16ms (Views: 0.2ms | ActiveRecord: 6.8ms | Allocations: 1575)
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 310ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:36:52 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 17:36:52.164443"], ["updated_at", "2020-10-26 17:36:52.164443"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 9ms (Views: 0.6ms | ActiveRecord: 1.9ms | Allocations: 2578)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 347ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 308ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 269ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 12:36:52 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 404 Not Found in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1458)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 278ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-10-26 12:36:52 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
Completed 200 OK in 7ms (Views: 3.5ms | ActiveRecord: 1.0ms | Allocations: 3649)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 287ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 284ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 278ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-10-26 12:36:53 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 275ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 12:36:53 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.6ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-10-26 17:36:53.357312"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.6ms | ActiveRecord: 1.8ms | Allocations: 2788)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 296ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 294ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 263ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 12:36:53 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.4ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-10-26 17:36:53.781227"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.5ms | ActiveRecord: 2.0ms | Allocations: 2793)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 279ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-10-26 12:36:53 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
Completed 200 OK in 6ms (Views: 1.9ms | ActiveRecord: 0.7ms | Allocations: 1813)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 305ms (Views: 1.5ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 328ms (Views: 1.7ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 381ms (Views: 1.1ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:36:54 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.9ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-10-26 17:36:54.523060"], ["updated_at", "2020-10-26 17:36:54.523060"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 35ms (Views: 1.4ms | ActiveRecord: 2.3ms | Allocations: 2704)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (2.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 519ms (Views: 0.7ms | ActiveRecord: 0.7ms | Allocations: 560)
  [1m[35m (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-10-26 12:36:54 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Destroy (1.0ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 16ms (Views: 0.2ms | ActiveRecord: 4.1ms | Allocations: 1561)
  [1m[35m (4.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PropertyTest: test_Should_new,_save,_and_destroy_a_property
-----------------------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 17:36:54.869286"], ["updated_at", "2020-10-26 17:36:54.869286"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 13]]
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[36mProperty Destroy (1.2ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 13]]
  [1m[36mProperty Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_a_valid_elevator_attribute
----------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_because_admon_exceeds_the_maximum_valor
------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
PropertyTest: test_test_empty_property
--------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
Completed 200 OK in 409ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 568)
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:54 -0500
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_rooms_attribute
-------------------------------------------------------------------------------
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[35m (3.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_the_proper_built_type
--------------------------------------------------------------------------
  [1m[35m (2.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_property_tax_attribute
-------------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "property_tax") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:36:55.013449"], ["updated_at", "2020-10-26 17:36:55.013449"], ["build_area", "hola"], ["property_tax", "500000"]]
  [1m[35m (10.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_a_user_id
--------------------------------------------------------------
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_common_areas_attribute
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.8ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "common_areas") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:36:55.062343"], ["updated_at", "2020-10-26 17:36:55.062343"], ["build_area", "hola"], ["common_areas", "muchisimas"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_build_area
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.9ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon", "build_area") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:36:55.091187"], ["updated_at", "2020-10-26 17:36:55.091187"], ["admon", "500000"], ["build_area", "hola"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.8ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_social_class
----------------------------------------------------------------------------
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (2.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_state
--------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PropertyTest: test_Should_create_a_property
-------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (2.7ms)[0m  [1m[32mINSERT INTO "properties" ("hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["hood", "Belen"], ["city", "Pizza"], ["user_id", 99], ["created_at", "2020-10-26 17:36:55.187570"], ["updated_at", "2020-10-26 17:36:55.187570"]]
  [1m[35m (18.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_elevator_attribute
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PropertyTest: test_Should_have_successfully_newd_a_property
-----------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (3.3ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 17:36:55.251459"], ["updated_at", "2020-10-26 17:36:55.251459"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_rooms_attribute
------------------------------------------------------------------------
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (2.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "rooms") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:36:55.282327"], ["updated_at", "2020-10-26 17:36:55.282327"], ["build_area", "hola"], ["rooms", "500"]]
  [1m[35m (3.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_admon
------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:36:55.328500"], ["updated_at", "2020-10-26 17:36:55.328500"], ["admon", "7777777"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_social_class
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "social_class") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:36:55.334170"], ["updated_at", "2020-10-26 17:36:55.334170"], ["build_area", "hola"], ["social_class", "Industrial"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_url
-------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PhotoTest: test_Should_successfully_create_a_photo
--------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.6ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.zeldadeprueba.com"], ["property_id", 2], ["created_at", "2020-10-26 17:36:55.363241"], ["updated_at", "2020-10-26 17:36:55.363241"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
PhotoTest: test_Should_create,_save_and_delete_a_property,_as_well_as_inspecting_the_link
-----------------------------------------------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.5ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.linkdeprueba.com"], ["property_id", 1], ["created_at", "2020-10-26 17:36:55.396236"], ["updated_at", "2020-10-26 17:36:55.396236"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.3ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 298486377]]
  [1m[36mPhoto Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "photos" WHERE "photos"."property_id" = $1 LIMIT $2[0m  [["property_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_property_id
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (6.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$qZZmt4w8f/SWqbiMFkAONOlI0F1MR.OqJJ0gV0LySYoimLbVVaMYO"], ["created_at", "2020-10-26 17:36:55.451649"], ["updated_at", "2020-10-26 17:36:55.451649"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 476ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 12:36:55 -0500
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$6HaqkSls0GNSdXq3KjWnCOAaycR5bUVxPu43mN4/dF.TTEWHIhs4C"], ["created_at", "2020-10-26 17:36:55.493016"], ["updated_at", "2020-10-26 17:36:55.493016"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (5.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$aJcXRznvOY2om61IXuF6Y.R63.ZHkrj/cWcHxGABVnbp0VbOj1HA6"], ["created_at", "2020-10-26 17:36:55.502173"], ["updated_at", "2020-10-26 17:36:55.502173"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$A.OyThQIfsWss9KBXlAdueu4/T8SExRgmvYz4p6S00P600Ao8XO6i"], ["created_at", "2020-10-26 17:36:55.523319"], ["updated_at", "2020-10-26 17:36:55.523319"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[35m (2.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$MKsr72p89tgg9m59mEOtteSaxJw8AXqqSDo.L4PrPpzNoYtnCkaC."], ["created_at", "2020-10-26 17:36:55.536040"], ["updated_at", "2020-10-26 17:36:55.536040"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (1.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$8lAS0ChCbXE5y.NOwtbrEO98sO4qxC/xUM5aC1H0EJ2Gyf9waJm.m"], ["created_at", "2020-10-26 17:36:55.546317"], ["updated_at", "2020-10-26 17:36:55.546317"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Destroy (7.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[35m (4.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$dYndajXayrWNiR8DRaivzOx2sHu8rAxdi63e3gxkk/s7/8/W2DSfq"], ["created_at", "2020-10-26 17:36:55.575279"], ["updated_at", "2020-10-26 17:36:55.575279"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$SGkvxzExqk918HArNQMiu.AxdDb7teeI04EkKpbgGR9mu6kd/lnJq"], ["created_at", "2020-10-26 17:36:55.595097"], ["updated_at", "2020-10-26 17:36:55.595097"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[35m (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (5.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$TJGu2K2tyfqrNOkYDl9/a.D8Tl80q4p5lvHDfB.BhMa.FPWHLLoo2"], ["created_at", "2020-10-26 17:36:55.624635"], ["updated_at", "2020-10-26 17:36:55.624635"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$xrYhyZy9COJMIGnh/V2E7OzW/6.ggznojkK4c9StwUb.EwPdvF0ui"], ["created_at", "2020-10-26 17:36:55.628510"], ["updated_at", "2020-10-26 17:36:55.628510"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (1.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProperty Load (1.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Destroy (1.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$seW2FB6h5qUCAreXkGd6M.MNCOiJuvwwWB5QjCrgpO2TesXR3qrnq"], ["created_at", "2020-10-26 17:36:55.669484"], ["updated_at", "2020-10-26 17:36:55.669484"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[35m (3.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (6.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (1.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (2.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486381]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486381]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 283ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 346ms (Views: 5.5ms | ActiveRecord: 6.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 293ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 12:36:56 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 1595)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 297ms (Views: 0.5ms | ActiveRecord: 1.0ms | Allocations: 560)
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 12:36:56 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 6ms (Views: 0.2ms | ActiveRecord: 0.5ms | Allocations: 1595)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 304ms (Views: 1.2ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 570ms (Views: 0.7ms | ActiveRecord: 1.1ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 445ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:57 -0500
Processing by Api::V1::UsersController#login as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 365)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 396ms (Views: 0.7ms | ActiveRecord: 1.9ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 12:36:57 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 6ms (Views: 2.6ms | ActiveRecord: 0.5ms | Allocations: 2066)
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 278ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 276ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:36:57 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.5ms | ActiveRecord: 0.6ms | Allocations: 1433)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 359ms (Views: 0.7ms | ActiveRecord: 0.9ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 287ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 343ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:36:58 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 11ms (Views: 0.9ms | ActiveRecord: 2.0ms | Allocations: 1941)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 281ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:36:58 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 9ms (Views: 0.8ms | ActiveRecord: 1.8ms | Allocations: 2367)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 328ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 287ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 332ms (Views: 1.0ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-10-26 12:36:58 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$snQkcJrgaoxTtKSf8HBG/OwyYTfJmDuWx7C7/wDlMUTgaKt.oF1Ze"], ["created_at", "2020-10-26 17:36:58.825828"], ["updated_at", "2020-10-26 17:36:58.825828"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 43ms (Views: 1.9ms | ActiveRecord: 3.2ms | Allocations: 1491)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
Completed 200 OK in 292ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:58 -0500
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-10-26 12:36:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 6ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 371ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 487ms (Views: 1.2ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 320ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 12:36:59 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 5ms (Views: 0.4ms | ActiveRecord: 0.7ms | Allocations: 1029)
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 345ms (Views: 0.4ms | ActiveRecord: 1.1ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:36:59 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.4ms | ActiveRecord: 0.4ms | Allocations: 1859)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 302ms (Views: 1.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:36:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 278ms (Views: 1.2ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:37:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 283ms (Views: 0.4ms | ActiveRecord: 0.4ms | Allocations: 560)
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-10-26 12:37:00 -0500
Processing by Api::V1::UsersController#update as JSON
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (2.3ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-10-26 17:37:00.197062"], ["id", 100]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 0.4ms | ActiveRecord: 4.5ms | Allocations: 2462)
  [1m[35m (2.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:37:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 264ms (Views: 0.8ms | ActiveRecord: 0.5ms | Allocations: 560)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "new_name"], ["updated_at", "2020-10-26 17:37:00.298853"], ["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:37:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 326ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:37:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 263ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:37:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 275ms (Views: 0.4ms | ActiveRecord: 1.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:37:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 269)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 296ms (Views: 1.3ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-10-26 12:37:00 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 10ms (Views: 0.2ms | ActiveRecord: 2.3ms | Allocations: 3507)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (951.0ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (948.0ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.4ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 17:38:59.780540', '2020-10-26 17:38:59.780540', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 17:38:59.780540', '2020-10-26 17:38:59.780540', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$EBo6FeVLzWqmmyJJOfPj2uiOYm8k.vr9uFmNU3eXtJav/GAky5Zcq', '2020-10-26 17:38:59.780540', '2020-10-26 17:38:59.780540', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$.UU4.0wLw7jND/w4Zt.6xu9gbx.1D/qKFMwS9A/LitGuTeEvUGW6u', '2020-10-26 17:38:59.780540', '2020-10-26 17:38:59.780540', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$JHKIaQt58MRiKueIc2J8Q.6ej4IdwEKm6pNyr7K8fXzW6T/plcZZS', '2020-10-26 17:38:59.780540', '2020-10-26 17:38:59.780540', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:38:59.798136', '2020-10-26 17:38:59.798136', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:38:59.798136', '2020-10-26 17:38:59.798136', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:38:59.798136', '2020-10-26 17:38:59.798136', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:38:59.798136', '2020-10-26 17:38:59.798136', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 17:38:59.798136', '2020-10-26 17:38:59.798136', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 17:38:59.798136', '2020-10-26 17:38:59.798136', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 17:38:59.811682', '2020-10-26 17:38:59.811682', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 17:38:59.811682', '2020-10-26 17:38:59.811682', DEFAULT, DEFAULT)[0m
  [1m[35m (11.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 17:38:59.779243', '2020-10-26 17:38:59.779243', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 17:38:59.779243', '2020-10-26 17:38:59.779243', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$oRqUVFMz1QmvSiJCdpeKV.bX8tk4/zEIpTu7aykuQ.QIMknvYNvYW', '2020-10-26 17:38:59.779243', '2020-10-26 17:38:59.779243', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$Y9rBaFUnpmDDNQtlrf9m6OCvRYB3lf6hjF6Uk3SRiKVczANYrK8I.', '2020-10-26 17:38:59.779243', '2020-10-26 17:38:59.779243', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$qVwF3S0WrOVhgVZ3YYPOCe3V.f5IbNduEPBjH/TcpxkOkTcgon092', '2020-10-26 17:38:59.779243', '2020-10-26 17:38:59.779243', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:38:59.796178', '2020-10-26 17:38:59.796178', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:38:59.796178', '2020-10-26 17:38:59.796178', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:38:59.796178', '2020-10-26 17:38:59.796178', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:38:59.796178', '2020-10-26 17:38:59.796178', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 17:38:59.796178', '2020-10-26 17:38:59.796178', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 17:38:59.796178', '2020-10-26 17:38:59.796178', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 17:38:59.807318', '2020-10-26 17:38:59.807318', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 17:38:59.807318', '2020-10-26 17:38:59.807318', DEFAULT, DEFAULT)[0m
  [1m[35m (43.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (52.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_admon
------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_build_area
-------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:39:00.068794"], ["updated_at", "2020-10-26 17:39:00.068794"], ["admon", "7777777"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProperty Create (0.9ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon", "build_area") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:39:00.075456"], ["updated_at", "2020-10-26 17:39:00.075456"], ["admon", "500000"], ["build_area", "hola"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_rooms_attribute
------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (4.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_property_tax_attribute
-------------------------------------------------------------------------
  [1m[36mProperty Create (1.9ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "rooms") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:39:00.090557"], ["updated_at", "2020-10-26 17:39:00.090557"], ["build_area", "hola"], ["rooms", "500"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_the_proper_built_type
--------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (1.0ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "property_tax") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:39:00.108668"], ["updated_at", "2020-10-26 17:39:00.108668"], ["build_area", "hola"], ["property_tax", "500000"]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_social_class
----------------------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_common_areas_attribute
-------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PropertyTest: test_Should_create_a_property
-------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.7ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "common_areas") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:39:00.146730"], ["updated_at", "2020-10-26 17:39:00.146730"], ["build_area", "hola"], ["common_areas", "muchisimas"]]
  [1m[36mProperty Create (1.5ms)[0m  [1m[32mINSERT INTO "properties" ("hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["hood", "Belen"], ["city", "Pizza"], ["user_id", 99], ["created_at", "2020-10-26 17:39:00.152044"], ["updated_at", "2020-10-26 17:39:00.152044"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PropertyTest: test_Should_have_successfully_newd_a_property
-----------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
PropertyTest: test_test_empty_property
--------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.1ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 17:39:00.171712"], ["updated_at", "2020-10-26 17:39:00.171712"]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PropertyTest: test_Should_new,_save,_and_destroy_a_property
-----------------------------------------------------------
--------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_state
--------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 17:39:00.185786"], ["updated_at", "2020-10-26 17:39:00.185786"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProperty Create (13.9ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "state") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:39:00.187192"], ["updated_at", "2020-10-26 17:39:00.187192"], ["social_class", "5"], ["state", "holiwis"]]
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 15]]
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_a_user_id
--------------------------------------------------------------
  [1m[36mProperty Load (1.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProperty Destroy (1.7ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 15]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_rooms_attribute
-------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_elevator_attribute
---------------------------------------------------------------------------
  [1m[36mProperty Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
PropertyTest: test_Should_not_new_a_property_because_admon_exceeds_the_maximum_valor
------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
---------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_social_class
---------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_a_valid_elevator_attribute
----------------------------------------------------------------------------------
  [1m[35m (3.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "social_class") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:39:00.266428"], ["updated_at", "2020-10-26 17:39:00.266428"], ["build_area", "hola"], ["social_class", "Industrial"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
----------------------------------------------------------------
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:00 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 341ms (Views: 0.6ms | ActiveRecord: 1.0ms | Allocations: 849)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 359ms (Views: 1.7ms | ActiveRecord: 1.1ms | Allocations: 840)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 266ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 564)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:01 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 309ms (Views: 0.7ms | ActiveRecord: 1.0ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:01 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 272ms (Views: 0.8ms | ActiveRecord: 1.6ms | Allocations: 564)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 12:39:01 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.7ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 35ms (Views: 4.8ms | ActiveRecord: 6.5ms | Allocations: 4235)
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:01 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 309ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-10-26 12:39:01 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 158)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:01 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 301ms (Views: 0.6ms | ActiveRecord: 0.5ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:01 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 277ms (Views: 0.6ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:01 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 268ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 564)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:01 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 274ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:02 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 281ms (Views: 0.8ms | ActiveRecord: 0.4ms | Allocations: 564)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 12:39:02 -0500
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.3ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (3.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (1.1ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 24ms (Views: 0.2ms | ActiveRecord: 5.4ms | Allocations: 6314)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:02 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 368ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 12:39:02 -0500
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.3ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 39ms (Views: 1.2ms | ActiveRecord: 0.9ms | Allocations: 6568)
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:02 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (5.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 365ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:02 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 307ms (Views: 0.7ms | ActiveRecord: 5.1ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:02 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 316ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 564)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:02 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 277ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:03 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 274ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 564)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 12:39:03 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 0.5ms | Allocations: 1599)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:03 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 302ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-10-26 12:39:03 -0500
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.6ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-10-26 17:39:03.359879"], ["updated_at", "2020-10-26 17:39:03.359879"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued PhotoQualityJob (Job ID: fb3c234a-8790-46d7-bf92-9f189cba4295) to Test(default) with arguments: 298486375
Completed 201 Created in 19ms (Views: 1.3ms | ActiveRecord: 2.4ms | Allocations: 3169)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:03 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 355ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:03 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 327ms (Views: 1.6ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:03 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 312ms (Views: 1.0ms | ActiveRecord: 0.2ms | Allocations: 564)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 12:39:03 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 155)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:03 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 279ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:39:03 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (7.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-10-26 17:39:04.004129"], ["updated_at", "2020-10-26 17:39:04.004129"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 23ms (Views: 0.7ms | ActiveRecord: 8.3ms | Allocations: 2755)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:04 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (5.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 424ms (Views: 0.8ms | ActiveRecord: 0.8ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:04 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (6.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 455ms (Views: 1.1ms | ActiveRecord: 5.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:04 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (5.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 426ms (Views: 0.8ms | ActiveRecord: 6.4ms | Allocations: 564)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-10-26 12:39:04 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (1.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Destroy (1.1ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (1.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 23ms (Views: 0.3ms | ActiveRecord: 5.5ms | Allocations: 1558)
  [1m[35m (4.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (4.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:04 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 564ms (Views: 0.5ms | ActiveRecord: 5.2ms | Allocations: 560)
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-10-26 12:39:05 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 404 Not Found in 5ms (Views: 0.1ms | ActiveRecord: 0.9ms | Allocations: 1458)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:05 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 389ms (Views: 0.9ms | ActiveRecord: 0.4ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:05 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 309ms (Views: 0.7ms | ActiveRecord: 1.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:05 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 324ms (Views: 0.5ms | ActiveRecord: 3.6ms | Allocations: 564)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 12:39:05 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (3.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.6ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-10-26 17:39:05.590160"], ["id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 19ms (Views: 3.3ms | ActiveRecord: 6.1ms | Allocations: 2786)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:05 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 286ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-10-26 12:39:05 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:05 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 360ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:05 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 285ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:05 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 273ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-10-26 12:39:06 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
Completed 200 OK in 304ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 564)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:39:06 -0500
Completed 200 OK in 10ms (Views: 3.9ms | ActiveRecord: 0.9ms | Allocations: 3650)
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.8ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 17:39:06.296088"], ["updated_at", "2020-10-26 17:39:06.296088"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 29ms (Views: 1.4ms | ActiveRecord: 4.0ms | Allocations: 2578)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 331ms (Views: 0.4ms | ActiveRecord: 0.7ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 325ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 283ms (Views: 1.6ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:39:06 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 277ms (Views: 1.4ms | ActiveRecord: 0.2ms | Allocations: 564)
  [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
[31mUnpermitted parameter: :format[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:39:06 -0500
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (3.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mProperty Create (1.9ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-10-26 17:39:06.941032"], ["updated_at", "2020-10-26 17:39:06.941032"], ["admon", "80000"], ["rooms", "3"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 201 Created in 25ms (Views: 1.2ms | ActiveRecord: 10.8ms | Allocations: 2734)
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (2.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[36mProperty Create (0.9ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 17:39:06.951375"], ["updated_at", "2020-10-26 17:39:06.951375"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
Completed 201 Created in 22ms (Views: 3.2ms | ActiveRecord: 3.2ms | Allocations: 2695)
  [1m[35m (4.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:06 -0500
  [1m[35m (3.5ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (3.7ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 306ms (Views: 1.1ms | ActiveRecord: 0.5ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:07 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 361ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:07 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 280ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 565)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-10-26 12:39:07 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (5.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
Completed 200 OK in 28ms (Views: 3.4ms | ActiveRecord: 5.8ms | Allocations: 1814)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:07 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 282ms (Views: 1.2ms | ActiveRecord: 0.2ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 12:39:07 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (1.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (1.2ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-10-26 17:39:07.657249"], ["id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 17ms (Views: 2.8ms | ActiveRecord: 5.4ms | Allocations: 2786)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:07 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 342ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:07 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 309ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:07 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 289ms (Views: 0.7ms | ActiveRecord: 1.0ms | Allocations: 564)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 12:39:08 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 281ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[36mProperty Load (2.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 404 Not Found in 12ms (Views: 0.6ms | ActiveRecord: 4.4ms | Allocations: 1458)
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-10-26 12:39:08 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"1"}
  [1m[35m (4.8ms)[0m  [1m[31mROLLBACK[0m
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 1.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:08 -0500
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:08 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 278ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:08 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 316ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:08 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 312ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 564)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 12:39:08 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 5ms (Views: 0.2ms | ActiveRecord: 0.5ms | Allocations: 1595)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:08 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 309ms (Views: 0.6ms | ActiveRecord: 2.6ms | Allocations: 560)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "new_name"], ["updated_at", "2020-10-26 17:39:08.946482"], ["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.6ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:08 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 335ms (Views: 0.6ms | ActiveRecord: 0.7ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:09 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 409ms (Views: 0.5ms | ActiveRecord: 0.8ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:09 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 293ms (Views: 0.5ms | ActiveRecord: 0.8ms | Allocations: 564)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:09 -0500
Processing by Api::V1::UsersController#login as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms | Allocations: 366)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:09 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 267ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:09 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.3ms | ActiveRecord: 0.7ms | Allocations: 269)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:09 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 285ms (Views: 0.9ms | ActiveRecord: 0.2ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:09 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 339ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:10 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 279ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 564)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:39:10 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.5ms | ActiveRecord: 0.7ms | Allocations: 1437)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:10 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 333ms (Views: 0.6ms | ActiveRecord: 3.3ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:39:10 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 8ms (Views: 0.5ms | ActiveRecord: 1.9ms | Allocations: 2195)
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:10 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 302ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:10 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 277ms (Views: 0.9ms | ActiveRecord: 0.6ms | Allocations: 564)
Completed 200 OK in 357ms (Views: 1.0ms | ActiveRecord: 0.3ms | Allocations: 568)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 12:39:10 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:10 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 8ms (Views: 4.4ms | ActiveRecord: 0.9ms | Allocations: 2084)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:10 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 271ms (Views: 1.3ms | ActiveRecord: 0.5ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:11 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 314ms (Views: 0.6ms | ActiveRecord: 0.5ms | Allocations: 560)
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-10-26 12:39:11 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 20ms (Views: 0.3ms | ActiveRecord: 1.5ms | Allocations: 3905)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:11 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 320ms (Views: 1.4ms | ActiveRecord: 0.4ms | Allocations: 564)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:39:11 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 6ms (Views: 0.6ms | ActiveRecord: 0.5ms | Allocations: 1863)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:11 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 343ms (Views: 0.8ms | ActiveRecord: 1.1ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:11 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 290ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:11 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 277ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 12:39:11 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 6ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 1029)
  [1m[35m (2.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:11 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 307ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 564)
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 12:39:11 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.5ms | Allocations: 1595)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:11 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 289ms (Views: 0.5ms | ActiveRecord: 2.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:12 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 280ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:12 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 265ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-10-26 12:39:12 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$usTkNozdfnBfhTsgtnL03eYwBrmsPmIXGQZHn2lLl1J4GmqmsyMYK"], ["created_at", "2020-10-26 17:39:12.302802"], ["updated_at", "2020-10-26 17:39:12.302802"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 7ms (Views: 0.4ms | ActiveRecord: 1.2ms | Allocations: 1514)
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:12 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 271ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 564)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:39:12 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 10ms (Views: 0.5ms | ActiveRecord: 3.9ms | Allocations: 2386)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_property_id
---------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_url
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
PhotoTest: test_Should_create,_save_and_delete_a_property,_as_well_as_inspecting_the_link
-----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.6ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.linkdeprueba.com"], ["property_id", 1], ["created_at", "2020-10-26 17:39:12.565347"], ["updated_at", "2020-10-26 17:39:12.565347"]]
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.4ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 298486375]]
  [1m[36mPhoto Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "photos" WHERE "photos"."property_id" = $1 LIMIT $2[0m  [["property_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PhotoTest: test_Should_successfully_create_a_photo
--------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.7ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.zeldadeprueba.com"], ["property_id", 2], ["created_at", "2020-10-26 17:39:12.578560"], ["updated_at", "2020-10-26 17:39:12.578560"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$PWq5KlXfORFbGA3LME0lu.bdhgV4FQFIfX3dL1zbSQ89B19ZnrK7G"], ["created_at", "2020-10-26 17:39:12.595963"], ["updated_at", "2020-10-26 17:39:12.595963"], ["full_name", "valid"], ["cellphone", "3001234567"]]
Completed 200 OK in 291ms (Views: 2.4ms | ActiveRecord: 0.3ms | Allocations: 568)
  [1m[35m (7.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:12 -0500
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$4MAIcFrA.396DKrMOK03ouuoCxyOjwSdJvMYUuvH9jsf7xuxQjYA6"], ["created_at", "2020-10-26 17:39:12.630106"], ["updated_at", "2020-10-26 17:39:12.630106"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (12.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (2.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$J3rk3G6f9s5LPhWsMXP18OPH9oH/Gf5F4.McuhuZDlRKct9Xs3/be"], ["created_at", "2020-10-26 17:39:12.701397"], ["updated_at", "2020-10-26 17:39:12.701397"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Destroy (1.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$8cTBUqD5DX.cDBiRRZWSReInyooowtabXvQbh.yszdn8jA3qVdVey"], ["created_at", "2020-10-26 17:39:12.725883"], ["updated_at", "2020-10-26 17:39:12.725883"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$v8ALB9Tzzesda0W5xw4BvuGVtzW5Lhb8JnyW.YOapx660H9H/wLLO"], ["created_at", "2020-10-26 17:39:12.761857"], ["updated_at", "2020-10-26 17:39:12.761857"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Destroy (0.9ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$qBs1FKgs3lj3nCU3zsg10ey7eQO9IWU85s7AGM9mdLvnJIWwpYB2q"], ["created_at", "2020-10-26 17:39:12.795906"], ["updated_at", "2020-10-26 17:39:12.795906"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
  [1m[35m (2.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$63aKTrPqFnlSuPoSZYajpupSjV2CHSPW4kv0nTreqkaDh0nT/05CC"], ["created_at", "2020-10-26 17:39:12.839046"], ["updated_at", "2020-10-26 17:39:12.839046"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (2.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (7.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486381]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486381]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$HUCG..fDVG.XEp0IOoFJmOnvMWMrat9HSilEmnJAyescN60eW4aH2"], ["created_at", "2020-10-26 17:39:12.885787"], ["updated_at", "2020-10-26 17:39:12.885787"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486382]]
  [1m[36mUser Destroy (1.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486382]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (8.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$UnRIJKs5mNP.uaDd5ULm6OgG9rC6VGi0e7AFmlwH1Mg3DnvfXjahi"], ["created_at", "2020-10-26 17:39:12.943829"], ["updated_at", "2020-10-26 17:39:12.943829"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 332ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-10-26 12:39:12 -0500
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::V1::UsersController#update as JSON
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$WMayLxOsF0/NXE2ymOasEe4g3ReCB7t2E9hZ.4owH/XixyYfw9h7a"], ["created_at", "2020-10-26 17:39:12.951472"], ["updated_at", "2020-10-26 17:39:12.951472"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-10-26 17:39:12.958142"], ["id", 100]]
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486384]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.8ms | ActiveRecord: 2.0ms | Allocations: 2436)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Destroy (1.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486384]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486383]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486383]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$RMg2Q7ZTBS3RUEQjVnZrWePKE5maGlP2oqVTQvTtGl8Vkf7tQMGSq"], ["created_at", "2020-10-26 17:39:12.972114"], ["updated_at", "2020-10-26 17:39:12.972114"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (2.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (1.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.4ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1017.5ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1019.8ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.6ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.0ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 17:39:32.425496', '2020-10-26 17:39:32.425496', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 17:39:32.425496', '2020-10-26 17:39:32.425496', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$Bx7okGP8hnwudsnsVIDTZu/JZzkivEEW1rdYv5TlzgKc7Gaj1h6u6', '2020-10-26 17:39:32.425496', '2020-10-26 17:39:32.425496', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$IO6xFWkGUomX98Dj/UgCBeGzolLIGOhZ7MQIos5zc4b4q1wg9nxre', '2020-10-26 17:39:32.425496', '2020-10-26 17:39:32.425496', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$HZc5YFeFNJCigsDb5JUj/u5QtOO4yEpxOY0JE2BNCLon7E6oqa97K', '2020-10-26 17:39:32.425496', '2020-10-26 17:39:32.425496', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:39:32.444041', '2020-10-26 17:39:32.444041', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:39:32.444041', '2020-10-26 17:39:32.444041', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:39:32.444041', '2020-10-26 17:39:32.444041', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:39:32.444041', '2020-10-26 17:39:32.444041', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 17:39:32.444041', '2020-10-26 17:39:32.444041', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 17:39:32.444041', '2020-10-26 17:39:32.444041', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 17:39:32.452940', '2020-10-26 17:39:32.452940', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 17:39:32.452940', '2020-10-26 17:39:32.452940', DEFAULT, DEFAULT)[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.0ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 17:39:32.475528', '2020-10-26 17:39:32.475528', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 17:39:32.475528', '2020-10-26 17:39:32.475528', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$hHwvFuOxrIdnb1E4V7fN1.QFQoS.AeESTM2VEwc3L/5tCv8B/jv4a', '2020-10-26 17:39:32.475528', '2020-10-26 17:39:32.475528', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$ASL2tIrm6SVF9UegLk0yy.sEXotGtFFLoPctOnMhiuKbPuOJTW9xW', '2020-10-26 17:39:32.475528', '2020-10-26 17:39:32.475528', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$DRJLOcm5Yzf9UP6VeqKkNulY7A4E0I6bokEjFhCDIVI8iWA/CAObW', '2020-10-26 17:39:32.475528', '2020-10-26 17:39:32.475528', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:39:32.484070', '2020-10-26 17:39:32.484070', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:39:32.484070', '2020-10-26 17:39:32.484070', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:39:32.484070', '2020-10-26 17:39:32.484070', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:39:32.484070', '2020-10-26 17:39:32.484070', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 17:39:32.484070', '2020-10-26 17:39:32.484070', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 17:39:32.484070', '2020-10-26 17:39:32.484070', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 17:39:32.490663', '2020-10-26 17:39:32.490663', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 17:39:32.490663', '2020-10-26 17:39:32.490663', DEFAULT, DEFAULT)[0m
  [1m[35m (39.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (21.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:32 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 280ms (Views: 0.9ms | ActiveRecord: 1.1ms | Allocations: 6583)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 284ms (Views: 0.9ms | ActiveRecord: 0.5ms | Allocations: 6583)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 273ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 12:39:33 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 270ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-10-26 12:39:33 -0500
Processing by Api::V1::UsersController#update as JSON
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 401 Unauthorized in 21ms (Views: 0.2ms | ActiveRecord: 1.5ms | Allocations: 1889)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (2.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[35m (3.8ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:33 -0500
  [1m[36mUser Update (1.9ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-10-26 17:39:33.235462"], ["id", 100]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
Completed 200 OK in 40ms (Views: 2.1ms | ActiveRecord: 12.1ms | Allocations: 3559)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 282ms (Views: 0.8ms | ActiveRecord: 1.0ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 333ms (Views: 0.5ms | ActiveRecord: 1.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 268ms (Views: 0.5ms | ActiveRecord: 0.5ms | Allocations: 560)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "new_name"], ["updated_at", "2020-10-26 17:39:33.810939"], ["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 276ms (Views: 1.2ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:39:33 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 25ms (Views: 0.8ms | ActiveRecord: 3.2ms | Allocations: 6399)
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 319ms (Views: 0.8ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 326ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 313ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 12:39:34 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 8ms (Views: 0.2ms | ActiveRecord: 0.5ms | Allocations: 1032)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 278ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:39:34 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 13ms (Views: 1.0ms | ActiveRecord: 1.6ms | Allocations: 1859)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 307ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 293ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 268ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-10-26 12:39:35 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$zrqkbRGqdy0mbT8JHpZhAuT6nQpFFpvTq3Gg7IJ7zhrT/HtEib1Sq"], ["created_at", "2020-10-26 17:39:35.063052"], ["updated_at", "2020-10-26 17:39:35.063052"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 10ms (Views: 0.5ms | ActiveRecord: 2.0ms | Allocations: 1551)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 295ms (Views: 0.6ms | ActiveRecord: 0.5ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:35 -0500
Processing by Api::V1::UsersController#login as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 363)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 281ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 266ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 270ms (Views: 0.7ms | ActiveRecord: 0.7ms | Allocations: 560)
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 12:39:35 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1595)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 267ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:39:35 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (5.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (3.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 16ms (Views: 1.0ms | ActiveRecord: 9.6ms | Allocations: 1941)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 292ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 293ms (Views: 0.7ms | ActiveRecord: 3.7ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 289ms (Views: 0.5ms | ActiveRecord: 0.7ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 12:39:36 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 13ms (Views: 4.8ms | ActiveRecord: 3.1ms | Allocations: 2065)
  [1m[36mUser Load (5.8ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 285ms (Views: 1.2ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:39:36 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 25ms (Views: 1.6ms | ActiveRecord: 3.7ms | Allocations: 1433)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 310ms (Views: 0.5ms | ActiveRecord: 4.7ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:36 -0500
Completed 200 OK in 271ms (Views: 1.2ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 263ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-10-26 12:39:36 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 200 OK in 279ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-10-26 12:39:36 -0500
Completed 422 Unprocessable Entity in 16ms (Views: 0.4ms | ActiveRecord: 2.5ms | Allocations: 5557)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:36 -0500
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:36 -0500
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 314ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:37 -0500
Completed 200 OK in 318ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 283ms (Views: 0.6ms | ActiveRecord: 1.2ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Completed 200 OK in 280ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:39:37 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 3ms (Views: 0.8ms | ActiveRecord: 0.6ms | Allocations: 269)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-10-26 17:39:37.645282"], ["updated_at", "2020-10-26 17:39:37.645282"], ["admon", "80000"], ["rooms", "3"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 83ms (Views: 0.8ms | ActiveRecord: 1.5ms | Allocations: 26379)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 321ms (Views: 0.7ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 295ms (Views: 0.5ms | ActiveRecord: 1.0ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 277ms (Views: 1.1ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-10-26 12:39:38 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
Completed 200 OK in 280ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 12:39:38 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:38 -0500
  [1m[36mProperty Destroy (9.7ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (1.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
Completed 200 OK in 60ms (Views: 0.2ms | ActiveRecord: 12.6ms | Allocations: 22108)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 291ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 294ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 266ms (Views: 0.8ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-10-26 12:39:38 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 274ms (Views: 0.8ms | ActiveRecord: 0.7ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:39:38 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (6.3ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 17:39:38.888695"], ["updated_at", "2020-10-26 17:39:38.888695"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 27ms (Views: 0.9ms | ActiveRecord: 8.3ms | Allocations: 3999)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 296ms (Views: 0.7ms | ActiveRecord: 2.8ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 287ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 272ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 560)
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-10-26 12:39:39 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 404 Not Found in 7ms (Views: 0.8ms | ActiveRecord: 1.0ms | Allocations: 1575)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 274ms (Views: 0.9ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-10-26 12:39:39 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
Completed 200 OK in 23ms (Views: 5.7ms | ActiveRecord: 3.5ms | Allocations: 3649)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 374ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 323ms (Views: 0.6ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 262ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 12:39:40 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.7ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-10-26 17:39:40.088619"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 0.8ms | ActiveRecord: 1.8ms | Allocations: 2761)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 299ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:39:40 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (1.8ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-10-26 17:39:40.174725"], ["updated_at", "2020-10-26 17:39:40.174725"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 45ms (Views: 1.4ms | ActiveRecord: 3.2ms | Allocations: 2705)
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 320ms (Views: 0.5ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 357ms (Views: 1.1ms | ActiveRecord: 1.0ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 279ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-10-26 12:39:40 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
Completed 200 OK in 14ms (Views: 3.1ms | ActiveRecord: 1.0ms | Allocations: 3700)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 306ms (Views: 1.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 12:39:40 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (11.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.8ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-10-26 17:39:40.930020"], ["id", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 50ms (Views: 0.8ms | ActiveRecord: 15.8ms | Allocations: 2788)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 365ms (Views: 0.9ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 318ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 284ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:39:41 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 17:39:41.427022"], ["updated_at", "2020-10-26 17:39:41.427022"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 12ms (Views: 0.9ms | ActiveRecord: 1.8ms | Allocations: 2696)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$Xw2Thed2j7rDLx1eRB1DhevYKzf/NmUwzPm5i2ysYw943Ad/TJUk."], ["created_at", "2020-10-26 17:39:41.444331"], ["updated_at", "2020-10-26 17:39:41.444331"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$9pggx8vWuRF4VLJ2jmgc3.qI/uk0FLp8bpe4o/Q5XrQgzsAu0Ly7y"], ["created_at", "2020-10-26 17:39:41.512500"], ["updated_at", "2020-10-26 17:39:41.512500"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (5.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$trUUQD7HBBZ.rCzrFxNkGeS/H.g1c12klanaZdfBOrvSHVKHn5kG6"], ["created_at", "2020-10-26 17:39:41.530102"], ["updated_at", "2020-10-26 17:39:41.530102"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (2.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Destroy (1.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
Completed 200 OK in 294ms (Views: 0.9ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (6.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$LEWSqWAKqS05UpYqcw3NtOu08yr4cqbLbD1bVXgE1dS9yFGfJ7r/e"], ["created_at", "2020-10-26 17:39:41.588862"], ["updated_at", "2020-10-26 17:39:41.588862"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 12:39:41 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (12.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.9ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 404 Not Found in 20ms (Views: 0.2ms | ActiveRecord: 4.6ms | Allocations: 1458)
  [1m[35m (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[36mProperty Load (1.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Destroy (2.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$D4if9le./E1Ns8rQqQsV7.3o5w.S6jJXySTUO5URcAKfy6RXO9We2"], ["created_at", "2020-10-26 17:39:41.646556"], ["updated_at", "2020-10-26 17:39:41.646556"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Create (3.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$6HRq1SF6UAj4Yp8ftDf1AOWmnxFFdnACJ9Nc.KzOmUeB3YcTyKbg6"], ["created_at", "2020-10-26 17:39:41.658458"], ["updated_at", "2020-10-26 17:39:41.658458"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (3.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (3.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[36mUser Exists? (7.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[36mUser Destroy (0.9ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[35m (3.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
  [1m[35m (9.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$Ig4/OQgpZkS5HnylQH8FQ.tBmSQmTiqvYoM8yNcDCx4moLwdCfdx6"], ["created_at", "2020-10-26 17:39:41.709905"], ["updated_at", "2020-10-26 17:39:41.709905"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Create (3.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$WITMC4AlK4w54kv1d.IZe.3g.aX265BMXu0VA7Jy62tlbJlHBMJD6"], ["created_at", "2020-10-26 17:39:41.708918"], ["updated_at", "2020-10-26 17:39:41.708918"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[35m (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486381]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$hyIpjgBINShTAdqO3Ucwy.OcNALneVpvPk1sJpKY5ei7x2iKKnygu"], ["created_at", "2020-10-26 17:39:41.719700"], ["updated_at", "2020-10-26 17:39:41.719700"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486381]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Destroy (0.9ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[35m (3.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
  [1m[36mUser Destroy (0.9ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$nzp8IoNab6Z/WZK13HQDJupasdCoIwQGftmMbg1BCU70OQ3Hxx/k6"], ["created_at", "2020-10-26 17:39:41.748869"], ["updated_at", "2020-10-26 17:39:41.748869"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486382]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$lTrImtoEwQBzVzhdDHWFDepTqGRhfs6npTYglBJ1c/f3sXJDcNsne"], ["created_at", "2020-10-26 17:39:41.759522"], ["updated_at", "2020-10-26 17:39:41.759522"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (1.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486382]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_property_id
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_url
-------------------------------------------------------
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (2.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
PhotoTest: test_Should_create,_save_and_delete_a_property,_as_well_as_inspecting_the_link
-----------------------------------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (2.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PhotoTest: test_Should_successfully_create_a_photo
--------------------------------------------------
  [1m[35m (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Create (0.8ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.linkdeprueba.com"], ["property_id", 1], ["created_at", "2020-10-26 17:39:41.845339"], ["updated_at", "2020-10-26 17:39:41.845339"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.5ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 298486375]]
  [1m[36mPhoto Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "photos" WHERE "photos"."property_id" = $1 LIMIT $2[0m  [["property_id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProperty Load (9.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPhoto Create (1.3ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.zeldadeprueba.com"], ["property_id", 2], ["created_at", "2020-10-26 17:39:41.862559"], ["updated_at", "2020-10-26 17:39:41.862559"]]
  [1m[35m (11.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[35m (6.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (2.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 283ms (Views: 0.7ms | ActiveRecord: 4.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 329ms (Views: 0.5ms | ActiveRecord: 4.0ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 279ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 278ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 279ms (Views: 1.1ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 12:39:42 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 8ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1631)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 272ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 12:39:42 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.4ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 15ms (Views: 2.6ms | ActiveRecord: 2.1ms | Allocations: 1904)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 290ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 313ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 275ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 285ms (Views: 0.5ms | ActiveRecord: 0.6ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 271ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-10-26 12:39:43 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 279ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 12:39:43 -0500
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (5.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.4ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 15ms (Views: 3.4ms | ActiveRecord: 5.9ms | Allocations: 1574)
  [1m[35m (5.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 403ms (Views: 3.3ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 400ms (Views: 0.5ms | ActiveRecord: 1.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 278ms (Views: 0.5ms | ActiveRecord: 1.9ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 281ms (Views: 0.5ms | ActiveRecord: 2.6ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:39:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (7.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 280ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 12:39:44 -0500
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.2ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.3ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.3ms | ActiveRecord: 1.4ms | Allocations: 1618)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_common_areas_attribute
-------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "common_areas") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:39:44.621819"], ["updated_at", "2020-10-26 17:39:44.621819"], ["build_area", "hola"], ["common_areas", "muchisimas"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PropertyTest: test_Should_new,_save,_and_destroy_a_property
-----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 17:39:44.629358"], ["updated_at", "2020-10-26 17:39:44.629358"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 14]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[36mProperty Destroy (0.3ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 14]]
  [1m[36mProperty Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_rooms_attribute
-------------------------------------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_social_class
----------------------------------------------------------------------------
  [1m[35m (8.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
PropertyTest: test_test_empty_property
--------------------------------------
  [1m[35m (2.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
Completed 200 OK in 275ms (Views: 0.7ms | ActiveRecord: 7.0ms | Allocations: 560)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-10-26 12:39:44 -0500
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[35m (8.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_elevator_attribute
---------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProperty Load (0.9ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PropertyTest: test_Should_create_a_property
-------------------------------------------
  [1m[35m (3.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.7ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-10-26 17:39:44.745750"], ["updated_at", "2020-10-26 17:39:44.745750"]]
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued PhotoQualityJob (Job ID: 9da186d4-1776-44cb-a785-c283e5d9f848) to Test(default) with arguments: 298486376
Completed 201 Created in 42ms (Views: 2.8ms | ActiveRecord: 6.5ms | Allocations: 2754)
  [1m[36mProperty Create (3.2ms)[0m  [1m[32mINSERT INTO "properties" ("hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["hood", "Belen"], ["city", "Pizza"], ["user_id", 99], ["created_at", "2020-10-26 17:39:44.748318"], ["updated_at", "2020-10-26 17:39:44.748318"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_property_tax_attribute
-------------------------------------------------------------------------
  [1m[35m (7.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (2.9ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_because_admon_exceeds_the_maximum_valor
------------------------------------------------------------------------------------
  [1m[35m (2.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (2.8ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "property_tax") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:39:44.769023"], ["updated_at", "2020-10-26 17:39:44.769023"], ["build_area", "hola"], ["property_tax", "500000"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PropertyTest: test_Should_have_successfully_newd_a_property
-----------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_the_proper_built_type
--------------------------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.2ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 17:39:44.824094"], ["updated_at", "2020-10-26 17:39:44.824094"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_admon
------------------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (2.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProperty Create (1.4ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:39:44.853375"], ["updated_at", "2020-10-26 17:39:44.853375"], ["admon", "7777777"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_build_area
-------------------------------------------------------------
  [1m[35m (2.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_a_valid_elevator_attribute
----------------------------------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.2ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon", "build_area") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:39:44.887966"], ["updated_at", "2020-10-26 17:39:44.887966"], ["admon", "500000"], ["build_area", "hola"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_state
--------------------------------------------------------
  [1m[35m (3.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_a_user_id
--------------------------------------------------------------
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "state") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:39:44.903237"], ["updated_at", "2020-10-26 17:39:44.903237"], ["social_class", "5"], ["state", "holiwis"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_social_class
---------------------------------------------------------------
------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_rooms_attribute
------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "social_class") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:39:44.918218"], ["updated_at", "2020-10-26 17:39:44.918218"], ["build_area", "hola"], ["social_class", "Industrial"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "rooms") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:39:44.919653"], ["updated_at", "2020-10-26 17:39:44.919653"], ["build_area", "hola"], ["rooms", "500"]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (12.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (2.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (4.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.8ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1011.3ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1007.7ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.7ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 17:41:05.682816', '2020-10-26 17:41:05.682816', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 17:41:05.682816', '2020-10-26 17:41:05.682816', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$ISAoA41q4EhSw98uPEfYF.U/UP876JVq2G8Qfw8tEZulpDM/bLCo6', '2020-10-26 17:41:05.682816', '2020-10-26 17:41:05.682816', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$CDciHvlmLzM5xEnkxK2b1eRlsZQgWpSB9yHe/s142sOHPMdrtS8sS', '2020-10-26 17:41:05.682816', '2020-10-26 17:41:05.682816', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$m0ph6kQ5OcAfkQCBI28nnu2FT9qd/O/J3wjaGbfQ5UQxILQKnQOpe', '2020-10-26 17:41:05.682816', '2020-10-26 17:41:05.682816', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:41:05.693132', '2020-10-26 17:41:05.693132', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:41:05.693132', '2020-10-26 17:41:05.693132', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:41:05.693132', '2020-10-26 17:41:05.693132', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:41:05.693132', '2020-10-26 17:41:05.693132', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 17:41:05.693132', '2020-10-26 17:41:05.693132', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 17:41:05.693132', '2020-10-26 17:41:05.693132', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 17:41:05.705178', '2020-10-26 17:41:05.705178', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 17:41:05.705178', '2020-10-26 17:41:05.705178', DEFAULT, DEFAULT)[0m
  [1m[35m (40.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.7ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 17:41:05.745802', '2020-10-26 17:41:05.745802', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 17:41:05.745802', '2020-10-26 17:41:05.745802', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$Zv0ZwYYfMmo6a0dDnjsupevNDhpYBcmSMmRGTUWWXDZL1PpmNJ71q', '2020-10-26 17:41:05.745802', '2020-10-26 17:41:05.745802', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$IDYn71pWBXbOTcKkhr/REeR9.pXRHcKjB9.R/zZ55yAPzlg3EomWq', '2020-10-26 17:41:05.745802', '2020-10-26 17:41:05.745802', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$6LeX1xEdIVi707CLTsJHcO2Hx4XNMjoyBmVQOfHwOibABOE75qjvu', '2020-10-26 17:41:05.745802', '2020-10-26 17:41:05.745802', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:41:05.756544', '2020-10-26 17:41:05.756544', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:41:05.756544', '2020-10-26 17:41:05.756544', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:41:05.756544', '2020-10-26 17:41:05.756544', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:41:05.756544', '2020-10-26 17:41:05.756544', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 17:41:05.756544', '2020-10-26 17:41:05.756544', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 17:41:05.756544', '2020-10-26 17:41:05.756544', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 17:41:05.764316', '2020-10-26 17:41:05.764316', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 17:41:05.764316', '2020-10-26 17:41:05.764316', DEFAULT, DEFAULT)[0m
  [1m[35m (16.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PhotoTest: test_Should_successfully_create_a_photo
--------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_property_id
---------------------------------------------------------------
  [1m[36mPhoto Create (0.9ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.zeldadeprueba.com"], ["property_id", 2], ["created_at", "2020-10-26 17:41:05.852068"], ["updated_at", "2020-10-26 17:41:05.852068"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
PhotoTest: test_Should_create,_save_and_delete_a_property,_as_well_as_inspecting_the_link
-----------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_url
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_admon
------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (3.2ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:41:05.892760"], ["updated_at", "2020-10-26 17:41:05.892760"], ["admon", "7777777"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
PropertyTest: test_test_empty_property
--------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PropertyTest: test_Should_create_a_property
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["hood", "Belen"], ["city", "Pizza"], ["user_id", 99], ["created_at", "2020-10-26 17:41:05.915581"], ["updated_at", "2020-10-26 17:41:05.915581"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PropertyTest: test_Should_have_successfully_newd_a_property
-----------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 17:41:05.928660"], ["updated_at", "2020-10-26 17:41:05.928660"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_the_proper_built_type
--------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_elevator_attribute
---------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPhoto Create (3.2ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.linkdeprueba.com"], ["property_id", 1], ["created_at", "2020-10-26 17:41:05.941946"], ["updated_at", "2020-10-26 17:41:05.941946"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PropertyTest: test_Should_new,_save,_and_destroy_a_property
-----------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.8ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 298486375]]
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mPhoto Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "photos" WHERE "photos"."property_id" = $1 LIMIT $2[0m  [["property_id", 1], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_rooms_attribute
-------------------------------------------------------------------------------
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 17:41:05.967725"], ["updated_at", "2020-10-26 17:41:05.967725"]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (17.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 14]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_because_admon_exceeds_the_maximum_valor
------------------------------------------------------------------------------------
  [1m[36mProperty Destroy (6.4ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 14]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (5.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProperty Exists? (3.4ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.5ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_a_user_id
--------------------------------------------------------------
  [1m[35m (3.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_build_area
-------------------------------------------------------------
  [1m[35m (2.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_common_areas_attribute
-------------------------------------------------------------------------
  [1m[36mProperty Create (2.1ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon", "build_area") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:41:06.061299"], ["updated_at", "2020-10-26 17:41:06.061299"], ["admon", "500000"], ["build_area", "hola"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_rooms_attribute
------------------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (1.7ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "common_areas") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:41:06.075689"], ["updated_at", "2020-10-26 17:41:06.075689"], ["build_area", "hola"], ["common_areas", "muchisimas"]]
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (3.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProperty Create (4.9ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "rooms") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:41:06.080643"], ["updated_at", "2020-10-26 17:41:06.080643"], ["build_area", "hola"], ["rooms", "500"]]
----------------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_a_valid_elevator_attribute
----------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_state
--------------------------------------------------------
  [1m[35m (3.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (4.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProperty Create (1.2ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "state") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:41:06.105086"], ["updated_at", "2020-10-26 17:41:06.105086"], ["social_class", "5"], ["state", "holiwis"]]
  [1m[35m (2.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_social_class
----------------------------------------------------------------------------
  [1m[35m (2.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_social_class
---------------------------------------------------------------
  [1m[35m (2.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (2.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "social_class") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:41:06.124597"], ["updated_at", "2020-10-26 17:41:06.124597"], ["build_area", "hola"], ["social_class", "Industrial"]]
  [1m[35m (9.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_property_tax_attribute
-------------------------------------------------------------------------
  [1m[35m (2.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "property_tax") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:41:06.142870"], ["updated_at", "2020-10-26 17:41:06.142870"], ["build_area", "hola"], ["property_tax", "500000"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:06 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (8.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 327ms (Views: 4.4ms | ActiveRecord: 8.6ms | Allocations: 840)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 397ms (Views: 1.0ms | ActiveRecord: 0.4ms | Allocations: 845)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 299ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[35m (1.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-10-26 12:41:06 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Destroy (0.5ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 1.6ms | Allocations: 2003)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 287ms (Views: 0.8ms | ActiveRecord: 1.7ms | Allocations: 560)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:41:06 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (2.2ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-10-26 17:41:06.948920"], ["updated_at", "2020-10-26 17:41:06.948920"], ["admon", "80000"], ["rooms", "3"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 19ms (Views: 0.7ms | ActiveRecord: 3.9ms | Allocations: 3076)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 418ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:07 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 401ms (Views: 0.6ms | ActiveRecord: 1.1ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:07 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 296ms (Views: 0.5ms | ActiveRecord: 0.7ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:41:07 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 332ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 12:41:07 -0500
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
Processing by Api::V1::PropertiesController#show as JSON
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 123)
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProperty Create (1.3ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 17:41:07.674186"], ["updated_at", "2020-10-26 17:41:07.674186"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 11ms (Views: 0.6ms | ActiveRecord: 2.4ms | Allocations: 2695)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:07 -0500
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:07 -0500
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 282ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:07 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 297ms (Views: 0.6ms | ActiveRecord: 4.7ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:07 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 306ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:41:08 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 297ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 12:41:08 -0500
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 17:41:08.294199"], ["updated_at", "2020-10-26 17:41:08.294199"]]
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 201 Created in 9ms (Views: 0.9ms | ActiveRecord: 1.6ms | Allocations: 2582)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:08 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mProperty Update (7.1ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-10-26 17:41:08.313711"], ["id", 1]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 36ms (Views: 5.2ms | ActiveRecord: 9.9ms | Allocations: 2893)
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:08 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 294ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:08 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 276ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:08 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 312ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:41:08 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 348ms (Views: 0.6ms | ActiveRecord: 1.3ms | Allocations: 560)
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-10-26 17:41:08.960864"], ["updated_at", "2020-10-26 17:41:08.960864"], ["property_tax", "777777"], ["bathrooms", "5"]]
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 12:41:08 -0500
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 14ms (Views: 0.6ms | ActiveRecord: 4.4ms | Allocations: 2703)
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.6ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-10-26 17:41:08.979313"], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 17ms (Views: 1.1ms | ActiveRecord: 5.7ms | Allocations: 2785)
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:08 -0500
Processing by Api::V1::UsersController#login as JSON
  [1m[35m (20.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:08 -0500
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 302ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:09 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 334ms (Views: 0.9ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:09 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 295ms (Views: 1.0ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-10-26 12:41:09 -0500
Completed 200 OK in 265ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 12:41:09 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
Completed 200 OK in 11ms (Views: 2.9ms | ActiveRecord: 0.9ms | Allocations: 3650)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:09 -0500
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 404 Not Found in 14ms (Views: 0.2ms | ActiveRecord: 3.1ms | Allocations: 1458)
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:09 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 289ms (Views: 0.9ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:09 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 386ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:10 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 271ms (Views: 2.2ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-10-26 12:41:10 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
Completed 200 OK in 26ms (Views: 3.7ms | ActiveRecord: 1.0ms | Allocations: 3703)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:10 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 284ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-10-26 12:41:10 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.7ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:10 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 323ms (Views: 0.9ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:10 -0500
Completed 200 OK in 264ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:10 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 264ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:10 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 309ms (Views: 0.8ms | ActiveRecord: 0.5ms | Allocations: 560)
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-10-26 12:41:10 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 404 Not Found in 8ms (Views: 0.2ms | ActiveRecord: 1.1ms | Allocations: 1458)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:10 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 302ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-10-26 12:41:11 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 155)
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:11 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 393ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:11 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 276ms (Views: 1.6ms | ActiveRecord: 0.5ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:11 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 281ms (Views: 1.6ms | ActiveRecord: 2.1ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:11 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 272ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:11 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 279ms (Views: 0.7ms | ActiveRecord: 0.5ms | Allocations: 561)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 12:41:11 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (2.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mPhoto Load (1.4ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 21ms (Views: 6.4ms | ActiveRecord: 9.1ms | Allocations: 1898)
  [1m[35m (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:11 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 374ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 12:41:12 -0500
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.5ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 9ms (Views: 0.5ms | ActiveRecord: 4.0ms | Allocations: 1588)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:12 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 324ms (Views: 0.6ms | ActiveRecord: 1.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:12 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 313ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:12 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 297ms (Views: 0.5ms | ActiveRecord: 1.4ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:12 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 298ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:12 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 291ms (Views: 1.6ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 12:41:12 -0500
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.2ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.3ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 1.4ms | Allocations: 1611)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:12 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 330ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 12:41:13 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 0.5ms | Allocations: 1596)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$5pNrcmpUK2HLaMXdNoxETOZOYLcs5GNlEOdNjDS/ufdMktblCcS8W"], ["created_at", "2020-10-26 17:41:13.159801"], ["updated_at", "2020-10-26 17:41:13.159801"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$ILqwy2ELjS4qWUiWlReYcuOjEPq/abepOvs57gjwhVtSJZvP1qtt2"], ["created_at", "2020-10-26 17:41:13.194767"], ["updated_at", "2020-10-26 17:41:13.194767"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 308ms (Views: 0.9ms | ActiveRecord: 0.3ms | Allocations: 568)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:13 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$nnJWXsqP5d6BzWfEcCa0Oe2dRYDwXAOsmP035aTl.LNAdnh2BY7FG"], ["created_at", "2020-10-26 17:41:13.240312"], ["updated_at", "2020-10-26 17:41:13.240312"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$qW79dulGNQydHF0/BJ1BwuhlWw731UL2Cq/uOdO12iM7cojTTMxt."], ["created_at", "2020-10-26 17:41:13.265921"], ["updated_at", "2020-10-26 17:41:13.265921"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$a.e7iwjNiTTd6BMUe5ocY.bxkLq5TgjXxz592UTdDl11NezWLbG9."], ["created_at", "2020-10-26 17:41:13.281951"], ["updated_at", "2020-10-26 17:41:13.281951"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$YEO4FY1IbPVn.N3WucsRSOoKAYi3DWbw/U2o2Db7/5S2WNV.6VRcy"], ["created_at", "2020-10-26 17:41:13.300966"], ["updated_at", "2020-10-26 17:41:13.300966"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (23.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$qi8yqo9dN6qLue1Udbbaye/ERPXHsb9U3E1/OgzGxkapX3VI0esRy"], ["created_at", "2020-10-26 17:41:13.333029"], ["updated_at", "2020-10-26 17:41:13.333029"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486381]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486381]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (3.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$IzwL00QQdPZOSYrkbkxGnu4.oh1pPWWlx41in21BKft0JPkTGG6.G"], ["created_at", "2020-10-26 17:41:13.372264"], ["updated_at", "2020-10-26 17:41:13.372264"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486382]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486382]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[35m (14.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$yQqbo.5POsgpL9Zc7OZu3OZR1lEqwtI7ouEDNKi/mVj1Zz0Tmk9fi"], ["created_at", "2020-10-26 17:41:13.428331"], ["updated_at", "2020-10-26 17:41:13.428331"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (15.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486383]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486383]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$.r56gkEwMDmH4wOmwFmZV.Mwqlf/7hw6xXxlMWa4FJqKaOBDCT68q"], ["created_at", "2020-10-26 17:41:13.481558"], ["updated_at", "2020-10-26 17:41:13.481558"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486384]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486384]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$n1EaVo57UFeDuFb5U76sfOoqFYiPydrs2OeHXQXubSL7s9ogosC8C"], ["created_at", "2020-10-26 17:41:13.510348"], ["updated_at", "2020-10-26 17:41:13.510348"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486385]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486385]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:13 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 347ms (Views: 0.9ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:13 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 292ms (Views: 0.9ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:13 -0500
Completed 200 OK in 273ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-10-26 12:41:13 -0500
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.8ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-10-26 17:41:13.868445"], ["updated_at", "2020-10-26 17:41:13.868445"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued PhotoQualityJob (Job ID: dce625db-634c-43af-a83a-3413bc9664ec) to Test(default) with arguments: 298486376
Completed 201 Created in 24ms (Views: 0.6ms | ActiveRecord: 2.1ms | Allocations: 2758)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:13 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 329ms (Views: 0.6ms | ActiveRecord: 4.6ms | Allocations: 560)
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-10-26 12:41:14 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:14 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 347ms (Views: 0.7ms | ActiveRecord: 1.9ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:14 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 343ms (Views: 0.5ms | ActiveRecord: 4.0ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:14 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 322ms (Views: 0.6ms | ActiveRecord: 1.1ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:14 -0500
Processing by Api::V1::UsersController#login as JSON
  [1m[36mUser Load (4.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 401 Unauthorized in 11ms (Views: 0.2ms | ActiveRecord: 4.9ms | Allocations: 366)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:14 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 352ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-10-26 12:41:14 -0500
Processing by Api::V1::UsersController#update as JSON
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-10-26 17:41:14.943435"], ["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 28ms (Views: 0.4ms | ActiveRecord: 3.4ms | Allocations: 2462)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:14 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 386ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:14 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (14.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 524ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:15 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 658ms (Views: 0.6ms | ActiveRecord: 14.0ms | Allocations: 560)
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 12:41:15 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 29ms (Views: 0.2ms | ActiveRecord: 3.4ms | Allocations: 1598)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:15 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 484ms (Views: 0.5ms | ActiveRecord: 1.1ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 12:41:15 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 6ms (Views: 2.0ms | ActiveRecord: 1.5ms | Allocations: 2064)
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (6.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:15 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 358ms (Views: 0.8ms | ActiveRecord: 0.8ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:16 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 304ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:16 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 368ms (Views: 0.5ms | ActiveRecord: 2.6ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:16 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 269)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:16 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 349ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "new_name"], ["updated_at", "2020-10-26 17:41:16.663052"], ["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:16 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 321ms (Views: 0.5ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:16 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 315ms (Views: 0.4ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:16 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 306ms (Views: 0.4ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:41:17 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 9ms (Views: 0.8ms | ActiveRecord: 1.8ms | Allocations: 2382)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:17 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 324ms (Views: 1.1ms | ActiveRecord: 0.5ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 12:41:17 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 6ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1595)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:17 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 395ms (Views: 0.6ms | ActiveRecord: 1.1ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:17 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 317ms (Views: 1.3ms | ActiveRecord: 0.4ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:17 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 277ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 12:41:17 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 1029)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.9ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:17 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 269ms (Views: 0.9ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:41:17 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.6ms | ActiveRecord: 1.6ms | Allocations: 1433)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:17 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 409ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:18 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 389ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:18 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 338ms (Views: 1.0ms | ActiveRecord: 1.2ms | Allocations: 560)
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-10-26 12:41:18 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
  [1m[35m (2.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 40ms (Views: 0.4ms | ActiveRecord: 8.3ms | Allocations: 4401)
  [1m[35m (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:18 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 602ms (Views: 0.9ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:41:18 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 14ms (Views: 0.5ms | ActiveRecord: 2.0ms | Allocations: 1941)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:18 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 528ms (Views: 0.4ms | ActiveRecord: 2.0ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:19 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 334ms (Views: 0.5ms | ActiveRecord: 0.7ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:41:19 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 266ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-10-26 12:41:19 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$QGIXdL5h0/xf4UHx7CLarOKma00wzPopThRN92mEva1pDF.7YjQw2"], ["created_at", "2020-10-26 17:41:19.515286"], ["updated_at", "2020-10-26 17:41:19.515286"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 10ms (Views: 0.5ms | ActiveRecord: 2.5ms | Allocations: 1546)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 269ms (Views: 0.9ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:41:19 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (17.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 34ms (Views: 4.5ms | ActiveRecord: 18.1ms | Allocations: 1859)
  [1m[36mUser Load (9.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (2.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.9ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1487.5ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1728.7ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.8ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 17:42:25.650369', '2020-10-26 17:42:25.650369', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 17:42:25.650369', '2020-10-26 17:42:25.650369', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$q0Q/1Y210EKhq49g5R3hWevBhCN2y4Z4yB3VkLYPSzl.W2Lda3vOe', '2020-10-26 17:42:25.650369', '2020-10-26 17:42:25.650369', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$jCpJ5D729bx4WTP26ifsjOLS4nrXjIl1EV92ZxqkBHrClRsoXUbCi', '2020-10-26 17:42:25.650369', '2020-10-26 17:42:25.650369', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$bShLJOI9LoFEflWgDkFZJ..h2qLEt89YTdopCj2G0xK.cLFF.Ak/S', '2020-10-26 17:42:25.650369', '2020-10-26 17:42:25.650369', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:42:25.660734', '2020-10-26 17:42:25.660734', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:42:25.660734', '2020-10-26 17:42:25.660734', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:42:25.660734', '2020-10-26 17:42:25.660734', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:42:25.660734', '2020-10-26 17:42:25.660734', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 17:42:25.660734', '2020-10-26 17:42:25.660734', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 17:42:25.660734', '2020-10-26 17:42:25.660734', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 17:42:25.669327', '2020-10-26 17:42:25.669327', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 17:42:25.669327', '2020-10-26 17:42:25.669327', DEFAULT, DEFAULT)[0m
  [1m[35m (64.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.9ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 17:42:25.922714', '2020-10-26 17:42:25.922714', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 17:42:25.922714', '2020-10-26 17:42:25.922714', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$Xg6f3VOcq5dKnvSiG32Zvu6WNqhyEHoB9IK6teh7VcUnWnicOCTTG', '2020-10-26 17:42:25.922714', '2020-10-26 17:42:25.922714', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$sUGVoS1cn0DVcmg61YkJReKENu8kx8CXHqk7HbSOaffOGJF/63w.e', '2020-10-26 17:42:25.922714', '2020-10-26 17:42:25.922714', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$GNcZm.jGQx1XG2v6HuI0s./ZFlS9e3ZTGc2ggfC5FnjAShdHOq9H6', '2020-10-26 17:42:25.922714', '2020-10-26 17:42:25.922714', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:42:25.934266', '2020-10-26 17:42:25.934266', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:42:25.934266', '2020-10-26 17:42:25.934266', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:42:25.934266', '2020-10-26 17:42:25.934266', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:42:25.934266', '2020-10-26 17:42:25.934266', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 17:42:25.934266', '2020-10-26 17:42:25.934266', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 17:42:25.934266', '2020-10-26 17:42:25.934266', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 17:42:25.944380', '2020-10-26 17:42:25.944380', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 17:42:25.944380', '2020-10-26 17:42:25.944380', DEFAULT, DEFAULT)[0m
  [1m[35m (64.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
Completed 200 OK in 284ms (Views: 0.8ms | ActiveRecord: 0.5ms | Allocations: 6585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:26 -0500
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 272ms (Views: 0.9ms | ActiveRecord: 0.9ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 325ms (Views: 0.6ms | ActiveRecord: 2.1ms | Allocations: 6585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 262ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 12:42:26 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (7.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.5ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 100ms (Views: 11.9ms | ActiveRecord: 10.5ms | Allocations: 26480)
  [1m[35m (12.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 367ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 369ms (Views: 0.6ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:27 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 355ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-10-26 12:42:27 -0500
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.4ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-10-26 17:42:27.345629"], ["updated_at", "2020-10-26 17:42:27.345629"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued PhotoQualityJob (Job ID: a876585e-c058-45dc-9d34-901bd966c794) to Test(default) with arguments: 298486375
Completed 201 Created in 178ms (Views: 0.7ms | ActiveRecord: 2.8ms | Allocations: 31292)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:27 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 294ms (Views: 0.9ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:27 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 309ms (Views: 0.6ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:27 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 287ms (Views: 0.9ms | ActiveRecord: 2.3ms | Allocations: 560)
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-10-26 12:42:27 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 123)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:27 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 316ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 274ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 277ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 12:42:28 -0500
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (2.1ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.8ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 4.3ms | Allocations: 1623)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 299ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 296ms (Views: 0.8ms | ActiveRecord: 0.9ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 282ms (Views: 0.6ms | ActiveRecord: 0.7ms | Allocations: 560)
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 12:42:28 -0500
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.2ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 17ms (Views: 1.2ms | ActiveRecord: 0.8ms | Allocations: 6267)
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_rooms_attribute
------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.9ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "rooms") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:42:28.690581"], ["updated_at", "2020-10-26 17:42:28.690581"], ["build_area", "hola"], ["rooms", "500"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_because_admon_exceeds_the_maximum_valor
------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_social_class
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.9ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "social_class") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:42:28.720494"], ["updated_at", "2020-10-26 17:42:28.720494"], ["build_area", "hola"], ["social_class", "Industrial"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_elevator_attribute
---------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_admon
------------------------------------------------------
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:42:28.755833"], ["updated_at", "2020-10-26 17:42:28.755833"], ["admon", "7777777"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PropertyTest: test_Should_create_a_property
-------------------------------------------
  [1m[35m (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.9ms)[0m  [1m[32mINSERT INTO "properties" ("hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["hood", "Belen"], ["city", "Pizza"], ["user_id", 99], ["created_at", "2020-10-26 17:42:28.781081"], ["updated_at", "2020-10-26 17:42:28.781081"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_the_proper_built_type
--------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_a_user_id
--------------------------------------------------------------
  [1m[35m (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_common_areas_attribute
-------------------------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (2.1ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "common_areas") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:42:28.840294"], ["updated_at", "2020-10-26 17:42:28.840294"], ["build_area", "hola"], ["common_areas", "muchisimas"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_state
--------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.8ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "state") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:42:28.865530"], ["updated_at", "2020-10-26 17:42:28.865530"], ["social_class", "5"], ["state", "holiwis"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_rooms_attribute
-------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_a_valid_elevator_attribute
----------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_build_area
-------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (2.9ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon", "build_area") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:42:28.947548"], ["updated_at", "2020-10-26 17:42:28.947548"], ["admon", "500000"], ["build_area", "hola"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_property_tax_attribute
-------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.7ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "property_tax") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:42:28.972134"], ["updated_at", "2020-10-26 17:42:28.972134"], ["build_area", "hola"], ["property_tax", "500000"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_social_class
----------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PropertyTest: test_Should_have_successfully_newd_a_property
-----------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
Completed 200 OK in 367ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:29 -0500
  [1m[36mProperty Create (1.5ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 17:42:29.007961"], ["updated_at", "2020-10-26 17:42:29.007961"]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[35m (1.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
PropertyTest: test_test_empty_property
--------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PropertyTest: test_Should_new,_save,_and_destroy_a_property
-----------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.7ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 17:42:29.066761"], ["updated_at", "2020-10-26 17:42:29.066761"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 20]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[36mProperty Destroy (2.8ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 20]]
  [1m[36mProperty Exists? (11.8ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$M.rGmAqNAoOrv3kqXHGpp.RtPLTxlcSinXV3RNg/AoHUR1ZR2xnjW"], ["created_at", "2020-10-26 17:42:29.136879"], ["updated_at", "2020-10-26 17:42:29.136879"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$eoEapouvXxfkp8YP6rrSmOESIoR7F7a7eBB5z8OlpMMdWCMxPVyXa"], ["created_at", "2020-10-26 17:42:29.195301"], ["updated_at", "2020-10-26 17:42:29.195301"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.9ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (1.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (12.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$KPB7UFo9xINmJPn67hQ.kujFqV8Fws0Val33j.Z5QJNLveq//LyHe"], ["created_at", "2020-10-26 17:42:29.221611"], ["updated_at", "2020-10-26 17:42:29.221611"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (3.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Destroy (9.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (1.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$3sDoc1ANizFXJ2tjLWH0U.6ulYsYzOIQ1EUoAf.lGl/OhTgpl5DX2"], ["created_at", "2020-10-26 17:42:29.277207"], ["updated_at", "2020-10-26 17:42:29.277207"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$dAtBpZHyzCQnuMQg1ffwl.OWkn5fJJEMBTNxs6asoAhU8cxH3UP4G"], ["created_at", "2020-10-26 17:42:29.329921"], ["updated_at", "2020-10-26 17:42:29.329921"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Destroy (4.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 355ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 12:42:29 -0500
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Create (2.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$/CwvO8MHJpwVCfudb4h6o.H3LO/0Dn41vgJwdjWPd886TL0rlsXZu"], ["created_at", "2020-10-26 17:42:29.382973"], ["updated_at", "2020-10-26 17:42:29.382973"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (3.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 9ms (Views: 0.2ms | ActiveRecord: 1.6ms | Allocations: 1599)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
  [1m[35m (4.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[35m (2.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (3.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$0/bUxYuklOuaBd1SM7L1/OwyMI9Uo2BTBHzskRzTXc4ER40gayqv."], ["created_at", "2020-10-26 17:42:29.431642"], ["updated_at", "2020-10-26 17:42:29.431642"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Create (2.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$oT2fiiHzJBfvAhWmMbMfGOmuI134DH07VC5pKZmAtEcKqHotO0scq"], ["created_at", "2020-10-26 17:42:29.429694"], ["updated_at", "2020-10-26 17:42:29.429694"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486381]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (1.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486381]]
  [1m[35m (2.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[35m (5.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$Is2.EGj3RV72hJm.A7U8f.yqRcNX4wqw/viqatvX4GUG96cHbOYx2"], ["created_at", "2020-10-26 17:42:29.471088"], ["updated_at", "2020-10-26 17:42:29.471088"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Exists? (2.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Destroy (3.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$demnwmvPUHW4KWoKgl3Aue5yex1XQYJaXSrZwCGYQNTbJvTQAMK6u"], ["created_at", "2020-10-26 17:42:29.491518"], ["updated_at", "2020-10-26 17:42:29.491518"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (1.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[36mUser Exists? (4.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (3.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486383]]
  [1m[36mUser Destroy (1.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486383]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (3.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$isNmwA/.gVXVE7Vi4UACNufCmefLqI/7MJD7w78cVAParkXiROBHa"], ["created_at", "2020-10-26 17:42:29.529783"], ["updated_at", "2020-10-26 17:42:29.529783"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (11.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (13.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486382]]
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486382]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 304ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 365ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (8.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 333ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 12:42:30 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 8ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1595)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 327ms (Views: 1.9ms | ActiveRecord: 8.8ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 269)
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 303ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 285ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 277ms (Views: 0.6ms | ActiveRecord: 1.0ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 12:42:30 -0500
Completed 200 OK in 338ms (Views: 0.6ms | ActiveRecord: 1.7ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:42:30 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 8ms (Views: 3.8ms | ActiveRecord: 0.7ms | Allocations: 2066)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:30 -0500
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 19ms (Views: 1.2ms | ActiveRecord: 1.5ms | Allocations: 1433)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 353ms (Views: 0.6ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 336ms (Views: 0.4ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 349ms (Views: 0.9ms | ActiveRecord: 0.6ms | Allocations: 560)
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 12:42:31 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 5ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1595)
  [1m[35m (3.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 424ms (Views: 0.5ms | ActiveRecord: 2.4ms | Allocations: 560)
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-10-26 12:42:31 -0500
Processing by Api::V1::UsersController#update as JSON
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-10-26 17:42:31.730910"], ["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.7ms | ActiveRecord: 2.3ms | Allocations: 2501)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 301ms (Views: 0.5ms | ActiveRecord: 2.1ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 316ms (Views: 0.6ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 268ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-10-26 12:42:32 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$s/r1pzNeBk0Ytc.4D0QPUOaJNhnEUyMS1KF5TH.lDo./21oH0XZmm"], ["created_at", "2020-10-26 17:42:32.234085"], ["updated_at", "2020-10-26 17:42:32.234085"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 10ms (Views: 1.4ms | ActiveRecord: 1.6ms | Allocations: 1491)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 270ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-10-26 12:42:32 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 17ms (Views: 0.4ms | ActiveRecord: 0.8ms | Allocations: 3508)
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 298ms (Views: 0.5ms | ActiveRecord: 0.8ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 317ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 264ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:32 -0500
Processing by Api::V1::UsersController#login as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 365)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 284ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "new_name"], ["updated_at", "2020-10-26 17:42:32.971910"], ["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 281ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 289ms (Views: 0.9ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 263ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:42:33 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (1.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 28ms (Views: 9.3ms | ActiveRecord: 2.3ms | Allocations: 1941)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 318ms (Views: 1.8ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 12:42:33 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 1030)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 330ms (Views: 0.6ms | ActiveRecord: 1.1ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 341ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 276ms (Views: 1.9ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (3.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:42:34 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 9ms (Views: 0.8ms | ActiveRecord: 1.6ms | Allocations: 2367)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 292ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-10-26 12:42:34 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_property_id
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
PhotoTest: test_Should_create,_save_and_delete_a_property,_as_well_as_inspecting_the_link
-----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.8ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.linkdeprueba.com"], ["property_id", 1], ["created_at", "2020-10-26 17:42:34.270390"], ["updated_at", "2020-10-26 17:42:34.270390"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.9ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 298486375]]
  [1m[36mPhoto Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "photos" WHERE "photos"."property_id" = $1 LIMIT $2[0m  [["property_id", 1], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_url
-------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PhotoTest: test_Should_successfully_create_a_photo
--------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.9ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPhoto Create (2.4ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.zeldadeprueba.com"], ["property_id", 2], ["created_at", "2020-10-26 17:42:34.309512"], ["updated_at", "2020-10-26 17:42:34.309512"]]
  [1m[35m (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 352ms (Views: 0.9ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 295ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 310ms (Views: 0.6ms | ActiveRecord: 1.0ms | Allocations: 561)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:42:34 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.5ms | ActiveRecord: 0.6ms | Allocations: 1859)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 281ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:42:34 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 17:42:34.925056"], ["updated_at", "2020-10-26 17:42:34.925056"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 11ms (Views: 1.0ms | ActiveRecord: 1.7ms | Allocations: 2746)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 306ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 291ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 281ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-10-26 12:42:35 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
Completed 200 OK in 10ms (Views: 1.0ms | ActiveRecord: 4.2ms | Allocations: 1632)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 300ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:42:35 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-10-26 17:42:35.549067"], ["updated_at", "2020-10-26 17:42:35.549067"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 8ms (Views: 0.5ms | ActiveRecord: 1.7ms | Allocations: 2703)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 338ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 298ms (Views: 0.5ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 264ms (Views: 1.1ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-10-26 12:42:35 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Destroy (2.3ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 4.1ms | Allocations: 1544)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 297ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-10-26 12:42:36 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
Completed 200 OK in 6ms (Views: 2.9ms | ActiveRecord: 0.9ms | Allocations: 3648)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 335ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 289ms (Views: 0.9ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 279ms (Views: 1.7ms | ActiveRecord: 0.2ms | Allocations: 560)
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-10-26 12:42:36 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 404 Not Found in 6ms (Views: 0.2ms | ActiveRecord: 1.0ms | Allocations: 1458)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 293ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 12:42:36 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 404 Not Found in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1458)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 288ms (Views: 2.4ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (5.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 398ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 297ms (Views: 0.6ms | ActiveRecord: 5.8ms | Allocations: 561)
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:42:37 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 17:42:37.264178"], ["updated_at", "2020-10-26 17:42:37.264178"]]
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 24ms (Views: 0.8ms | ActiveRecord: 6.9ms | Allocations: 3280)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 378ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 12:42:37 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (10.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (1.4ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-10-26 17:42:37.614078"], ["id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 38ms (Views: 0.8ms | ActiveRecord: 18.4ms | Allocations: 2743)
  [1m[35m (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 393ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 274ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 12:42:37 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (3.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (1.9ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-10-26 17:42:37.970942"], ["id", 1]]
  [1m[35m (2.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 23ms (Views: 1.2ms | ActiveRecord: 11.2ms | Allocations: 2788)
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 429ms (Views: 1.4ms | ActiveRecord: 2.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 315ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 416ms (Views: 0.6ms | ActiveRecord: 3.1ms | Allocations: 560)
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-10-26 12:42:38 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 471ms (Views: 0.5ms | ActiveRecord: 2.8ms | Allocations: 560)
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:42:38 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (2.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.9ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-10-26 17:42:38.804141"], ["updated_at", "2020-10-26 17:42:38.804141"], ["admon", "80000"], ["rooms", "3"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 16ms (Views: 0.6ms | ActiveRecord: 4.2ms | Allocations: 2736)
  [1m[35m (8.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (3.7ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 453ms (Views: 0.9ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:42:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 324ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 12:42:39 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (984.1ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1002.7ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 17:43:27.776389', '2020-10-26 17:43:27.776389', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 17:43:27.776389', '2020-10-26 17:43:27.776389', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$sK/IsGPXfTOYkbWZcSUBReqSgpVE.hpnLjWGD54wUeHbzU5ADyg4.', '2020-10-26 17:43:27.776389', '2020-10-26 17:43:27.776389', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$fVyAqUlZeoQSOPR51NxTwuoEOMoLnikXDksxwh8p0rrcXjx2g1VNi', '2020-10-26 17:43:27.776389', '2020-10-26 17:43:27.776389', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$zvqsYP1oBo8I28xqyt0vs.At0DEeY.SvRXKV/mWiVgnfT0QBG.LUm', '2020-10-26 17:43:27.776389', '2020-10-26 17:43:27.776389', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:43:27.784879', '2020-10-26 17:43:27.784879', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:43:27.784879', '2020-10-26 17:43:27.784879', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:43:27.784879', '2020-10-26 17:43:27.784879', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:43:27.784879', '2020-10-26 17:43:27.784879', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 17:43:27.784879', '2020-10-26 17:43:27.784879', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 17:43:27.784879', '2020-10-26 17:43:27.784879', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 17:43:27.790598', '2020-10-26 17:43:27.790598', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 17:43:27.790598', '2020-10-26 17:43:27.790598', DEFAULT, DEFAULT)[0m
  [1m[35m (7.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.3ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 17:43:27.815680', '2020-10-26 17:43:27.815680', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 17:43:27.815680', '2020-10-26 17:43:27.815680', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$hyv14D43yf88giGMmYDKOOFbU8NfktGMP/KhtZGXep0zg9llufFsu', '2020-10-26 17:43:27.815680', '2020-10-26 17:43:27.815680', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$ftlR5Qub3skYg7b8SHxpA.S4CaUUpth2IpbxUMqGbzlr3fJXzthY2', '2020-10-26 17:43:27.815680', '2020-10-26 17:43:27.815680', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$oL6vKewz4lGb3ssDzv7DV.Ic0IF8KZgxbvA719hFgHldlmRkmopw6', '2020-10-26 17:43:27.815680', '2020-10-26 17:43:27.815680', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:43:27.823553', '2020-10-26 17:43:27.823553', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:43:27.823553', '2020-10-26 17:43:27.823553', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:43:27.823553', '2020-10-26 17:43:27.823553', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:43:27.823553', '2020-10-26 17:43:27.823553', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 17:43:27.823553', '2020-10-26 17:43:27.823553', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 17:43:27.823553', '2020-10-26 17:43:27.823553', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 17:43:27.832250', '2020-10-26 17:43:27.832250', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 17:43:27.832250', '2020-10-26 17:43:27.832250', DEFAULT, DEFAULT)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
  [1m[35m (12.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (3.7ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$u45suV3.hkyf.qOJSqb.DeHPvKcNbdtJ1ndgxZGggpfZOyaFOlOZu"], ["created_at", "2020-10-26 17:43:27.869525"], ["updated_at", "2020-10-26 17:43:27.869525"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Destroy (1.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$CqsPQ65Ptbz8NqcbDHw4humxm0QZB5sPJvHcshuOAmB0c6ekfd23q"], ["created_at", "2020-10-26 17:43:27.901589"], ["updated_at", "2020-10-26 17:43:27.901589"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (2.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$ke6s6UrC.xUDMP.xwVAWneXr/aIIaNag1Oignt14GYtg.f/BZN.KS"], ["created_at", "2020-10-26 17:43:27.931399"], ["updated_at", "2020-10-26 17:43:27.931399"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Destroy (1.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$lFWX89EJoyCbjdbe0TAKD.8enbf.M0cXhQcZvTyOQqFX4nGaRHluW"], ["created_at", "2020-10-26 17:43:27.955479"], ["updated_at", "2020-10-26 17:43:27.955479"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (16.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (2.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$SFVyZQTr39J7WuEyNeY3PeraVV7O9qVhdrkvbGtSw49sWhrfKvjQG"], ["created_at", "2020-10-26 17:43:27.984164"], ["updated_at", "2020-10-26 17:43:27.984164"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Destroy (2.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$icS3g5md06Sa.tgTOhvFWOwuyAQSAhwrDqZZ4bB3yJF0qBubDNjCW"], ["created_at", "2020-10-26 17:43:28.046987"], ["updated_at", "2020-10-26 17:43:28.046987"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (3.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$nm.JIs7u8suerBSaBv4wsurvbstFmSC7a6M72oLEaZrP2U3A1gDfi"], ["created_at", "2020-10-26 17:43:28.054172"], ["updated_at", "2020-10-26 17:43:28.054172"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Destroy (2.9ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (12.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$fVuuza/UqiOjOh/Ud5N4guQkgR2fVKMuprYP/txhVYHTsdKmnM/be"], ["created_at", "2020-10-26 17:43:28.088731"], ["updated_at", "2020-10-26 17:43:28.088731"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (3.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$L56Qa2ibkhKtaVmaZNXxpejQXk72DRifMDOIGBwWvD8cP4PqlvKXS"], ["created_at", "2020-10-26 17:43:28.101908"], ["updated_at", "2020-10-26 17:43:28.101908"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$UDSJe1jJi1u3/GiQ3qaolekR/.1fxXJ2k9xjyc8Lfdmxf4utvMvla"], ["created_at", "2020-10-26 17:43:28.121347"], ["updated_at", "2020-10-26 17:43:28.121347"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (5.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mProperty Load (2.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$LfMKxV9jtSI2P2e9D3Q6X.0McxzOWSF.CIZ4h8z4fwR.TVig0HSA."], ["created_at", "2020-10-26 17:43:28.161319"], ["updated_at", "2020-10-26 17:43:28.161319"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (3.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
----------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:28 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 274ms (Views: 0.9ms | ActiveRecord: 1.9ms | Allocations: 856)
Completed 200 OK in 264ms (Views: 0.8ms | ActiveRecord: 0.4ms | Allocations: 719)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:28 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 265ms (Views: 0.6ms | ActiveRecord: 0.5ms | Allocations: 564)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:28 -0500
Completed 200 OK in 271ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 269ms (Views: 1.0ms | ActiveRecord: 0.5ms | Allocations: 564)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 12:43:29 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 287ms (Views: 0.9ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-10-26 12:43:29 -0500
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 32ms (Views: 0.3ms | ActiveRecord: 1.5ms | Allocations: 1925)
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 158)
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:29 -0500
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 335ms (Views: 0.8ms | ActiveRecord: 4.2ms | Allocations: 572)
Completed 200 OK in 325ms (Views: 0.5ms | ActiveRecord: 1.1ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:29 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:29 -0500
Processing by Api::V1::UsersController#login as JSON
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 283ms (Views: 1.4ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 297ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 564)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 286ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 12:43:30 -0500
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.4ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 297ms (Views: 1.0ms | ActiveRecord: 0.3ms | Allocations: 564)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 12:43:30 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mPhoto Destroy (0.2ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 28ms (Views: 0.2ms | ActiveRecord: 2.2ms | Allocations: 6600)
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.5ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 50ms (Views: 1.5ms | ActiveRecord: 1.3ms | Allocations: 22404)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 291ms (Views: 1.0ms | ActiveRecord: 0.5ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 360ms (Views: 0.7ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 258ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 564)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 291ms (Views: 1.1ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 256ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 564)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-10-26 12:43:30 -0500
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPhoto Create (2.4ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-10-26 17:43:30.987580"], ["updated_at", "2020-10-26 17:43:30.987580"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued PhotoQualityJob (Job ID: a63362ff-7347-4c46-8636-bca564c71406) to Test(default) with arguments: 298486375
Completed 201 Created in 37ms (Views: 1.9ms | ActiveRecord: 5.8ms | Allocations: 8422)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 281ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 12:43:31 -0500
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.5ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 12ms (Views: 1.3ms | ActiveRecord: 2.3ms | Allocations: 1447)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 295ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 295ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 256ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 564)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 12:43:31 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 155)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 268ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:43:31 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.8ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-10-26 17:43:31.725210"], ["updated_at", "2020-10-26 17:43:31.725210"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 74ms (Views: 0.7ms | ActiveRecord: 2.2ms | Allocations: 24517)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 304ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 282ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 266ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 564)
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:43:32 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 17:43:32.168080"], ["updated_at", "2020-10-26 17:43:32.168080"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 13ms (Views: 0.8ms | ActiveRecord: 1.6ms | Allocations: 3413)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 334ms (Views: 5.2ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-10-26 12:43:32 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (4.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (1.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Destroy (1.0ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 31ms (Views: 0.2ms | ActiveRecord: 8.5ms | Allocations: 1674)
  [1m[35m (2.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 416ms (Views: 2.4ms | ActiveRecord: 0.3ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 373ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 292ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 564)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 12:43:32 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 404 Not Found in 7ms (Views: 0.3ms | ActiveRecord: 1.9ms | Allocations: 1458)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 280ms (Views: 0.6ms | ActiveRecord: 1.0ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 12:43:33 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.6ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-10-26 17:43:33.103787"], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 1.3ms | ActiveRecord: 1.7ms | Allocations: 2788)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 303ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 318ms (Views: 1.4ms | ActiveRecord: 0.7ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 285ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 564)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:43:33 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.8ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-10-26 17:43:33.517770"], ["updated_at", "2020-10-26 17:43:33.517770"], ["admon", "80000"], ["rooms", "3"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 15ms (Views: 0.6ms | ActiveRecord: 1.9ms | Allocations: 2737)
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (2.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 284ms (Views: 0.9ms | ActiveRecord: 0.6ms | Allocations: 560)
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-10-26 12:43:33 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 404 Not Found in 26ms (Views: 0.2ms | ActiveRecord: 2.1ms | Allocations: 1459)
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 314ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 294ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 273ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 564)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 12:43:34 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (1.3ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-10-26 17:43:34.159286"], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 33ms (Views: 0.6ms | ActiveRecord: 3.2ms | Allocations: 2781)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 307ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:43:34 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (1.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 17:43:34.388972"], ["updated_at", "2020-10-26 17:43:34.388972"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 10ms (Views: 0.7ms | ActiveRecord: 2.3ms | Allocations: 2578)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 284ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 314ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 269ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 564)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-10-26 12:43:34 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
Completed 200 OK in 7ms (Views: 1.0ms | ActiveRecord: 1.7ms | Allocations: 1581)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 300ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-10-26 12:43:35 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
Completed 200 OK in 276ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 572)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PhotoTest: test_Should_successfully_create_a_photo
--------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.9ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.zeldadeprueba.com"], ["property_id", 2], ["created_at", "2020-10-26 17:43:35.034215"], ["updated_at", "2020-10-26 17:43:35.034215"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_property_id
---------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
PhotoTest: test_Should_create,_save_and_delete_a_property,_as_well_as_inspecting_the_link
-----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.4ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.linkdeprueba.com"], ["property_id", 1], ["created_at", "2020-10-26 17:43:35.062201"], ["updated_at", "2020-10-26 17:43:35.062201"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.2ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 298486376]]
  [1m[36mPhoto Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "photos" WHERE "photos"."property_id" = $1 LIMIT $2[0m  [["property_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_url
-------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.8ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_build_area
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (3.9ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon", "build_area") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:43:35.091314"], ["updated_at", "2020-10-26 17:43:35.091314"], ["admon", "500000"], ["build_area", "hola"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_the_proper_built_type
--------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_elevator_attribute
---------------------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_property_tax_attribute
-------------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "property_tax") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:43:35.146955"], ["updated_at", "2020-10-26 17:43:35.146955"], ["build_area", "hola"], ["property_tax", "500000"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_rooms_attribute
------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.9ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "rooms") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:43:35.157364"], ["updated_at", "2020-10-26 17:43:35.157364"], ["build_area", "hola"], ["rooms", "500"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_a_user_id
--------------------------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_social_class
---------------------------------------------------------------
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.9ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "social_class") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:43:35.180204"], ["updated_at", "2020-10-26 17:43:35.180204"], ["build_area", "hola"], ["social_class", "Industrial"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PropertyTest: test_Should_have_successfully_newd_a_property
-----------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 17:43:35.191701"], ["updated_at", "2020-10-26 17:43:35.191701"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_social_class
----------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_common_areas_attribute
-------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "common_areas") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:43:35.223272"], ["updated_at", "2020-10-26 17:43:35.223272"], ["build_area", "hola"], ["common_areas", "muchisimas"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_admon
------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.9ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:43:35.231806"], ["updated_at", "2020-10-26 17:43:35.231806"], ["admon", "7777777"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PropertyTest: test_Should_create_a_property
-------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.0ms)[0m  [1m[32mINSERT INTO "properties" ("hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["hood", "Belen"], ["city", "Pizza"], ["user_id", 99], ["created_at", "2020-10-26 17:43:35.239775"], ["updated_at", "2020-10-26 17:43:35.239775"]]
  [1m[35m (1.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_state
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.0ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "state") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:43:35.254835"], ["updated_at", "2020-10-26 17:43:35.254835"], ["social_class", "5"], ["state", "holiwis"]]
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_rooms_attribute
-------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_because_admon_exceeds_the_maximum_valor
------------------------------------------------------------------------------------
  [1m[35m (10.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_a_valid_elevator_attribute
----------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PropertyTest: test_Should_new,_save,_and_destroy_a_property
-----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 17:43:35.321001"], ["updated_at", "2020-10-26 17:43:35.321001"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 22]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[36mProperty Destroy (1.6ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 22]]
  [1m[36mProperty Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
PropertyTest: test_test_empty_property
--------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 357ms (Views: 3.4ms | ActiveRecord: 1.3ms | Allocations: 564)
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-10-26 12:43:35 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
Completed 200 OK in 10ms (Views: 3.2ms | ActiveRecord: 0.9ms | Allocations: 3649)
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 301ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 286ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 264ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-10-26 12:43:35 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 8ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 3507)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 297ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 564)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:43:36 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (15.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.9ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 27ms (Views: 0.6ms | ActiveRecord: 19.1ms | Allocations: 1945)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 271ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 396ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 292ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:43:36 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 9ms (Views: 1.0ms | ActiveRecord: 1.2ms | Allocations: 1859)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 375ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 564)
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-10-26 12:43:36 -0500
Processing by Api::V1::UsersController#update as JSON
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-10-26 17:43:36.830777"], ["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 1.5ms | ActiveRecord: 3.3ms | Allocations: 2466)
  [1m[35m (3.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 398ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 313ms (Views: 0.5ms | ActiveRecord: 1.1ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 311ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-10-26 12:43:37 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 269ms (Views: 0.6ms | ActiveRecord: 1.1ms | Allocations: 564)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 12:43:37 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms | Allocations: 1029)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 271ms (Views: 0.5ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 270ms (Views: 1.2ms | ActiveRecord: 0.2ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 311ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 12:43:37 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (7.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 23ms (Views: 0.2ms | ActiveRecord: 8.0ms | Allocations: 1595)
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 272ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 564)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "new_name"], ["updated_at", "2020-10-26 17:43:38.008660"], ["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 313ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 265ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 293ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 12:43:38 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 7ms (Views: 0.2ms | ActiveRecord: 1.1ms | Allocations: 1595)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 265ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 564)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 269)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 272ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 355ms (Views: 0.4ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 267ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 564)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 12:43:39 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 8ms (Views: 1.7ms | ActiveRecord: 1.0ms | Allocations: 2084)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 324ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:43:39 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 8ms (Views: 0.4ms | ActiveRecord: 1.4ms | Allocations: 2368)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 298ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 303ms (Views: 0.6ms | ActiveRecord: 1.1ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 282ms (Views: 0.7ms | ActiveRecord: 3.4ms | Allocations: 564)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:43:39 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.5ms | ActiveRecord: 0.5ms | Allocations: 1437)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 309ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:39 -0500
Processing by Api::V1::UsersController#login as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 363)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 303ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:43:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 260ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 564)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-10-26 12:43:40 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$5R.98K850msU03KKBuUcYOa//APodMQug11SjyewY3ajgSIA6jGy6"], ["created_at", "2020-10-26 17:43:40.300409"], ["updated_at", "2020-10-26 17:43:40.300409"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 6ms (Views: 1.1ms | ActiveRecord: 0.9ms | Allocations: 1491)
  [1m[35m (2.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (3.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (1.8ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2272.8ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (2.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.9ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2275.5ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.7ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.4ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 17:47:28.437518', '2020-10-26 17:47:28.437518', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 17:47:28.437518', '2020-10-26 17:47:28.437518', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$D3qrvUNY0BEYziRi2SI8rONmLLPkHflGRmPDZ9wiByZOph2Z7VU..', '2020-10-26 17:47:28.437518', '2020-10-26 17:47:28.437518', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$OJaww6ENGXMiQdOJewganel91VYegEUBKcq.cYDwIsZvun4zXdxwa', '2020-10-26 17:47:28.437518', '2020-10-26 17:47:28.437518', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$eSHsYarD22zd5AyfEMJuretrxAy3of5TXJnIDNT1xxGI0tDQ1ogIq', '2020-10-26 17:47:28.437518', '2020-10-26 17:47:28.437518', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:47:28.444237', '2020-10-26 17:47:28.444237', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:47:28.444237', '2020-10-26 17:47:28.444237', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:47:28.444237', '2020-10-26 17:47:28.444237', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:47:28.444237', '2020-10-26 17:47:28.444237', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 17:47:28.444237', '2020-10-26 17:47:28.444237', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 17:47:28.444237', '2020-10-26 17:47:28.444237', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 17:47:28.455987', '2020-10-26 17:47:28.455987', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 17:47:28.455987', '2020-10-26 17:47:28.455987', DEFAULT, DEFAULT)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.9ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 17:47:28.453227', '2020-10-26 17:47:28.453227', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 17:47:28.453227', '2020-10-26 17:47:28.453227', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$XCIeyTTXXyn/D9MtQ9vdXemVij9omnl2Fc2Y3JfV0Y3FvqXvkH/1G', '2020-10-26 17:47:28.453227', '2020-10-26 17:47:28.453227', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$7th9eyt0rrqApvhd7Yd5JeB4Q8HQO1mc3tyQg08YAxiXMXwnZ64E2', '2020-10-26 17:47:28.453227', '2020-10-26 17:47:28.453227', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$IasQ70VKqNGiWb.VvTRtJedhiLyoJx2VQnWvrFDv8KmLKRo3kmkq6', '2020-10-26 17:47:28.453227', '2020-10-26 17:47:28.453227', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:47:28.461308', '2020-10-26 17:47:28.461308', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:47:28.461308', '2020-10-26 17:47:28.461308', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:47:28.461308', '2020-10-26 17:47:28.461308', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:47:28.461308', '2020-10-26 17:47:28.461308', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 17:47:28.461308', '2020-10-26 17:47:28.461308', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 17:47:28.461308', '2020-10-26 17:47:28.461308', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 17:47:28.466820', '2020-10-26 17:47:28.466820', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 17:47:28.466820', '2020-10-26 17:47:28.466820', DEFAULT, DEFAULT)[0m
  [1m[35m (16.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (17.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$1zClCgHhV0Vkjkn8zxNvNutvgS5u/ebcakfGWBcNHgTwKWpxBVVhW"], ["created_at", "2020-10-26 17:47:28.612680"], ["updated_at", "2020-10-26 17:47:28.612680"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$XRFnZfKK88UMZZrWfev03uugBLn1sbnVsY9zNyX5BSXb06gDSsNbi"], ["created_at", "2020-10-26 17:47:28.620003"], ["updated_at", "2020-10-26 17:47:28.620003"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (3.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$p8VHU80h4UvkzSafwx3yKe2j7hIB5vG/H4zB05UjxYpOjWWvJgpGi"], ["created_at", "2020-10-26 17:47:28.631387"], ["updated_at", "2020-10-26 17:47:28.631387"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (3.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Destroy (1.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$w2nVUf0PP0HFpmH2KUgOsemG5jMGrtYDhUG8Jk6rwcQy7SJrNHg1O"], ["created_at", "2020-10-26 17:47:28.665161"], ["updated_at", "2020-10-26 17:47:28.665161"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
  [1m[35m (3.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$c7Eb8Tgaw0IXYFYnDeMVf.1anMsI12bPBNhdIW8qzkmxMbzVAdwxO"], ["created_at", "2020-10-26 17:47:28.694560"], ["updated_at", "2020-10-26 17:47:28.694560"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[36mUser Destroy (0.9ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$dNrZgZfsOsnzJm9e8zfa8OZQp8MBtwCzo6yHjxRx/A9TKWZm9mJfG"], ["created_at", "2020-10-26 17:47:28.712683"], ["updated_at", "2020-10-26 17:47:28.712683"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$/dCPG6yx71z/xl8M0crzqud.dkiZ20D.Ctn7ZvzhLDkvnz6Nc3g4K"], ["created_at", "2020-10-26 17:47:28.733478"], ["updated_at", "2020-10-26 17:47:28.733478"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Destroy (7.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$Ssm/5Hz5jZSv08gui8auoeXJQjT9fZIp7gWWIuWDfwVxUXwDnx636"], ["created_at", "2020-10-26 17:47:28.775651"], ["updated_at", "2020-10-26 17:47:28.775651"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[35m (1.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$.CeJXosfqhx1HZw4e6Gw2uEjmjaCt3j8LD5w1.LZS/IF957G6goNe"], ["created_at", "2020-10-26 17:47:28.794055"], ["updated_at", "2020-10-26 17:47:28.794055"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Destroy (0.9ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$AExCWs.tF8MySQ03BWMrEupdFV2zG1S.q9RP3yIxxbmp.PvDEC3P2"], ["created_at", "2020-10-26 17:47:28.808076"], ["updated_at", "2020-10-26 17:47:28.808076"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$MIxVhFgQbl94LxQ73Cboj.N64Jk0Ufafl2Jqy.xmrIR3oI0oBB.Zu"], ["created_at", "2020-10-26 17:47:28.821116"], ["updated_at", "2020-10-26 17:47:28.821116"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Destroy (1.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:28 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 265ms (Views: 1.1ms | ActiveRecord: 0.5ms | Allocations: 715)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 312ms (Views: 1.1ms | ActiveRecord: 0.4ms | Allocations: 862)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 289ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:47:29 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
Completed 200 OK in 273ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[35m (2.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-10-26 12:47:29 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (6.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (6.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Destroy (0.6ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 90ms (Views: 0.2ms | ActiveRecord: 14.9ms | Allocations: 22401)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.9ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 17:47:29.623501"], ["updated_at", "2020-10-26 17:47:29.623501"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 134ms (Views: 0.6ms | ActiveRecord: 3.4ms | Allocations: 24802)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (10.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (16.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 284ms (Views: 0.4ms | ActiveRecord: 16.0ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 322ms (Views: 0.7ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 332ms (Views: 0.5ms | ActiveRecord: 2.0ms | Allocations: 560)
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-10-26 12:47:30 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (1.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
Completed 200 OK in 35ms (Views: 10.5ms | ActiveRecord: 3.2ms | Allocations: 3663)
  [1m[35m (4.2ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 376ms (Views: 1.1ms | ActiveRecord: 0.6ms | Allocations: 560)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-10-26 12:47:30 -0500
  [1m[35m (3.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:30 -0500
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
Completed 200 OK in 7ms (Views: 1.3ms | ActiveRecord: 1.0ms | Allocations: 1582)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 421ms (Views: 0.7ms | ActiveRecord: 2.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 475ms (Views: 0.6ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 288ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 12:47:31 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (10.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (1.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (4.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.6ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-10-26 17:47:31.104886"], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 48ms (Views: 1.8ms | ActiveRecord: 17.7ms | Allocations: 2897)
  [1m[35m (4.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 489ms (Views: 0.7ms | ActiveRecord: 3.5ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 12:47:31 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (1.2ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-10-26 17:47:31.353761"], ["id", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 24ms (Views: 2.3ms | ActiveRecord: 4.0ms | Allocations: 4142)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 373ms (Views: 0.6ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 420ms (Views: 0.7ms | ActiveRecord: 0.7ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 310ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:47:31 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (3.0ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-10-26 17:47:31.861673"], ["updated_at", "2020-10-26 17:47:31.861673"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 45ms (Views: 1.3ms | ActiveRecord: 4.3ms | Allocations: 2704)
  [1m[35m (2.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.9ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 397ms (Views: 5.2ms | ActiveRecord: 4.1ms | Allocations: 560)
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:47:32 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 17:47:32.241807"], ["updated_at", "2020-10-26 17:47:32.241807"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 29ms (Views: 0.6ms | ActiveRecord: 2.3ms | Allocations: 2601)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 366ms (Views: 0.6ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 282ms (Views: 0.6ms | ActiveRecord: 2.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 321ms (Views: 1.9ms | ActiveRecord: 2.7ms | Allocations: 560)
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-10-26 12:47:32 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 123)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 331ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 12:47:32 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 123)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 322ms (Views: 0.7ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 276ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 280ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:47:33 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-10-26 17:47:33.260227"], ["updated_at", "2020-10-26 17:47:33.260227"], ["admon", "80000"], ["rooms", "3"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 11ms (Views: 1.0ms | ActiveRecord: 1.5ms | Allocations: 2738)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 302ms (Views: 0.6ms | ActiveRecord: 0.7ms | Allocations: 560)
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-10-26 12:47:33 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (2.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 404 Not Found in 8ms (Views: 0.2ms | ActiveRecord: 4.2ms | Allocations: 1458)
  [1m[35m (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_common_areas_attribute
-------------------------------------------------------------------------
Completed 200 OK in 273ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 568)
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mProperty Create (1.2ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "common_areas") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:47:33.548026"], ["updated_at", "2020-10-26 17:47:33.548026"], ["build_area", "hola"], ["common_areas", "muchisimas"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_a_user_id
--------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PropertyTest: test_Should_create_a_property
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["hood", "Belen"], ["city", "Pizza"], ["user_id", 99], ["created_at", "2020-10-26 17:47:33.580592"], ["updated_at", "2020-10-26 17:47:33.580592"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_property_tax_attribute
-------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (4.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "property_tax") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:47:33.594099"], ["updated_at", "2020-10-26 17:47:33.594099"], ["build_area", "hola"], ["property_tax", "500000"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_state
--------------------------------------------------------
  [1m[35m (2.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.8ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "state") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:47:33.618870"], ["updated_at", "2020-10-26 17:47:33.618870"], ["social_class", "5"], ["state", "holiwis"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_elevator_attribute
---------------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:47:33.632675"], ["updated_at", "2020-10-26 17:47:33.632675"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_admon
------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (7.3ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:47:33.646202"], ["updated_at", "2020-10-26 17:47:33.646202"], ["admon", "7777777"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PropertyTest: test_Should_new,_save,_and_destroy_a_property
-----------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 17:47:33.668053"], ["updated_at", "2020-10-26 17:47:33.668053"]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 18]]
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[36mProperty Destroy (0.4ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 18]]
  [1m[36mProperty Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (14.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_social_class
----------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_rooms_attribute
------------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.8ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "rooms") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:47:33.741583"], ["updated_at", "2020-10-26 17:47:33.741583"], ["build_area", "hola"], ["rooms", "500"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_a_valid_elevator_attribute
----------------------------------------------------------------------------------
  [1m[35m (9.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_social_class
---------------------------------------------------------------
  [1m[35m (2.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.9ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "social_class") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:47:33.801128"], ["updated_at", "2020-10-26 17:47:33.801128"], ["build_area", "hola"], ["social_class", "Industrial"]]
  [1m[35m (2.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_rooms_attribute
-------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_because_admon_exceeds_the_maximum_valor
------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_the_proper_built_type
--------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PropertyTest: test_Should_have_successfully_newd_a_property
-----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 17:47:33.851277"], ["updated_at", "2020-10-26 17:47:33.851277"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
PropertyTest: test_test_empty_property
--------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.8ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:47:33.880908"], ["updated_at", "2020-10-26 17:47:33.880908"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_build_area
-------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Completed 200 OK in 349ms (Views: 0.5ms | ActiveRecord: 1.7ms | Allocations: 560)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 12:47:33 -0500
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon", "build_area") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:47:33.899717"], ["updated_at", "2020-10-26 17:47:33.899717"], ["admon", "500000"], ["build_area", "hola"]]
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
  [1m[36mProperty Load (3.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:33 -0500
Completed 404 Not Found in 14ms (Views: 0.2ms | ActiveRecord: 4.1ms | Allocations: 1458)
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 295ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 290ms (Views: 0.9ms | ActiveRecord: 0.7ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 265ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-10-26 12:47:34 -0500
Processing by Api::V1::UsersController#update as JSON
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (1.3ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-10-26 17:47:34.493943"], ["id", 100]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.8ms | ActiveRecord: 3.8ms | Allocations: 2462)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 265ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-10-26 12:47:34 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:34 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 319ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:34 -0500
Completed 200 OK in 309ms (Views: 0.4ms | ActiveRecord: 1.7ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 266ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "new_name"], ["updated_at", "2020-10-26 17:47:35.108767"], ["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 275ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:35 -0500
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 12:47:35 -0500
Processing by Api::V1::UsersController#destroy as JSON
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"user_id"=>"101"}
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 9ms (Views: 0.2ms | ActiveRecord: 1.7ms | Allocations: 1595)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 266ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 289ms (Views: 0.7ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 260ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:47:35 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 13ms (Views: 0.5ms | ActiveRecord: 3.3ms | Allocations: 2367)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 279ms (Views: 2.4ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:35 -0500
Processing by Api::V1::UsersController#login as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 366)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 286ms (Views: 0.7ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 285ms (Views: 0.5ms | ActiveRecord: 1.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 264ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:47:36 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 7ms (Views: 0.6ms | ActiveRecord: 1.7ms | Allocations: 1941)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 285ms (Views: 0.6ms | ActiveRecord: 0.5ms | Allocations: 560)
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 12:47:36 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (9.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 14ms (Views: 0.2ms | ActiveRecord: 9.7ms | Allocations: 1595)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 277ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 325ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 259ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:47:36 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.5ms | ActiveRecord: 0.5ms | Allocations: 1859)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 288ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 12:47:36 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 8ms (Views: 2.5ms | ActiveRecord: 2.2ms | Allocations: 2064)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 293ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 281ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 260ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 269)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 286ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-10-26 12:47:37 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$BnB.vkTeHm2YQK1.i24WR.ENxS47wmF2VAVeaEkL5QEpv.Op1hhYi"], ["created_at", "2020-10-26 17:47:37.546834"], ["updated_at", "2020-10-26 17:47:37.546834"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 12ms (Views: 0.7ms | ActiveRecord: 1.6ms | Allocations: 1491)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 289ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 285ms (Views: 0.9ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 268ms (Views: 1.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 12:47:37 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 1029)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 268ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:47:38 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 8ms (Views: 0.5ms | ActiveRecord: 1.4ms | Allocations: 1433)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 339ms (Views: 1.2ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 293ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 273ms (Views: 0.9ms | ActiveRecord: 0.7ms | Allocations: 560)
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-10-26 12:47:38 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 8ms (Views: 0.3ms | ActiveRecord: 0.6ms | Allocations: 3695)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 276ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 268ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 277ms (Views: 1.3ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 12:47:39 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.4ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 22ms (Views: 3.2ms | ActiveRecord: 2.0ms | Allocations: 1839)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 270ms (Views: 0.9ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 305ms (Views: 0.5ms | ActiveRecord: 1.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 263ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 12:47:39 -0500
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (1.9ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 18ms (Views: 0.9ms | ActiveRecord: 2.3ms | Allocations: 6379)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 287ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 287ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 274ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 561)
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-10-26 12:47:39 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 280ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 284ms (Views: 1.6ms | ActiveRecord: 0.7ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 316ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 12:47:40 -0500
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.4ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.3ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 2.0ms | Allocations: 1475)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 315ms (Views: 1.7ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 447ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 274ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 12:47:40 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 5ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1596)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
PhotoTest: test_Should_create,_save_and_delete_a_property,_as_well_as_inspecting_the_link
-----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPhoto Create (1.1ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.linkdeprueba.com"], ["property_id", 1], ["created_at", "2020-10-26 17:47:40.849165"], ["updated_at", "2020-10-26 17:47:40.849165"]]
  [1m[35m (2.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.3ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 298486375]]
  [1m[36mPhoto Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "photos" WHERE "photos"."property_id" = $1 LIMIT $2[0m  [["property_id", 1], ["LIMIT", 1]]
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_property_id
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PhotoTest: test_Should_successfully_create_a_photo
--------------------------------------------------
  [1m[35m (2.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.9ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPhoto Create (4.4ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.zeldadeprueba.com"], ["property_id", 2], ["created_at", "2020-10-26 17:47:40.886853"], ["updated_at", "2020-10-26 17:47:40.886853"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_url
-------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (1.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 335ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:47:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 256ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-10-26 12:47:41 -0500
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPhoto Create (1.0ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-10-26 17:47:41.400217"], ["updated_at", "2020-10-26 17:47:41.400217"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued PhotoQualityJob (Job ID: c1c51d60-b1a0-4d70-854f-125af2c8b423) to Test(default) with arguments: 298486375
Completed 201 Created in 16ms (Views: 0.3ms | ActiveRecord: 4.0ms | Allocations: 3050)
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (808.9ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (838.0ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 17:48:02.301356', '2020-10-26 17:48:02.301356', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 17:48:02.301356', '2020-10-26 17:48:02.301356', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$zSpTfLLFTNhW6UCU1Iyr2OxngCsaiKmmMMuIvAYxJevLN22h/i.cO', '2020-10-26 17:48:02.301356', '2020-10-26 17:48:02.301356', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$fdIGPhB5aO7RIpp2ilxIfONcLO2252kgGBZJzEedegRO.YuVgHKXy', '2020-10-26 17:48:02.301356', '2020-10-26 17:48:02.301356', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$z4s2Y8At/ZcrxnZKEV1.g.564G7xSZYrHMEEpiS6ZeMkExFrT6IiW', '2020-10-26 17:48:02.301356', '2020-10-26 17:48:02.301356', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:48:02.316193', '2020-10-26 17:48:02.316193', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:48:02.316193', '2020-10-26 17:48:02.316193', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:48:02.316193', '2020-10-26 17:48:02.316193', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:48:02.316193', '2020-10-26 17:48:02.316193', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 17:48:02.316193', '2020-10-26 17:48:02.316193', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 17:48:02.316193', '2020-10-26 17:48:02.316193', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 17:48:02.322941', '2020-10-26 17:48:02.322941', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 17:48:02.322941', '2020-10-26 17:48:02.322941', DEFAULT, DEFAULT)[0m
  [1m[35m (19.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_the_proper_built_type
--------------------------------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.7ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 17:48:02.360470', '2020-10-26 17:48:02.360470', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 17:48:02.360470', '2020-10-26 17:48:02.360470', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$mBrCcYxRBVchwWaQsbaJAeFxDnIRgxuLFBi3FkyrSpiw6sD30WITe', '2020-10-26 17:48:02.360470', '2020-10-26 17:48:02.360470', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$ve149OI0jNM5V8xlVVQEx.WXYISEddyBuZte.YTto2gwpEqBwOIHi', '2020-10-26 17:48:02.360470', '2020-10-26 17:48:02.360470', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$bX.KH1Ag2ZzS4BcZ5SJEu.3IPGIualC5BhBlPHz/xdbIQ2jLtZk0a', '2020-10-26 17:48:02.360470', '2020-10-26 17:48:02.360470', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:48:02.372419', '2020-10-26 17:48:02.372419', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:48:02.372419', '2020-10-26 17:48:02.372419', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:48:02.372419', '2020-10-26 17:48:02.372419', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:48:02.372419', '2020-10-26 17:48:02.372419', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 17:48:02.372419', '2020-10-26 17:48:02.372419', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 17:48:02.372419', '2020-10-26 17:48:02.372419', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 17:48:02.379771', '2020-10-26 17:48:02.379771', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 17:48:02.379771', '2020-10-26 17:48:02.379771', DEFAULT, DEFAULT)[0m
  [1m[35m (3.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PropertyTest: test_Should_new,_save,_and_destroy_a_property
-----------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_build_area
-------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon", "build_area") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:48:02.456691"], ["updated_at", "2020-10-26 17:48:02.456691"], ["admon", "500000"], ["build_area", "hola"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_common_areas_attribute
-------------------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (6.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.1ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "common_areas") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:48:02.484064"], ["updated_at", "2020-10-26 17:48:02.484064"], ["build_area", "hola"], ["common_areas", "muchisimas"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_property_tax_attribute
-------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "property_tax") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:48:02.503905"], ["updated_at", "2020-10-26 17:48:02.503905"], ["build_area", "hola"], ["property_tax", "500000"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_state
--------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "state") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:48:02.538109"], ["updated_at", "2020-10-26 17:48:02.538109"], ["social_class", "5"], ["state", "holiwis"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PropertyTest: test_Should_create_a_property
-------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["hood", "Belen"], ["city", "Pizza"], ["user_id", 99], ["created_at", "2020-10-26 17:48:02.547234"], ["updated_at", "2020-10-26 17:48:02.547234"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_rooms_attribute
-------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProperty Create (1.0ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 17:48:02.566910"], ["updated_at", "2020-10-26 17:48:02.566910"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_admon
------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:48:02.576595"], ["updated_at", "2020-10-26 17:48:02.576595"], ["admon", "7777777"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_social_class
---------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 11]]
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Destroy (0.8ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 11]]
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "social_class") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:48:02.594996"], ["updated_at", "2020-10-26 17:48:02.594996"], ["build_area", "hola"], ["social_class", "Industrial"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_social_class
----------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_a_valid_elevator_attribute
----------------------------------------------------------------------------------
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (1.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_a_user_id
--------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PropertyTest: test_Should_have_successfully_newd_a_property
-----------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
PropertyTest: test_test_empty_property
--------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:48:02.651082"], ["updated_at", "2020-10-26 17:48:02.651082"], ["build_area", "hola"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (8.5ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 17:48:02.667332"], ["updated_at", "2020-10-26 17:48:02.667332"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_elevator_attribute
---------------------------------------------------------------------------
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_rooms_attribute
------------------------------------------------------------------------
  [1m[35m (1.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.4ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:48:02.685520"], ["updated_at", "2020-10-26 17:48:02.685520"], ["build_area", "hola"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.8ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "rooms") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:48:02.696575"], ["updated_at", "2020-10-26 17:48:02.696575"], ["build_area", "hola"], ["rooms", "500"]]
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_because_admon_exceeds_the_maximum_valor
------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$1wfjtalRsLaselpJDaRlaexEJ0L0J48vTVMwhjm026CPzqz08EzvK"], ["created_at", "2020-10-26 17:48:02.724679"], ["updated_at", "2020-10-26 17:48:02.724679"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (3.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (1.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$XkQqM.Qv9uLE6gL.BwNix.wnHDfTyj1k82GnNP8Sl.vam3kohXBZa"], ["created_at", "2020-10-26 17:48:02.742988"], ["updated_at", "2020-10-26 17:48:02.742988"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
-------------------------------------------------
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (9.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (6.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
  [1m[36mUser Create (3.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$jw7jljyJiR9/lIB9xkmR/.DZ76My1.j3saKplZWBIIqfOp06kQfqy"], ["created_at", "2020-10-26 17:48:02.782221"], ["updated_at", "2020-10-26 17:48:02.782221"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (4.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (7.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$5jP0.6Jgvj5tTCSi18drzeN9KUhZUppL.cuQ7VN5.tN5GnVIY8r3."], ["created_at", "2020-10-26 17:48:02.798744"], ["updated_at", "2020-10-26 17:48:02.798744"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (5.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Destroy (1.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Destroy (2.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (5.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$2tn.9u4u/ysv2.ZGELiJLOo2uPcp65NHGTjK.rhlDGsxntdCQjXzO"], ["created_at", "2020-10-26 17:48:02.833530"], ["updated_at", "2020-10-26 17:48:02.833530"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$fSmUjYis8zqu5kUSFwi56OaCFaUypwQQGO0.HmZDoHcqyyUm1.b9G"], ["created_at", "2020-10-26 17:48:02.846586"], ["updated_at", "2020-10-26 17:48:02.846586"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (3.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$JrDUEaR5Gc6.EtE1ssAEJ..Lcv9uBH7y12sJNu4ZADwt0mzDCB07a"], ["created_at", "2020-10-26 17:48:02.868811"], ["updated_at", "2020-10-26 17:48:02.868811"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$Po2/3ayoDkcAM8CT8jkweexblMqF4hYm54KVXNs6qGJR2nc6jVWl."], ["created_at", "2020-10-26 17:48:02.882151"], ["updated_at", "2020-10-26 17:48:02.882151"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (7.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[36mUser Exists? (3.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (3.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (3.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$K8KtoNE23XkT.7lYkXccauI7.4jsI/6nj53JjxDTYQGnw5InFcAim"], ["created_at", "2020-10-26 17:48:02.915315"], ["updated_at", "2020-10-26 17:48:02.915315"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$1YUEwm4WZywjSWSeJzlHleYIJIsMiw/hHGgJPFF.VBtG6Bos435Iq"], ["created_at", "2020-10-26 17:48:02.951842"], ["updated_at", "2020-10-26 17:48:02.951842"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$P.0OqC4T96VHBpQOpru29OFkdv7L4qpThrJrGOUYRUrfJLF8it1Hy"], ["created_at", "2020-10-26 17:48:02.961993"], ["updated_at", "2020-10-26 17:48:02.961993"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (2.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[36mUser Destroy (1.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:03 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:03 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 275ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 719)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:03 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 293ms (Views: 1.1ms | ActiveRecord: 0.2ms | Allocations: 841)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:03 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 268ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 560)
Completed 200 OK in 276ms (Views: 0.4ms | ActiveRecord: 0.5ms | Allocations: 564)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:03 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:03 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 268ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 12:48:03 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 275ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 564)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 6ms (Views: 0.3ms | ActiveRecord: 0.5ms | Allocations: 1922)
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-10-26 12:48:03 -0500
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:03 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (2.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.8ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-10-26 17:48:04.008022"], ["updated_at", "2020-10-26 17:48:04.008022"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued PhotoQualityJob (Job ID: 8f0b928a-3cea-4355-8752-d167a270fee9) to Test(default) with arguments: 298486375
Completed 201 Created in 76ms (Views: 5.6ms | ActiveRecord: 12.6ms | Allocations: 8202)
  [1m[35m (2.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:04 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 296ms (Views: 0.7ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:04 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 300ms (Views: 0.8ms | ActiveRecord: 0.5ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:04 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 263ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:04 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 273ms (Views: 0.4ms | ActiveRecord: 2.8ms | Allocations: 564)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:04 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 268ms (Views: 0.9ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-10-26 12:48:04 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:04 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 275ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 564)
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 12:48:04 -0500
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.2ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 6ms (Views: 0.6ms | ActiveRecord: 0.7ms | Allocations: 1570)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:04 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 310ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:05 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 277ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:05 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 289ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:05 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 277ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 564)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:05 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 272ms (Views: 0.5ms | ActiveRecord: 0.6ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 12:48:05 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.3ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 21ms (Views: 1.5ms | ActiveRecord: 1.4ms | Allocations: 2020)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:05 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 271ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 564)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 12:48:05 -0500
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.4ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (4.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (1.1ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 38ms (Views: 0.3ms | ActiveRecord: 7.1ms | Allocations: 1475)
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:05 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 319ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 327ms (Views: 1.0ms | ActiveRecord: 0.4ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 278ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:48:06 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 17:48:06.347148"], ["updated_at", "2020-10-26 17:48:06.347148"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 28ms (Views: 0.5ms | ActiveRecord: 1.5ms | Allocations: 2632)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 288ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 564)
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-10-26 12:48:06 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
Completed 200 OK in 10ms (Views: 3.9ms | ActiveRecord: 0.9ms | Allocations: 3701)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 307ms (Views: 0.6ms | ActiveRecord: 3.0ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 277ms (Views: 0.7ms | ActiveRecord: 1.1ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 277ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:48:06 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.3ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-10-26 17:48:06.971854"], ["updated_at", "2020-10-26 17:48:06.971854"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 9ms (Views: 0.5ms | ActiveRecord: 1.1ms | Allocations: 2703)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (7.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 336ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 564)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-10-26 12:48:07 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
Completed 200 OK in 13ms (Views: 2.0ms | ActiveRecord: 2.2ms | Allocations: 1581)
  [1m[35m (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:07 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 363ms (Views: 2.3ms | ActiveRecord: 7.7ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:07 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 300ms (Views: 1.0ms | ActiveRecord: 0.2ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:07 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 267ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-10-26 12:48:07 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 404 Not Found in 11ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1458)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:07 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 270ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 564)
  [1m[35m (2.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:48:07 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 17:48:07.746237"], ["updated_at", "2020-10-26 17:48:07.746237"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 20ms (Views: 0.7ms | ActiveRecord: 4.3ms | Allocations: 2695)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:07 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 299ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:07 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 313ms (Views: 1.1ms | ActiveRecord: 0.2ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:08 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 362ms (Views: 0.4ms | ActiveRecord: 0.4ms | Allocations: 561)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 12:48:08 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (1.6ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-10-26 17:48:08.333335"], ["id", 1]]
  [1m[35m (2.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 17ms (Views: 0.6ms | ActiveRecord: 5.5ms | Allocations: 2779)
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:08 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 274ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 564)
  [1m[35m (2.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-10-26 12:48:08 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Destroy (0.7ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.3ms | ActiveRecord: 2.9ms | Allocations: 1544)
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:08 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 345ms (Views: 0.7ms | ActiveRecord: 0.7ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:08 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 298ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 573)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:08 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 302ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 12:48:09 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 288ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 564)
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-10-26 12:48:09 -0500
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 123)
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProperty Update (0.8ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-10-26 17:48:09.020392"], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:09 -0500
Completed 200 OK in 13ms (Views: 3.6ms | ActiveRecord: 2.0ms | Allocations: 2730)
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:09 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 298ms (Views: 0.8ms | ActiveRecord: 0.4ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:09 -0500
Completed 200 OK in 284ms (Views: 0.5ms | ActiveRecord: 1.0ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:09 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 260ms (Views: 1.1ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 12:48:09 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 404 Not Found in 5ms (Views: 0.2ms | ActiveRecord: 0.9ms | Allocations: 1458)
Completed 200 OK in 272ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 564)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:48:09 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:09 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-10-26 17:48:09.634301"], ["updated_at", "2020-10-26 17:48:09.634301"], ["admon", "80000"], ["rooms", "3"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 27ms (Views: 0.6ms | ActiveRecord: 5.3ms | Allocations: 2735)
  [1m[35m (3.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:09 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 289ms (Views: 0.7ms | ActiveRecord: 1.0ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:09 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 298ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:09 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 276ms (Views: 0.4ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 12:48:10 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:10 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 288ms (Views: 0.9ms | ActiveRecord: 0.2ms | Allocations: 564)
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 12:48:10 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 5ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1595)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:10 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 313ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:10 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 294ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:10 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 267ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:48:10 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 11ms (Views: 0.9ms | ActiveRecord: 2.1ms | Allocations: 2367)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:10 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 273ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 564)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-10-26 12:48:10 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$bgbHVBnNLUqsbf.X.GIwu.xp5xob223sj6c9HK/t6lTWNjfygsCLm"], ["created_at", "2020-10-26 17:48:10.845854"], ["updated_at", "2020-10-26 17:48:10.845854"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 10ms (Views: 0.4ms | ActiveRecord: 3.4ms | Allocations: 1491)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:10 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 352ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:11 -0500
Completed 200 OK in 311ms (Views: 0.5ms | ActiveRecord: 0.5ms | Allocations: 572)
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:11 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 264ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 564)
Completed 200 OK in 269ms (Views: 0.8ms | ActiveRecord: 0.5ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:48:11 -0500
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (3.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Exists? (4.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (2.1ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "new_name"], ["updated_at", "2020-10-26 17:48:11.472318"], ["id", 100]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 39ms (Views: 4.2ms | ActiveRecord: 1.1ms | Allocations: 1437)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:11 -0500
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:11 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 267ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:11 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 302ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:11 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 270ms (Views: 1.5ms | ActiveRecord: 0.2ms | Allocations: 564)
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-10-26 12:48:12 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:12 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 271ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-10-26 12:48:12 -0500
Processing by Api::V1::UsersController#update as JSON
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-10-26 17:48:12.073234"], ["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.4ms | ActiveRecord: 1.6ms | Allocations: 2436)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:12 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 281ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:12 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 379ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:12 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 322ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[35m (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 12:48:12 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1595)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:12 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
Completed 200 OK in 277ms (Views: 1.1ms | ActiveRecord: 3.8ms | Allocations: 564)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-10-26 12:48:12 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
  [1m[35m (4.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 19ms (Views: 0.3ms | ActiveRecord: 5.2ms | Allocations: 3695)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:12 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 299ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:13 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 341ms (Views: 0.6ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:13 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 267ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 564)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:13 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 4ms (Views: 0.3ms | ActiveRecord: 0.7ms | Allocations: 269)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:13 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 274ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:48:13 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 32ms (Views: 3.0ms | ActiveRecord: 4.0ms | Allocations: 1859)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:13 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 317ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:13 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 312ms (Views: 1.3ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:13 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 268ms (Views: 0.4ms | ActiveRecord: 0.6ms | Allocations: 564)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:13 -0500
Processing by Api::V1::UsersController#login as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 363)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:13 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 285ms (Views: 1.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 12:48:13 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 9ms (Views: 2.4ms | ActiveRecord: 2.4ms | Allocations: 2064)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:14 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 308ms (Views: 0.5ms | ActiveRecord: 1.6ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:14 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 322ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:14 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 276ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 564)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:48:14 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 24ms (Views: 0.5ms | ActiveRecord: 2.2ms | Allocations: 1945)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_property_id
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_url
-------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
PhotoTest: test_Should_create,_save_and_delete_a_property,_as_well_as_inspecting_the_link
-----------------------------------------------------------------------------------------
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.6ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.linkdeprueba.com"], ["property_id", 1], ["created_at", "2020-10-26 17:48:14.592625"], ["updated_at", "2020-10-26 17:48:14.592625"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.7ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 298486376]]
  [1m[36mPhoto Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "photos" WHERE "photos"."property_id" = $1 LIMIT $2[0m  [["property_id", 1], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PhotoTest: test_Should_successfully_create_a_photo
--------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPhoto Create (2.0ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.zeldadeprueba.com"], ["property_id", 2], ["created_at", "2020-10-26 17:48:14.625264"], ["updated_at", "2020-10-26 17:48:14.625264"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 324ms (Views: 2.1ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 12:48:14 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 7ms (Views: 0.3ms | ActiveRecord: 0.3ms | Allocations: 1029)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (2.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.7ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2323.0ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2335.8ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.3ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 17:48:38.340160', '2020-10-26 17:48:38.340160', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 17:48:38.340160', '2020-10-26 17:48:38.340160', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$XArtLi8Ya2V7jmPgEcD6Z.Ys203d6LQBCW.vKQ/W5Cp848l.eTLgS', '2020-10-26 17:48:38.340160', '2020-10-26 17:48:38.340160', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$zjI2KPqQst9xTonLEa8KpecGFpjtUf8WyB0Yllg/y6L7h.t7RKpLC', '2020-10-26 17:48:38.340160', '2020-10-26 17:48:38.340160', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$HgL9Ugfv3zWU90IiF/Ds2O9ty6SmyyJBNz7bsvftO9BxsBCxAnIGq', '2020-10-26 17:48:38.340160', '2020-10-26 17:48:38.340160', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:48:38.349803', '2020-10-26 17:48:38.349803', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:48:38.349803', '2020-10-26 17:48:38.349803', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:48:38.349803', '2020-10-26 17:48:38.349803', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:48:38.349803', '2020-10-26 17:48:38.349803', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 17:48:38.349803', '2020-10-26 17:48:38.349803', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 17:48:38.349803', '2020-10-26 17:48:38.349803', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 17:48:38.356581', '2020-10-26 17:48:38.356581', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 17:48:38.356581', '2020-10-26 17:48:38.356581', DEFAULT, DEFAULT)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.5ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 17:48:38.352179', '2020-10-26 17:48:38.352179', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 17:48:38.352179', '2020-10-26 17:48:38.352179', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$858Kha543ak5a3c59zgRYOg46822c1agXykjsxaL4kgqHwb2HMU1u', '2020-10-26 17:48:38.352179', '2020-10-26 17:48:38.352179', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$bV0hg0uBZ8EO5nj6VuLEDuMZCyKtlNOlyvYcO5GWahvNKouNxu6GK', '2020-10-26 17:48:38.352179', '2020-10-26 17:48:38.352179', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$.OqkmU.pZNiKLoNSe4l2mOdjTNN2PxhwO3IiwE5LWguyz2WpTEt2m', '2020-10-26 17:48:38.352179', '2020-10-26 17:48:38.352179', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:48:38.369859', '2020-10-26 17:48:38.369859', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:48:38.369859', '2020-10-26 17:48:38.369859', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:48:38.369859', '2020-10-26 17:48:38.369859', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:48:38.369859', '2020-10-26 17:48:38.369859', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 17:48:38.369859', '2020-10-26 17:48:38.369859', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 17:48:38.369859', '2020-10-26 17:48:38.369859', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 17:48:38.379282', '2020-10-26 17:48:38.379282', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 17:48:38.379282', '2020-10-26 17:48:38.379282', DEFAULT, DEFAULT)[0m
  [1m[35m (58.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (40.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:38 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 283ms (Views: 1.1ms | ActiveRecord: 0.4ms | Allocations: 6587)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 297ms (Views: 1.2ms | ActiveRecord: 0.5ms | Allocations: 6583)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 280ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 564)
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-10-26 12:48:39 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 123)
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 338ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 12:48:39 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 1206)
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 448ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (11.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 423ms (Views: 1.0ms | ActiveRecord: 0.8ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 321ms (Views: 0.5ms | ActiveRecord: 11.3ms | Allocations: 564)
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 12:48:39 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 8ms (Views: 0.8ms | ActiveRecord: 1.1ms | Allocations: 1886)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 281ms (Views: 0.4ms | ActiveRecord: 0.6ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:48:39 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 11ms (Views: 1.1ms | ActiveRecord: 1.8ms | Allocations: 1550)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 278ms (Views: 0.9ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 333ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 268ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-10-26 12:48:40 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 200 OK in 261ms (Views: 1.0ms | ActiveRecord: 0.3ms | Allocations: 564)
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:48:40 -0500
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 21ms (Views: 0.3ms | ActiveRecord: 3.2ms | Allocations: 5571)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:40 -0500
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 32ms (Views: 0.5ms | ActiveRecord: 4.5ms | Allocations: 5976)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 279ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 289ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 283ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 12:48:41 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 19ms (Views: 0.5ms | ActiveRecord: 0.7ms | Allocations: 1595)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 310ms (Views: 0.8ms | ActiveRecord: 2.3ms | Allocations: 564)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:48:41 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 30ms (Views: 0.6ms | ActiveRecord: 4.1ms | Allocations: 2371)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 332ms (Views: 0.5ms | ActiveRecord: 0.8ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 317ms (Views: 0.8ms | ActiveRecord: 0.6ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 274ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.3ms | Allocations: 269)
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 297ms (Views: 1.1ms | ActiveRecord: 0.4ms | Allocations: 564)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:48:41 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 23ms (Views: 0.6ms | ActiveRecord: 5.2ms | Allocations: 1863)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 302ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 286ms (Views: 0.8ms | ActiveRecord: 1.1ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 263ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (6.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-10-26 12:48:42 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$/hFktZCTcPeaPFI86I517.sYgAilbB7JAAg2ePyO3Bs2hV3r/JNL6"], ["created_at", "2020-10-26 17:48:42.359039"], ["updated_at", "2020-10-26 17:48:42.359039"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 8ms (Views: 0.5ms | ActiveRecord: 1.0ms | Allocations: 1602)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 277ms (Views: 1.8ms | ActiveRecord: 0.3ms | Allocations: 564)
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-10-26 12:48:42 -0500
Processing by Api::V1::UsersController#update as JSON
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-10-26 17:48:42.483539"], ["id", 100]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 22ms (Views: 0.6ms | ActiveRecord: 4.5ms | Allocations: 3185)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 330ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 363ms (Views: 0.5ms | ActiveRecord: 0.8ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 279ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (1.3ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "new_name"], ["updated_at", "2020-10-26 17:48:43.003360"], ["id", 100]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 297ms (Views: 0.6ms | ActiveRecord: 2.2ms | Allocations: 564)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:43 -0500
Processing by Api::V1::UsersController#login as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 401 Unauthorized in 3ms (Views: 0.9ms | ActiveRecord: 0.2ms | Allocations: 363)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.8ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_property_id
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PhotoTest: test_Should_successfully_create_a_photo
--------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.6ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.zeldadeprueba.com"], ["property_id", 2], ["created_at", "2020-10-26 17:48:43.303142"], ["updated_at", "2020-10-26 17:48:43.303142"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
PhotoTest: test_Should_create,_save_and_delete_a_property,_as_well_as_inspecting_the_link
-----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 305ms (Views: 1.0ms | ActiveRecord: 0.2ms | Allocations: 568)
  [1m[36mPhoto Create (0.9ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.linkdeprueba.com"], ["property_id", 1], ["created_at", "2020-10-26 17:48:43.319272"], ["updated_at", "2020-10-26 17:48:43.319272"]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:43 -0500
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.7ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 298486376]]
  [1m[36mPhoto Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "photos" WHERE "photos"."property_id" = $1 LIMIT $2[0m  [["property_id", 1], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_url
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 290ms (Views: 0.5ms | ActiveRecord: 0.6ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 12:48:43 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 11ms (Views: 2.3ms | ActiveRecord: 0.5ms | Allocations: 2065)
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 310ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 298ms (Views: 2.5ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 261ms (Views: 0.4ms | ActiveRecord: 0.9ms | Allocations: 564)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 12:48:43 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.5ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-10-26 17:48:43.967492"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 0.7ms | ActiveRecord: 1.7ms | Allocations: 3593)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 281ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:48:44 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-10-26 17:48:44.314110"], ["updated_at", "2020-10-26 17:48:44.314110"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 80ms (Views: 0.6ms | ActiveRecord: 1.7ms | Allocations: 26344)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Completed 200 OK in 337ms (Views: 0.9ms | ActiveRecord: 0.3ms | Allocations: 572)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:44 -0500
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:44 -0500
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 288ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 311ms (Views: 7.6ms | ActiveRecord: 0.3ms | Allocations: 565)
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-10-26 12:48:44 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
Completed 200 OK in 8ms (Views: 3.7ms | ActiveRecord: 0.8ms | Allocations: 3649)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 294ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 12:48:44 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 404 Not Found in 7ms (Views: 0.2ms | ActiveRecord: 1.3ms | Allocations: 1575)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 291ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 270ms (Views: 1.1ms | ActiveRecord: 1.7ms | Allocations: 564)
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-10-26 12:48:45 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[36mUser Load (11.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 404 Not Found in 25ms (Views: 0.1ms | ActiveRecord: 12.4ms | Allocations: 1458)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:45 -0500
Completed 200 OK in 330ms (Views: 1.0ms | ActiveRecord: 0.3ms | Allocations: 568)
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:45 -0500
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 278ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 561)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 12:48:45 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 328ms (Views: 0.7ms | ActiveRecord: 3.8ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 279ms (Views: 0.4ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 284ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 564)
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-10-26 12:48:45 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 303ms (Views: 2.1ms | ActiveRecord: 0.2ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 12:48:46 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.6ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-10-26 17:48:46.170599"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 0.5ms | ActiveRecord: 2.7ms | Allocations: 2756)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 344ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 318ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 261ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 564)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:48:46 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (1.4ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-10-26 17:48:46.517583"], ["updated_at", "2020-10-26 17:48:46.517583"], ["admon", "80000"], ["rooms", "3"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 10ms (Views: 0.6ms | ActiveRecord: 2.2ms | Allocations: 2759)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 285ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:48:46 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 17:48:46.814639"], ["updated_at", "2020-10-26 17:48:46.814639"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 23ms (Views: 0.6ms | ActiveRecord: 3.0ms | Allocations: 2698)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 318ms (Views: 3.0ms | ActiveRecord: 1.6ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 288ms (Views: 0.5ms | ActiveRecord: 0.7ms | Allocations: 564)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:48:47 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 17:48:47.154338"], ["updated_at", "2020-10-26 17:48:47.154338"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 311ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Completed 201 Created in 9ms (Views: 1.0ms | ActiveRecord: 1.4ms | Allocations: 2578)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:47 -0500
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 289ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-10-26 12:48:47 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (1.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (3.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Destroy (1.2ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 30ms (Views: 0.2ms | ActiveRecord: 7.3ms | Allocations: 1560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$wUMpnYlpPeNPTgeWkGivT..A1dEpm.Rl5lC6g0kh6fX6PDfHeQBRK"], ["created_at", "2020-10-26 17:48:47.506941"], ["updated_at", "2020-10-26 17:48:47.506941"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$dtfarF4w6gYmvnDf1RHiOOlJivcCQ0W30xps7wW3vobeTQ9rVANAO"], ["created_at", "2020-10-26 17:48:47.571001"], ["updated_at", "2020-10-26 17:48:47.571001"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Destroy (1.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (3.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.8ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 443ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$sP6Nn3GxJspMGUaOECU9VOO3DVfsQJTlRBFJxKQuG6ieWpu9d5w5O"], ["created_at", "2020-10-26 17:48:47.628394"], ["updated_at", "2020-10-26 17:48:47.628394"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (13.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Destroy (0.9ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (9.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
  [1m[35m (2.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (3.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$ZDmOpoDl0dSIGJksYj8J3.hkWyfu08VVcBMm66mKogYTpy5bS2GRa"], ["created_at", "2020-10-26 17:48:47.677042"], ["updated_at", "2020-10-26 17:48:47.677042"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.9ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$RcEfc1PkgppCjbGJntZEQ.lE2w/ID9cAzAg7VucNgcZycg9ykLaTy"], ["created_at", "2020-10-26 17:48:47.722045"], ["updated_at", "2020-10-26 17:48:47.722045"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (1.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$g4SsTlq54XBGC8nDfagmWuYDZr8WWlCVKxLfyJO9bInO0udI6bwEe"], ["created_at", "2020-10-26 17:48:47.741548"], ["updated_at", "2020-10-26 17:48:47.741548"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486381]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486381]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$18UsN7UkEUd4cOls5IRYDeEM4tLTYoZt2cazkFFcOZm6w/L.7eZfa"], ["created_at", "2020-10-26 17:48:47.770830"], ["updated_at", "2020-10-26 17:48:47.770830"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (2.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486382]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486382]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$NskwklRl7f3XesJa4w2D.urb3mOkwekB5iX.qhzcu4ZdII0SmIuou"], ["created_at", "2020-10-26 17:48:47.815875"], ["updated_at", "2020-10-26 17:48:47.815875"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (7.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486383]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486383]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$K57UxzRgHdZDXRnMO6dodeF8Kk.is6UL95CPeSaM46WEtADnlz9Nm"], ["created_at", "2020-10-26 17:48:47.892067"], ["updated_at", "2020-10-26 17:48:47.892067"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (10.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[35m (3.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486384]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486384]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
  [1m[35m (8.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$GYH7ohAEms6nFd7Detst/erXF/ymCkCmWfrU703FhF5JoB7qxH6US"], ["created_at", "2020-10-26 17:48:47.949162"], ["updated_at", "2020-10-26 17:48:47.949162"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486385]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (1.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486385]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (13.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$xCNHTWEme5md5Jk/LG3kVucJ/bYPGJjXl3x0wxopod7ewKVJqetJW"], ["created_at", "2020-10-26 17:48:48.005493"], ["updated_at", "2020-10-26 17:48:48.005493"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (3.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486386]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486386]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
Completed 200 OK in 412ms (Views: 1.0ms | ActiveRecord: 1.4ms | Allocations: 564)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-10-26 12:48:48 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:48 -0500
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (3.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
Completed 200 OK in 13ms (Views: 2.2ms | ActiveRecord: 4.5ms | Allocations: 1583)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 307ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 312ms (Views: 0.5ms | ActiveRecord: 1.1ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 277ms (Views: 0.4ms | ActiveRecord: 0.4ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 282ms (Views: 0.8ms | ActiveRecord: 0.4ms | Allocations: 564)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 280ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-10-26 12:48:48 -0500
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.5ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-10-26 17:48:48.946023"], ["updated_at", "2020-10-26 17:48:48.946023"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued PhotoQualityJob (Job ID: 0ab9fab0-39e8-4ac6-a502-e9b0a36edf0a) to Test(default) with arguments: 298486375
Completed 201 Created in 20ms (Views: 0.4ms | ActiveRecord: 2.6ms | Allocations: 7825)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:48 -0500
Completed 200 OK in 291ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 564)
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-10-26 12:48:48 -0500
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 155)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 286ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 572)
Completed 200 OK in 301ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:49 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:49 -0500
Processing by Api::V1::UsersController#login as JSON
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (12.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 279ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:49 -0500
Completed 200 OK in 281ms (Views: 0.6ms | ActiveRecord: 12.7ms | Allocations: 564)
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:49 -0500
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 264ms (Views: 1.2ms | ActiveRecord: 0.2ms | Allocations: 564)
Completed 200 OK in 267ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 12:48:49 -0500
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 12:48:49 -0500
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mPhoto Load (2.1ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 9ms (Views: 0.6ms | ActiveRecord: 2.8ms | Allocations: 1588)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPhoto Load (0.3ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 11ms (Views: 2.7ms | ActiveRecord: 1.6ms | Allocations: 1848)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:49 -0500
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:49 -0500
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 274ms (Views: 0.5ms | ActiveRecord: 0.6ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 286ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 267ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 564)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 267ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:48:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 262ms (Views: 1.7ms | ActiveRecord: 0.2ms | Allocations: 564)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 12:48:50 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 5ms (Views: 0.2ms | ActiveRecord: 0.5ms | Allocations: 1596)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_build_area
-------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon", "build_area") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:48:50.665900"], ["updated_at", "2020-10-26 17:48:50.665900"], ["admon", "500000"], ["build_area", "hola"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_common_areas_attribute
-------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "common_areas") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:48:50.677661"], ["updated_at", "2020-10-26 17:48:50.677661"], ["build_area", "hola"], ["common_areas", "muchisimas"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.8ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_rooms_attribute
-------------------------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (3.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
PropertyTest: test_test_empty_property
--------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_because_admon_exceeds_the_maximum_valor
------------------------------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_a_valid_elevator_attribute
----------------------------------------------------------------------------------
  [1m[35m (4.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (2.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (4.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PropertyTest: test_Should_have_successfully_newd_a_property
-----------------------------------------------------------
  [1m[35m (5.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 17:48:50.769734"], ["updated_at", "2020-10-26 17:48:50.769734"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.7ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_state
--------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "state") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:48:50.794229"], ["updated_at", "2020-10-26 17:48:50.794229"], ["social_class", "5"], ["state", "holiwis"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_rooms_attribute
------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "rooms") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:48:50.801299"], ["updated_at", "2020-10-26 17:48:50.801299"], ["build_area", "hola"], ["rooms", "500"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PropertyTest: test_Should_create_a_property
-------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["hood", "Belen"], ["city", "Pizza"], ["user_id", 99], ["created_at", "2020-10-26 17:48:50.819971"], ["updated_at", "2020-10-26 17:48:50.819971"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PropertyTest: test_Should_new,_save,_and_destroy_a_property
-----------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.1ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 17:48:50.829284"], ["updated_at", "2020-10-26 17:48:50.829284"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 19]]
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[36mProperty Destroy (0.7ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 19]]
  [1m[36mProperty Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_social_class
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_property_tax_attribute
-------------------------------------------------------------------------
Completed 200 OK in 470ms (Views: 0.6ms | ActiveRecord: 0.6ms | Allocations: 560)
  [1m[35m (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "property_tax") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:48:50.892198"], ["updated_at", "2020-10-26 17:48:50.892198"], ["build_area", "hola"], ["property_tax", "500000"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_elevator_attribute
---------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 12:48:50 -0500
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Create (0.9ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:48:50.902794"], ["updated_at", "2020-10-26 17:48:50.902794"], ["build_area", "hola"]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_a_user_id
--------------------------------------------------------------
  [1m[36mPhoto Load (0.7ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.7ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 16ms (Views: 0.2ms | ActiveRecord: 3.9ms | Allocations: 1604)
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_admon
------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:48:50.948627"], ["updated_at", "2020-10-26 17:48:50.948627"], ["admon", "7777777"]]
  [1m[35m (1.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_the_proper_built_type
--------------------------------------------------------------------------
---------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_social_class
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (3.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (2.2ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "social_class") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:48:50.981597"], ["updated_at", "2020-10-26 17:48:50.981597"], ["build_area", "hola"], ["social_class", "Industrial"]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.3ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (988.1ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (982.8ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.0ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.8ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.3ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 17:49:09.643977', '2020-10-26 17:49:09.643977', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 17:49:09.643977', '2020-10-26 17:49:09.643977', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$KaNlcygg6mDG0ZjnZLUX/uPs4U7k.F2cpcEJG0r./J7FcqljeYat6', '2020-10-26 17:49:09.643977', '2020-10-26 17:49:09.643977', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$EnH3tHAkxnU3JjQ6gMKnwuEyXjIdw13Sp3uTganY/qoXHCKOoqWVu', '2020-10-26 17:49:09.643977', '2020-10-26 17:49:09.643977', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$7pBlc69fpWqXtdp1q.ILxesH4EtHWnBdbh9Z89zPB86PK0ZiXdHgu', '2020-10-26 17:49:09.643977', '2020-10-26 17:49:09.643977', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:49:09.653961', '2020-10-26 17:49:09.653961', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:49:09.653961', '2020-10-26 17:49:09.653961', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:49:09.653961', '2020-10-26 17:49:09.653961', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:49:09.653961', '2020-10-26 17:49:09.653961', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 17:49:09.653961', '2020-10-26 17:49:09.653961', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 17:49:09.653961', '2020-10-26 17:49:09.653961', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 17:49:09.661671', '2020-10-26 17:49:09.661671', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 17:49:09.661671', '2020-10-26 17:49:09.661671', DEFAULT, DEFAULT)[0m
  [1m[35m (25.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.8ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.6ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 17:49:09.698092', '2020-10-26 17:49:09.698092', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 17:49:09.698092', '2020-10-26 17:49:09.698092', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$Yn08yMwEI8bHCbQcQVOFNul5wsAs8ojKTbbB3nSmkJhOEV7ToCY7y', '2020-10-26 17:49:09.698092', '2020-10-26 17:49:09.698092', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$S0kTwup7TV6e.RKsEG1KKOvmX9ZpCHyANK0n4d.HmAgf6hnKLg8ie', '2020-10-26 17:49:09.698092', '2020-10-26 17:49:09.698092', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$ehMIzdnplWVfOKPaJ6.xbeFnz/ENP0Doj9xC2AVmC3iyb6iSecPG.', '2020-10-26 17:49:09.698092', '2020-10-26 17:49:09.698092', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:49:09.707522', '2020-10-26 17:49:09.707522', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:49:09.707522', '2020-10-26 17:49:09.707522', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:49:09.707522', '2020-10-26 17:49:09.707522', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:49:09.707522', '2020-10-26 17:49:09.707522', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 17:49:09.707522', '2020-10-26 17:49:09.707522', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 17:49:09.707522', '2020-10-26 17:49:09.707522', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 17:49:09.716606', '2020-10-26 17:49:09.716606', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 17:49:09.716606', '2020-10-26 17:49:09.716606', DEFAULT, DEFAULT)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
  [1m[35m (15.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:09 -0500
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:09 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 291ms (Views: 1.0ms | ActiveRecord: 0.9ms | Allocations: 6585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:10 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 277ms (Views: 0.7ms | ActiveRecord: 0.6ms | Allocations: 6585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:10 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 270ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:10 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 265ms (Views: 0.6ms | ActiveRecord: 1.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:10 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 269ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 12:49:10 -0500
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.5ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 274ms (Views: 1.1ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 12:49:10 -0500
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
Completed 200 OK in 25ms (Views: 0.7ms | ActiveRecord: 5.2ms | Allocations: 6633)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (1.1ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:10 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.5ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 38ms (Views: 0.5ms | ActiveRecord: 3.9ms | Allocations: 6671)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:10 -0500
  [1m[36mUser Load (21.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 318ms (Views: 0.6ms | ActiveRecord: 21.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:11 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 359ms (Views: 0.6ms | ActiveRecord: 1.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:11 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 273ms (Views: 0.5ms | ActiveRecord: 0.6ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:11 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 294ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:11 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 266ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-10-26 12:49:11 -0500
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.6ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-10-26 17:49:11.624407"], ["updated_at", "2020-10-26 17:49:11.624407"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued PhotoQualityJob (Job ID: 30586f80-e970-4297-900f-c7da6e36b7e7) to Test(default) with arguments: 298486375
Completed 201 Created in 57ms (Views: 0.4ms | ActiveRecord: 2.4ms | Allocations: 26254)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:11 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 268ms (Views: 0.6ms | ActiveRecord: 1.3ms | Allocations: 560)
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-10-26 12:49:11 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 123)
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:11 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 284ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:11 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 300ms (Views: 0.5ms | ActiveRecord: 4.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:11 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 268ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:12 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 267ms (Views: 0.5ms | ActiveRecord: 0.5ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:12 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 264ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 12:49:12 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 5ms (Views: 0.3ms | ActiveRecord: 0.7ms | Allocations: 1599)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:12 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 291ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 12:49:12 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.3ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 66ms (Views: 5.0ms | ActiveRecord: 1.2ms | Allocations: 26114)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:12 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 283ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:12 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 293ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:12 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 266ms (Views: 1.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:13 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.3ms | ActiveRecord: 0.6ms | Allocations: 269)
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:13 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 287ms (Views: 0.9ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:49:13 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (1.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 13ms (Views: 1.2ms | ActiveRecord: 2.6ms | Allocations: 2616)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:13 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 272ms (Views: 0.6ms | ActiveRecord: 0.7ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:13 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 288ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:13 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 267ms (Views: 0.4ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-10-26 12:49:13 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$V/xpgd0OLax/Wlz1pnHZVOI/NbYRFPIw5vhI24Te/aoFALzAn4Yfy"], ["created_at", "2020-10-26 17:49:13.610478"], ["updated_at", "2020-10-26 17:49:13.610478"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 10ms (Views: 0.5ms | ActiveRecord: 2.9ms | Allocations: 2159)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:13 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 280ms (Views: 0.9ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 12:49:13 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 0.5ms | Allocations: 1595)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:13 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 312ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:13 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 280ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:14 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 267ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 12:49:14 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 5ms (Views: 0.1ms | ActiveRecord: 0.6ms | Allocations: 1595)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:14 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 265ms (Views: 0.4ms | ActiveRecord: 0.6ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:49:14 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.5ms | Allocations: 1859)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:14 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 271ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:14 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 270ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:14 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 268ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:14 -0500
Processing by Api::V1::UsersController#login as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.3ms | ActiveRecord: 0.3ms | Allocations: 366)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:14 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 278ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-10-26 12:49:14 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:14 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 270ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:15 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 274ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:15 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 268ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 12:49:15 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 1029)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:15 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 299ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 12:49:15 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (9.7ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 16ms (Views: 3.3ms | ActiveRecord: 10.3ms | Allocations: 2064)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:15 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 288ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:15 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 301ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:15 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 261ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "new_name"], ["updated_at", "2020-10-26 17:49:15.889705"], ["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:15 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 290ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:16 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 345ms (Views: 2.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-10-26 12:49:16 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 14ms (Views: 0.2ms | ActiveRecord: 2.8ms | Allocations: 5557)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:16 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 269ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:49:16 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 0.5ms | Allocations: 1433)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:16 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 306ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:16 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 297ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:16 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 289ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:49:16 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (2.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (2.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 16ms (Views: 0.9ms | ActiveRecord: 6.9ms | Allocations: 1941)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_common_areas_attribute
-------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.3ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "common_areas") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:49:16.880463"], ["updated_at", "2020-10-26 17:49:16.880463"], ["build_area", "hola"], ["common_areas", "muchisimas"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_social_class
---------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "social_class") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:49:16.893576"], ["updated_at", "2020-10-26 17:49:16.893576"], ["build_area", "hola"], ["social_class", "Industrial"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_state
--------------------------------------------------------
  [1m[35m (2.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.1ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "state") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:49:16.908767"], ["updated_at", "2020-10-26 17:49:16.908767"], ["social_class", "5"], ["state", "holiwis"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_rooms_attribute
-------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PropertyTest: test_Should_create_a_property
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["hood", "Belen"], ["city", "Pizza"], ["user_id", 99], ["created_at", "2020-10-26 17:49:16.936173"], ["updated_at", "2020-10-26 17:49:16.936173"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_a_user_id
--------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PropertyTest: test_Should_new,_save,_and_destroy_a_property
-----------------------------------------------------------
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 17:49:16.964622"], ["updated_at", "2020-10-26 17:49:16.964622"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 15]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[36mProperty Destroy (1.0ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 15]]
  [1m[36mProperty Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_property_tax_attribute
-------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "property_tax") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:49:16.991892"], ["updated_at", "2020-10-26 17:49:16.991892"], ["build_area", "hola"], ["property_tax", "500000"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PropertyTest: test_Should_have_successfully_newd_a_property
-----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 17:49:17.003371"], ["updated_at", "2020-10-26 17:49:17.003371"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_social_class
----------------------------------------------------------------------------
  [1m[35m (24.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_admon
------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:49:17.077108"], ["updated_at", "2020-10-26 17:49:17.077108"], ["admon", "7777777"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_the_proper_built_type
--------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_rooms_attribute
------------------------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.8ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "rooms") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:49:17.170467"], ["updated_at", "2020-10-26 17:49:17.170467"], ["build_area", "hola"], ["rooms", "500"]]
Completed 200 OK in 404ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-10-26 12:49:17 -0500
  [1m[35m (13.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_because_admon_exceeds_the_maximum_valor
------------------------------------------------------------------------------------
Processing by Api::V1::UsersController#update as JSON
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (4.7ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-10-26 17:49:17.210710"], ["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 17ms (Views: 0.5ms | ActiveRecord: 6.1ms | Allocations: 2436)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_build_area
-------------------------------------------------------------
  [1m[35m (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.9ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon", "build_area") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:49:17.233295"], ["updated_at", "2020-10-26 17:49:17.233295"], ["admon", "500000"], ["build_area", "hola"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_elevator_attribute
---------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (3.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:49:17.239569"], ["updated_at", "2020-10-26 17:49:17.239569"], ["build_area", "hola"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_a_valid_elevator_attribute
----------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (8.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
PropertyTest: test_test_empty_property
--------------------------------------
  [1m[35m (9.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_property_id
---------------------------------------------------------------
  [1m[35m (14.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PhotoTest: test_Should_successfully_create_a_photo
--------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (3.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPhoto Create (1.1ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.zeldadeprueba.com"], ["property_id", 2], ["created_at", "2020-10-26 17:49:17.284704"], ["updated_at", "2020-10-26 17:49:17.284704"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
PhotoTest: test_Should_create,_save_and_delete_a_property,_as_well_as_inspecting_the_link
-----------------------------------------------------------------------------------------
  [1m[35m (2.8ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_url
-------------------------------------------------------
  [1m[35m (3.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (2.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (2.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (4.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mPhoto Create (3.0ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.linkdeprueba.com"], ["property_id", 1], ["created_at", "2020-10-26 17:49:17.314952"], ["updated_at", "2020-10-26 17:49:17.314952"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPhoto Destroy (4.7ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[36mPhoto Exists? (5.0ms)[0m  [1m[34mSELECT 1 AS one FROM "photos" WHERE "photos"."property_id" = $1 LIMIT $2[0m  [["property_id", 1], ["LIMIT", 1]]
  [1m[35m (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (5.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (5.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (3.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$525OparUy7XOeEFjm2Y01erp2QxvZlUWT4IB96NdUCsLhk6VIFs2K"], ["created_at", "2020-10-26 17:49:17.345736"], ["updated_at", "2020-10-26 17:49:17.345736"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
  [1m[35m (4.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (14.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$XuFPo7kHLCjMnAswEuSNFOlNKSs7bXFQ5vWNMOJ883445Swi17Eri"], ["created_at", "2020-10-26 17:49:17.373517"], ["updated_at", "2020-10-26 17:49:17.373517"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Create (2.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$kIZPlnmxm8OlpvroupHL/O40yJyO2nxx9Cj3bDOKNX1iPBpAw5bXi"], ["created_at", "2020-10-26 17:49:17.381855"], ["updated_at", "2020-10-26 17:49:17.381855"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$O6cMXqlTOXGtIVt1I7pNF.hWjUXSMeRnrEr/iugxJxpsuAzP458pS"], ["created_at", "2020-10-26 17:49:17.428019"], ["updated_at", "2020-10-26 17:49:17.428019"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (3.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$OeFua/by3Y7G7/339EnrDebqEFgTQROsr6MvclMYOfSeqNIUhCsTG"], ["created_at", "2020-10-26 17:49:17.457175"], ["updated_at", "2020-10-26 17:49:17.457175"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Destroy (1.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$vElGXtCgME0MNSePvYIrfu9Nms.9EHIxdwwQw7XuJq3aoDiX9/rY."], ["created_at", "2020-10-26 17:49:17.478119"], ["updated_at", "2020-10-26 17:49:17.478119"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Destroy (3.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
  [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$PoA3d6bIRDsKWQJJ4cjj/u44dD.e1mVaKx2iolbJfxasder1hvbWW"], ["created_at", "2020-10-26 17:49:17.517579"], ["updated_at", "2020-10-26 17:49:17.517579"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$3KbI8HWlvRZt6Te9nw2.eOd7OWpdNS2JXV9PdONwLsn6O52.SShXK"], ["created_at", "2020-10-26 17:49:17.519074"], ["updated_at", "2020-10-26 17:49:17.519074"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (3.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$cAm11pPUVtciZBaBPo8i0uiBN5UwHzBlDqP87QMGp6oASFUDenyCq"], ["created_at", "2020-10-26 17:49:17.546336"], ["updated_at", "2020-10-26 17:49:17.546336"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$pm3kMsAlT5U.1kvstQmnf.9YDB8mP0XD3PByKGYh4fmpKHSmCSjX2"], ["created_at", "2020-10-26 17:49:17.548007"], ["updated_at", "2020-10-26 17:49:17.548007"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.9ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Destroy (2.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486381]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486381]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$rRVYdQsKtROU29utXTVp3.uLIt1xtjhiVv6H8L40zw1p6SWmzLyIC"], ["created_at", "2020-10-26 17:49:17.585307"], ["updated_at", "2020-10-26 17:49:17.585307"], ["full_name", "valid"], ["cellphone", "3001234567"]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:17 -0500
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (3.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (8.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:17 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 286ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:17 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 283ms (Views: 0.7ms | ActiveRecord: 0.5ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:17 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 263ms (Views: 0.6ms | ActiveRecord: 0.5ms | Allocations: 560)
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-10-26 12:49:18 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 404 Not Found in 11ms (Views: 0.2ms | ActiveRecord: 1.2ms | Allocations: 1508)
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:18 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 271ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-10-26 12:49:18 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
Completed 200 OK in 15ms (Views: 4.3ms | ActiveRecord: 1.8ms | Allocations: 1631)
  [1m[35m (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:18 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 312ms (Views: 1.0ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:18 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
Completed 200 OK in 278ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 568)
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:18 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 280ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:49:18 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-10-26 17:49:18.815875"], ["updated_at", "2020-10-26 17:49:18.815875"], ["admon", "80000"], ["rooms", "3"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 19ms (Views: 0.6ms | ActiveRecord: 2.6ms | Allocations: 2736)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 320ms (Views: 0.5ms | ActiveRecord: 1.7ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 12:49:18 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (10.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:18 -0500
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mProperty Load (5.9ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.6ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-10-26 17:49:18.850994"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 25ms (Views: 0.9ms | ActiveRecord: 7.3ms | Allocations: 2751)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:18 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 312ms (Views: 0.6ms | ActiveRecord: 2.7ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:19 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (11.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 330ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:19 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 284ms (Views: 0.5ms | ActiveRecord: 11.6ms | Allocations: 560)
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-10-26 12:49:19 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:19 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 269ms (Views: 0.5ms | ActiveRecord: 0.7ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:49:19 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (2.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (4.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 17:49:19.483263"], ["updated_at", "2020-10-26 17:49:19.483263"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (3.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 23ms (Views: 0.6ms | ActiveRecord: 13.3ms | Allocations: 2696)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:19 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 276ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:19 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 415ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:19 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 371ms (Views: 0.5ms | ActiveRecord: 0.5ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 12:49:20 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:20 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 449ms (Views: 3.7ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 12:49:20 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 404 Not Found in 6ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1458)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:20 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 368ms (Views: 0.6ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:20 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 305ms (Views: 1.1ms | ActiveRecord: 0.3ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 12:49:20 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (12.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (1.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (2.1ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-10-26 17:49:20.845080"], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 27ms (Views: 0.7ms | ActiveRecord: 17.0ms | Allocations: 2779)
  [1m[35m (10.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:20 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 492ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:20 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 317ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
Completed 200 OK in 298ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[35m (1.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:49:21 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-10-26 17:49:21.204883"], ["updated_at", "2020-10-26 17:49:21.204883"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 11ms (Views: 1.2ms | ActiveRecord: 2.0ms | Allocations: 2704)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 269ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:49:21 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.3ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 17:49:21.468168"], ["updated_at", "2020-10-26 17:49:21.468168"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 6ms (Views: 0.4ms | ActiveRecord: 1.0ms | Allocations: 2578)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 294ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 263ms (Views: 0.4ms | ActiveRecord: 0.5ms | Allocations: 560)
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-10-26 12:49:21 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
Completed 200 OK in 323ms (Views: 0.6ms | ActiveRecord: 1.0ms | Allocations: 568)
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:49:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
Completed 200 OK in 8ms (Views: 4.4ms | ActiveRecord: 0.9ms | Allocations: 3649)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 270ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-10-26 12:49:22 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Destroy (0.4ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 16ms (Views: 0.2ms | ActiveRecord: 3.0ms | Allocations: 1544)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (3.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.3ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (945.5ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (951.3ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.0ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.3ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 17:50:39.057610', '2020-10-26 17:50:39.057610', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 17:50:39.057610', '2020-10-26 17:50:39.057610', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$7ZNXWlLAQ261R2jDLv2k9OgKB/PrulT8ywLlGka2/zMfJ2C.lKv8C', '2020-10-26 17:50:39.057610', '2020-10-26 17:50:39.057610', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$YEsvLZ2og5w1zvmMnl72G.rdbBLO2KQDtr96dnlhelMW1zXEoi/xG', '2020-10-26 17:50:39.057610', '2020-10-26 17:50:39.057610', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$FdUAT9eAEr86ZrrD6uc5P.Yr85.tHlEwkMMUSE2srZMjcTJhx5rlG', '2020-10-26 17:50:39.057610', '2020-10-26 17:50:39.057610', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:50:39.067202', '2020-10-26 17:50:39.067202', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:50:39.067202', '2020-10-26 17:50:39.067202', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:50:39.067202', '2020-10-26 17:50:39.067202', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:50:39.067202', '2020-10-26 17:50:39.067202', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 17:50:39.067202', '2020-10-26 17:50:39.067202', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 17:50:39.067202', '2020-10-26 17:50:39.067202', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 17:50:39.075161', '2020-10-26 17:50:39.075161', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 17:50:39.075161', '2020-10-26 17:50:39.075161', DEFAULT, DEFAULT)[0m
  [1m[35m (36.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.9ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 17:50:39.121992', '2020-10-26 17:50:39.121992', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 17:50:39.121992', '2020-10-26 17:50:39.121992', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$ew5CCD9gs61/gLSELukLAu7AvOLb9ZWYE/irIzzpVPX9BmrMkRyju', '2020-10-26 17:50:39.121992', '2020-10-26 17:50:39.121992', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$thVBsDGHJwxWiWUtgLmT0eX.xrF0pMz2V22HU2e6NRbQqfQd1TDce', '2020-10-26 17:50:39.121992', '2020-10-26 17:50:39.121992', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$UmPzTUeXRQJiSz4xBIortefgAB4dugQ6t6WZ1Vx8M8PchadiXunQu', '2020-10-26 17:50:39.121992', '2020-10-26 17:50:39.121992', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:50:39.134638', '2020-10-26 17:50:39.134638', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:50:39.134638', '2020-10-26 17:50:39.134638', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:50:39.134638', '2020-10-26 17:50:39.134638', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:50:39.134638', '2020-10-26 17:50:39.134638', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 17:50:39.134638', '2020-10-26 17:50:39.134638', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 17:50:39.134638', '2020-10-26 17:50:39.134638', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 17:50:39.141469', '2020-10-26 17:50:39.141469', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 17:50:39.141469', '2020-10-26 17:50:39.141469', DEFAULT, DEFAULT)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
  [1m[35m (13.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 309ms (Views: 1.1ms | ActiveRecord: 0.4ms | Allocations: 6587)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 289ms (Views: 0.7ms | ActiveRecord: 0.5ms | Allocations: 6583)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 278ms (Views: 0.8ms | ActiveRecord: 0.8ms | Allocations: 564)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:50:39 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
Completed 200 OK in 336ms (Views: 1.1ms | ActiveRecord: 0.3ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 12:50:39 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (1.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.9ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 17:50:39.940466"], ["updated_at", "2020-10-26 17:50:39.940466"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 131ms (Views: 1.5ms | ActiveRecord: 4.4ms | Allocations: 26673)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.5ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-10-26 17:50:40.008808"], ["id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 131ms (Views: 2.2ms | ActiveRecord: 7.8ms | Allocations: 26984)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 313ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 287ms (Views: 0.8ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 276ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 564)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-10-26 12:50:40 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Destroy (0.6ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 2.0ms | Allocations: 1693)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 280ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-10-26 12:50:40 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 1.7ms | ActiveRecord: 0.0ms | Allocations: 123)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 308ms (Views: 0.6ms | ActiveRecord: 0.7ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 282ms (Views: 1.0ms | ActiveRecord: 1.1ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 312ms (Views: 0.8ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:50:41 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 17:50:41.253573"], ["updated_at", "2020-10-26 17:50:41.253573"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 14ms (Views: 0.7ms | ActiveRecord: 2.1ms | Allocations: 2753)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 481ms (Views: 2.3ms | ActiveRecord: 0.7ms | Allocations: 564)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 12:50:41 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 123)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 452ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 403ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 347ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:50:42 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-10-26 17:50:42.085918"], ["updated_at", "2020-10-26 17:50:42.085918"], ["admon", "80000"], ["rooms", "3"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 11ms (Views: 0.7ms | ActiveRecord: 1.6ms | Allocations: 2736)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 341ms (Views: 2.2ms | ActiveRecord: 0.2ms | Allocations: 564)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:50:42 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (2.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.9ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-10-26 17:50:42.184670"], ["updated_at", "2020-10-26 17:50:42.184670"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 49ms (Views: 9.4ms | ActiveRecord: 5.2ms | Allocations: 2705)
  [1m[35m (3.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (2.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 398ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 349ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 284ms (Views: 0.5ms | ActiveRecord: 3.4ms | Allocations: 560)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-10-26 12:50:42 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (1.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
Completed 200 OK in 24ms (Views: 14.2ms | ActiveRecord: 1.8ms | Allocations: 3701)
  [1m[35m (12.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 336ms (Views: 0.8ms | ActiveRecord: 0.6ms | Allocations: 564)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 12:50:42 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (14.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (5.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (5.7ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-10-26 17:50:42.949617"], ["id", 1]]
  [1m[35m (2.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 49ms (Views: 1.3ms | ActiveRecord: 31.0ms | Allocations: 2779)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 272ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 292ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 282ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-10-26 12:50:43 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
Completed 200 OK in 14ms (Views: 6.1ms | ActiveRecord: 3.4ms | Allocations: 3649)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 311ms (Views: 4.2ms | ActiveRecord: 0.4ms | Allocations: 564)
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-10-26 12:50:43 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 404 Not Found in 8ms (Views: 0.1ms | ActiveRecord: 0.7ms | Allocations: 1458)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 306ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 290ms (Views: 0.7ms | ActiveRecord: 0.5ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 289ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 12:50:44 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 404 Not Found in 6ms (Views: 0.2ms | ActiveRecord: 1.0ms | Allocations: 1458)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 262ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 564)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 297ms (Views: 0.8ms | ActiveRecord: 0.8ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 279ms (Views: 0.6ms | ActiveRecord: 0.6ms | Allocations: 564)
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 12:50:44 -0500
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.2ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 15ms (Views: 0.5ms | ActiveRecord: 0.7ms | Allocations: 6340)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 284ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 561ms (Views: 0.6ms | ActiveRecord: 1.0ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 588ms (Views: 1.6ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 12:50:45 -0500
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (5.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.6ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (4.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.5ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (2.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 105ms (Views: 0.3ms | ActiveRecord: 15.0ms | Allocations: 6360)
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 517ms (Views: 0.7ms | ActiveRecord: 0.5ms | Allocations: 564)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 463ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 411ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 564)
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-10-26 12:50:45 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 409ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 446ms (Views: 1.4ms | ActiveRecord: 0.2ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 387ms (Views: 3.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 12:50:46 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.9ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mPhoto Load (2.1ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 16ms (Views: 5.1ms | ActiveRecord: 3.5ms | Allocations: 1848)
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 412ms (Views: 0.5ms | ActiveRecord: 1.5ms | Allocations: 564)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 344ms (Views: 1.8ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 322ms (Views: 0.4ms | ActiveRecord: 0.8ms | Allocations: 564)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 12:50:47 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 9ms (Views: 0.3ms | ActiveRecord: 0.7ms | Allocations: 1596)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 406ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 373ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 279ms (Views: 1.2ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-10-26 12:50:47 -0500
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[36mUser Load (8.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPhoto Create (1.0ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-10-26 17:50:47.787448"], ["updated_at", "2020-10-26 17:50:47.787448"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued PhotoQualityJob (Job ID: 498e9104-a938-4f80-abc2-d274d040df9a) to Test(default) with arguments: 298486375
Completed 201 Created in 36ms (Views: 0.6ms | ActiveRecord: 11.5ms | Allocations: 3057)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 379ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 564)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:50:47 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (2.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 40ms (Views: 0.9ms | ActiveRecord: 6.9ms | Allocations: 4505)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 449ms (Views: 10.8ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 362ms (Views: 0.5ms | ActiveRecord: 4.0ms | Allocations: 573)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 425ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 12:50:48 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 16ms (Views: 0.2ms | ActiveRecord: 3.8ms | Allocations: 1595)
  [1m[35m (2.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 337ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 564)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 269)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 336ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 572)
Completed 200 OK in 429ms (Views: 0.5ms | ActiveRecord: 1.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:49 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 294ms (Views: 1.5ms | ActiveRecord: 0.5ms | Allocations: 564)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:50:49 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 314ms (Views: 1.0ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 12:50:49 -0500
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Destroy (2.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 26ms (Views: 0.5ms | ActiveRecord: 6.3ms | Allocations: 1945)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[35m (1.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 12ms (Views: 5.0ms | ActiveRecord: 1.4ms | Allocations: 2064)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:49 -0500
  [1m[36mUser Load (10.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 342ms (Views: 1.1ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 378ms (Views: 18.2ms | ActiveRecord: 10.1ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 612ms (Views: 1.1ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 12:50:50 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (15.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 500 Internal Server Error in 23ms (ActiveRecord: 15.4ms | Allocations: 588)
Completed 500 Internal Server Error in 860ms (ActiveRecord: 1.1ms | Allocations: 359)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (4.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.6ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (993.8ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.6ms)[0m  [1m[35mALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (1001.7ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 17:50:57.909310', '2020-10-26 17:50:57.909310', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 17:50:57.909310', '2020-10-26 17:50:57.909310', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$blUFVn4Nb/4wel5Hln.CMODbx7vc1qpDZ9PaKO.0RiNppMegf3QGC', '2020-10-26 17:50:57.909310', '2020-10-26 17:50:57.909310', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$4eKVL6IEMlLzihSWMTeez.az8nhJUGefzHgRzQ3golIIPuwHzHhdy', '2020-10-26 17:50:57.909310', '2020-10-26 17:50:57.909310', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$CB0VNsk0w3s47mEWTnWOSOGjxjIk6./dtfYblqZj63kiBAt3.fZmi', '2020-10-26 17:50:57.909310', '2020-10-26 17:50:57.909310', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:50:57.921644', '2020-10-26 17:50:57.921644', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:50:57.921644', '2020-10-26 17:50:57.921644', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:50:57.921644', '2020-10-26 17:50:57.921644', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:50:57.921644', '2020-10-26 17:50:57.921644', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 17:50:57.921644', '2020-10-26 17:50:57.921644', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 17:50:57.921644', '2020-10-26 17:50:57.921644', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 17:50:57.928582', '2020-10-26 17:50:57.928582', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 17:50:57.928582', '2020-10-26 17:50:57.928582', DEFAULT, DEFAULT)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (57.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.6ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 17:50:57.962462', '2020-10-26 17:50:57.962462', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 17:50:57.962462', '2020-10-26 17:50:57.962462', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$pOus/pA8Zff./pIMHFWhe.GfTFpKsTi8X/0b1Pe0vebfb6bEdRKcG', '2020-10-26 17:50:57.962462', '2020-10-26 17:50:57.962462', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$x6UTLt.GwHK/GVsOrcY0X.A8ng3uQi5pj9100JW293aCZzuQRFQ/C', '2020-10-26 17:50:57.962462', '2020-10-26 17:50:57.962462', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$Tc6NcdYR9vyHQvoG6sAlye01cOmev9ORj.ngdJZK6pO770Cq7Nd9G', '2020-10-26 17:50:57.962462', '2020-10-26 17:50:57.962462', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:50:57.976179', '2020-10-26 17:50:57.976179', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:50:57.976179', '2020-10-26 17:50:57.976179', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:50:57.976179', '2020-10-26 17:50:57.976179', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:50:57.976179', '2020-10-26 17:50:57.976179', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 17:50:57.976179', '2020-10-26 17:50:57.976179', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 17:50:57.976179', '2020-10-26 17:50:57.976179', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 17:50:57.987009', '2020-10-26 17:50:57.987009', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 17:50:57.987009', '2020-10-26 17:50:57.987009', DEFAULT, DEFAULT)[0m
  [1m[35m (1.7ms)[0m  [1m[35mALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.0ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:58 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 289ms (Views: 1.5ms | ActiveRecord: 1.4ms | Allocations: 6587)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 311ms (Views: 1.1ms | ActiveRecord: 1.7ms | Allocations: 6583)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 262ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 564)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 269ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 286ms (Views: 1.5ms | ActiveRecord: 0.3ms | Allocations: 564)
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 12:50:58 -0500
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.4ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 40ms (Views: 0.5ms | ActiveRecord: 2.5ms | Allocations: 6631)
  [1m[35m (2.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 391ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 12:50:59 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.2ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 80ms (Views: 3.4ms | ActiveRecord: 2.4ms | Allocations: 26477)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 314ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 307ms (Views: 0.7ms | ActiveRecord: 3.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 279ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 564)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 302ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:50:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 339ms (Views: 3.3ms | ActiveRecord: 0.3ms | Allocations: 564)
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 12:50:59 -0500
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.9ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.4ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.2ms | ActiveRecord: 6.2ms | Allocations: 1511)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 374ms (Views: 0.6ms | ActiveRecord: 1.7ms | Allocations: 560)
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-10-26 12:51:00 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 123)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 347ms (Views: 0.9ms | ActiveRecord: 2.4ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 292ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 278ms (Views: 0.5ms | ActiveRecord: 1.8ms | Allocations: 564)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 266ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 270ms (Views: 0.4ms | ActiveRecord: 0.5ms | Allocations: 564)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-10-26 12:51:00 -0500
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (3.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPhoto Create (1.4ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-10-26 17:51:01.025404"], ["updated_at", "2020-10-26 17:51:01.025404"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued PhotoQualityJob (Job ID: 43657fe4-82e3-4bd4-b039-c1614f361a77) to Test(default) with arguments: 298486375
Completed 201 Created in 92ms (Views: 1.4ms | ActiveRecord: 7.8ms | Allocations: 26235)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
PhotoTest: test_Should_create,_save_and_delete_a_property,_as_well_as_inspecting_the_link
-----------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.8ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.linkdeprueba.com"], ["property_id", 1], ["created_at", "2020-10-26 17:51:01.044257"], ["updated_at", "2020-10-26 17:51:01.044257"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.3ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 298486376]]
  [1m[36mPhoto Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "photos" WHERE "photos"."property_id" = $1 LIMIT $2[0m  [["property_id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_url
-------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_property_id
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PhotoTest: test_Should_successfully_create_a_photo
--------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.5ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.zeldadeprueba.com"], ["property_id", 2], ["created_at", "2020-10-26 17:51:01.089530"], ["updated_at", "2020-10-26 17:51:01.089530"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 299ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 12:51:01 -0500
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$7bJ9DWRvZHaFlGUni1I7eeHXX6pykukifa9QVOIHGMqfGGaNKDpJC"], ["created_at", "2020-10-26 17:51:01.106471"], ["updated_at", "2020-10-26 17:51:01.106471"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 21ms (Views: 1.0ms | ActiveRecord: 1.4ms | Allocations: 1596)
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (2.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$G9eq/pEtpMWj7AFmHz/UiuN0J133BfWcEzRQa2hz9UlkC.Oa3xZve"], ["created_at", "2020-10-26 17:51:01.148770"], ["updated_at", "2020-10-26 17:51:01.148770"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$NfU3V1RUSlJLQ3ocXlQ6vOQbDTFEJbexLqwz0OTVRshOUSi9u7jFG"], ["created_at", "2020-10-26 17:51:01.175349"], ["updated_at", "2020-10-26 17:51:01.175349"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$yL07Xo8yVP.gVrBwr0Bu0u82bbBKGhEYJqMQemq6F4AG2YhWJwyA6"], ["created_at", "2020-10-26 17:51:01.180721"], ["updated_at", "2020-10-26 17:51:01.180721"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (7.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (0.9ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
  [1m[36mProperty Load (2.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$jEMVO5Zs94bcdHZiiMnV7e7yvVo7d3gHzbMEJT..zRpbcvSsExXcS"], ["created_at", "2020-10-26 17:51:01.225360"], ["updated_at", "2020-10-26 17:51:01.225360"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$pimMaWiVOV3czcvzjHMWyeyGv1XKh35lo1N4qECTWSfeuGK6RyivW"], ["created_at", "2020-10-26 17:51:01.234793"], ["updated_at", "2020-10-26 17:51:01.234793"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (4.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (2.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$Hj1s3agOM4Qa58meBhO/b.ZOFkAR0C15E6Hj7IIRCZ0LhjWK0skUe"], ["created_at", "2020-10-26 17:51:01.288874"], ["updated_at", "2020-10-26 17:51:01.288874"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$6.PO9/cmD3tG/SqnAwjWKOrz1lSM36LmH0PYaacmFoTTjJhojR82."], ["created_at", "2020-10-26 17:51:01.284603"], ["updated_at", "2020-10-26 17:51:01.284603"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$eYuVG3YaaC1Rpmk0QETJQ.dX.D83Dm/Y/xxnnqXNjz7lynjaXrWfq"], ["created_at", "2020-10-26 17:51:01.312163"], ["updated_at", "2020-10-26 17:51:01.312163"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (3.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Destroy (4.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProperty Load (1.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Destroy (4.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$37PBgSOmMh0tV6EE0NOBlu2x/LpK1TOIBFBb8wlmcGlzG5jxmidFy"], ["created_at", "2020-10-26 17:51:01.347364"], ["updated_at", "2020-10-26 17:51:01.347364"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (12.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (1.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$DVsWKLQv3Z13YnwlZ5RqReiChyozkdHSMOcjGtZ29tj0c81Q0xRJC"], ["created_at", "2020-10-26 17:51:01.387358"], ["updated_at", "2020-10-26 17:51:01.387358"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (9.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Destroy (2.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[36mUser Destroy (1.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PropertyTest: test_Should_new,_save,_and_destroy_a_property
-----------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_property_tax_attribute
-------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (2.7ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 17:51:01.432502"], ["updated_at", "2020-10-26 17:51:01.432502"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 11]]
  [1m[35m (5.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.7ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "property_tax") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:51:01.459832"], ["updated_at", "2020-10-26 17:51:01.459832"], ["build_area", "hola"], ["property_tax", "500000"]]
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProperty Destroy (1.0ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 11]]
  [1m[36mProperty Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_admon
------------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_elevator_attribute
---------------------------------------------------------------------------
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:51:01.473136"], ["updated_at", "2020-10-26 17:51:01.473136"], ["admon", "7777777"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_because_admon_exceeds_the_maximum_valor
------------------------------------------------------------------------------------
  [1m[35m (5.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (5.9ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:51:01.476106"], ["updated_at", "2020-10-26 17:51:01.476106"], ["build_area", "hola"]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_a_user_id
--------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
-------------------------------------------
PropertyTest: test_Should_create_a_property
-------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_the_proper_built_type
--------------------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PropertyTest: test_Should_have_successfully_newd_a_property
-----------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["hood", "Belen"], ["city", "Pizza"], ["user_id", 99], ["created_at", "2020-10-26 17:51:01.527532"], ["updated_at", "2020-10-26 17:51:01.527532"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.8ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 17:51:01.540219"], ["updated_at", "2020-10-26 17:51:01.540219"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_a_valid_elevator_attribute
----------------------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
-------------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_rooms_attribute
-------------------------------------------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_build_area
-------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
PropertyTest: test_test_empty_property
--------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.9ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon", "build_area") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:51:01.593147"], ["updated_at", "2020-10-26 17:51:01.593147"], ["admon", "500000"], ["build_area", "hola"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
--------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_state
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProperty Create (5.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "state") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:51:01.610999"], ["updated_at", "2020-10-26 17:51:01.610999"], ["social_class", "5"], ["state", "holiwis"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_social_class
---------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
----------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_social_class
----------------------------------------------------------------------------
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (3.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.9ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "social_class") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:51:01.633199"], ["updated_at", "2020-10-26 17:51:01.633199"], ["build_area", "hola"], ["social_class", "Industrial"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_rooms_attribute
------------------------------------------------------------------------
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_common_areas_attribute
-------------------------------------------------------------------------
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.9ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "common_areas") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:51:01.679555"], ["updated_at", "2020-10-26 17:51:01.679555"], ["build_area", "hola"], ["common_areas", "muchisimas"]]
  [1m[35m (1.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProperty Create (9.3ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "rooms") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:51:01.676522"], ["updated_at", "2020-10-26 17:51:01.676522"], ["build_area", "hola"], ["rooms", "500"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:01 -0500
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:01 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 309ms (Views: 4.1ms | ActiveRecord: 0.7ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:02 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 364ms (Views: 0.7ms | ActiveRecord: 0.7ms | Allocations: 573)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:02 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 292ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 561)
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-10-26 12:51:02 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 10ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 3755)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:02 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 316ms (Views: 0.9ms | ActiveRecord: 0.5ms | Allocations: 564)
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 12:51:02 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 6ms (Views: 0.3ms | ActiveRecord: 1.2ms | Allocations: 1598)
  [1m[35m (3.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:02 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 295ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:02 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 306ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:02 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 292ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 560)
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-10-26 12:51:02 -0500
Processing by Api::V1::UsersController#update as JSON
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-10-26 17:51:02.952023"], ["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.4ms | ActiveRecord: 1.6ms | Allocations: 2498)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:02 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 286ms (Views: 1.3ms | ActiveRecord: 1.1ms | Allocations: 564)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:51:03 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.8ms | ActiveRecord: 0.5ms | Allocations: 1863)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:03 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 312ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:03 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 285ms (Views: 1.0ms | ActiveRecord: 0.3ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:03 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 277ms (Views: 0.4ms | ActiveRecord: 2.0ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:51:03 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (1.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 14ms (Views: 1.6ms | ActiveRecord: 4.3ms | Allocations: 2367)
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:03 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 300ms (Views: 0.9ms | ActiveRecord: 0.6ms | Allocations: 564)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:03 -0500
Processing by Api::V1::UsersController#login as JSON
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 401 Unauthorized in 5ms (Views: 0.4ms | ActiveRecord: 1.0ms | Allocations: 363)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:03 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 333ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:03 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 320ms (Views: 0.8ms | ActiveRecord: 0.5ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:03 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 314ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:51:04 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.4ms | Allocations: 1433)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:04 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 356ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 564)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 12:51:04 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 15ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1029)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:04 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 377ms (Views: 0.4ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:04 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 301ms (Views: 0.5ms | ActiveRecord: 1.2ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:04 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 275ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 12:51:04 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 6ms (Views: 2.5ms | ActiveRecord: 0.7ms | Allocations: 2064)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:04 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 289ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 564)
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 12:51:04 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 21ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1595)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:04 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 366ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:05 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 323ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:05 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 270ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-10-26 12:51:05 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$IcRGH13TSIhTin/iOXzXGOObl5BmxZhQcJ/jv5GDbvKr5xj2ql5jy"], ["created_at", "2020-10-26 17:51:05.584769"], ["updated_at", "2020-10-26 17:51:05.584769"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 7ms (Views: 0.5ms | ActiveRecord: 1.6ms | Allocations: 1491)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:05 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 272ms (Views: 0.8ms | ActiveRecord: 0.6ms | Allocations: 564)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:51:05 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 10ms (Views: 0.5ms | ActiveRecord: 2.1ms | Allocations: 1945)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:05 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 288ms (Views: 0.5ms | ActiveRecord: 2.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:05 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 332ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:05 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 291ms (Views: 1.3ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "new_name"], ["updated_at", "2020-10-26 17:51:06.186569"], ["id", 100]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 446ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 564)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.3ms | Allocations: 269)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 309ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 316ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 258ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-10-26 12:51:06 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 528ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:07 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 659ms (Views: 9.3ms | ActiveRecord: 0.5ms | Allocations: 565)
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-10-26 12:51:07 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 155)
  [1m[35m (3.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:07 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 334ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 12:51:07 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.4ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-10-26 17:51:07.690243"], ["id", 1]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 22ms (Views: 0.8ms | ActiveRecord: 2.4ms | Allocations: 2800)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:07 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 351ms (Views: 1.3ms | ActiveRecord: 0.5ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:07 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 325ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:08 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 296ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 564)
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:51:08 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-10-26 17:51:08.118648"], ["updated_at", "2020-10-26 17:51:08.118648"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (1.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 17ms (Views: 3.3ms | ActiveRecord: 6.1ms | Allocations: 2720)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:08 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 339ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 561)
  [1m[35m (6.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:51:08 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (9.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (4.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (3.1ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 17:51:08.425557"], ["updated_at", "2020-10-26 17:51:08.425557"]]
  [1m[35m (2.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 39ms (Views: 1.0ms | ActiveRecord: 20.7ms | Allocations: 2578)
  [1m[35m (1.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (2.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:08 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 485ms (Views: 1.1ms | ActiveRecord: 0.3ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:08 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 407ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:08 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 269ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 564)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 12:51:08 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 404 Not Found in 6ms (Views: 0.2ms | ActiveRecord: 1.0ms | Allocations: 1458)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:08 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (10.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 294ms (Views: 0.5ms | ActiveRecord: 1.0ms | Allocations: 560)
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-10-26 12:51:09 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 404 Not Found in 6ms (Views: 0.2ms | ActiveRecord: 1.2ms | Allocations: 1458)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:09 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 355ms (Views: 0.6ms | ActiveRecord: 10.6ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:09 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 383ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:09 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 305ms (Views: 1.0ms | ActiveRecord: 0.9ms | Allocations: 564)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 12:51:09 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.6ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-10-26 17:51:09.606379"], ["id", 1]]
  [1m[35m (6.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 17ms (Views: 0.7ms | ActiveRecord: 7.8ms | Allocations: 2779)
  [1m[35m (2.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:09 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 334ms (Views: 0.9ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-10-26 12:51:09 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Destroy (0.9ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.3ms | ActiveRecord: 2.9ms | Allocations: 1544)
  [1m[35m (2.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Completed 200 OK in 295ms (Views: 1.3ms | ActiveRecord: 0.4ms | Allocations: 572)
  [1m[35m (17.0ms)[0m  [1m[31mROLLBACK[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:09 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:09 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 592ms (Views: 1.8ms | ActiveRecord: 0.3ms | Allocations: 564)
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-10-26 12:51:10 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (1.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
Completed 200 OK in 28ms (Views: 8.8ms | ActiveRecord: 4.4ms | Allocations: 3649)
  [1m[35m (3.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:10 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 709ms (Views: 0.7ms | ActiveRecord: 0.8ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:10 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 323ms (Views: 0.5ms | ActiveRecord: 2.1ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:10 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 454ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 12:51:11 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:11 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 372ms (Views: 0.7ms | ActiveRecord: 1.2ms | Allocations: 564)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-10-26 12:51:11 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (11.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
Completed 200 OK in 18ms (Views: 1.7ms | ActiveRecord: 12.1ms | Allocations: 1582)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:11 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (12.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 420ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:11 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 379ms (Views: 0.9ms | ActiveRecord: 12.3ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:11 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 337ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:51:11 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 17:51:11.936211"], ["updated_at", "2020-10-26 17:51:11.936211"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 12ms (Views: 0.7ms | ActiveRecord: 3.1ms | Allocations: 2695)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 354ms (Views: 1.2ms | ActiveRecord: 0.4ms | Allocations: 564)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:51:12 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-10-26 17:51:12.105958"], ["updated_at", "2020-10-26 17:51:12.105958"], ["admon", "80000"], ["rooms", "3"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 12ms (Views: 0.8ms | ActiveRecord: 1.8ms | Allocations: 2734)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.1ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (910.3ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (922.3ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.1ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.7ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 17:51:20.100850', '2020-10-26 17:51:20.100850', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 17:51:20.100850', '2020-10-26 17:51:20.100850', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$86QfW39hZtcsBfJHc6sRquO2EulzlEbr9DAiP.L9NS6CoteVVT9g6', '2020-10-26 17:51:20.100850', '2020-10-26 17:51:20.100850', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$B8S6Nf4EqIbFzdGgUU86qeuvdV3GTFRGXU5ICimGeleifxr7sBYHO', '2020-10-26 17:51:20.100850', '2020-10-26 17:51:20.100850', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$fjOUBOe.Ob8rQronKz.rtOMe5uGgcmmXf8ZL47iCXstm/QGwSwFYu', '2020-10-26 17:51:20.100850', '2020-10-26 17:51:20.100850', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:51:20.110643', '2020-10-26 17:51:20.110643', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:51:20.110643', '2020-10-26 17:51:20.110643', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:51:20.110643', '2020-10-26 17:51:20.110643', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:51:20.110643', '2020-10-26 17:51:20.110643', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 17:51:20.110643', '2020-10-26 17:51:20.110643', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 17:51:20.110643', '2020-10-26 17:51:20.110643', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 17:51:20.123177', '2020-10-26 17:51:20.123177', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 17:51:20.123177', '2020-10-26 17:51:20.123177', DEFAULT, DEFAULT)[0m
  [1m[35m (13.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:20 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.8ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 17:51:20.474260', '2020-10-26 17:51:20.474260', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 17:51:20.474260', '2020-10-26 17:51:20.474260', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$.zAYIIRewZae9aQ6ntFtGupBac8H2Yi8loqAWGPcTDVJMGcAfUzm.', '2020-10-26 17:51:20.474260', '2020-10-26 17:51:20.474260', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$XifKhKGqpM9hiEh9eBukxeJ1rCLoAgtFb7qndHHpx7QSfPPp11kAC', '2020-10-26 17:51:20.474260', '2020-10-26 17:51:20.474260', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$KY9yjtUWOgJbM7G3muVUluGGrb5qLmwjs4QYGXtYX6eXkujDnrQXS', '2020-10-26 17:51:20.474260', '2020-10-26 17:51:20.474260', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:51:20.481916', '2020-10-26 17:51:20.481916', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:51:20.481916', '2020-10-26 17:51:20.481916', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:51:20.481916', '2020-10-26 17:51:20.481916', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:51:20.481916', '2020-10-26 17:51:20.481916', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 17:51:20.481916', '2020-10-26 17:51:20.481916', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 17:51:20.481916', '2020-10-26 17:51:20.481916', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 17:51:20.487398', '2020-10-26 17:51:20.487398', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 17:51:20.487398', '2020-10-26 17:51:20.487398', DEFAULT, DEFAULT)[0m
  [1m[35m (24.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:20 -0500
Completed 200 OK in 298ms (Views: 1.0ms | ActiveRecord: 1.0ms | Allocations: 6587)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:20 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 266ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 564)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:20 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 269)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:20 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 297ms (Views: 3.6ms | ActiveRecord: 1.6ms | Allocations: 6587)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:20 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 331ms (Views: 0.5ms | ActiveRecord: 0.9ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 339ms (Views: 0.7ms | ActiveRecord: 1.8ms | Allocations: 564)
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-10-26 12:51:21 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 21ms (Views: 0.5ms | ActiveRecord: 4.1ms | Allocations: 5632)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 275ms (Views: 0.5ms | ActiveRecord: 0.9ms | Allocations: 564)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 12:51:21 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 6ms (Views: 0.3ms | ActiveRecord: 0.3ms | Allocations: 1206)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 346ms (Views: 1.6ms | ActiveRecord: 0.4ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 273ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 271ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 564)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "new_name"], ["updated_at", "2020-10-26 17:51:21.912187"], ["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 281ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 564)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 12:51:22 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 5ms (Views: 0.3ms | ActiveRecord: 0.7ms | Allocations: 1712)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:22 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 302ms (Views: 0.9ms | ActiveRecord: 0.4ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:22 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 309ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:22 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 273ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 564)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 12:51:22 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 6ms (Views: 2.7ms | ActiveRecord: 0.6ms | Allocations: 2256)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:22 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 272ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 564)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:51:22 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 8ms (Views: 0.7ms | ActiveRecord: 1.0ms | Allocations: 1437)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:22 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 402ms (Views: 0.7ms | ActiveRecord: 3.2ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:22 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 390ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 373ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 564)
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:51:23 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 41ms (Views: 0.9ms | ActiveRecord: 3.2ms | Allocations: 6067)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 338ms (Views: 1.2ms | ActiveRecord: 4.4ms | Allocations: 564)
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-10-26 12:51:23 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$wkdDpafz.dgN0EMOWRUlHugesY5aqOC9e8hAQ8728QTDNjj9NhT02"], ["created_at", "2020-10-26 17:51:23.455103"], ["updated_at", "2020-10-26 17:51:23.455103"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (1.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 18ms (Views: 0.5ms | ActiveRecord: 8.1ms | Allocations: 2257)
  [1m[35m (3.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 312ms (Views: 0.6ms | ActiveRecord: 0.7ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 328ms (Views: 0.5ms | ActiveRecord: 4.0ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 342ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 564)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:24 -0500
Processing by Api::V1::UsersController#login as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 363)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 314ms (Views: 0.7ms | ActiveRecord: 0.5ms | Allocations: 564)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:51:24 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 7ms (Views: 0.8ms | ActiveRecord: 0.9ms | Allocations: 1863)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 290ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 309ms (Views: 0.7ms | ActiveRecord: 0.8ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 286ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 564)
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 12:51:24 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 5ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1598)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 276ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 564)
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-10-26 12:51:24 -0500
Processing by Api::V1::UsersController#update as JSON
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-10-26 17:51:24.783884"], ["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 17ms (Views: 0.4ms | ActiveRecord: 6.5ms | Allocations: 2505)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 326ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 299ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 268ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 564)
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-10-26 12:51:25 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 268ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 564)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:51:25 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 22ms (Views: 0.7ms | ActiveRecord: 1.9ms | Allocations: 6375)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 325ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 296ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 262ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 564)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 12:51:25 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.5ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-10-26 17:51:25.967935"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 69ms (Views: 0.6ms | ActiveRecord: 1.8ms | Allocations: 24669)
Completed 200 OK in 271ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 564)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 12:51:25 -0500
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:25 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (1.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 404 Not Found in 9ms (Views: 0.6ms | ActiveRecord: 1.5ms | Allocations: 1624)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 322ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 338ms (Views: 0.4ms | ActiveRecord: 0.4ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 265ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 564)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:51:26 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 17:51:26.608089"], ["updated_at", "2020-10-26 17:51:26.608089"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 37ms (Views: 8.4ms | ActiveRecord: 3.9ms | Allocations: 2744)
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (3.7ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 293ms (Views: 4.8ms | ActiveRecord: 3.0ms | Allocations: 564)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-10-26 12:51:26 -0500
--------------------------------------------------------------------------------
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 6ms (Views: 5.6ms | ActiveRecord: 0.0ms | Allocations: 120)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:26 -0500
  [1m[35m (1.6ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 358ms (Views: 0.9ms | ActiveRecord: 0.4ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:27 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
Completed 200 OK in 384ms (Views: 0.7ms | ActiveRecord: 0.6ms | Allocations: 572)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:27 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 362ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 564)
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:51:27 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-10-26 17:51:27.516334"], ["updated_at", "2020-10-26 17:51:27.516334"], ["admon", "80000"], ["rooms", "3"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 112ms (Views: 0.9ms | ActiveRecord: 1.6ms | Allocations: 24501)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:27 -0500
Completed 200 OK in 486ms (Views: 1.2ms | ActiveRecord: 0.2ms | Allocations: 564)
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:51:27 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.8ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-10-26 17:51:27.557715"], ["updated_at", "2020-10-26 17:51:27.557715"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 19ms (Views: 5.3ms | ActiveRecord: 2.3ms | Allocations: 2705)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:27 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 402ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:27 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 402ms (Views: 0.6ms | ActiveRecord: 0.5ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:27 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 314ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 564)
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-10-26 12:51:28 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
Completed 200 OK in 12ms (Views: 5.1ms | ActiveRecord: 1.2ms | Allocations: 3662)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 314ms (Views: 0.6ms | ActiveRecord: 1.0ms | Allocations: 564)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 12:51:28 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.5ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-10-26 17:51:28.333444"], ["id", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 21ms (Views: 1.0ms | ActiveRecord: 3.4ms | Allocations: 2724)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (8.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 318ms (Views: 0.5ms | ActiveRecord: 1.9ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 284ms (Views: 0.6ms | ActiveRecord: 8.9ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 262ms (Views: 0.6ms | ActiveRecord: 0.5ms | Allocations: 564)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 12:51:28 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 317ms (Views: 0.7ms | ActiveRecord: 0.6ms | Allocations: 564)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:51:28 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 17:51:28.969785"], ["updated_at", "2020-10-26 17:51:28.969785"]]
  [1m[35m (1.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 46ms (Views: 2.8ms | ActiveRecord: 3.9ms | Allocations: 2579)
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 342ms (Views: 1.1ms | ActiveRecord: 0.3ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 307ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 278ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 564)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-10-26 12:51:29 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
Completed 200 OK in 13ms (Views: 1.1ms | ActiveRecord: 0.8ms | Allocations: 1584)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 282ms (Views: 0.9ms | ActiveRecord: 0.2ms | Allocations: 564)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-10-26 12:51:29 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Destroy (0.5ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.7ms | Allocations: 1544)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
PhotoTest: test_Should_create,_save_and_delete_a_property,_as_well_as_inspecting_the_link
-----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPhoto Create (1.3ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.linkdeprueba.com"], ["property_id", 1], ["created_at", "2020-10-26 17:51:29.626447"], ["updated_at", "2020-10-26 17:51:29.626447"]]
  [1m[35m (2.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (2.2ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 298486375]]
  [1m[36mPhoto Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "photos" WHERE "photos"."property_id" = $1 LIMIT $2[0m  [["property_id", 1], ["LIMIT", 1]]
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PhotoTest: test_Should_successfully_create_a_photo
--------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPhoto Create (1.5ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.zeldadeprueba.com"], ["property_id", 2], ["created_at", "2020-10-26 17:51:29.659350"], ["updated_at", "2020-10-26 17:51:29.659350"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_property_id
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_url
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PropertyTest: test_Should_create_a_property
-------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.9ms)[0m  [1m[32mINSERT INTO "properties" ("hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["hood", "Belen"], ["city", "Pizza"], ["user_id", 99], ["created_at", "2020-10-26 17:51:29.700703"], ["updated_at", "2020-10-26 17:51:29.700703"]]
  [1m[35m (9.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_rooms_attribute
-------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_social_class
----------------------------------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (5.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PropertyTest: test_Should_have_successfully_newd_a_property
-----------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.8ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 17:51:29.791615"], ["updated_at", "2020-10-26 17:51:29.791615"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_a_valid_elevator_attribute
----------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_common_areas_attribute
-------------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.8ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "common_areas") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:51:29.826957"], ["updated_at", "2020-10-26 17:51:29.826957"], ["build_area", "hola"], ["common_areas", "muchisimas"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_social_class
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "social_class") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:51:29.844906"], ["updated_at", "2020-10-26 17:51:29.844906"], ["build_area", "hola"], ["social_class", "Industrial"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_elevator_attribute
---------------------------------------------------------------------------
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.9ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:51:29.869186"], ["updated_at", "2020-10-26 17:51:29.869186"], ["build_area", "hola"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_state
--------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "state") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:51:29.889179"], ["updated_at", "2020-10-26 17:51:29.889179"], ["social_class", "5"], ["state", "holiwis"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_admon
------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:51:29.899788"], ["updated_at", "2020-10-26 17:51:29.899788"], ["admon", "7777777"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.9ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_the_proper_built_type
--------------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (2.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.6ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_build_area
-------------------------------------------------------------
  [1m[35m (3.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (14.0ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon", "build_area") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:51:29.954797"], ["updated_at", "2020-10-26 17:51:29.954797"], ["admon", "500000"], ["build_area", "hola"]]
Completed 200 OK in 414ms (Views: 1.2ms | ActiveRecord: 0.3ms | Allocations: 572)
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:29 -0500
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_property_tax_attribute
-------------------------------------------------------------------------
  [1m[35m (2.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.9ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "property_tax") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:51:29.993571"], ["updated_at", "2020-10-26 17:51:29.993571"], ["build_area", "hola"], ["property_tax", "500000"]]
  [1m[35m (2.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_rooms_attribute
------------------------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.8ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "rooms") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:51:30.023671"], ["updated_at", "2020-10-26 17:51:30.023671"], ["build_area", "hola"], ["rooms", "500"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PropertyTest: test_Should_new,_save,_and_destroy_a_property
-----------------------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (12.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 17:51:30.061704"], ["updated_at", "2020-10-26 17:51:30.061704"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 23]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[36mProperty Destroy (1.2ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 23]]
  [1m[36mProperty Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_because_admon_exceeds_the_maximum_valor
------------------------------------------------------------------------------------
  [1m[35m (14.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_a_user_id
--------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
PropertyTest: test_test_empty_property
--------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 434ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 564)
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-10-26 12:51:30 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 404 Not Found in 7ms (Views: 0.4ms | ActiveRecord: 1.2ms | Allocations: 1458)
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 497ms (Views: 0.5ms | ActiveRecord: 0.8ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 312ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 416ms (Views: 0.6ms | ActiveRecord: 1.0ms | Allocations: 564)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 428ms (Views: 0.7ms | ActiveRecord: 0.9ms | Allocations: 564)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 323ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 564)
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-10-26 12:51:31 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 155)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 329ms (Views: 0.6ms | ActiveRecord: 2.2ms | Allocations: 564)
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 12:51:31 -0500
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.2ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 11ms (Views: 0.6ms | ActiveRecord: 0.7ms | Allocations: 6359)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 405ms (Views: 6.1ms | ActiveRecord: 0.2ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:31 -0500
Completed 200 OK in 303ms (Views: 1.2ms | ActiveRecord: 0.2ms | Allocations: 572)
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:31 -0500
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 316ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 564)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 357ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 564)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 259ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 564)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 12:51:32 -0500
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.2ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.3ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.4ms | Allocations: 1475)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 297ms (Views: 1.0ms | ActiveRecord: 0.2ms | Allocations: 564)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-10-26 12:51:32 -0500
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[36mUser Load (13.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPhoto Create (2.6ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-10-26 17:51:32.556372"], ["updated_at", "2020-10-26 17:51:32.556372"]]
  [1m[35m (4.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued PhotoQualityJob (Job ID: 04b83d3c-8c78-452d-bc3a-924a60d02bb9) to Test(default) with arguments: 298486377
Completed 201 Created in 75ms (Views: 1.4ms | ActiveRecord: 24.1ms | Allocations: 2772)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 394ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 321ms (Views: 0.7ms | ActiveRecord: 0.5ms | Allocations: 572)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 282ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 564)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 273ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 564)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:51:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 290ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 564)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 12:51:33 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.3ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 9ms (Views: 2.1ms | ActiveRecord: 1.6ms | Allocations: 1849)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$A1dyH0mE6zJxhyXSJCS0nOSug125Rllb8rOezSuWENdqtELFq9q5K"], ["created_at", "2020-10-26 17:51:33.443552"], ["updated_at", "2020-10-26 17:51:33.443552"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$mZhTuuyG/UPZCxWE/f69ce6iMRe9rbgyilW57Fd0vozcQL4jJVz2O"], ["created_at", "2020-10-26 17:51:33.471241"], ["updated_at", "2020-10-26 17:51:33.471241"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (1.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$ocIiBHza5Wfc3m/j7UYBGuAVzLEYQ9f3BChWqhJIh31K4N6rbusvy"], ["created_at", "2020-10-26 17:51:33.518250"], ["updated_at", "2020-10-26 17:51:33.518250"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (3.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$1VBVOZQX.sDSsaLvM0N2Nup3Ohm.qz8uJB43LOautN2VafQ2Gwi52"], ["created_at", "2020-10-26 17:51:33.540042"], ["updated_at", "2020-10-26 17:51:33.540042"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$X8QoU29qX2uh5RkD1ofLNu35Os.QmOS5twNhom5kWBf.gU35Nhq86"], ["created_at", "2020-10-26 17:51:33.554911"], ["updated_at", "2020-10-26 17:51:33.554911"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$zl/mtP1Jrsmr/R7/a//0X.CcInRjCdkpxUrCYTFCz0ZppxdYov4BG"], ["created_at", "2020-10-26 17:51:33.588788"], ["updated_at", "2020-10-26 17:51:33.588788"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (3.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$CByMucLnVrX9gZ8jWkVXa.tuDtLdGZxw5MqXwUlSmSam6pLOfoeG6"], ["created_at", "2020-10-26 17:51:33.619537"], ["updated_at", "2020-10-26 17:51:33.619537"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 403ms (Views: 2.9ms | ActiveRecord: 0.3ms | Allocations: 564)
  [1m[35m (6.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 12:51:33 -0500
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486381]]
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486381]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 8ms (Views: 0.3ms | ActiveRecord: 0.9ms | Allocations: 1596)
  [1m[35m (3.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (12.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (13.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$dGEXj7DJ5FreBFoLuY/OAOTrJ7OnEZUIWNJ8IP/I533rURmNH0eIG"], ["created_at", "2020-10-26 17:51:33.680729"], ["updated_at", "2020-10-26 17:51:33.680729"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$dLfs2tb0krZefbHgvYeRqOU7rktjS/B2m4mmc2eklDkeZoiQNynyW"], ["created_at", "2020-10-26 17:51:33.663417"], ["updated_at", "2020-10-26 17:51:33.663417"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (2.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (2.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (2.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486382]]
  [1m[36mProperty Load (1.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (1.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486382]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$MdqgjEldjgpqRqGTP7T8o.ujzg8OdV7fuOjKE6OyhcJ5p4npldr.W"], ["created_at", "2020-10-26 17:51:33.725679"], ["updated_at", "2020-10-26 17:51:33.725679"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$k9TapticQT9W7/6mcqVG/OWtOseQnw9boZYryv.I4lqmDgASRKbNW"], ["created_at", "2020-10-26 17:51:33.741411"], ["updated_at", "2020-10-26 17:51:33.741411"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486383]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486383]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (15.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (3.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Destroy (2.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.9ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1015.6ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (7.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1020.2ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.7ms)[0m  [1m[35mALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.0ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 17:52:31.439615', '2020-10-26 17:52:31.439615', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 17:52:31.439615', '2020-10-26 17:52:31.439615', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$52zZtSz/u3aX6Io2R6gN5eRhMgayrFhrBovgiwxPdPzeNO.PBnSJy', '2020-10-26 17:52:31.439615', '2020-10-26 17:52:31.439615', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$NpXYj1lTbtApm2FgT7/SIuXwSXXYoEFUkpZzxHvHqeZJMlEXqQHIG', '2020-10-26 17:52:31.439615', '2020-10-26 17:52:31.439615', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$oTv7ooWqM8XzWi97HioBYuZdDQ7i9crVxrS2PsxMxjcFv2oB6HfVa', '2020-10-26 17:52:31.439615', '2020-10-26 17:52:31.439615', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:52:31.449526', '2020-10-26 17:52:31.449526', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:52:31.449526', '2020-10-26 17:52:31.449526', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:52:31.449526', '2020-10-26 17:52:31.449526', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:52:31.449526', '2020-10-26 17:52:31.449526', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 17:52:31.449526', '2020-10-26 17:52:31.449526', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 17:52:31.449526', '2020-10-26 17:52:31.449526', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 17:52:31.454819', '2020-10-26 17:52:31.454819', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 17:52:31.454819', '2020-10-26 17:52:31.454819', DEFAULT, DEFAULT)[0m
  [1m[35m (51.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.0ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 17:52:31.505954', '2020-10-26 17:52:31.505954', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 17:52:31.505954', '2020-10-26 17:52:31.505954', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$MIgbzUzLkvr0j7qNYF3LHegKgK/LnTMWQNZRx48733ihIXI6wQ7Oq', '2020-10-26 17:52:31.505954', '2020-10-26 17:52:31.505954', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$s4nnSpZD79sgdgCUrPRGPeSrPjFW2PyXFEtcrOaXGbCJmpgOPuuBS', '2020-10-26 17:52:31.505954', '2020-10-26 17:52:31.505954', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$nRXazuG6S6ZD1Wk5VfcE7ueQQz.O8z3c4WQ1kXrKwyMoUuX.lpZH2', '2020-10-26 17:52:31.505954', '2020-10-26 17:52:31.505954', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:52:31.517609', '2020-10-26 17:52:31.517609', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:52:31.517609', '2020-10-26 17:52:31.517609', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:52:31.517609', '2020-10-26 17:52:31.517609', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:52:31.517609', '2020-10-26 17:52:31.517609', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 17:52:31.517609', '2020-10-26 17:52:31.517609', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 17:52:31.517609', '2020-10-26 17:52:31.517609', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 17:52:31.527536', '2020-10-26 17:52:31.527536', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 17:52:31.527536', '2020-10-26 17:52:31.527536', DEFAULT, DEFAULT)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
----------------------------------------------------------------
  [1m[35m (16.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 284ms (Views: 1.3ms | ActiveRecord: 0.4ms | Allocations: 6583)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 275ms (Views: 2.2ms | ActiveRecord: 1.0ms | Allocations: 6583)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 302ms (Views: 0.6ms | ActiveRecord: 1.0ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
Completed 200 OK in 261ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 261ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Completed 200 OK in 265ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-10-26 12:52:32 -0500
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-10-26 12:52:32 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 158)
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:32 -0500
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.8ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-10-26 17:52:32.551164"], ["updated_at", "2020-10-26 17:52:32.551164"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued PhotoQualityJob (Job ID: c1d22281-89c6-425d-bc1a-b553aeb7facd) to Test(default) with arguments: 298486375
Completed 201 Created in 82ms (Views: 0.5ms | ActiveRecord: 2.9ms | Allocations: 31288)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 338ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 299ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 300ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 267ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 264ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 12:52:33 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
Completed 200 OK in 290ms (Views: 0.8ms | ActiveRecord: 0.5ms | Allocations: 560)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 12:52:33 -0500
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.5ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 16ms (Views: 3.2ms | ActiveRecord: 1.9ms | Allocations: 3737)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 13ms (Views: 0.3ms | ActiveRecord: 1.7ms | Allocations: 1887)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:33 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:33 -0500
Processing by Api::V1::UsersController#login as JSON
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 296ms (Views: 0.8ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 315ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 406ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 517ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 389ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 12:52:34 -0500
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.3ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 19ms (Views: 2.0ms | ActiveRecord: 1.5ms | Allocations: 6305)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 576ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (3.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[35m (3.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 12:52:34 -0500
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$eJ4cVE3b2P2SRoSuDTWuNuNZ.F4tznGenBQnXRKFTuNslOWJd7NcW"], ["created_at", "2020-10-26 17:52:34.754588"], ["updated_at", "2020-10-26 17:52:34.754588"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.6ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Destroy (1.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$echIJHTcxaXc4aOd9HlyGuM0qsMizDlyKRp.HrzOJDkpzbtQj7jL2"], ["created_at", "2020-10-26 17:52:34.794070"], ["updated_at", "2020-10-26 17:52:34.794070"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (1.6ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 42ms (Views: 0.2ms | ActiveRecord: 4.3ms | Allocations: 1623)
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (2.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[36mUser Destroy (3.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$DwF2/Cosn4/.6eXTQ7fhCuMGTisUpg3imc5kc7xAuRWZo6hsyWkZm"], ["created_at", "2020-10-26 17:52:34.821644"], ["updated_at", "2020-10-26 17:52:34.821644"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$QXGlQDzDk1kKLGoPKuMOf.n0vyP04e7utP2gEfP1t2w3UjiZQtQcS"], ["created_at", "2020-10-26 17:52:34.835317"], ["updated_at", "2020-10-26 17:52:34.835317"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (5.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (2.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[35m (4.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProperty Load (1.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[36mUser Create (1.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$KY9yqRpczk991wrn2kyfR.ZlFX11dPhvy7R6QSDyhxdmQdPLOcape"], ["created_at", "2020-10-26 17:52:34.884123"], ["updated_at", "2020-10-26 17:52:34.884123"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (4.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$dDZ/.M3nG7QPdo8A91DvUe0FqPgH3ociu7LxvyhMyMR/Egp4K7nqO"], ["created_at", "2020-10-26 17:52:34.899522"], ["updated_at", "2020-10-26 17:52:34.899522"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (2.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$rVDXuT1azJ8En/szkdZ1Re57I4P3kLem.DMDeBeaOYN7BGhYgvwGe"], ["created_at", "2020-10-26 17:52:34.899543"], ["updated_at", "2020-10-26 17:52:34.899543"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mProperty Load (10.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Destroy (5.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (2.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$OZGdhAkGfQjyDms69qfEIeX/vRGAAVHS6aOEOx61EtCysXwBvdI4W"], ["created_at", "2020-10-26 17:52:34.933408"], ["updated_at", "2020-10-26 17:52:34.933408"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (7.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
  [1m[36mUser Destroy (2.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (3.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$lwtQBEmSub8KD3IRenQ0VOxfTcjeRAGq4/JU/5bwQ8hJ2h7zd/Deq"], ["created_at", "2020-10-26 17:52:34.977937"], ["updated_at", "2020-10-26 17:52:34.977937"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (5.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$TWMWGakBrxmEyOPO2wTht.gcLy94TCoBjBdTeKFKGn03SN2FCxSzS"], ["created_at", "2020-10-26 17:52:35.013113"], ["updated_at", "2020-10-26 17:52:35.013113"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (4.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$gcjujj3iTtFBBgGmXeyFo.AxrajwiRwMi0.j//lFVr8rtNzCnGaqa"], ["created_at", "2020-10-26 17:52:35.047082"], ["updated_at", "2020-10-26 17:52:35.047082"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PropertyTest: test_Should_have_successfully_newd_a_property
-----------------------------------------------------------
  [1m[35m (2.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (2.5ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 17:52:35.077632"], ["updated_at", "2020-10-26 17:52:35.077632"]]
  [1m[35m (3.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (2.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486381]]
  [1m[36mUser Destroy (2.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486381]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_because_admon_exceeds_the_maximum_valor
------------------------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PropertyTest: test_Should_create_a_property
-------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (3.0ms)[0m  [1m[32mINSERT INTO "properties" ("hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["hood", "Belen"], ["city", "Pizza"], ["user_id", 99], ["created_at", "2020-10-26 17:52:35.152161"], ["updated_at", "2020-10-26 17:52:35.152161"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (18.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
PropertyTest: test_test_empty_property
--------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_social_class
---------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.8ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "social_class") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:52:35.235916"], ["updated_at", "2020-10-26 17:52:35.235916"], ["build_area", "hola"], ["social_class", "Industrial"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_admon
------------------------------------------------------
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.9ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:52:35.259118"], ["updated_at", "2020-10-26 17:52:35.259118"], ["admon", "7777777"]]
  [1m[35m (2.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_social_class
----------------------------------------------------------------------------
  [1m[35m (2.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_common_areas_attribute
-------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "common_areas") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:52:35.319963"], ["updated_at", "2020-10-26 17:52:35.319963"], ["build_area", "hola"], ["common_areas", "muchisimas"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_the_proper_built_type
--------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (11.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_rooms_attribute
-------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_a_valid_elevator_attribute
----------------------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_elevator_attribute
---------------------------------------------------------------------------
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (4.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_build_area
-------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon", "build_area") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:52:35.442663"], ["updated_at", "2020-10-26 17:52:35.442663"], ["admon", "500000"], ["build_area", "hola"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_a_user_id
--------------------------------------------------------------
  [1m[35m (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:52:35.638183"], ["updated_at", "2020-10-26 17:52:35.638183"], ["build_area", "hola"]]
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_property_tax_attribute
-------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_state
  [1m[35m (5.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
--------------------------------------------------------
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (2.1ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "property_tax") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:52:35.652153"], ["updated_at", "2020-10-26 17:52:35.652153"], ["build_area", "hola"], ["property_tax", "500000"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProperty Create (1.2ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "state") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:52:35.656550"], ["updated_at", "2020-10-26 17:52:35.656550"], ["social_class", "5"], ["state", "holiwis"]]
  [1m[35m (3.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (6.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PropertyTest: test_Should_new,_save,_and_destroy_a_property
-----------------------------------------------------------
  [1m[35m (4.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_rooms_attribute
------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (6.9ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "rooms") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:52:35.695621"], ["updated_at", "2020-10-26 17:52:35.695621"], ["build_area", "hola"], ["rooms", "500"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.8ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 17:52:35.692210"], ["updated_at", "2020-10-26 17:52:35.692210"]]
  [1m[35m (3.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.8ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PhotoTest: test_Should_successfully_create_a_photo
--------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 13]]
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[36mPhoto Create (3.6ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.zeldadeprueba.com"], ["property_id", 2], ["created_at", "2020-10-26 17:52:35.746049"], ["updated_at", "2020-10-26 17:52:35.746049"]]
  [1m[36mProperty Destroy (0.8ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 13]]
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProperty Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_property_id
---------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
PhotoTest: test_Should_create,_save_and_delete_a_property,_as_well_as_inspecting_the_link
-----------------------------------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_url
-------------------------------------------------------
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (9.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPhoto Create (5.5ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.linkdeprueba.com"], ["property_id", 1], ["created_at", "2020-10-26 17:52:35.786946"], ["updated_at", "2020-10-26 17:52:35.786946"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (1.6ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 298486375]]
  [1m[36mPhoto Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "photos" WHERE "photos"."property_id" = $1 LIMIT $2[0m  [["property_id", 1], ["LIMIT", 1]]
  [1m[35m (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:35 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 406ms (Views: 1.8ms | ActiveRecord: 1.7ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (5.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 442ms (Views: 1.1ms | ActiveRecord: 1.2ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 302ms (Views: 0.5ms | ActiveRecord: 5.7ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:52:36 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 10ms (Views: 0.5ms | ActiveRecord: 1.9ms | Allocations: 1941)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 300ms (Views: 0.5ms | ActiveRecord: 2.0ms | Allocations: 560)
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-10-26 12:52:36 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 13ms (Views: 0.2ms | ActiveRecord: 1.3ms | Allocations: 3698)
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 280ms (Views: 0.7ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:36 -0500
Completed 200 OK in 336ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:36 -0500
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 261ms (Views: 0.4ms | ActiveRecord: 0.9ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 12:52:37 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 1032)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:37 -0500
Completed 200 OK in 278ms (Views: 0.5ms | ActiveRecord: 1.0ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-10-26 12:52:37 -0500
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$f38/SXc4wEjeaOFnymQsMOluKrciAype5itFf6cL2LqugaQlFRiIq"], ["created_at", "2020-10-26 17:52:37.203906"], ["updated_at", "2020-10-26 17:52:37.203906"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 15ms (Views: 1.7ms | ActiveRecord: 3.6ms | Allocations: 1491)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 299ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 301ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 271ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:37 -0500
Processing by Api::V1::UsersController#login as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 366)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 291ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:52:37 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.5ms | Allocations: 1859)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 288ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 296ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 262ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 12:52:38 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 1595)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 269ms (Views: 2.0ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 269)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 416ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 366ms (Views: 1.0ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 293ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-10-26 12:52:39 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 422ms (Views: 2.1ms | ActiveRecord: 1.5ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:52:39 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.7ms | ActiveRecord: 0.5ms | Allocations: 1433)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.6ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 283ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 303ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 12:52:39 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 5ms (Views: 2.0ms | ActiveRecord: 0.6ms | Allocations: 2064)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 448ms (Views: 2.2ms | ActiveRecord: 0.9ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 542ms (Views: 1.2ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 567ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 12:52:40 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 5ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1595)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 395ms (Views: 0.7ms | ActiveRecord: 2.0ms | Allocations: 560)
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-10-26 12:52:40 -0500
Processing by Api::V1::UsersController#update as JSON
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
Completed 200 OK in 366ms (Views: 0.9ms | ActiveRecord: 0.2ms | Allocations: 568)
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:40 -0500
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[35m (3.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (2.1ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-10-26 17:52:40.676561"], ["id", 100]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 26ms (Views: 1.1ms | ActiveRecord: 9.7ms | Allocations: 2498)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 300ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "new_name"], ["updated_at", "2020-10-26 17:52:40.972630"], ["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 298ms (Views: 0.9ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 281ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 311ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:52:41 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (4.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 15ms (Views: 0.5ms | ActiveRecord: 6.7ms | Allocations: 2367)
  [1m[35m (7.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 285ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:52:41 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-10-26 17:52:41.566706"], ["updated_at", "2020-10-26 17:52:41.566706"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 10ms (Views: 0.7ms | ActiveRecord: 1.3ms | Allocations: 2754)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 414ms (Views: 0.7ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 350ms (Views: 1.0ms | ActiveRecord: 0.7ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 311ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 12:52:42 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 155)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 300ms (Views: 0.8ms | ActiveRecord: 0.5ms | Allocations: 560)
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-10-26 12:52:42 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 404 Not Found in 13ms (Views: 0.2ms | ActiveRecord: 1.0ms | Allocations: 1572)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 333ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 345ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 282ms (Views: 0.9ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 12:52:42 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (1.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 404 Not Found in 7ms (Views: 0.6ms | ActiveRecord: 1.8ms | Allocations: 1472)
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 376ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 561)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-10-26 12:52:43 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
Completed 200 OK in 301ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (12.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Destroy (1.5ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 29ms (Views: 0.1ms | ActiveRecord: 15.6ms | Allocations: 1544)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 286ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 331ms (Views: 0.9ms | ActiveRecord: 0.6ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 12:52:43 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (1.5ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-10-26 17:52:43.395381"], ["id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 24ms (Views: 0.7ms | ActiveRecord: 4.2ms | Allocations: 2745)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 307ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:52:43 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-10-26 17:52:43.684233"], ["updated_at", "2020-10-26 17:52:43.684233"], ["admon", "80000"], ["rooms", "3"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 8ms (Views: 0.7ms | ActiveRecord: 1.2ms | Allocations: 2735)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 332ms (Views: 1.1ms | ActiveRecord: 1.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 275ms (Views: 1.0ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 270ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-10-26 12:52:44 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 265ms (Views: 1.2ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:52:44 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 17:52:44.253708"], ["updated_at", "2020-10-26 17:52:44.253708"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 11ms (Views: 0.7ms | ActiveRecord: 1.8ms | Allocations: 2578)
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 399ms (Views: 1.1ms | ActiveRecord: 3.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 450ms (Views: 0.7ms | ActiveRecord: 2.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 325ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:52:44 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 17:52:44.805885"], ["updated_at", "2020-10-26 17:52:44.805885"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 22ms (Views: 2.3ms | ActiveRecord: 3.9ms | Allocations: 2695)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 405ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-10-26 12:52:45 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (4.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (4.9ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
Completed 200 OK in 26ms (Views: 4.2ms | ActiveRecord: 9.6ms | Allocations: 3649)
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 509ms (Views: 0.8ms | ActiveRecord: 2.8ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 471ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 568)
Completed 200 OK in 295ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:52:45 -0500
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-10-26 12:52:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
Completed 200 OK in 6ms (Views: 0.9ms | ActiveRecord: 0.9ms | Allocations: 1581)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 293ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 12:52:45 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.5ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-10-26 17:52:45.957457"], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 0.8ms | ActiveRecord: 2.2ms | Allocations: 2749)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.6ms)[0m  [1m[35mALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.9ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (2.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1123.9ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.1ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1126.8ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (8.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (2.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.2ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 17:53:43.662858', '2020-10-26 17:53:43.662858', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 17:53:43.662858', '2020-10-26 17:53:43.662858', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$hBi21qzdnbItEujOLTf4VOpMsol7.OgROgH9bHX5kWOLFum451E3G', '2020-10-26 17:53:43.662858', '2020-10-26 17:53:43.662858', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$GRBxOo11ilbIGKdalk0IwO.ed3k04N/s2ZrEVxydMsfQMBxtMe45C', '2020-10-26 17:53:43.662858', '2020-10-26 17:53:43.662858', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$p5nx05CG6uiSVkc0iO1Hy.rz2zEVwg73GHaAcSvNVPWVkXmUadAT6', '2020-10-26 17:53:43.662858', '2020-10-26 17:53:43.662858', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:53:43.676020', '2020-10-26 17:53:43.676020', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:53:43.676020', '2020-10-26 17:53:43.676020', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:53:43.676020', '2020-10-26 17:53:43.676020', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:53:43.676020', '2020-10-26 17:53:43.676020', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 17:53:43.676020', '2020-10-26 17:53:43.676020', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 17:53:43.676020', '2020-10-26 17:53:43.676020', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 17:53:43.718798', '2020-10-26 17:53:43.718798', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 17:53:43.718798', '2020-10-26 17:53:43.718798', DEFAULT, DEFAULT)[0m
  [1m[35m (12.1ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.3ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 17:53:43.680628', '2020-10-26 17:53:43.680628', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 17:53:43.680628', '2020-10-26 17:53:43.680628', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$zNMzGbocwbPhUn9BpvaaBeHSGaNUSZHx4eesDJ3rjU/1jNTSAH9NG', '2020-10-26 17:53:43.680628', '2020-10-26 17:53:43.680628', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$2cO6SLGVvKeoaAEFI.HwbuuMQbL2Q1dYbVJn9USQiOKW9km.5ZJL2', '2020-10-26 17:53:43.680628', '2020-10-26 17:53:43.680628', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$KyS7i3W0ShHnkZeU2QlZZOn.mjtMqmhJ5PFn9GEY3yE.n3tPWZSte', '2020-10-26 17:53:43.680628', '2020-10-26 17:53:43.680628', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:53:43.702620', '2020-10-26 17:53:43.702620', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:53:43.702620', '2020-10-26 17:53:43.702620', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:53:43.702620', '2020-10-26 17:53:43.702620', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:53:43.702620', '2020-10-26 17:53:43.702620', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 17:53:43.702620', '2020-10-26 17:53:43.702620', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 17:53:43.702620', '2020-10-26 17:53:43.702620', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 17:53:43.730500', '2020-10-26 17:53:43.730500', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 17:53:43.730500', '2020-10-26 17:53:43.730500', DEFAULT, DEFAULT)[0m
  [1m[35m (58.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (46.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
  [1m[35m (4.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$crBZ01TvAslEecsLKYYzn.nBeRYCaBm2HzQfDeaO.nHHppyxR73dy"], ["created_at", "2020-10-26 17:53:43.924766"], ["updated_at", "2020-10-26 17:53:43.924766"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Create (4.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$ciHAGB63aSNjC3XmsXBKfO/QMUF2fiHgaE6vT8E7QcmR0RIDPl1Vy"], ["created_at", "2020-10-26 17:53:43.922452"], ["updated_at", "2020-10-26 17:53:43.922452"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (7.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$nsW944HLLdkiVdAMFzi5/.g64DKR4RwrdtQbV6R03YZNp45MVtvAW"], ["created_at", "2020-10-26 17:53:43.970964"], ["updated_at", "2020-10-26 17:53:43.970964"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (2.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$6Hz7xb9pJrBHEVzBv37Jd.p59u8o.S69cM/vX4GWQbDUkoOYmv8ny"], ["created_at", "2020-10-26 17:53:44.004782"], ["updated_at", "2020-10-26 17:53:44.004782"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (1.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (2.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (8.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (6.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (2.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$lJX0f1IUr76NlWA0b4WZDOZQg3q44Dc8toHHvvx8fUH364DptQR.W"], ["created_at", "2020-10-26 17:53:44.057318"], ["updated_at", "2020-10-26 17:53:44.057318"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (2.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$9A0S65hU8Q8tmtWtEAw0x.lWL2ugC/aDCa28Dxa/mgLgnQPrDTY3q"], ["created_at", "2020-10-26 17:53:44.058276"], ["updated_at", "2020-10-26 17:53:44.058276"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (5.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Exists? (3.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[36mProperty Load (1.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Destroy (2.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[35m (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$/CSgQTJ30y6jwlbRh94VY.6DBJssP5BxM.4adhBjRK8PYI5SDMrKC"], ["created_at", "2020-10-26 17:53:44.113320"], ["updated_at", "2020-10-26 17:53:44.113320"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (2.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (15.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$l6lkM0tHmx.ZAc0rzVCPpOw3JM7sz7turaKrmvn47ndktIZYnLdxS"], ["created_at", "2020-10-26 17:53:44.124959"], ["updated_at", "2020-10-26 17:53:44.124959"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (2.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (3.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (3.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Destroy (2.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (1.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (1.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$03ud.lLJ70.lH6j9r/C8Ae6g1LEoTQuLuJB5J6atzlRiqkG68dfmi"], ["created_at", "2020-10-26 17:53:44.169364"], ["updated_at", "2020-10-26 17:53:44.169364"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (3.9ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (7.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$zDCMEtfuq4TKksUMSXzBxeknTkLzxMEiStOVypFZD2STf2iiNextS"], ["created_at", "2020-10-26 17:53:44.181984"], ["updated_at", "2020-10-26 17:53:44.181984"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
----------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (2.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$keQCIAyuVFcAwbgsoNPxcOWMBMuUOEn6rnqP4cG4nuynmdKKYNPYS"], ["created_at", "2020-10-26 17:53:44.200239"], ["updated_at", "2020-10-26 17:53:44.200239"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (3.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.9ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[36mUser Destroy (2.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (1.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:44 -0500
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (7.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 376ms (Views: 0.7ms | ActiveRecord: 7.2ms | Allocations: 857)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 289ms (Views: 1.1ms | ActiveRecord: 0.4ms | Allocations: 716)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 369ms (Views: 4.4ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 468ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 325ms (Views: 1.1ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 12:53:45 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
Completed 200 OK in 442ms (Views: 0.7ms | ActiveRecord: 0.5ms | Allocations: 560)
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-10-26 12:53:45 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 158)
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:45 -0500
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 29ms (Views: 0.7ms | ActiveRecord: 1.0ms | Allocations: 1925)
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[35m (3.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 414ms (Views: 0.7ms | ActiveRecord: 2.0ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:45 -0500
Completed 200 OK in 397ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 286ms (Views: 0.6ms | ActiveRecord: 0.5ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 303ms (Views: 0.8ms | ActiveRecord: 0.4ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 347ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 12:53:46 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.7ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 104ms (Views: 8.1ms | ActiveRecord: 2.8ms | Allocations: 22405)
  [1m[35m (2.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 501ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 12:53:46 -0500
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.3ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (2.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (1.7ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 30ms (Views: 1.0ms | ActiveRecord: 6.8ms | Allocations: 6600)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (6.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 334ms (Views: 0.7ms | ActiveRecord: 1.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (5.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 464ms (Views: 0.5ms | ActiveRecord: 0.8ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 303ms (Views: 0.6ms | ActiveRecord: 5.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 313ms (Views: 0.4ms | ActiveRecord: 0.7ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 268ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-10-26 12:53:47 -0500
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
Completed 200 OK in 266ms (Views: 2.3ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 12:53:47 -0500
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (1.7ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPhoto Create (1.4ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-10-26 17:53:47.778738"], ["updated_at", "2020-10-26 17:53:47.778738"]]
  [1m[35m (3.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued PhotoQualityJob (Job ID: 376768ba-9fb1-4955-b734-837b2ac046bb) to Test(default) with arguments: 298486375
Completed 201 Created in 71ms (Views: 0.6ms | ActiveRecord: 7.2ms | Allocations: 24249)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 48ms (Views: 0.7ms | ActiveRecord: 6.5ms | Allocations: 6269)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 280ms (Views: 0.6ms | ActiveRecord: 0.8ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 294ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 287ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 12:53:48 -0500
Completed 200 OK in 262ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (3.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 12ms (Views: 1.0ms | ActiveRecord: 1.1ms | Allocations: 1595)
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Update (3.4ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "new_name"], ["updated_at", "2020-10-26 17:53:48.391437"], ["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (2.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 336ms (Views: 0.6ms | ActiveRecord: 1.0ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (11.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 360ms (Views: 0.6ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (7.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 341ms (Views: 0.7ms | ActiveRecord: 7.5ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 12:53:49 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 17ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 1029)
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 458ms (Views: 3.8ms | ActiveRecord: 11.6ms | Allocations: 560)
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-10-26 12:53:49 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 38ms (Views: 0.7ms | ActiveRecord: 0.8ms | Allocations: 3507)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 474ms (Views: 1.2ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:49 -0500
Completed 200 OK in 406ms (Views: 0.6ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 303ms (Views: 0.5ms | ActiveRecord: 2.1ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:49 -0500
Processing by Api::V1::UsersController#login as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 366)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 400ms (Views: 0.6ms | ActiveRecord: 0.5ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:53:50 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 9ms (Views: 1.0ms | ActiveRecord: 2.0ms | Allocations: 1942)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 401ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 588ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 441ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 12:53:50 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 14ms (Views: 2.1ms | ActiveRecord: 4.8ms | Allocations: 2065)
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 307ms (Views: 0.9ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 12:53:51 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 18ms (Views: 0.2ms | ActiveRecord: 1.6ms | Allocations: 1595)
  [1m[35m (4.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 373ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 308ms (Views: 0.8ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 263ms (Views: 0.5ms | ActiveRecord: 0.5ms | Allocations: 560)
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-10-26 12:53:51 -0500
Processing by Api::V1::UsersController#update as JSON
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-10-26 17:53:51.532926"], ["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.4ms | ActiveRecord: 1.8ms | Allocations: 2498)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 275ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:53:51 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 8ms (Views: 0.5ms | ActiveRecord: 1.1ms | Allocations: 1859)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 307ms (Views: 0.4ms | ActiveRecord: 1.1ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 302ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 289ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-10-26 12:53:52 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 282ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 269)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 291ms (Views: 1.2ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 322ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 266ms (Views: 0.6ms | ActiveRecord: 3.6ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:53:52 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 6ms (Views: 0.6ms | ActiveRecord: 1.2ms | Allocations: 1433)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 354ms (Views: 0.5ms | ActiveRecord: 0.5ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:53:52 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 10ms (Views: 0.5ms | ActiveRecord: 1.5ms | Allocations: 2367)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
PhotoTest: test_Should_create,_save_and_delete_a_property,_as_well_as_inspecting_the_link
-----------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPhoto Create (1.9ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.linkdeprueba.com"], ["property_id", 1], ["created_at", "2020-10-26 17:53:52.997802"], ["updated_at", "2020-10-26 17:53:52.997802"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (1.5ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 298486375]]
  [1m[36mPhoto Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "photos" WHERE "photos"."property_id" = $1 LIMIT $2[0m  [["property_id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PhotoTest: test_Should_successfully_create_a_photo
--------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.4ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.zeldadeprueba.com"], ["property_id", 2], ["created_at", "2020-10-26 17:53:53.023645"], ["updated_at", "2020-10-26 17:53:53.023645"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_property_id
---------------------------------------------------------------
Completed 200 OK in 273ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_url
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 286ms (Views: 0.5ms | ActiveRecord: 1.0ms | Allocations: 560)
  [1m[35m (1.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-10-26 12:53:53 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$e0AupE4eBuBu/qy6bkCrq.EmIdRA5zFcxRYrfoihU84d8J3reJHUe"], ["created_at", "2020-10-26 17:53:53.344802"], ["updated_at", "2020-10-26 17:53:53.344802"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 11ms (Views: 0.3ms | ActiveRecord: 1.3ms | Allocations: 1492)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 299ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 294ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 283ms (Views: 0.8ms | ActiveRecord: 3.0ms | Allocations: 561)
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-10-26 12:53:53 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 404 Not Found in 17ms (Views: 0.4ms | ActiveRecord: 1.0ms | Allocations: 1507)
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 299ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 561)
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-10-26 12:53:53 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
Completed 200 OK in 20ms (Views: 11.7ms | ActiveRecord: 1.7ms | Allocations: 3749)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 334ms (Views: 1.1ms | ActiveRecord: 0.7ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 305ms (Views: 0.9ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 273ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:53:54 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 17:53:54.334490"], ["updated_at", "2020-10-26 17:53:54.334490"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 10ms (Views: 0.7ms | ActiveRecord: 1.6ms | Allocations: 3402)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 262ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:53:54 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (3.0ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-10-26 17:53:54.584185"], ["updated_at", "2020-10-26 17:53:54.584185"], ["admon", "80000"], ["rooms", "3"]]
  [1m[35m (13.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 28ms (Views: 0.7ms | ActiveRecord: 17.3ms | Allocations: 3413)
  [1m[35m (2.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (4.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 321ms (Views: 0.6ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 316ms (Views: 0.5ms | ActiveRecord: 1.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 278ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 12:53:54 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.5ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-10-26 17:53:54.965123"], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.9ms | ActiveRecord: 1.9ms | Allocations: 2748)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 311ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:53:55 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-10-26 17:53:55.272308"], ["updated_at", "2020-10-26 17:53:55.272308"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 16ms (Views: 1.0ms | ActiveRecord: 1.3ms | Allocations: 2705)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 338ms (Views: 0.8ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 297ms (Views: 0.5ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 289ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:53:55 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (1.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 17:53:55.629085"], ["updated_at", "2020-10-26 17:53:55.629085"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 20ms (Views: 1.3ms | ActiveRecord: 3.3ms | Allocations: 2578)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 323ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 392ms (Views: 0.4ms | ActiveRecord: 3.8ms | Allocations: 560)
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-10-26 12:53:55 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 332ms (Views: 1.0ms | ActiveRecord: 0.3ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 12:53:56 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 318ms (Views: 1.6ms | ActiveRecord: 0.2ms | Allocations: 568)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[36mProperty Load (13.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (5.1ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-10-26 17:53:56.350426"], ["id", 1]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 38ms (Views: 0.6ms | ActiveRecord: 20.5ms | Allocations: 2735)
  [1m[35m (3.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 312ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-10-26 12:53:56 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (4.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Destroy (0.5ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 5.4ms | Allocations: 1544)
  [1m[35m (2.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
Completed 200 OK in 305ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 287ms (Views: 0.7ms | ActiveRecord: 1.0ms | Allocations: 560)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-10-26 12:53:56 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
Completed 200 OK in 5ms (Views: 1.0ms | ActiveRecord: 0.7ms | Allocations: 1581)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 318ms (Views: 0.5ms | ActiveRecord: 2.9ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 270ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:53:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 308ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 12:53:57 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (4.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (3.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 404 Not Found in 18ms (Views: 0.5ms | ActiveRecord: 11.0ms | Allocations: 1458)
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_property_tax_attribute
-------------------------------------------------------------------------
  [1m[35m (4.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "property_tax") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:53:57.380227"], ["updated_at", "2020-10-26 17:53:57.380227"], ["build_area", "hola"], ["property_tax", "500000"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (11.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_because_admon_exceeds_the_maximum_valor
------------------------------------------------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_admon
------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:53:57.446640"], ["updated_at", "2020-10-26 17:53:57.446640"], ["admon", "7777777"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_rooms_attribute
-------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_a_user_id
--------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_the_proper_built_type
--------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (1.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_a_valid_elevator_attribute
----------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (1.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_common_areas_attribute
-------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "common_areas") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:53:57.490924"], ["updated_at", "2020-10-26 17:53:57.490924"], ["build_area", "hola"], ["common_areas", "muchisimas"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_social_class
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "social_class") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:53:57.504523"], ["updated_at", "2020-10-26 17:53:57.504523"], ["build_area", "hola"], ["social_class", "Industrial"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_elevator_attribute
---------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PropertyTest: test_Should_new,_save,_and_destroy_a_property
-----------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 17:53:57.526737"], ["updated_at", "2020-10-26 17:53:57.526737"]]
  [1m[35m (1.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 17]]
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[36mProperty Destroy (1.1ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 17]]
  [1m[36mProperty Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PropertyTest: test_Should_have_successfully_newd_a_property
-----------------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.9ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 17:53:57.555312"], ["updated_at", "2020-10-26 17:53:57.555312"]]
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_build_area
-------------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.9ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon", "build_area") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:53:57.574871"], ["updated_at", "2020-10-26 17:53:57.574871"], ["admon", "500000"], ["build_area", "hola"]]
  [1m[35m (2.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_state
--------------------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.9ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "state") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:53:57.596963"], ["updated_at", "2020-10-26 17:53:57.596963"], ["social_class", "5"], ["state", "holiwis"]]
  [1m[35m (1.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_social_class
----------------------------------------------------------------------------
  [1m[35m (2.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PropertyTest: test_Should_create_a_property
-------------------------------------------
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["hood", "Belen"], ["city", "Pizza"], ["user_id", 99], ["created_at", "2020-10-26 17:53:57.642009"], ["updated_at", "2020-10-26 17:53:57.642009"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_rooms_attribute
------------------------------------------------------------------------
  [1m[35m (1.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "rooms") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:53:57.665630"], ["updated_at", "2020-10-26 17:53:57.665630"], ["build_area", "hola"], ["rooms", "500"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 447ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 12:53:57 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (986.4ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (979.8ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.4ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 17:54:40.054628', '2020-10-26 17:54:40.054628', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 17:54:40.054628', '2020-10-26 17:54:40.054628', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$RznpR30WjvIXrt2cnxTpkOsxf4eKq/pgHaRqkMzl/jV2BSerMPDSG', '2020-10-26 17:54:40.054628', '2020-10-26 17:54:40.054628', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$XT2W/5g10Eh.ViUsZRTDUuxQBSSiELAwI1OyLVCYDAEJGigzP2Jsm', '2020-10-26 17:54:40.054628', '2020-10-26 17:54:40.054628', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$wJoEwW79goCBJkIc74RIKuFIjN.rhP1/6MJyza2ftxo65xuGEGo02', '2020-10-26 17:54:40.054628', '2020-10-26 17:54:40.054628', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:54:40.069517', '2020-10-26 17:54:40.069517', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:54:40.069517', '2020-10-26 17:54:40.069517', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:54:40.069517', '2020-10-26 17:54:40.069517', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:54:40.069517', '2020-10-26 17:54:40.069517', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 17:54:40.069517', '2020-10-26 17:54:40.069517', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 17:54:40.069517', '2020-10-26 17:54:40.069517', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 17:54:40.076080', '2020-10-26 17:54:40.076080', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 17:54:40.076080', '2020-10-26 17:54:40.076080', DEFAULT, DEFAULT)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.8ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-26 17:54:40.093271', '2020-10-26 17:54:40.093271', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-26 17:54:40.093271', '2020-10-26 17:54:40.093271', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$KfTqCC9gvHpfvrgsdccr8eORBDrcLtHN8URmwzMHUGmFe654n49My', '2020-10-26 17:54:40.093271', '2020-10-26 17:54:40.093271', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$0zKGXRWzY9dCodWGEg20qedySdW.OZ7V8L99sV86RlV1QT.GK6br.', '2020-10-26 17:54:40.093271', '2020-10-26 17:54:40.093271', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$SW4ZkhtctKumzjqiCLu0Beyl1oM5eZ0AVzWNBjUBQLFCZ1Q6rU7Ty', '2020-10-26 17:54:40.093271', '2020-10-26 17:54:40.093271', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:54:40.102032', '2020-10-26 17:54:40.102032', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:54:40.102032', '2020-10-26 17:54:40.102032', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:54:40.102032', '2020-10-26 17:54:40.102032', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-26 17:54:40.102032', '2020-10-26 17:54:40.102032', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-26 17:54:40.102032', '2020-10-26 17:54:40.102032', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-26 17:54:40.102032', '2020-10-26 17:54:40.102032', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-26 17:54:40.108436', '2020-10-26 17:54:40.108436', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-26 17:54:40.108436', '2020-10-26 17:54:40.108436', DEFAULT, DEFAULT)[0m
  [1m[35m (23.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (46.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$eBjh3f1AKOVApyDcVOc4s.oeADsQEdpVWPxdX3PH1Qp9.AORDs9ua"], ["created_at", "2020-10-26 17:54:40.220933"], ["updated_at", "2020-10-26 17:54:40.220933"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$IjdARZUMjtZcxx9vMIlppORYKMhNREXeACRmec29Nq0aZQmSy3Edy"], ["created_at", "2020-10-26 17:54:40.227823"], ["updated_at", "2020-10-26 17:54:40.227823"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$1fHa3Qta1vAuucF6XoAgp.radUuSI9QeI4EkRyaXK6kL2J81/Pk2."], ["created_at", "2020-10-26 17:54:40.230890"], ["updated_at", "2020-10-26 17:54:40.230890"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Destroy (0.9ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[36mUser Destroy (1.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$GSAcDo5mVDKVpOxZC1phY.kcDPvlYi9ciIcKy9RuJW.EXl21iI7Ei"], ["created_at", "2020-10-26 17:54:40.261390"], ["updated_at", "2020-10-26 17:54:40.261390"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$vms4VU4oWTXJofGZUKrH8ObHJXZDVglgLANS61Xy.c1Ng.Hay0ONm"], ["created_at", "2020-10-26 17:54:40.268550"], ["updated_at", "2020-10-26 17:54:40.268550"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mProperty Load (5.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[35m (2.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (5.9ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$2A3EMkENLHiMcaFjwombquUq4.DmlJB3x3DNGIfAja/D2BIj94yVK"], ["created_at", "2020-10-26 17:54:40.296840"], ["updated_at", "2020-10-26 17:54:40.296840"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mProperty Load (1.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$B.Lpm6A95vI70hsUyP65COJs0qnirDxKHjN7bY4OKicvFnxouO16i"], ["created_at", "2020-10-26 17:54:40.328326"], ["updated_at", "2020-10-26 17:54:40.328326"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$34F1e988mCayePLWAzbExeyA8Mq05qUkzDvAnUHeJ3JyZHrxQD0za"], ["created_at", "2020-10-26 17:54:40.329576"], ["updated_at", "2020-10-26 17:54:40.329576"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Destroy (1.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$qRuNJ00HGqGTfDjyNMqF3OsbChuVofJf5PYZL6eSv33ss8hpVlcXe"], ["created_at", "2020-10-26 17:54:40.387810"], ["updated_at", "2020-10-26 17:54:40.387810"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[36mUser Create (3.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$hYN74u5RBPTeSi3Rxm3U6eHxykjjEGj5PC7mDqD8iPUyBxY6pw1Ku"], ["created_at", "2020-10-26 17:54:40.386066"], ["updated_at", "2020-10-26 17:54:40.386066"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_property_id
---------------------------------------------------------------
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (2.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$dogmaTBILawd3PmBMPkZ/.fZF9syVtEie8iz/MaPwDVEeExTPnOVq"], ["created_at", "2020-10-26 17:54:40.422817"], ["updated_at", "2020-10-26 17:54:40.422817"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (1.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Destroy (7.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
-------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_url
-------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (2.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PhotoTest: test_Should_successfully_create_a_photo
--------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
PhotoTest: test_Should_create,_save_and_delete_a_property,_as_well_as_inspecting_the_link
-----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.6ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.linkdeprueba.com"], ["property_id", 1], ["created_at", "2020-10-26 17:54:40.536364"], ["updated_at", "2020-10-26 17:54:40.536364"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.4ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 298486375]]
  [1m[36mPhoto Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "photos" WHERE "photos"."property_id" = $1 LIMIT $2[0m  [["property_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPhoto Create (1.4ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.zeldadeprueba.com"], ["property_id", 2], ["created_at", "2020-10-26 17:54:40.542471"], ["updated_at", "2020-10-26 17:54:40.542471"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:40 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 275ms (Views: 1.0ms | ActiveRecord: 0.3ms | Allocations: 853)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 281ms (Views: 1.0ms | ActiveRecord: 0.3ms | Allocations: 715)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 278ms (Views: 1.4ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:54:41 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 17:54:41.229391"], ["updated_at", "2020-10-26 17:54:41.229391"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 19ms (Views: 0.8ms | ActiveRecord: 1.6ms | Allocations: 3743)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 355ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-10-26 12:54:41 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
Completed 200 OK in 9ms (Views: 1.2ms | ActiveRecord: 1.1ms | Allocations: 1925)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 336ms (Views: 0.7ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
Completed 200 OK in 294ms (Views: 0.6ms | ActiveRecord: 0.5ms | Allocations: 568)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 280ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:54:41 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 298ms (Views: 0.6ms | ActiveRecord: 0.5ms | Allocations: 560)
[31mUnpermitted parameters: :ruum, :format[0m
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-10-26 12:54:41 -0500
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 123)
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-10-26 17:54:41.893686"], ["updated_at", "2020-10-26 17:54:41.893686"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 18ms (Views: 1.3ms | ActiveRecord: 4.1ms | Allocations: 3409)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 278ms (Views: 0.9ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 338ms (Views: 0.5ms | ActiveRecord: 0.7ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 265ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:54:42 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-26 17:54:42.460903"], ["updated_at", "2020-10-26 17:54:42.460903"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 8ms (Views: 0.6ms | ActiveRecord: 1.3ms | Allocations: 2578)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 264ms (Views: 0.5ms | ActiveRecord: 0.8ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 12:54:42 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (1.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (1.1ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-10-26 17:54:42.550117"], ["id", 1]]
  [1m[35m (6.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 31ms (Views: 3.8ms | ActiveRecord: 11.8ms | Allocations: 2893)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 307ms (Views: 0.4ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 286ms (Views: 0.4ms | ActiveRecord: 4.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 291ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-26 12:54:43 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (2.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-10-26 17:54:43.081273"], ["updated_at", "2020-10-26 17:54:43.081273"], ["admon", "80000"], ["rooms", "3"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 14ms (Views: 1.3ms | ActiveRecord: 4.3ms | Allocations: 2737)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 309ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-10-26 12:54:43 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Destroy (0.5ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 1.6ms | Allocations: 1544)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 307ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 299ms (Views: 1.1ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 284ms (Views: 1.4ms | ActiveRecord: 0.3ms | Allocations: 560)
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-10-26 12:54:43 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.9ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 404 Not Found in 7ms (Views: 0.2ms | ActiveRecord: 1.7ms | Allocations: 1572)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 277ms (Views: 0.4ms | ActiveRecord: 0.9ms | Allocations: 560)
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-10-26 12:54:43 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
Completed 200 OK in 8ms (Views: 4.3ms | ActiveRecord: 0.8ms | Allocations: 3649)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 330ms (Views: 0.5ms | ActiveRecord: 0.9ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (8.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 368ms (Views: 0.9ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 420ms (Views: 0.7ms | ActiveRecord: 8.5ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 12:54:44 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 328ms (Views: 0.8ms | ActiveRecord: 1.3ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-26 12:54:44 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (3.4ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-10-26 17:54:44.533631"], ["id", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 18ms (Views: 1.9ms | ActiveRecord: 8.0ms | Allocations: 2733)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 281ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 273ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 268ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-26 12:54:45 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (1.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 404 Not Found in 7ms (Views: 0.2ms | ActiveRecord: 2.0ms | Allocations: 1458)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 268ms (Views: 0.8ms | ActiveRecord: 0.5ms | Allocations: 560)
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 12:54:45 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 22ms (Views: 0.2ms | ActiveRecord: 0.5ms | Allocations: 1598)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 290ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 289ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 259ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 12:54:45 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 10ms (Views: 0.2ms | ActiveRecord: 4.5ms | Allocations: 1029)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 282ms (Views: 1.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-10-26 12:54:45 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 8ms (Views: 2.4ms | ActiveRecord: 0.7ms | Allocations: 1596)
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:45 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 371ms (Views: 2.0ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 279ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 291ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Completed 200 OK in 260ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-10-26 12:54:46 -0500
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-10-26 12:54:46 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$eN16KuoryVUsbNqU2Jlh9.CHqO6WVHCMcilCa0EKtALTAh37R24g."], ["created_at", "2020-10-26 17:54:46.337398"], ["updated_at", "2020-10-26 17:54:46.337398"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 10ms (Views: 0.3ms | ActiveRecord: 2.4ms | Allocations: 1491)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Completed 422 Unprocessable Entity in 21ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 3508)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 275ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 280ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 257ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-10-26 12:54:46 -0500
Processing by Api::V1::UsersController#update as JSON
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-10-26 17:54:46.905335"], ["id", 100]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 22ms (Views: 0.7ms | ActiveRecord: 2.8ms | Allocations: 2498)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 285ms (Views: 1.5ms | ActiveRecord: 0.5ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:54:46 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 9ms (Views: 0.5ms | ActiveRecord: 0.6ms | Allocations: 1433)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:46 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 407ms (Views: 1.4ms | ActiveRecord: 1.1ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 383ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 265ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (4.7ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "new_name"], ["updated_at", "2020-10-26 17:54:47.603107"], ["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 283ms (Views: 1.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:47 -0500
Processing by Api::V1::UsersController#login as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 363)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 284ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 273ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:47 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 274ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:54:48 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 15ms (Views: 0.4ms | ActiveRecord: 2.5ms | Allocations: 2367)
Completed 200 OK in 322ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-10-26 12:54:48 -0500
  [1m[35m (3.5ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:48 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 284ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 297ms (Views: 0.6ms | ActiveRecord: 1.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 285ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 269)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 386ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:54:48 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 12ms (Views: 0.6ms | ActiveRecord: 2.9ms | Allocations: 1941)
  [1m[35m (3.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:48 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 341ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 568)
Completed 200 OK in 305ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:49 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:49 -0500
Processing by Api::V1::UsersController#login as JSON
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 257ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-26 12:54:49 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.5ms | ActiveRecord: 0.7ms | Allocations: 1859)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 275ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-26 12:54:49 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 5ms (Views: 1.7ms | ActiveRecord: 0.6ms | Allocations: 2064)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 264ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 283ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:49 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 281ms (Views: 0.9ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 272ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 315ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Completed 200 OK in 277ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 12:54:50 -0500
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-26 12:54:50 -0500
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mPhoto Load (0.3ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 6ms (Views: 0.5ms | ActiveRecord: 0.8ms | Allocations: 1623)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
----------------------------------------------------------------
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:50 -0500
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.5ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (4.2ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 22ms (Views: 0.5ms | ActiveRecord: 9.3ms | Allocations: 1653)
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.8ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 345ms (Views: 1.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 418ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 317ms (Views: 0.5ms | ActiveRecord: 1.5ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:51 -0500
Completed 200 OK in 278ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 261ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-10-26 12:54:51 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
Completed 200 OK in 269ms (Views: 1.8ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-10-26 12:54:51 -0500
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (1.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:51 -0500
  [1m[35m (2.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (2.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.7ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-10-26 17:54:51.416576"], ["updated_at", "2020-10-26 17:54:51.416576"]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
[ActiveJob] Enqueued PhotoQualityJob (Job ID: 387b2d8d-42ca-4b31-9aaa-e9c153e20ecc) to Test(default) with arguments: 298486376
Completed 201 Created in 24ms (Views: 0.5ms | ActiveRecord: 7.4ms | Allocations: 2758)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 299ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
Completed 200 OK in 286ms (Views: 0.6ms | ActiveRecord: 2.1ms | Allocations: 568)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 258ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 271ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-26 12:54:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 255ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 12:54:52 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.2ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 5ms (Views: 1.1ms | ActiveRecord: 1.0ms | Allocations: 1850)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PropertyTest: test_Should_have_successfully_newd_a_property
-----------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (3.0ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 17:54:52.259146"], ["updated_at", "2020-10-26 17:54:52.259146"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_rooms_attribute
-------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 289ms (Views: 2.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-26 12:54:52 -0500
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_a_valid_elevator_attribute
----------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_because_admon_exceeds_the_maximum_valor
------------------------------------------------------------------------------------
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 12ms (Views: 0.2ms | ActiveRecord: 1.9ms | Allocations: 1596)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
-----------------------------------------------------------
PropertyTest: test_Should_new,_save,_and_destroy_a_property
-----------------------------------------------------------
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_build_area
-------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.8ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon", "build_area") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:54:52.330476"], ["updated_at", "2020-10-26 17:54:52.330476"], ["admon", "500000"], ["build_area", "hola"]]
  [1m[36mProperty Create (12.3ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-26 17:54:52.330535"], ["updated_at", "2020-10-26 17:54:52.330535"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 12]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_social_class
---------------------------------------------------------------
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Destroy (0.6ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 12]]
  [1m[36mProperty Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (3.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "social_class") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:54:52.359345"], ["updated_at", "2020-10-26 17:54:52.359345"], ["build_area", "hola"], ["social_class", "Industrial"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_state
--------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (19.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "state") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:54:52.381583"], ["updated_at", "2020-10-26 17:54:52.381583"], ["social_class", "5"], ["state", "holiwis"]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_admon
------------------------------------------------------
  [1m[35m (3.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:54:52.395430"], ["updated_at", "2020-10-26 17:54:52.395430"], ["admon", "7777777"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
--------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_a_user_id
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_the_proper_built_type
--------------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_property_tax_attribute
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PropertyTest: test_Should_create_a_property
-------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.9ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "property_tax") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:54:52.419425"], ["updated_at", "2020-10-26 17:54:52.419425"], ["build_area", "hola"], ["property_tax", "500000"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProperty Create (1.6ms)[0m  [1m[32mINSERT INTO "properties" ("hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["hood", "Belen"], ["city", "Pizza"], ["user_id", 99], ["created_at", "2020-10-26 17:54:52.420406"], ["updated_at", "2020-10-26 17:54:52.420406"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_social_class
----------------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_common_areas_attribute
-------------------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (6.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_rooms_attribute
------------------------------------------------------------------------
  [1m[36mProperty Create (1.2ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "common_areas") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:54:52.450403"], ["updated_at", "2020-10-26 17:54:52.450403"], ["build_area", "hola"], ["common_areas", "muchisimas"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "rooms") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-26 17:54:52.456634"], ["updated_at", "2020-10-26 17:54:52.456634"], ["build_area", "hola"], ["rooms", "500"]]
---------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_elevator_attribute
---------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (16.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (907.9ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (917.0ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.2ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-27 15:45:49.616421', '2020-10-27 15:45:49.616421', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-27 15:45:49.616421', '2020-10-27 15:45:49.616421', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$0Nu0JOqtzE7xMHr7p.vcd.fKr..99rnH0I1YIpm2ll7chot0TiXl.', '2020-10-27 15:45:49.616421', '2020-10-27 15:45:49.616421', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$xd5Z6W8aKh7GVtCnuAY6Iu7Z9Wuid0E/vGJrEuAqcjF/HSMDavYla', '2020-10-27 15:45:49.616421', '2020-10-27 15:45:49.616421', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$UvvsXDjYY86eCLD./djva.0/BkKoveybvATgW9WHrL6o0tBam5.pS', '2020-10-27 15:45:49.616421', '2020-10-27 15:45:49.616421', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-27 15:45:49.630166', '2020-10-27 15:45:49.630166', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-27 15:45:49.630166', '2020-10-27 15:45:49.630166', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-27 15:45:49.630166', '2020-10-27 15:45:49.630166', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-27 15:45:49.630166', '2020-10-27 15:45:49.630166', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-27 15:45:49.630166', '2020-10-27 15:45:49.630166', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-27 15:45:49.630166', '2020-10-27 15:45:49.630166', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-27 15:45:49.638486', '2020-10-27 15:45:49.638486', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-27 15:45:49.638486', '2020-10-27 15:45:49.638486', DEFAULT, DEFAULT)[0m
  [1m[35m (3.9ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-27 15:45:49.616421', '2020-10-27 15:45:49.616421', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-27 15:45:49.616421', '2020-10-27 15:45:49.616421', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$67XPtQAVn6.4sS404u6VvO2bN8GfmF2jhvcGdxujao30qUNUe9zeq', '2020-10-27 15:45:49.616421', '2020-10-27 15:45:49.616421', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$MLLtAVIpQPt.H9C3RpXksuhnojMowRftvCpgRBM5CIkbhVEA/R6pO', '2020-10-27 15:45:49.616421', '2020-10-27 15:45:49.616421', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$5nZ5Mva1qS0Cm8F4Lypbi.nqNGGsWvQJD.3QzXRcCrcm9F.WxsWL6', '2020-10-27 15:45:49.616421', '2020-10-27 15:45:49.616421', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-27 15:45:49.630165', '2020-10-27 15:45:49.630165', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-27 15:45:49.630165', '2020-10-27 15:45:49.630165', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-27 15:45:49.630165', '2020-10-27 15:45:49.630165', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-27 15:45:49.630165', '2020-10-27 15:45:49.630165', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-27 15:45:49.630165', '2020-10-27 15:45:49.630165', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-27 15:45:49.630165', '2020-10-27 15:45:49.630165', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-27 15:45:49.637545', '2020-10-27 15:45:49.637545', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-27 15:45:49.637545', '2020-10-27 15:45:49.637545', DEFAULT, DEFAULT)[0m
  [1m[35m (17.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (58.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_property_tax_attribute
-------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_build_area
-------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.0ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon", "build_area") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-27 15:45:49.902898"], ["updated_at", "2020-10-27 15:45:49.902898"], ["admon", "500000"], ["build_area", "hola"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_because_admon_exceeds_the_maximum_valor
------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "property_tax") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-27 15:45:49.913081"], ["updated_at", "2020-10-27 15:45:49.913081"], ["build_area", "hola"], ["property_tax", "500000"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PropertyTest: test_Should_create_a_property
-------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["hood", "Belen"], ["city", "Pizza"], ["user_id", 99], ["created_at", "2020-10-27 15:45:49.925167"], ["updated_at", "2020-10-27 15:45:49.925167"]]
  [1m[35m (2.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PropertyTest: test_Should_new,_save,_and_destroy_a_property
-----------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-27 15:45:49.941176"], ["updated_at", "2020-10-27 15:45:49.941176"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_state
--------------------------------------------------------
  [1m[35m (2.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 13]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Destroy (5.3ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 13]]
  [1m[36mProperty Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProperty Create (2.1ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "state") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-27 15:45:49.964805"], ["updated_at", "2020-10-27 15:45:49.964805"], ["social_class", "5"], ["state", "holiwis"]]
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PropertyTest: test_Should_have_successfully_newd_a_property
-----------------------------------------------------------
  [1m[35m (3.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_a_valid_elevator_attribute
----------------------------------------------------------------------------------
  [1m[36mProperty Create (0.9ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-27 15:45:49.981980"], ["updated_at", "2020-10-27 15:45:49.981980"]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_a_user_id
--------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_social_class
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "social_class") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-27 15:45:49.997720"], ["updated_at", "2020-10-27 15:45:49.997720"], ["build_area", "hola"], ["social_class", "Industrial"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_elevator_attribute
---------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_admon
------------------------------------------------------
  [1m[35m (2.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.8ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-27 15:45:50.022624"], ["updated_at", "2020-10-27 15:45:50.022624"], ["admon", "7777777"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
--------------------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_the_proper_built_type
--------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_common_areas_attribute
-------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_rooms_attribute
-------------------------------------------------------------------------------
  [1m[36mProperty Create (0.9ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "common_areas") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-27 15:45:50.041502"], ["updated_at", "2020-10-27 15:45:50.041502"], ["build_area", "hola"], ["common_areas", "muchisimas"]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_social_class
----------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_rooms_attribute
------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProperty Create (1.3ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "rooms") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-27 15:45:50.057377"], ["updated_at", "2020-10-27 15:45:50.057377"], ["build_area", "hola"], ["rooms", "500"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:50 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:50 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 290ms (Views: 0.7ms | ActiveRecord: 0.6ms | Allocations: 847)
Completed 200 OK in 291ms (Views: 0.9ms | ActiveRecord: 0.8ms | Allocations: 842)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:51 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 337ms (Views: 0.5ms | ActiveRecord: 1.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 375ms (Views: 0.5ms | ActiveRecord: 1.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 302ms (Views: 2.0ms | ActiveRecord: 1.6ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-27 10:45:51 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 9ms (Views: 0.3ms | ActiveRecord: 2.6ms | Allocations: 1923)
Completed 200 OK in 335ms (Views: 1.0ms | ActiveRecord: 0.7ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-27 10:45:51 -0500
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:51 -0500
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.4ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 22ms (Views: 4.0ms | ActiveRecord: 1.5ms | Allocations: 4239)
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:51 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 273ms (Views: 0.4ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 321ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 261ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 256ms (Views: 0.9ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 264ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-10-27 10:45:52 -0500
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
Completed 200 OK in 260ms (Views: 0.5ms | ActiveRecord: 0.5ms | Allocations: 560)
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-27 10:45:52 -0500
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.7ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-10-27 15:45:52.596216"], ["updated_at", "2020-10-27 15:45:52.596216"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPhoto Load (4.6ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 19ms (Views: 0.7ms | ActiveRecord: 5.3ms | Allocations: 6318)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
[ActiveJob] Enqueued PhotoQualityJob (Job ID: 8d8559fb-d05b-4329-9323-7ddd728ba3ce) to Test(default) with arguments: 298486375
Completed 201 Created in 62ms (Views: 0.7ms | ActiveRecord: 2.3ms | Allocations: 7789)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 257ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 266ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:52 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 252ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 259ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 255ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-10-27 10:45:53 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PhotoTest: test_Should_successfully_create_a_photo
--------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPhoto Create (1.1ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.zeldadeprueba.com"], ["property_id", 2], ["created_at", "2020-10-27 15:45:53.393427"], ["updated_at", "2020-10-27 15:45:53.393427"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
PhotoTest: test_Should_create,_save_and_delete_a_property,_as_well_as_inspecting_the_link
-----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.5ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.linkdeprueba.com"], ["property_id", 1], ["created_at", "2020-10-27 15:45:53.407277"], ["updated_at", "2020-10-27 15:45:53.407277"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.3ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 298486376]]
  [1m[36mPhoto Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "photos" WHERE "photos"."property_id" = $1 LIMIT $2[0m  [["property_id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_property_id
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_url
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (5.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
Completed 200 OK in 270ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (1.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-27 10:45:53 -0500
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.7ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.4ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.2ms | ActiveRecord: 2.5ms | Allocations: 1623)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 257ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 270ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:53 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 254ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-10-27 10:45:53 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1595)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 262ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-27 10:45:54 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 7ms (Views: 1.6ms | ActiveRecord: 1.0ms | Allocations: 1859)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 260ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 282ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 254ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-27 10:45:54 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.4ms | ActiveRecord: 0.5ms | Allocations: 1433)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 267ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-27 10:45:54 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (6.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 22ms (Views: 1.1ms | ActiveRecord: 9.6ms | Allocations: 2187)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 264ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 270ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:54 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 263ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-27 10:45:55 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 11ms (Views: 0.5ms | ActiveRecord: 2.2ms | Allocations: 2621)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 262ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-10-27 10:45:55 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 123)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 280ms (Views: 0.5ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 254ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 261ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-27 10:45:55 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 4ms (Views: 1.4ms | ActiveRecord: 0.5ms | Allocations: 2065)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 250ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-10-27 10:45:55 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 15ms (Views: 0.2ms | ActiveRecord: 2.4ms | Allocations: 4450)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 269ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 252ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:55 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 264ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-10-27 10:45:56 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 5ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1595)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 250ms (Views: 1.2ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "new_name"], ["updated_at", "2020-10-27 15:45:56.229945"], ["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 270ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 268ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 262ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:56 -0500
Processing by Api::V1::UsersController#login as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 363)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 250ms (Views: 1.0ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-10-27 10:45:56 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$wtDSc1hD75x0FPgzAQ/hmePiOaLnz/uCK2mzKulNtxwdUc/t0D53S"], ["created_at", "2020-10-27 15:45:56.766052"], ["updated_at", "2020-10-27 15:45:56.766052"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 6ms (Views: 0.3ms | ActiveRecord: 1.0ms | Allocations: 1514)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:56 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 266ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 258ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 262ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-10-27 10:45:57 -0500
Processing by Api::V1::UsersController#update as JSON
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Completed 200 OK in 251ms (Views: 0.9ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-27 10:45:57 -0500
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-10-27 15:45:57.293001"], ["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 1029)
Completed 200 OK in 14ms (Views: 0.4ms | ActiveRecord: 3.0ms | Allocations: 3047)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$T7dlq5gpMQdjotqyKzv.2uzMc3tAmprk/47ptHpGQNLudFDaUcVwu"], ["created_at", "2020-10-27 15:45:57.302489"], ["updated_at", "2020-10-27 15:45:57.302489"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Destroy (1.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$DipdWeKy33leEBVOEENDD.Im3D9KoZXWVktnpVxN2KJuCQ6zIrubq"], ["created_at", "2020-10-27 15:45:57.333735"], ["updated_at", "2020-10-27 15:45:57.333735"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$WOgHdiBhgTS6nbbA6YUIlueuV5npj8oZYpsa77vvimWuDHrOC.Y9a"], ["created_at", "2020-10-27 15:45:57.349917"], ["updated_at", "2020-10-27 15:45:57.349917"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$JsHb0KIwau52/AJ5N1QJOOWyD0K3G6jcl4KceBcnSq1uwoa3/Axv6"], ["created_at", "2020-10-27 15:45:57.382473"], ["updated_at", "2020-10-27 15:45:57.382473"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$vqqkF03b/xjLurXofBB9UOtkIAFu/hXQT1wP.hccI5Lkb.yfyDWxa"], ["created_at", "2020-10-27 15:45:57.400751"], ["updated_at", "2020-10-27 15:45:57.400751"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$gowaR7Y8oelYGQq5UYU6ouq3KXzb4OVZ/N3l.zFk/k6gByuL5c0Be"], ["created_at", "2020-10-27 15:45:57.428844"], ["updated_at", "2020-10-27 15:45:57.428844"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (1.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$tsNz7XkRukAhuz.Dz8WQAe2xiKAOXrbjYrJFMoPoCCTSLbM2kgD4e"], ["created_at", "2020-10-27 15:45:57.446200"], ["updated_at", "2020-10-27 15:45:57.446200"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486381]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486381]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$xRRKbR/FUc0QN4SDiZzTsuIiORpKbC0psh0tf.g5F1pJyogf5Ss.C"], ["created_at", "2020-10-27 15:45:57.466930"], ["updated_at", "2020-10-27 15:45:57.466930"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$rc1igWoXR42o5NVhUbJesuWpZPzHpqJjwJN1WSUhhzMai.l9aq5oi"], ["created_at", "2020-10-27 15:45:57.474555"], ["updated_at", "2020-10-27 15:45:57.474555"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486383]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486383]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486382]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486382]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$xOgXkDhyjnRdm80uMYZ3CebRGdqiXiyO94lUHCnMmjLstvIp6d2zW"], ["created_at", "2020-10-27 15:45:57.498999"], ["updated_at", "2020-10-27 15:45:57.498999"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486384]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486384]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$gKUfxrZxIihvimTvzviHjuhQy45SpDEdI0OgoGHHkZI/tohpCz752"], ["created_at", "2020-10-27 15:45:57.518186"], ["updated_at", "2020-10-27 15:45:57.518186"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486385]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486385]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 284ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 263ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 261ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 269)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:57 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 250ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-27 10:45:58 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-27 15:45:58.069031"], ["updated_at", "2020-10-27 15:45:58.069031"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 8ms (Views: 0.6ms | ActiveRecord: 1.3ms | Allocations: 2629)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 264ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 260ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 261ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-27 10:45:58 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 155)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 249ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-27 10:45:58 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.6ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-10-27 15:45:58.601599"], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.6ms | ActiveRecord: 1.7ms | Allocations: 2857)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 268ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 263ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 264ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-27 10:45:58 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-10-27 15:45:58.945219"], ["updated_at", "2020-10-27 15:45:58.945219"], ["admon", "80000"], ["rooms", "3"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 10ms (Views: 0.5ms | ActiveRecord: 1.2ms | Allocations: 2750)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 255ms (Views: 0.5ms | ActiveRecord: 1.2ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-27 10:45:59 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 404 Not Found in 12ms (Views: 0.2ms | ActiveRecord: 0.9ms | Allocations: 1459)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 271ms (Views: 0.5ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 257ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 259ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-27 10:45:59 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.3ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-27 15:45:59.495520"], ["updated_at", "2020-10-27 15:45:59.495520"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 7ms (Views: 0.6ms | ActiveRecord: 1.1ms | Allocations: 2695)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 254ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-10-27 10:45:59 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 404 Not Found in 5ms (Views: 0.2ms | ActiveRecord: 0.9ms | Allocations: 1458)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 276ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 253ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:45:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 257ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-27 10:46:00 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-10-27 15:46:00.055215"], ["updated_at", "2020-10-27 15:46:00.055215"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 12ms (Views: 0.6ms | ActiveRecord: 1.2ms | Allocations: 2704)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 257ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-10-27 10:46:00 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
Completed 200 OK in 5ms (Views: 1.0ms | ActiveRecord: 1.2ms | Allocations: 1581)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 267ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 262ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 252ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-10-27 10:46:00 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
Completed 200 OK in 9ms (Views: 3.6ms | ActiveRecord: 1.8ms | Allocations: 3648)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 259ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-27 10:46:00 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.4ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-10-27 15:46:00.771661"], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 24ms (Views: 3.7ms | ActiveRecord: 1.5ms | Allocations: 2730)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 313ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 290ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:01 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 259ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-10-27 10:46:01 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Destroy (6.2ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 7.3ms | Allocations: 1544)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 256ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-10-27 10:46:01 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (3.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.8ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (12.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1055.2ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (9.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1051.3ms)[0m  [1m[35mTRUNCATE TABLE "photos", "users", "properties"[0m
  [1m[35m (3.4ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (15.0ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-27 15:46:20.746108', '2020-10-27 15:46:20.746108', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-27 15:46:20.746108', '2020-10-27 15:46:20.746108', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$ROShOvM8uzrkg3O1gSLM..K8zLKIBb6MuZu9Hy0OtRmO9OT9a5TfG', '2020-10-27 15:46:20.746108', '2020-10-27 15:46:20.746108', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$zn3sbm5I9oermewRIq.vbeNon2GzZILevRRKEky257LohrelKGt96', '2020-10-27 15:46:20.746108', '2020-10-27 15:46:20.746108', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$QQiifujhKzkueNdl.oWqbeHTFdgbiDdhk8WRlCpAJQxaYYRFp9p2e', '2020-10-27 15:46:20.746108', '2020-10-27 15:46:20.746108', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-27 15:46:20.752793', '2020-10-27 15:46:20.752793', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-27 15:46:20.752793', '2020-10-27 15:46:20.752793', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-27 15:46:20.752793', '2020-10-27 15:46:20.752793', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-27 15:46:20.752793', '2020-10-27 15:46:20.752793', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-27 15:46:20.752793', '2020-10-27 15:46:20.752793', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-27 15:46:20.752793', '2020-10-27 15:46:20.752793', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-27 15:46:20.758740', '2020-10-27 15:46:20.758740', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-27 15:46:20.758740', '2020-10-27 15:46:20.758740', DEFAULT, DEFAULT)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.2ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-27 15:46:20.783287', '2020-10-27 15:46:20.783287', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-27 15:46:20.783287', '2020-10-27 15:46:20.783287', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$VaPpHMfaOSH6kHAB/5s1He1K86VDLA6ts2Mn.uiYVCPbNr4z5GCQG', '2020-10-27 15:46:20.783287', '2020-10-27 15:46:20.783287', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$zFjRAFL8pL38abpuyQu2vOqLcdY941CqbUfGHeeDMi7fFMF6CUIt.', '2020-10-27 15:46:20.783287', '2020-10-27 15:46:20.783287', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$yaHiNzr062nksu5FtRK./upm9q59/ISTp8VcJequq4jEfIfAY7McG', '2020-10-27 15:46:20.783287', '2020-10-27 15:46:20.783287', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-27 15:46:20.789550', '2020-10-27 15:46:20.789550', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-27 15:46:20.789550', '2020-10-27 15:46:20.789550', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-27 15:46:20.789550', '2020-10-27 15:46:20.789550', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-27 15:46:20.789550', '2020-10-27 15:46:20.789550', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-27 15:46:20.789550', '2020-10-27 15:46:20.789550', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-27 15:46:20.789550', '2020-10-27 15:46:20.789550', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum") VALUES (1, 'http://image', 10, '2020-10-27 15:46:20.795311', '2020-10-27 15:46:20.795311', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-27 15:46:20.795311', '2020-10-27 15:46:20.795311', DEFAULT, DEFAULT)[0m
  [1m[35m (36.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (12.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_property_id
---------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
PhotoTest: test_Should_create,_save_and_delete_a_property,_as_well_as_inspecting_the_link
-----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PhotoTest: test_Should_successfully_create_a_photo
--------------------------------------------------
  [1m[36mProperty Load (1.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.7ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.zeldadeprueba.com"], ["property_id", 2], ["created_at", "2020-10-27 15:46:20.974918"], ["updated_at", "2020-10-27 15:46:20.974918"]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPhoto Create (0.6ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.linkdeprueba.com"], ["property_id", 1], ["created_at", "2020-10-27 15:46:20.978853"], ["updated_at", "2020-10-27 15:46:20.978853"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_url
-------------------------------------------------------
  [1m[36mPhoto Destroy (0.3ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 298486375]]
  [1m[36mPhoto Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "photos" WHERE "photos"."property_id" = $1 LIMIT $2[0m  [["property_id", 1], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:21 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 258ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 6321)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 265ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 6321)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 256ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-27 10:46:21 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 0.5ms | Allocations: 2150)
Completed 200 OK in 259ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:21 -0500
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 269)
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 258ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 260ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 248ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-27 10:46:22 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 13ms (Views: 0.7ms | ActiveRecord: 2.0ms | Allocations: 4100)
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 260ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:22 -0500
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-10-27 10:46:22 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$Wp9/GWWkrjOejYZyCrqXG.OTPBIQVwQEp3ogtZSrjmp/44a4QPE5m"], ["created_at", "2020-10-27 15:46:22.206094"], ["updated_at", "2020-10-27 15:46:22.206094"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 10ms (Views: 0.3ms | ActiveRecord: 2.5ms | Allocations: 2073)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:22 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 257ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:22 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 272ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:22 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 248ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-10-27 10:46:22 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 123)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:22 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 263ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:22 -0500
Processing by Api::V1::UsersController#login as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 366)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:22 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 251ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:22 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 260ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 250ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-27 10:46:23 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 1029)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 273ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-10-27 10:46:23 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 6ms (Views: 0.2ms | ActiveRecord: 0.5ms | Allocations: 1889)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 293ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 274ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 266ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-10-27 10:46:23 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 10ms (Views: 0.2ms | ActiveRecord: 1.9ms | Allocations: 4458)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 268ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-27 10:46:23 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 4ms (Views: 2.0ms | ActiveRecord: 0.5ms | Allocations: 2065)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 261ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 256ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 261ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-10-27 10:46:24 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (7.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 27ms (Views: 0.2ms | ActiveRecord: 7.3ms | Allocations: 1595)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 273ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "new_name"], ["updated_at", "2020-10-27 15:46:24.411204"], ["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 276ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 266ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 254ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 560)
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-10-27 10:46:24 -0500
Processing by Api::V1::UsersController#update as JSON
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-10-27 15:46:24.937825"], ["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 1.0ms | ActiveRecord: 1.5ms | Allocations: 2533)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 265ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-27 10:46:24 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.6ms | ActiveRecord: 0.7ms | Allocations: 1433)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 265ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 272ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 247ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-27 10:46:25 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 8ms (Views: 0.6ms | ActiveRecord: 1.6ms | Allocations: 2367)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 267ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 254ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 261ms (Views: 0.3ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-27 10:46:25 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1631)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 254ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 286ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 253ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-27 10:46:26 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.2ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 6ms (Views: 1.5ms | ActiveRecord: 1.3ms | Allocations: 2019)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 262ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 269ms (Views: 0.5ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 262ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-27 10:46:26 -0500
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.3ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.3ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 1.3ms | Allocations: 1625)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 250ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 266ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 250ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-10-27 10:46:27 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:27 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 259ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:27 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 251ms (Views: 0.6ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:27 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 255ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-27 10:46:27 -0500
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.3ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.5ms | ActiveRecord: 0.8ms | Allocations: 1445)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$xiF2W7zyRyzglZ4f2QwFDu1lQD9Y.4KBgvpveLVqGEyI.JhbNjJxu"], ["created_at", "2020-10-27 15:46:27.439279"], ["updated_at", "2020-10-27 15:46:27.439279"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$zVoWd6431sxii1m1SenV/eI0RZrNGVpBkPDEVdQ5PaPJ6gnreHur6"], ["created_at", "2020-10-27 15:46:27.475070"], ["updated_at", "2020-10-27 15:46:27.475070"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Destroy (1.9ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$ntjO01RZJb3AYnMulIElKOX/r3641YtFykw4Ccw4I1DS4vtXsnvbe"], ["created_at", "2020-10-27 15:46:27.506733"], ["updated_at", "2020-10-27 15:46:27.506733"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (5.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$Bi.YaRgeOhbjjT7NkZineuAVgxfIBc5KBnvJwJ2v.pzSOAF/abjzC"], ["created_at", "2020-10-27 15:46:27.537681"], ["updated_at", "2020-10-27 15:46:27.537681"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (1.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Destroy (0.9ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 263ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:27 -0500
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$JsGNMIccImG6NCwt595X7..UwxKjYPPq2aClBsBrXWx7t1BIWohO2"], ["created_at", "2020-10-27 15:46:27.574767"], ["updated_at", "2020-10-27 15:46:27.574767"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[35m (5.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$k3zsbtQp7/djuzyjckUmDexQ9dwPQRUaV0wEQLnP.ybyt.ZAaFYfa"], ["created_at", "2020-10-27 15:46:27.601279"], ["updated_at", "2020-10-27 15:46:27.601279"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$JiEY8xBuZ1rIjp5bp76Ja.yGxhwiboaS2H54LOZlJSzzFGaHub8v6"], ["created_at", "2020-10-27 15:46:27.609052"], ["updated_at", "2020-10-27 15:46:27.609052"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486382]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486382]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486381]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486381]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$c5/GNjEIfsBtuauvQhNsZ.Wm60Y.4B3TavR4eDA7jU3eylv6IvyRK"], ["created_at", "2020-10-27 15:46:27.630242"], ["updated_at", "2020-10-27 15:46:27.630242"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486383]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486383]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$BIvn6Mmn/NHOtI3eEUaYkOQo0Y0iQetUZpC7OsVthF2/piGfSErZ."], ["created_at", "2020-10-27 15:46:27.659442"], ["updated_at", "2020-10-27 15:46:27.659442"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486384]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486384]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$b9Iv0oNjMSVnPyTANYjI7eRePWpCEtCLPRGXVAFnoUtsh/OwE9foC"], ["created_at", "2020-10-27 15:46:27.684878"], ["updated_at", "2020-10-27 15:46:27.684878"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486385]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486385]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$HJENhhoVsO3Zbf.6sLLpD.APmfly2WoyAxHdFESiSjZkBLck2Tl/a"], ["created_at", "2020-10-27 15:46:27.715104"], ["updated_at", "2020-10-27 15:46:27.715104"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486386]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486386]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:27 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 267ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-10-27 10:46:27 -0500
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.5ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-10-27 15:46:27.847584"], ["updated_at", "2020-10-27 15:46:27.847584"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued PhotoQualityJob (Job ID: 1ef40ca7-84b7-4897-a724-3ef3b629ed04) to Test(default) with arguments: 298486376
Completed 201 Created in 11ms (Views: 0.4ms | ActiveRecord: 2.8ms | Allocations: 2758)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:27 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 286ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 271ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 271ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-10-27 10:46:28 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Destroy (0.5ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.5ms | Allocations: 1707)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 270ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-10-27 10:46:28 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
Completed 200 OK in 9ms (Views: 3.9ms | ActiveRecord: 1.2ms | Allocations: 3725)
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 274ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 272ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 262ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-27 10:46:28 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.5ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-10-27 15:46:28.868620"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.6ms | ActiveRecord: 1.6ms | Allocations: 3434)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 266ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-27 10:46:28 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 265ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 261ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 253ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-27 10:46:29 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-10-27 15:46:29.410639"], ["updated_at", "2020-10-27 15:46:29.410639"], ["admon", "80000"], ["rooms", "3"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 7ms (Views: 0.8ms | ActiveRecord: 1.2ms | Allocations: 2759)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 263ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-27 10:46:29 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-27 15:46:29.532668"], ["updated_at", "2020-10-27 15:46:29.532668"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 9ms (Views: 0.5ms | ActiveRecord: 1.2ms | Allocations: 3371)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 258ms (Views: 0.9ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 260ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 252ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-10-27 10:46:29 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 404 Not Found in 7ms (Views: 0.6ms | ActiveRecord: 1.1ms | Allocations: 1458)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 265ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-27 10:46:30 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (6.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.6ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-10-27 15:46:30.080217"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 17ms (Views: 0.5ms | ActiveRecord: 8.3ms | Allocations: 2744)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 269ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 267ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 261ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 561)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-27 10:46:30 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (1.3ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-10-27 15:46:30.539781"], ["updated_at", "2020-10-27 15:46:30.539781"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 16ms (Views: 1.4ms | ActiveRecord: 2.7ms | Allocations: 2705)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 258ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-10-27 10:46:30 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 262ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 252ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 261ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-10-27 10:46:31 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
Completed 200 OK in 5ms (Views: 1.0ms | ActiveRecord: 0.8ms | Allocations: 1581)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 253ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-27 10:46:31 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 404 Not Found in 6ms (Views: 0.4ms | ActiveRecord: 1.0ms | Allocations: 1458)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_the_proper_built_type
--------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_rooms_attribute
------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "rooms") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-27 15:46:31.168816"], ["updated_at", "2020-10-27 15:46:31.168816"], ["build_area", "hola"], ["rooms", "500"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_rooms_attribute
-------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PropertyTest: test_Should_have_successfully_newd_a_property
-----------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.0ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-27 15:46:31.184917"], ["updated_at", "2020-10-27 15:46:31.184917"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_social_class
----------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_a_user_id
--------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PropertyTest: test_Should_create_a_property
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["hood", "Belen"], ["city", "Pizza"], ["user_id", 99], ["created_at", "2020-10-27 15:46:31.203467"], ["updated_at", "2020-10-27 15:46:31.203467"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_common_areas_attribute
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "common_areas") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-27 15:46:31.226398"], ["updated_at", "2020-10-27 15:46:31.226398"], ["build_area", "hola"], ["common_areas", "muchisimas"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_social_class
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.3ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "social_class") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-27 15:46:31.231820"], ["updated_at", "2020-10-27 15:46:31.231820"], ["build_area", "hola"], ["social_class", "Industrial"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_admon
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-27 15:46:31.236901"], ["updated_at", "2020-10-27 15:46:31.236901"], ["admon", "7777777"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_a_valid_elevator_attribute
----------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (4.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_build_area
-------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon", "build_area") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-27 15:46:31.264686"], ["updated_at", "2020-10-27 15:46:31.264686"], ["admon", "500000"], ["build_area", "hola"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_property_tax_attribute
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "property_tax") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-27 15:46:31.272431"], ["updated_at", "2020-10-27 15:46:31.272431"], ["build_area", "hola"], ["property_tax", "500000"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PropertyTest: test_Should_new,_save,_and_destroy_a_property
-----------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-27 15:46:31.289703"], ["updated_at", "2020-10-27 15:46:31.289703"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (15.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 20]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[36mProperty Destroy (0.9ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 20]]
  [1m[36mProperty Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_state
--------------------------------------------------------
  [1m[35m (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "state") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-27 15:46:31.331439"], ["updated_at", "2020-10-27 15:46:31.331439"], ["social_class", "5"], ["state", "holiwis"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (8.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_because_admon_exceeds_the_maximum_valor
------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 305ms (Views: 1.2ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 10:46:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 264ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-27 10:46:31 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-27 15:46:31.686182"], ["updated_at", "2020-10-27 15:46:31.686182"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 9ms (Views: 0.6ms | ActiveRecord: 1.5ms | Allocations: 2578)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (366.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lahaus_api_test"[0m
  [1m[35m (3322.4ms)[0m  [1m[35mCREATE DATABASE "lahaus_api_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.9ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "photos" CASCADE[0m
  [1m[35m (106.1ms)[0m  [1m[35mCREATE TABLE "photos" ("id" bigserial primary key, "url" character varying, "property_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "accepted_foc" boolean, "accepted_lum" boolean, "location" character varying)[0m
  [1m[35m (55.0ms)[0m  [1m[35mCREATE  INDEX  "index_photos_on_property_id" ON "photos"  ("property_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "properties" CASCADE[0m
  [1m[35m (105.7ms)[0m  [1m[35mCREATE TABLE "properties" ("id" bigserial primary key, "project" character varying, "built_type" character varying, "price" character varying, "address" character varying, "apt" character varying, "hood" character varying, "city" character varying, "private_area" character varying, "user_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "admon" character varying, "build_area" character varying, "social_class" character varying, "state" character varying, "elevator" boolean, "common_areas" character varying, "property_tax" character varying, "rooms" character varying, "bathrooms" character varying, "half_bathrooms" character varying, "parking_lot" character varying, "utility_room" boolean, "empty_property" boolean, "inhabitants" boolean, "rent" character varying, "rent_desition" boolean, "mortgage" boolean)[0m
  [1m[35m (58.1ms)[0m  [1m[35mCREATE  INDEX  "index_properties_on_built_type" ON "properties"  ("built_type")[0m
  [1m[35m (55.7ms)[0m  [1m[35mCREATE  INDEX  "index_properties_on_city" ON "properties"  ("city")[0m
  [1m[35m (59.5ms)[0m  [1m[35mCREATE  INDEX  "index_properties_on_hood" ON "properties"  ("hood")[0m
  [1m[35m (45.6ms)[0m  [1m[35mCREATE  INDEX  "index_properties_on_price" ON "properties"  ("price")[0m
  [1m[35m (71.7ms)[0m  [1m[35mCREATE  INDEX  "index_properties_on_user_id" ON "properties"  ("user_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (105.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "password_digest" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "isadmin" boolean DEFAULT FALSE, "full_name" character varying, "cellphone" character varying)[0m
  [1m[35m (56.7ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (20.9ms)[0m  [1m[35mALTER TABLE "photos" ADD CONSTRAINT "fk_rails_0d5710f200"
FOREIGN KEY ("property_id")
  REFERENCES "properties" ("id")
[0m
  [1m[35m (8.7ms)[0m  [1m[35mALTER TABLE "properties" ADD CONSTRAINT "fk_rails_e41321a67c"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (82.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (3.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (6.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20201027163321)[0m
  [1m[35m (10.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20200920140300),
(20200920142212),
(20200928162141),
(20200928194359),
(20200928195320),
(20200929012706),
(20200929014510),
(20201005185525),
(20201011142729),
(20201011143722),
(20201013003510),
(20201013005654),
(20201015003144),
(20201023123247),
(20201023123904);

[0m
  [1m[35m (115.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2020-10-27 16:38:29.389577"], ["updated_at", "2020-10-27 16:38:29.389577"]]
  [1m[35m (12.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "8873cb05aa47faba6095eeed1c7c90c712c6a7d6"], ["created_at", "2020-10-27 16:38:29.407466"], ["updated_at", "2020-10-27 16:38:29.407466"]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (625.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lahaus_api_test-0"[0m
  [1m[35m (683.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lahaus_api_test-1"[0m
  [1m[35m (1319.0ms)[0m  [1m[35mCREATE DATABASE "lahaus_api_test-0" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.5ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "photos" CASCADE[0m
  [1m[35m (1446.6ms)[0m  [1m[35mCREATE DATABASE "lahaus_api_test-1" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (170.6ms)[0m  [1m[35mCREATE TABLE "photos" ("id" bigserial primary key, "url" character varying, "property_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "accepted_foc" boolean, "accepted_lum" boolean, "location" character varying)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "photos" CASCADE[0m
  [1m[35m (87.5ms)[0m  [1m[35mCREATE  INDEX  "index_photos_on_property_id" ON "photos"  ("property_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "properties" CASCADE[0m
  [1m[35m (184.6ms)[0m  [1m[35mCREATE TABLE "photos" ("id" bigserial primary key, "url" character varying, "property_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "accepted_foc" boolean, "accepted_lum" boolean, "location" character varying)[0m
  [1m[35m (158.8ms)[0m  [1m[35mCREATE TABLE "properties" ("id" bigserial primary key, "project" character varying, "built_type" character varying, "price" character varying, "address" character varying, "apt" character varying, "hood" character varying, "city" character varying, "private_area" character varying, "user_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "admon" character varying, "build_area" character varying, "social_class" character varying, "state" character varying, "elevator" boolean, "common_areas" character varying, "property_tax" character varying, "rooms" character varying, "bathrooms" character varying, "half_bathrooms" character varying, "parking_lot" character varying, "utility_room" boolean, "empty_property" boolean, "inhabitants" boolean, "rent" character varying, "rent_desition" boolean, "mortgage" boolean)[0m
  [1m[35m (75.7ms)[0m  [1m[35mCREATE  INDEX  "index_photos_on_property_id" ON "photos"  ("property_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "properties" CASCADE[0m
  [1m[35m (80.0ms)[0m  [1m[35mCREATE  INDEX  "index_properties_on_built_type" ON "properties"  ("built_type")[0m
  [1m[35m (148.4ms)[0m  [1m[35mCREATE TABLE "properties" ("id" bigserial primary key, "project" character varying, "built_type" character varying, "price" character varying, "address" character varying, "apt" character varying, "hood" character varying, "city" character varying, "private_area" character varying, "user_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "admon" character varying, "build_area" character varying, "social_class" character varying, "state" character varying, "elevator" boolean, "common_areas" character varying, "property_tax" character varying, "rooms" character varying, "bathrooms" character varying, "half_bathrooms" character varying, "parking_lot" character varying, "utility_room" boolean, "empty_property" boolean, "inhabitants" boolean, "rent" character varying, "rent_desition" boolean, "mortgage" boolean)[0m
  [1m[35m (84.7ms)[0m  [1m[35mCREATE  INDEX  "index_properties_on_city" ON "properties"  ("city")[0m
  [1m[35m (100.8ms)[0m  [1m[35mCREATE  INDEX  "index_properties_on_built_type" ON "properties"  ("built_type")[0m
  [1m[35m (100.5ms)[0m  [1m[35mCREATE  INDEX  "index_properties_on_hood" ON "properties"  ("hood")[0m
  [1m[35m (98.9ms)[0m  [1m[35mCREATE  INDEX  "index_properties_on_city" ON "properties"  ("city")[0m
  [1m[35m (107.8ms)[0m  [1m[35mCREATE  INDEX  "index_properties_on_price" ON "properties"  ("price")[0m
  [1m[35m (108.3ms)[0m  [1m[35mCREATE  INDEX  "index_properties_on_hood" ON "properties"  ("hood")[0m
  [1m[35m (97.3ms)[0m  [1m[35mCREATE  INDEX  "index_properties_on_user_id" ON "properties"  ("user_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (110.2ms)[0m  [1m[35mCREATE  INDEX  "index_properties_on_price" ON "properties"  ("price")[0m
  [1m[35m (200.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "password_digest" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "isadmin" boolean DEFAULT FALSE, "full_name" character varying, "cellphone" character varying)[0m
  [1m[35m (103.9ms)[0m  [1m[35mCREATE  INDEX  "index_properties_on_user_id" ON "properties"  ("user_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (101.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (53.1ms)[0m  [1m[35mALTER TABLE "photos" ADD CONSTRAINT "fk_rails_0d5710f200"
FOREIGN KEY ("property_id")
  REFERENCES "properties" ("id")
[0m
  [1m[35m (160.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "password_digest" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "isadmin" boolean DEFAULT FALSE, "full_name" character varying, "cellphone" character varying)[0m
  [1m[35m (19.5ms)[0m  [1m[35mALTER TABLE "properties" ADD CONSTRAINT "fk_rails_e41321a67c"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (107.8ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (52.5ms)[0m  [1m[35mALTER TABLE "photos" ADD CONSTRAINT "fk_rails_0d5710f200"
FOREIGN KEY ("property_id")
  REFERENCES "properties" ("id")
[0m
  [1m[35m (168.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (20.1ms)[0m  [1m[35mALTER TABLE "properties" ADD CONSTRAINT "fk_rails_e41321a67c"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (41.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20201027163321)[0m
  [1m[35m (45.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20200920140300),
(20200920142212),
(20200928162141),
(20200928194359),
(20200928195320),
(20200929012706),
(20200929014510),
(20201005185525),
(20201011142729),
(20201011143722),
(20201013003510),
(20201013005654),
(20201015003144),
(20201023123247),
(20201023123904);

[0m
  [1m[35m (108.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (21.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20201027163321)[0m
  [1m[35m (42.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20200920140300),
(20200920142212),
(20200928162141),
(20200928194359),
(20200928195320),
(20200929012706),
(20200929014510),
(20201005185525),
(20201011142729),
(20201011143722),
(20201013003510),
(20201013005654),
(20201015003144),
(20201023123247),
(20201023123904);

[0m
  [1m[35m (112.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2020-10-27 16:38:33.526352"], ["updated_at", "2020-10-27 16:38:33.526352"]]
  [1m[35m (35.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.7ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "8873cb05aa47faba6095eeed1c7c90c712c6a7d6"], ["created_at", "2020-10-27 16:38:33.582896"], ["updated_at", "2020-10-27 16:38:33.582896"]]
  [1m[35m (151.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (45.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2020-10-27 16:38:33.682277"], ["updated_at", "2020-10-27 16:38:33.682277"]]
  [1m[35m (10.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "8873cb05aa47faba6095eeed1c7c90c712c6a7d6"], ["created_at", "2020-10-27 16:38:33.704711"], ["updated_at", "2020-10-27 16:38:33.704711"]]
  [1m[35m (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.5ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-27 16:38:34.452751', '2020-10-27 16:38:34.452751', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-27 16:38:34.452751', '2020-10-27 16:38:34.452751', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$az.Om81zPGsnwMr0cFNWguhiH73NInTHyiJGTq7GwFXzKmTjfb4l2', '2020-10-27 16:38:34.452751', '2020-10-27 16:38:34.452751', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$RnCkJsrlQzPBedd1N5LLnO2WRsrv3lw2sAfvoOf4DrWbW1mlrHZ2a', '2020-10-27 16:38:34.452751', '2020-10-27 16:38:34.452751', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$f9GShGQ9ZjhJtXUq7L1ys.cEwqK71D/ix8/eQfAEJ2BszdZr6RJrC', '2020-10-27 16:38:34.452751', '2020-10-27 16:38:34.452751', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-27 16:38:34.458504', '2020-10-27 16:38:34.458504', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-27 16:38:34.458504', '2020-10-27 16:38:34.458504', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-27 16:38:34.458504', '2020-10-27 16:38:34.458504', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-27 16:38:34.458504', '2020-10-27 16:38:34.458504', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-27 16:38:34.458504', '2020-10-27 16:38:34.458504', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-27 16:38:34.458504', '2020-10-27 16:38:34.458504', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum", "location") VALUES (1, 'http://image', 10, '2020-10-27 16:38:34.462336', '2020-10-27 16:38:34.462336', DEFAULT, DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-27 16:38:34.462336', '2020-10-27 16:38:34.462336', DEFAULT, DEFAULT, DEFAULT)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.7ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "properties";
DELETE FROM "photos";
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone") VALUES (99, 'email@email.com', '1234', '2020-10-27 16:38:34.472697', '2020-10-27 16:38:34.472697', DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-10-27 16:38:34.472697', '2020-10-27 16:38:34.472697', DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$4Py7SJ3KwEHj7sgRn0OVbeeqMW5jaiJIVZNj7utB.BH82NCvS/kwm', '2020-10-27 16:38:34.472697', '2020-10-27 16:38:34.472697', FALSE, 'ejemplo1', DEFAULT), (101, 'admin@mail.com', '$2a$12$xAEUkh7oJKFI0c/JWsMyFuCKIcCxyJIXwbVzk8.ItWASaG59Ex64.', '2020-10-27 16:38:34.472697', '2020-10-27 16:38:34.472697', TRUE, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$AM3IuKucWftEW1fcus1nou2b5t4QoSJN5ZK9q8Kezlg3RaDxB4Aji', '2020-10-27 16:38:34.472697', '2020-10-27 16:38:34.472697', FALSE, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-27 16:38:34.478842', '2020-10-27 16:38:34.478842', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-27 16:38:34.478842', '2020-10-27 16:38:34.478842', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-27 16:38:34.478842', '2020-10-27 16:38:34.478842', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-10-27 16:38:34.478842', '2020-10-27 16:38:34.478842', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-10-27 16:38:34.478842', '2020-10-27 16:38:34.478842', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-10-27 16:38:34.478842', '2020-10-27 16:38:34.478842', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum", "location") VALUES (1, 'http://image', 10, '2020-10-27 16:38:34.482866', '2020-10-27 16:38:34.482866', DEFAULT, DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-10-27 16:38:34.482866', '2020-10-27 16:38:34.482866', DEFAULT, DEFAULT, DEFAULT)[0m
  [1m[35m (48.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (44.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.8ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:34 -0500
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 259ms (Views: 0.9ms | ActiveRecord: 0.5ms | Allocations: 6405)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:34 -0500
Completed 200 OK in 254ms (Views: 1.1ms | ActiveRecord: 0.4ms | Allocations: 6405)
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 244ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Completed 200 OK in 248ms (Views: 0.4ms | ActiveRecord: 1.1ms | Allocations: 560)
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-10-27 11:38:35 -0500
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-27 11:38:35 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
[31mUnpermitted parameter: :format[0m
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 15ms (Views: 0.2ms | ActiveRecord: 1.9ms | Allocations: 5475)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (1.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
Completed 204 No Content in 22ms (Views: 0.7ms | ActiveRecord: 2.6ms | Allocations: 6668)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:35 -0500
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 264ms (Views: 0.4ms | ActiveRecord: 2.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 262ms (Views: 0.4ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 248ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-10-27 11:38:35 -0500
Processing by Api::V1::UsersController#update as JSON
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
Completed 200 OK in 246ms (Views: 1.1ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-27 11:38:35 -0500
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 1.7ms | ActiveRecord: 0.7ms | Allocations: 2065)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-10-27 16:38:35.737146"], ["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 0.4ms | ActiveRecord: 1.7ms | Allocations: 2818)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:35 -0500
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 249ms (Views: 1.1ms | ActiveRecord: 0.5ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 250ms (Views: 0.4ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 245ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-27 11:38:36 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 247ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 560)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-10-27 11:38:36 -0500
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 7ms (Views: 0.5ms | ActiveRecord: 0.7ms | Allocations: 1859)
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.5ms | Allocations: 1433)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:36 -0500
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 248ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 250ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 246ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "new_name"], ["updated_at", "2020-10-27 16:38:36.760566"], ["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 248ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 269)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:36 -0500
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 262ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 264ms (Views: 0.4ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 257ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-10-27 11:38:37 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 1032)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:37 -0500
Completed 200 OK in 259ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-10-27 11:38:37 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 20ms (Views: 0.9ms | ActiveRecord: 2.8ms | Allocations: 5939)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 248ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 252ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 245ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-10-27 11:38:37 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$zSGbFCWBHQ7B2nLvzhlhdeD0FZ7Vd9BRILoj6uGTno1ju0Q4VInPG"], ["created_at", "2020-10-27 16:38:37.806960"], ["updated_at", "2020-10-27 16:38:37.806960"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 5ms (Views: 0.3ms | ActiveRecord: 0.9ms | Allocations: 1517)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 249ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-10-27 11:38:37 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 1598)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 251ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 251ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 245ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:38 -0500
Processing by Api::V1::UsersController#login as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 362)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 247ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-10-27 11:38:38 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 1595)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
PhotoTest: test_Should_create,_save_and_delete_a_property,_as_well_as_inspecting_the_link
-----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.5ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.linkdeprueba.com"], ["property_id", 1], ["created_at", "2020-10-27 16:38:38.411827"], ["updated_at", "2020-10-27 16:38:38.411827"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.3ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 298486375]]
  [1m[36mPhoto Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "photos" WHERE "photos"."property_id" = $1 LIMIT $2[0m  [["property_id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_property_id
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_url
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PhotoTest: test_Should_successfully_create_a_photo
--------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.5ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.zeldadeprueba.com"], ["property_id", 2], ["created_at", "2020-10-27 16:38:38.435921"], ["updated_at", "2020-10-27 16:38:38.435921"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_build_area
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon", "build_area") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-27 16:38:38.444355"], ["updated_at", "2020-10-27 16:38:38.444355"], ["admon", "500000"], ["build_area", "hola"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_social_class
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PropertyTest: test_Should_new,_save,_and_destroy_a_property
-----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.3ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-27 16:38:38.456847"], ["updated_at", "2020-10-27 16:38:38.456847"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 12]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[36mProperty Destroy (1.5ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 12]]
  [1m[36mProperty Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_rooms_attribute
------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.4ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "rooms") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-27 16:38:38.476576"], ["updated_at", "2020-10-27 16:38:38.476576"], ["build_area", "hola"], ["rooms", "500"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_rooms_attribute
-------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_admon
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (2.1ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-27 16:38:38.492412"], ["updated_at", "2020-10-27 16:38:38.492412"], ["admon", "7777777"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PropertyTest: test_Should_have_successfully_newd_a_property
-----------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-10-27 16:38:38.507009"], ["updated_at", "2020-10-27 16:38:38.507009"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_state
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.3ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "state") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-27 16:38:38.521035"], ["updated_at", "2020-10-27 16:38:38.521035"], ["social_class", "5"], ["state", "holiwis"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_property_tax_attribute
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.9ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "property_tax") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-27 16:38:38.526612"], ["updated_at", "2020-10-27 16:38:38.526612"], ["build_area", "hola"], ["property_tax", "500000"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_a_valid_elevator_attribute
----------------------------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_the_proper_built_type
--------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_social_class
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "social_class") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-27 16:38:38.558668"], ["updated_at", "2020-10-27 16:38:38.558668"], ["build_area", "hola"], ["social_class", "Industrial"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_a_user_id
--------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PropertyTest: test_Should_create_a_property
-------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
Completed 200 OK in 261ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
  [1m[36mProperty Create (2.4ms)[0m  [1m[32mINSERT INTO "properties" ("hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["hood", "Belen"], ["city", "Pizza"], ["user_id", 99], ["created_at", "2020-10-27 16:38:38.581213"], ["updated_at", "2020-10-27 16:38:38.581213"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:38 -0500
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
------------------------------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_because_admon_exceeds_the_maximum_valor
------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_common_areas_attribute
-------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "common_areas") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-10-27 16:38:38.602860"], ["updated_at", "2020-10-27 16:38:38.602860"], ["build_area", "hola"], ["common_areas", "muchisimas"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$hbAf.kC9FxklRyKje/vY3eIZ2Ml23o3PLyPpbA1e/Ya2b.Yuuxtji"], ["created_at", "2020-10-27 16:38:38.619662"], ["updated_at", "2020-10-27 16:38:38.619662"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$xoL/9VALdFYKZ4ZfonqPhO7utSKUsf8zEAHSuENsOt3tp053se/fe"], ["created_at", "2020-10-27 16:38:38.634185"], ["updated_at", "2020-10-27 16:38:38.634185"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$i7d.7rOhMPCnrOrppmCBgeDExJA8LRdJQT8KPr3QGZk4.pLcZjeda"], ["created_at", "2020-10-27 16:38:38.667289"], ["updated_at", "2020-10-27 16:38:38.667289"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$u91/AsWN16g3rk9Bf7xLB..wcaw3rquki99aytrRjhSPTb7zEIK1e"], ["created_at", "2020-10-27 16:38:38.681298"], ["updated_at", "2020-10-27 16:38:38.681298"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$00sYz69ap00CFWeKKMu5Ze.FKd0vnpThgVUWGVcRpe6JZJP0L0BwK"], ["created_at", "2020-10-27 16:38:38.698285"], ["updated_at", "2020-10-27 16:38:38.698285"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$VO2QHrfnu8vvuUeYS1IlPOvb85qhXW2HLBWaFUedq0MZJB3tZu79K"], ["created_at", "2020-10-27 16:38:38.720168"], ["updated_at", "2020-10-27 16:38:38.720168"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$As0VVfcbNGu1Dp8PoYqCc.rZk3xquwA0MQ4/LGSOUcAwslA.vrwjC"], ["created_at", "2020-10-27 16:38:38.725988"], ["updated_at", "2020-10-27 16:38:38.725988"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486381]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486381]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[36mUser Destroy (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$60VXn3eqvCsxI2Xmp0qgYuPga3XXxOhRkSyjV/8dgWt6ygNS2b/1m"], ["created_at", "2020-10-27 16:38:38.743277"], ["updated_at", "2020-10-27 16:38:38.743277"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486382]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486382]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$j/22xK3Dy.X1eQN1MFQsEeOP002H/KclAiX8reVjxmGUoKhAY3R1u"], ["created_at", "2020-10-27 16:38:38.759334"], ["updated_at", "2020-10-27 16:38:38.759334"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486383]]
  [1m[36mUser Destroy (1.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486383]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$1BPYBkpUxqn6IojxYs4q1OfFLvRMuglbd15Ne.shx25DrEaDq2pRi"], ["created_at", "2020-10-27 16:38:38.785926"], ["updated_at", "2020-10-27 16:38:38.785926"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486384]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486384]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$8hQ933B1pPgUzR0PkP9iYuIQtJGpWgDGg4s3iECLMPiDT5RQ0mtVO"], ["created_at", "2020-10-27 16:38:38.806413"], ["updated_at", "2020-10-27 16:38:38.806413"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486385]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486385]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 263ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-10-27 11:38:38 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 249ms (Views: 1.0ms | ActiveRecord: 0.2ms | Allocations: 569)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 250ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 245ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-27 11:38:39 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.3ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-10-27 16:38:39.325037"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.5ms | ActiveRecord: 1.2ms | Allocations: 2908)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 254ms (Views: 1.3ms | ActiveRecord: 0.2ms | Allocations: 560)
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-10-27 11:38:39 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 404 Not Found in 6ms (Views: 0.4ms | ActiveRecord: 0.8ms | Allocations: 1624)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 265ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 262ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 246ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-10-27 11:38:39 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 248ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-10-27 11:38:39 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.5ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-10-27 16:38:39.938526"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 40ms (Views: 0.4ms | ActiveRecord: 1.4ms | Allocations: 24475)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 252ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 247ms (Views: 1.0ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 245ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-10-27 11:38:40 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Destroy (0.5ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 1.6ms | Allocations: 1538)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 247ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-27 11:38:40 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-27 16:38:40.451044"], ["updated_at", "2020-10-27 16:38:40.451044"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 6ms (Views: 0.4ms | ActiveRecord: 1.1ms | Allocations: 2715)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 257ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 249ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 247ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-27 11:38:40 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-10-27 16:38:40.887196"], ["updated_at", "2020-10-27 16:38:40.887196"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 8ms (Views: 0.6ms | ActiveRecord: 1.2ms | Allocations: 2697)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 247ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-27 11:38:40 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 404 Not Found in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1458)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 255ms (Views: 0.4ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 247ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 246ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-27 11:38:41 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-10-27 16:38:41.409897"], ["updated_at", "2020-10-27 16:38:41.409897"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 7ms (Views: 0.6ms | ActiveRecord: 1.1ms | Allocations: 2572)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 248ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-10-27 11:38:41 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 251ms (Views: 0.4ms | ActiveRecord: 0.4ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 248ms (Views: 1.0ms | ActiveRecord: 0.6ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 248ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-10-27 11:38:41 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-10-27 16:38:41.930528"], ["updated_at", "2020-10-27 16:38:41.930528"], ["admon", "80000"], ["rooms", "3"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 8ms (Views: 0.7ms | ActiveRecord: 1.2ms | Allocations: 2728)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 247ms (Views: 1.0ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-10-27 11:38:41 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
Completed 200 OK in 4ms (Views: 0.8ms | ActiveRecord: 0.7ms | Allocations: 1583)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 261ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 261ms (Views: 0.4ms | ActiveRecord: 0.5ms | Allocations: 570)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 260ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-10-27 11:38:42 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
Completed 200 OK in 7ms (Views: 3.2ms | ActiveRecord: 0.9ms | Allocations: 3649)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 260ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 252ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 250ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-27 11:38:42 -0500
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.2ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 10ms (Views: 0.4ms | ActiveRecord: 0.6ms | Allocations: 7080)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 249ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 250ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 247ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-10-27 11:38:43 -0500
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.2ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.3ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.2ms | Allocations: 1650)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 250ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 253ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 248ms (Views: 0.4ms | ActiveRecord: 0.4ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-27 11:38:43 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 1596)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 249ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 561)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 250ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 248ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-10-27 11:38:44 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 249ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 252ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 568)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 251ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 560)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-10-27 11:38:44 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.2ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 5ms (Views: 1.5ms | ActiveRecord: 1.0ms | Allocations: 1852)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 252ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 560)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-10-27 11:38:44 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 247ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 560)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-10-27 11:38:44 -0500
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.5ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-10-27 16:38:44.787553"], ["updated_at", "2020-10-27 16:38:44.787553"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued PhotoQualityJob (Job ID: f1b2cd57-1eee-467c-ac2a-987104d6dcef) to Test(default) with arguments: 298486377
Completed 201 Created in 10ms (Views: 0.4ms | ActiveRecord: 1.8ms | Allocations: 2766)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.8ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (118.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "lahaus_api_test"[0m
  [1m[35m (497.3ms)[0m  [1m[35mCREATE DATABASE "lahaus_api_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.7ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "photos" CASCADE[0m
  [1m[35m (49.4ms)[0m  [1m[35mCREATE TABLE "photos" ("id" bigserial primary key, "url" character varying, "property_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "accepted_foc" boolean, "accepted_lum" boolean, "location" character varying)[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE  INDEX  "index_photos_on_property_id" ON "photos"  ("property_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "properties" CASCADE[0m
  [1m[35m (14.0ms)[0m  [1m[35mCREATE TABLE "properties" ("id" bigserial primary key, "project" character varying, "built_type" character varying, "price" character varying, "address" character varying, "apt" character varying, "hood" character varying, "city" character varying, "private_area" character varying, "user_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "admon" character varying, "build_area" character varying, "social_class" character varying, "state" character varying, "elevator" boolean, "common_areas" character varying, "property_tax" character varying, "rooms" character varying, "bathrooms" character varying, "half_bathrooms" character varying, "parking_lot" character varying, "utility_room" boolean, "empty_property" boolean, "inhabitants" boolean, "rent" character varying, "rent_desition" boolean, "mortgage" boolean)[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE  INDEX  "index_properties_on_built_type" ON "properties"  ("built_type")[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE  INDEX  "index_properties_on_city" ON "properties"  ("city")[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE  INDEX  "index_properties_on_hood" ON "properties"  ("hood")[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE  INDEX  "index_properties_on_price" ON "properties"  ("price")[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE  INDEX  "index_properties_on_user_id" ON "properties"  ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "password_digest" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "isadmin" boolean DEFAULT FALSE, "full_name" character varying, "cellphone" character varying, "id_card" character varying)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (6.2ms)[0m  [1m[35mALTER TABLE "photos" ADD CONSTRAINT "fk_rails_0d5710f200"
FOREIGN KEY ("property_id")
  REFERENCES "properties" ("id")
[0m
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "properties" ADD CONSTRAINT "fk_rails_e41321a67c"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (8.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20201027220030)[0m
  [1m[35m (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20200920140300),
(20200920142212),
(20200928162141),
(20200928194359),
(20200928195320),
(20200929012706),
(20200929014510),
(20201005185525),
(20201011142729),
(20201011143722),
(20201013003510),
(20201013005654),
(20201015003144),
(20201023123247),
(20201023123904),
(20201027163321);

[0m
  [1m[35m (11.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2020-11-03 00:53:13.522395"], ["updated_at", "2020-11-03 00:53:13.522395"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "857cacb3836738b99993fbfb4e02ba9950c4a9e4"], ["created_at", "2020-11-03 00:53:13.533013"], ["updated_at", "2020-11-03 00:53:13.533013"]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.1ms)[0m  [1m[31mDELETE FROM "photos";
DELETE FROM "users";
DELETE FROM "properties";
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum", "location") VALUES (1, 'http://image', 10, '2020-11-03 00:53:14.668581', '2020-11-03 00:53:14.668581', DEFAULT, DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-11-03 00:53:14.668581', '2020-11-03 00:53:14.668581', DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone", "id_card") VALUES (99, 'email@email.com', '1234', '2020-11-03 00:53:14.675233', '2020-11-03 00:53:14.675233', DEFAULT, DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-11-03 00:53:14.675233', '2020-11-03 00:53:14.675233', DEFAULT, DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$lt80TLGWrssMrJAOS/6JF.RuqbBCtKdsacUiG64oBmeBJSvWBzLt6', '2020-11-03 00:53:14.675233', '2020-11-03 00:53:14.675233', FALSE, 'ejemplo1', DEFAULT, DEFAULT), (101, 'admin@mail.com', '$2a$12$/vzixBtAmKaHRDbb0wpKOudH1w6f21OZucjrv5g9m6YX2fxILAE4m', '2020-11-03 00:53:14.675233', '2020-11-03 00:53:14.675233', TRUE, DEFAULT, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$6q68VQx02XoMvVsqO0jfnOubZPTM9W1udDX2UEJLKOgI91MoBbNAu', '2020-11-03 00:53:14.675233', '2020-11-03 00:53:14.675233', FALSE, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-11-03 00:53:14.679931', '2020-11-03 00:53:14.679931', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-11-03 00:53:14.679931', '2020-11-03 00:53:14.679931', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-11-03 00:53:14.679931', '2020-11-03 00:53:14.679931', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-11-03 00:53:14.679931', '2020-11-03 00:53:14.679931', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-11-03 00:53:14.679931', '2020-11-03 00:53:14.679931', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-11-03 00:53:14.679931', '2020-11-03 00:53:14.679931', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:14 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 280ms (Views: 0.9ms | ActiveRecord: 0.5ms | Allocations: 7294)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:15 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 253ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 573)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:15 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 263ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 573)
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-11-02 19:53:15 -0500
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.4ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 46ms (Views: 1.4ms | ActiveRecord: 2.8ms | Allocations: 7364)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:15 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 576ms (Views: 0.6ms | ActiveRecord: 3.4ms | Allocations: 581)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:16 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 460ms (Views: 0.7ms | ActiveRecord: 2.3ms | Allocations: 573)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:16 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 247ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 573)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-11-02 19:53:17 -0500
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[36mUser Load (5.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPhoto Create (1.9ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-11-03 00:53:17.273533"], ["updated_at", "2020-11-03 00:53:17.273533"]]
  [1m[35m (2.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued PhotoQualityJob (Job ID: e47f1a69-ac67-46be-a82a-436a3dc468c1) to Test(default) with arguments: 298486375
Completed 201 Created in 166ms (Views: 0.4ms | ActiveRecord: 11.3ms | Allocations: 26219)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (3.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:17 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 443ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 581)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:17 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 242ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 573)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:17 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 262ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 573)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-11-02 19:53:18 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 11ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1605)
  [1m[35m (3.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:18 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 516ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 581)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:18 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 248ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 573)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:19 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 260ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 573)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-11-02 19:53:19 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.7ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 29ms (Views: 7.6ms | ActiveRecord: 7.1ms | Allocations: 3698)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:19 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 515ms (Views: 0.7ms | ActiveRecord: 4.3ms | Allocations: 581)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:19 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 266ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 573)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:20 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 246ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 573)
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-11-02 19:53:20 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.8ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:20 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 347ms (Views: 0.9ms | ActiveRecord: 0.3ms | Allocations: 581)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:20 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 260ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 573)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 257ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 573)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-11-02 19:53:21 -0500
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.4ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (2.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.5ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 16ms (Views: 0.2ms | ActiveRecord: 6.2ms | Allocations: 1497)
  [1m[35m (2.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$.CJL1HvihuSq2hK8U7pZKe011Zzmz70mP4OAwmokA.fof/b9XRuHC"], ["created_at", "2020-11-03 00:53:21.354145"], ["updated_at", "2020-11-03 00:53:21.354145"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$GL0mDCH.Nh2NEtacAsmkje2rVbY4z3O6PX2l5t7BGlM41yKimr92."], ["created_at", "2020-11-03 00:53:21.365121"], ["updated_at", "2020-11-03 00:53:21.365121"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (2.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (3.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
  [1m[35m (3.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (4.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$nvbHI2rq9YQ9x7aUkdEmp.Z7ridbJ3q/.OgTpP1RCvLLLCI2hXkM6"], ["created_at", "2020-11-03 00:53:21.392770"], ["updated_at", "2020-11-03 00:53:21.392770"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (5.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Destroy (1.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (1.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
  [1m[35m (5.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (2.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$JJqEOBCiMSuAcW6eDozrGur8Kn9CBfKZ1FWl2Aam4nz02Lm5Y3ch6"], ["created_at", "2020-11-03 00:53:21.441706"], ["updated_at", "2020-11-03 00:53:21.441706"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (3.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[35m (3.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (3.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$tOohrpB5ZndfEqCkPK0yBOEITZxWfPgRj31/nELhaxfgASVh0Y8Fq"], ["created_at", "2020-11-03 00:53:21.478745"], ["updated_at", "2020-11-03 00:53:21.478745"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[36mUser Destroy (1.9ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[35m (4.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$K9FU8GzkW0XsyEe4ytXCiuzo3sGryOTaV8s9F4fJqgoT06CR6JoLa"], ["created_at", "2020-11-03 00:53:21.521078"], ["updated_at", "2020-11-03 00:53:21.521078"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (2.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (3.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (1.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (3.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$.ur.8DyVIcI2lr0ySgNJX.RLcoVB1m31UCZ0Axwu1QOvFKcPUaUnu"], ["created_at", "2020-11-03 00:53:21.566808"], ["updated_at", "2020-11-03 00:53:21.566808"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (5.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486381]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486381]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
  [1m[35m (5.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$7SKnbsX1SnD0bKXa8YizmOoTzq1PJ//Ksz9edSbR4qc8VEo22mlyC"], ["created_at", "2020-11-03 00:53:21.597688"], ["updated_at", "2020-11-03 00:53:21.597688"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (3.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486382]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486382]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
  [1m[35m (5.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$8wtPEsNs.wf3zosLXanakOm/6fh5abEMOcFYqlu8POmXq9JUxxINe"], ["created_at", "2020-11-03 00:53:21.616597"], ["updated_at", "2020-11-03 00:53:21.616597"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (5.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486383]]
  [1m[36mUser Destroy (1.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486383]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[35m (3.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (3.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$T5YYs4xLnhe2Y2twUYTLqeZzg9HD5RT713iAvOPY7xjA64rEuIUNq"], ["created_at", "2020-11-03 00:53:21.647442"], ["updated_at", "2020-11-03 00:53:21.647442"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486384]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486384]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$SpT4KYme7zgLgUc1jwx6We0fP5BAoKPeMCXL1BMlChJ1stg4N96Du"], ["created_at", "2020-11-03 00:53:21.671143"], ["updated_at", "2020-11-03 00:53:21.671143"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (4.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486385]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486385]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 411ms (Views: 0.8ms | ActiveRecord: 2.5ms | Allocations: 582)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:22 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 260ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 573)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-11-02 19:53:22 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Load (2.9ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 7]]
  [1m[36mProperty Destroy (0.6ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 19ms (Views: 0.2ms | ActiveRecord: 8.0ms | Allocations: 1860)
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:22 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 529ms (Views: 1.3ms | ActiveRecord: 3.1ms | Allocations: 581)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:22 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 254ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 573)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-11-02 19:53:23 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 404 Not Found in 12ms (Views: 0.2ms | ActiveRecord: 4.0ms | Allocations: 1465)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 500ms (Views: 1.0ms | ActiveRecord: 0.2ms | Allocations: 581)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 255ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 573)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-11-02 19:53:24 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (4.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.7ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-11-03 00:53:24.062696"], ["id", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 39ms (Views: 1.1ms | ActiveRecord: 6.2ms | Allocations: 3467)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 494ms (Views: 0.9ms | ActiveRecord: 0.2ms | Allocations: 581)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 254ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 573)
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-11-02 19:53:24 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 404 Not Found in 12ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1465)
  [1m[35m (2.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 520ms (Views: 0.8ms | ActiveRecord: 0.5ms | Allocations: 581)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 276ms (Views: 0.7ms | ActiveRecord: 4.5ms | Allocations: 573)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-11-02 19:53:25 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-11-03 00:53:25.698944"], ["updated_at", "2020-11-03 00:53:25.698944"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 20ms (Views: 0.7ms | ActiveRecord: 3.8ms | Allocations: 2719)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 518ms (Views: 0.7ms | ActiveRecord: 2.5ms | Allocations: 581)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 255ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 573)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-11-02 19:53:26 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (4.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (1.2ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-11-03 00:53:26.522790"], ["updated_at", "2020-11-03 00:53:26.522790"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 21ms (Views: 0.8ms | ActiveRecord: 8.8ms | Allocations: 2578)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 510ms (Views: 0.7ms | ActiveRecord: 4.0ms | Allocations: 581)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:27 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 254ms (Views: 0.6ms | ActiveRecord: 0.5ms | Allocations: 573)
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-11-02 19:53:27 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
Completed 200 OK in 20ms (Views: 9.1ms | ActiveRecord: 0.8ms | Allocations: 3655)
  [1m[35m (2.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:27 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 506ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 581)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:27 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 244ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 573)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-11-02 19:53:28 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 370ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 581)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 249ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 573)
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-11-02 19:53:28 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 2.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 343ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 581)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 258ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 573)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-11-02 19:53:29 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (6.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (2.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
Completed 200 OK in 21ms (Views: 1.2ms | ActiveRecord: 11.8ms | Allocations: 1587)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 537ms (Views: 0.8ms | ActiveRecord: 3.6ms | Allocations: 582)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:29 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 259ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 573)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-11-02 19:53:30 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (3.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-11-03 00:53:30.263636"], ["updated_at", "2020-11-03 00:53:30.263636"], ["admon", "80000"], ["rooms", "3"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 20ms (Views: 0.7ms | ActiveRecord: 4.8ms | Allocations: 2736)
  [1m[35m (4.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 520ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 581)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:30 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 244ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 573)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-11-02 19:53:31 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (1.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (5.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.6ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-11-03 00:53:31.074053"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 22ms (Views: 1.0ms | ActiveRecord: 8.2ms | Allocations: 2725)
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 516ms (Views: 0.7ms | ActiveRecord: 3.6ms | Allocations: 581)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:31 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 250ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 573)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-11-02 19:53:31 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
  [1m[36mUser Load (4.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-11-03 00:53:31.891020"], ["updated_at", "2020-11-03 00:53:31.891020"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 24ms (Views: 0.7ms | ActiveRecord: 6.0ms | Allocations: 2704)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_common_areas_attribute
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (2.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "common_areas") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-11-03 00:53:31.908414"], ["updated_at", "2020-11-03 00:53:31.908414"], ["build_area", "hola"], ["common_areas", "muchisimas"]]
  [1m[35m (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_property_tax_attribute
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "property_tax") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-11-03 00:53:31.919601"], ["updated_at", "2020-11-03 00:53:31.919601"], ["build_area", "hola"], ["property_tax", "500000"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_social_class
----------------------------------------------------------------------------
  [1m[35m (1.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (3.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_without_a_valid_elevator_attribute
----------------------------------------------------------------------------------
  [1m[35m (3.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (2.0ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "elevator") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-11-03 00:53:31.944062"], ["updated_at", "2020-11-03 00:53:31.944062"], ["build_area", "hola"], ["elevator", true]]
  [1m[35m (5.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (5.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_because_admon_exceeds_the_maximum_valor
------------------------------------------------------------------------------------
  [1m[35m (4.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (2.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_rooms_attribute
-------------------------------------------------------------------------------
  [1m[35m (3.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (4.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (3.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_state
--------------------------------------------------------
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (6.1ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "state") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-11-03 00:53:32.009388"], ["updated_at", "2020-11-03 00:53:32.009388"], ["social_class", "5"], ["state", "holiwis"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_build_area
-------------------------------------------------------------
  [1m[35m (4.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (5.2ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon", "build_area") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-11-03 00:53:32.029263"], ["updated_at", "2020-11-03 00:53:32.029263"], ["admon", "500000"], ["build_area", "hola"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_admon
------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-11-03 00:53:32.046415"], ["updated_at", "2020-11-03 00:53:32.046415"], ["admon", "7777777"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PropertyTest: test_Should_new,_save,_and_destroy_a_property
-----------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (11.1ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-11-03 00:53:32.056588"], ["updated_at", "2020-11-03 00:53:32.056588"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 21]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[36mProperty Destroy (0.5ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 21]]
  [1m[36mProperty Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_a_user_id
--------------------------------------------------------------
  [1m[35m (4.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_rooms_attribute
------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (4.3ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "rooms") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-11-03 00:53:32.089393"], ["updated_at", "2020-11-03 00:53:32.089393"], ["build_area", "hola"], ["rooms", "500"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PropertyTest: test_Should_have_successfully_newd_a_property
-----------------------------------------------------------
  [1m[35m (2.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.7ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-11-03 00:53:32.105172"], ["updated_at", "2020-11-03 00:53:32.105172"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PropertyTest: test_Should_create_a_property
-------------------------------------------
  [1m[35m (1.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.9ms)[0m  [1m[32mINSERT INTO "properties" ("hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["hood", "Belen"], ["city", "Pizza"], ["user_id", 99], ["created_at", "2020-11-03 00:53:32.117182"], ["updated_at", "2020-11-03 00:53:32.117182"]]
  [1m[35m (8.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_social_class
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "social_class") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-11-03 00:53:32.132948"], ["updated_at", "2020-11-03 00:53:32.132948"], ["build_area", "hola"], ["social_class", "Industrial"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_the_proper_built_type
--------------------------------------------------------------------------
  [1m[35m (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (3.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 550ms (Views: 0.9ms | ActiveRecord: 0.3ms | Allocations: 581)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:32 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 547ms (Views: 0.7ms | ActiveRecord: 4.9ms | Allocations: 573)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-11-02 19:53:33 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (2.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (2.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 15ms (Views: 0.1ms | ActiveRecord: 5.1ms | Allocations: 1735)
  [1m[35m (2.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 530ms (Views: 0.8ms | ActiveRecord: 3.5ms | Allocations: 581)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:33 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 256ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 573)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-11-02 19:53:34 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 12ms (Views: 0.3ms | ActiveRecord: 0.6ms | Allocations: 1601)
  [1m[35m (4.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 512ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 581)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 279ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 573)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:34 -0500
Processing by Api::V1::UsersController#login as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 368)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:34 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 348ms (Views: 0.9ms | ActiveRecord: 1.6ms | Allocations: 581)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 256ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 573)
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-11-02 19:53:35 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 341ms (Views: 0.6ms | ActiveRecord: 2.6ms | Allocations: 581)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:35 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 270ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 575)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-11-02 19:53:36 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$fpuaxNSjNFnzYvA53yZw6..XtHsB3CVIBEHVmf1AtDXaZXvPudXpK"], ["created_at", "2020-11-03 00:53:36.205368"], ["updated_at", "2020-11-03 00:53:36.205368"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 12ms (Views: 0.8ms | ActiveRecord: 1.4ms | Allocations: 1539)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 361ms (Views: 0.9ms | ActiveRecord: 0.9ms | Allocations: 581)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 287ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 573)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 272)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:36 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 395ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 581)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 250ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 573)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-11-02 19:53:37 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (5.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 13ms (Views: 0.5ms | ActiveRecord: 5.6ms | Allocations: 1875)
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:37 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 484ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 581)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 256ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 573)
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-11-02 19:53:38 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 10ms (Views: 0.4ms | ActiveRecord: 0.9ms | Allocations: 2499)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 366ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 581)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:38 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 245ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 573)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-11-02 19:53:38 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 9ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 1032)
  [1m[35m (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 532ms (Views: 1.2ms | ActiveRecord: 1.8ms | Allocations: 581)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 257ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 573)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-11-02 19:53:39 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (4.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (1.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 22ms (Views: 0.1ms | ActiveRecord: 7.0ms | Allocations: 2157)
  [1m[35m (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:39 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (5.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 540ms (Views: 0.7ms | ActiveRecord: 5.8ms | Allocations: 581)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 246ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 573)
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-11-02 19:53:40 -0500
Processing by Api::V1::UsersController#update as JSON
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (2.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (3.5ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-11-03 00:53:40.661973"], ["id", 100]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 24ms (Views: 0.7ms | ActiveRecord: 9.7ms | Allocations: 2515)
  [1m[35m (2.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:40 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 527ms (Views: 0.9ms | ActiveRecord: 3.2ms | Allocations: 581)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 254ms (Views: 1.0ms | ActiveRecord: 0.3ms | Allocations: 573)
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-11-02 19:53:41 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 16ms (Views: 0.3ms | ActiveRecord: 0.7ms | Allocations: 1601)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 492ms (Views: 1.0ms | ActiveRecord: 0.3ms | Allocations: 581)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:41 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 262ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 573)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-11-02 19:53:42 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (6.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 11ms (Views: 0.7ms | ActiveRecord: 6.6ms | Allocations: 1449)
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 545ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 581)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:42 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 379ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 573)
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (1.9ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "new_name"], ["updated_at", "2020-11-03 00:53:43.243928"], ["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 574ms (Views: 3.4ms | ActiveRecord: 1.9ms | Allocations: 581)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:53:43 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 516ms (Views: 1.0ms | ActiveRecord: 0.3ms | Allocations: 573)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-11-02 19:53:44 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 13ms (Views: 2.8ms | ActiveRecord: 2.3ms | Allocations: 2120)
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (3.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_property_id
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_url
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (1.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
PhotoTest: test_Should_create,_save_and_delete_a_property,_as_well_as_inspecting_the_link
-----------------------------------------------------------------------------------------
  [1m[35m (2.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPhoto Create (4.6ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.linkdeprueba.com"], ["property_id", 1], ["created_at", "2020-11-03 00:53:44.405703"], ["updated_at", "2020-11-03 00:53:44.405703"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.4ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 298486376]]
  [1m[36mPhoto Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "photos" WHERE "photos"."property_id" = $1 LIMIT $2[0m  [["property_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PhotoTest: test_Should_successfully_create_a_photo
--------------------------------------------------
  [1m[35m (3.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPhoto Create (1.7ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.zeldadeprueba.com"], ["property_id", 2], ["created_at", "2020-11-03 00:53:44.422786"], ["updated_at", "2020-11-03 00:53:44.422786"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (3.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "photos" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "properties" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (3.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.5ms)[0m  [1m[31mDELETE FROM "photos";
DELETE FROM "users";
DELETE FROM "properties";
INSERT INTO "photos" ("id", "url", "property_id", "created_at", "updated_at", "accepted_foc", "accepted_lum", "location") VALUES (1, 'http://image', 10, '2020-11-03 00:54:57.933742', '2020-11-03 00:54:57.933742', DEFAULT, DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-11-03 00:54:57.933742', '2020-11-03 00:54:57.933742', DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "users" ("id", "email", "password_digest", "created_at", "updated_at", "isadmin", "full_name", "cellphone", "id_card") VALUES (99, 'email@email.com', '1234', '2020-11-03 00:54:57.946020', '2020-11-03 00:54:57.946020', DEFAULT, DEFAULT, DEFAULT, DEFAULT), (298486374, 'MyString', 'MyString', '2020-11-03 00:54:57.946020', '2020-11-03 00:54:57.946020', DEFAULT, DEFAULT, DEFAULT, DEFAULT), (100, 'ejemplo1@mail.com', '$2a$12$QeV/n0B5noCIG85vs7K24.9Rk6X1CDcoOFxZ9XRjMGnqjEGpKmHme', '2020-11-03 00:54:57.946020', '2020-11-03 00:54:57.946020', FALSE, 'ejemplo1', DEFAULT, DEFAULT), (101, 'admin@mail.com', '$2a$12$1AOYLM8T72/2gikTvVd8NO3yujNYiiyILZO/s.89PO6cHC1s8DYtG', '2020-11-03 00:54:57.946020', '2020-11-03 00:54:57.946020', TRUE, DEFAULT, DEFAULT, DEFAULT), (103, 'ejemplo3@mail.com', '$2a$12$rfP8s1tmqf8rX1TYHN.EC.afnlyJFRSAmaZD8oz68WpWqqeAiOUjm', '2020-11-03 00:54:57.946020', '2020-11-03 00:54:57.946020', FALSE, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "properties" ("id", "project", "built_type", "price", "address", "apt", "hood", "city", "private_area", "user_id", "created_at", "updated_at", "admon", "build_area", "social_class", "state", "elevator", "common_areas", "property_tax", "rooms", "bathrooms", "half_bathrooms", "parking_lot", "utility_room", "empty_property", "inhabitants", "rent", "rent_desition", "mortgage") VALUES (6, DEFAULT, DEFAULT, '5000000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-11-03 00:54:57.956926', '2020-11-03 00:54:57.956926', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (7, DEFAULT, 'casa', '50', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-11-03 00:54:57.956926', '2020-11-03 00:54:57.956926', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (1, DEFAULT, DEFAULT, '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-11-03 00:54:57.956926', '2020-11-03 00:54:57.956926', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (2, DEFAULT, 'Apartment', '50000000', DEFAULT, DEFAULT, DEFAULT, 'MyString', DEFAULT, DEFAULT, '2020-11-03 00:54:57.956926', '2020-11-03 00:54:57.956926', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (3, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 101, '2020-11-03 00:54:57.956926', '2020-11-03 00:54:57.956926', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 103, '2020-11-03 00:54:57.956926', '2020-11-03 00:54:57.956926', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT)[0m
  [1m[35m (4.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "photos" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "properties" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
UserTest: test_should_find_the_new_created_user
-----------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$m7crmdRBStCS4CmA2DdiGuoO4xla/B60Q1EA1LoAN7y52qq6625UW"], ["created_at", "2020-11-03 00:54:58.105551"], ["updated_at", "2020-11-03 00:54:58.105551"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486375]]
  [1m[36mUser Destroy (1.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486375]]
  [1m[35m (23.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_a_password_no_longer_than_4_characters
-------------------------------------------------------------------------------
  [1m[35m (4.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (5.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$6JLK.EvgYsS/ooKEGlEM6.h.5elS5mQdrGJ9r1bZYMfR7/DtzPXOi"], ["created_at", "2020-11-03 00:54:58.212693"], ["updated_at", "2020-11-03 00:54:58.212693"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (4.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486376]]
  [1m[36mUser Destroy (1.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486376]]
  [1m[35m (4.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_should_not_save_user_with_an_email_longer_than_255_characters
----------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (2.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$nuAqg75qM3AyWcxVCwrGX.H7a4nbI8YsErbuTo499yp.Y/hfL/H2e"], ["created_at", "2020-11-03 00:54:58.285106"], ["updated_at", "2020-11-03 00:54:58.285106"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486377]]
  [1m[36mUser Destroy (2.9ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486377]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UserTest: test_should_not_save_user_without_proper_email
--------------------------------------------------------
  [1m[35m (2.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$79bx1QDwaGjtvZ.XTgUNT.U9GIcCfri2wlgG.L78Z6x2phrjCF5wq"], ["created_at", "2020-11-03 00:54:58.328656"], ["updated_at", "2020-11-03 00:54:58.328656"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (3.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "notanactualeimail"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486378]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486378]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_Should_be_capable_of_accessing_the_amount_of_properties_a_user_has
---------------------------------------------------------------------------------
  [1m[35m (3.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$fl9rKFMklEmPl7I6WATRcOuRYbdm4kM50bHIrnZTcx5piSXGy1NwW"], ["created_at", "2020-11-03 00:54:58.363332"], ["updated_at", "2020-11-03 00:54:58.363332"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486379]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486379]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_should_NOT_create_a_user_with_a_repeated_email
-------------------------------------------------------------
  [1m[35m (4.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (3.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$IlEHdOKwGunWMapqxCPUaeekmxunACHjixmLRJQA/0JxGyliSFj9S"], ["created_at", "2020-11-03 00:54:58.412180"], ["updated_at", "2020-11-03 00:54:58.412180"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (5.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486380]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486380]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$OUjID0MKw4h6LnzfTmdDJu7vZZtln2WTGqqT.hFVXmXSjGDTEEftu"], ["created_at", "2020-11-03 00:54:58.451248"], ["updated_at", "2020-11-03 00:54:58.451248"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.9ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486381]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486381]]
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
UserTest: test_should_create_a_new_user
---------------------------------------
  [1m[35m (2.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (2.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$o5YabhUJryWmEqiVZA5O0.qrfyMs14WateWEkvOf6zeJhlU6EwmqO"], ["created_at", "2020-11-03 00:54:58.484983"], ["updated_at", "2020-11-03 00:54:58.484983"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (2.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486382]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486382]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_Successfully_create_and_destroy_a_user
-----------------------------------------------------
  [1m[35m (4.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$XsfhKRDdf0lnby6YdhEfR.eTq/I2/iuL86o9LVECqSGVrmigIsEJK"], ["created_at", "2020-11-03 00:54:58.521443"], ["updated_at", "2020-11-03 00:54:58.521443"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid1@email.com"], ["password_digest", "$2a$04$XaPj.Me/sME4L8RT1Iz1geFpJYnJx.TPzw7zZfc2ANw69DIpyjuJ2"], ["created_at", "2020-11-03 00:54:58.531513"], ["updated_at", "2020-11-03 00:54:58.531513"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486384]]
  [1m[36mUser Destroy (1.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486384]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "valid1@email.com"], ["LIMIT", 1]]
  [1m[35m (2.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (1.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486383]]
  [1m[36mUser Destroy (2.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486383]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_should_not_save_user_without_a_password
------------------------------------------------------
  [1m[35m (3.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (3.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "valid@email.com"], ["password_digest", "$2a$04$GOnO6PWUpuzJQA5G/L3uQeV2PZG6rJHcpabZpqbXJFXBx2SPy7MAC"], ["created_at", "2020-11-03 00:54:58.576437"], ["updated_at", "2020-11-03 00:54:58.576437"], ["full_name", "valid"], ["cellphone", "3001234567"]]
  [1m[35m (2.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "valid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (3.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 298486385]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486385]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PhotosControllerTest: test_4_show_photo_by_id
---------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:54:58 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 256ms (Views: 1.1ms | ActiveRecord: 0.6ms | Allocations: 735)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:54:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 266ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 577)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:54:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 263ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 577)
Started GET "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-11-02 19:54:59 -0500
Processing by Api::V1::PhotosController#show as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.3ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 46ms (Views: 4.9ms | ActiveRecord: 2.6ms | Allocations: 7413)
  [1m[35m (1.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
PhotosControllerTest: test_1_attemp_to_list_photos_without_login
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:54:59 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 598ms (Views: 4.9ms | ActiveRecord: 3.8ms | Allocations: 585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 534ms (Views: 0.7ms | ActiveRecord: 2.1ms | Allocations: 577)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:00 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 261ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 577)
Started GET "/api/v1/users/1/properties/1/photos" for 127.0.0.1 at 2020-11-02 19:55:01 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"1", "property_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 123)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
PhotosControllerTest: test_6_create_photo
-----------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:01 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 353ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:01 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 268ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 577)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:01 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 256ms (Views: 0.8ms | ActiveRecord: 0.9ms | Allocations: 577)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started POST "/api/v1/users/103/properties/10/photos" for 127.0.0.1 at 2020-11-02 19:55:02 -0500
Processing by Api::V1::PhotosController#create as JSON
  Parameters: {"url"=>"http://image2", "user_id"=>"103", "property_id"=>"10"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (2.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPhoto Create (9.0ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://image2"], ["property_id", 10], ["created_at", "2020-11-03 00:55:02.281889"], ["updated_at", "2020-11-03 00:55:02.281889"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued PhotoQualityJob (Job ID: d4b36696-c27c-45ff-9210-c63e1d880725) to Test(default) with arguments: 298486375
Completed 201 Created in 148ms (Views: 0.6ms | ActiveRecord: 15.0ms | Allocations: 24257)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (2.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PhotosControllerTest: test_5_destroy_photo_by_id
------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:02 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 470ms (Views: 0.8ms | ActiveRecord: 2.9ms | Allocations: 585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:02 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 251ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 577)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:03 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 259ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 577)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
Started DELETE "/api/v1/users/103/properties/10/photos/1" for 127.0.0.1 at 2020-11-02 19:55:03 -0500
Processing by Api::V1::PhotosController#destroy as JSON
  Parameters: {"user_id"=>"103", "property_id"=>"10", "photo_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.5ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (1.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.5ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 17ms (Views: 0.2ms | ActiveRecord: 4.0ms | Allocations: 1478)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PhotosControllerTest: test_2_attemp_to_list_photos_of_another_user
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:03 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 512ms (Views: 0.8ms | ActiveRecord: 3.2ms | Allocations: 585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:03 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 255ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 577)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:04 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 261ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 577)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-11-02 19:55:04 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 11ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1602)
  [1m[35m (2.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PhotosControllerTest: test_3_list_photos_of_any_user_by_admin
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:04 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 492ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:04 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo3@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo3@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 250ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 577)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:05 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 259ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 577)
Started GET "/api/v1/users/101/properties/3/photos" for 127.0.0.1 at 2020-11-02 19:55:05 -0500
Processing by Api::V1::PhotosController#index as JSON
  Parameters: {"user_id"=>"101", "property_id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mPhoto Load (0.3ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 3]]
Completed 200 OK in 15ms (Views: 2.3ms | ActiveRecord: 4.0ms | Allocations: 1858)
  [1m[35m (3.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_without_loged_in
---------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:05 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 504ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:05 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 257ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 577)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-11-02 19:55:06 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 155)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_value
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 359ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 258ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 577)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-11-02 19:55:06 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"social_class"=>"3", "rent"=>"si", "half_bathrooms"=>"7", "user_id"=>"100"}
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (5.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "half_bathrooms", "rent") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-11-03 00:55:06.893335"], ["updated_at", "2020-11-03 00:55:06.893335"], ["social_class", "3"], ["half_bathrooms", "7"], ["rent", "si"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 25ms (Views: 0.7ms | ActiveRecord: 10.1ms | Allocations: 3413)
  [1m[35m (2.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PropertiesControllerTest: test_create:_create_a_property_with_no_attributes
---------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:06 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 599ms (Views: 4.0ms | ActiveRecord: 0.2ms | Allocations: 585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:07 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 405ms (Views: 0.7ms | ActiveRecord: 4.7ms | Allocations: 577)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-11-02 19:55:07 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (1.4ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 100], ["created_at", "2020-11-03 00:55:07.960849"], ["updated_at", "2020-11-03 00:55:07.960849"]]
  [1m[35m (3.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 27ms (Views: 0.9ms | ActiveRecord: 5.6ms | Allocations: 2578)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertiesControllerTest: test_show:_show_properties_with_a_invalid_property_id
-------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:07 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 588ms (Views: 0.7ms | ActiveRecord: 1.4ms | Allocations: 585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:08 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 247ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 577)
Started GET "/api/v1/users/100/properties/4" for 127.0.0.1 at 2020-11-02 19:55:08 -0500
Processing by Api::V1::PropertiesController#show as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"4"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 404 Not Found in 12ms (Views: 0.3ms | ActiveRecord: 0.8ms | Allocations: 1465)
  [1m[35m (2.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_an_invalid_property_id
----------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:08 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 530ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:09 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 271ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 577)
Started DELETE "/api/v1/users/100/properties/8" for 127.0.0.1 at 2020-11-02 19:55:09 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"8"}
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 404 Not Found in 12ms (Views: 0.2ms | ActiveRecord: 4.1ms | Allocations: 1465)
  [1m[35m (4.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_with_an_invalid_param
--------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:09 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 548ms (Views: 1.0ms | ActiveRecord: 2.3ms | Allocations: 585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:10 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 260ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 577)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-11-02 19:55:10 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"city"=>"Medellin", "ruum"=>"5000000", "property_tax"=>"777777", "bathrooms"=>"5", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :ruum, :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (4.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("city", "user_id", "created_at", "updated_at", "property_tax", "bathrooms") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["city", "Medellin"], ["user_id", 100], ["created_at", "2020-11-03 00:55:10.541894"], ["updated_at", "2020-11-03 00:55:10.541894"], ["property_tax", "777777"], ["bathrooms", "5"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 19ms (Views: 0.7ms | ActiveRecord: 5.4ms | Allocations: 2705)
  [1m[35m (6.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PropertiesControllerTest: test_check_update_without_all_the_params
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:10 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 531ms (Views: 0.8ms | ActiveRecord: 4.9ms | Allocations: 585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:11 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 267ms (Views: 1.5ms | ActiveRecord: 0.2ms | Allocations: 577)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-11-02 19:55:11 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"built_type"=>"Casa", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (4.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (1.8ms)[0m  [1m[33mUPDATE "properties" SET "built_type" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["built_type", "Casa"], ["user_id", 100], ["updated_at", "2020-11-03 00:55:11.394608"], ["id", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 30ms (Views: 0.7ms | ActiveRecord: 7.2ms | Allocations: 2786)
  [1m[35m (3.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_admin_profile
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:11 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 551ms (Views: 1.3ms | ActiveRecord: 4.4ms | Allocations: 585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:11 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 265ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 577)
Started GET "/api/v1/users/101/properties" for 127.0.0.1 at 2020-11-02 19:55:12 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
Completed 200 OK in 17ms (Views: 4.8ms | ActiveRecord: 0.9ms | Allocations: 3655)
  [1m[35m (2.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PropertiesControllerTest: test_index:_just_authorized_user
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:12 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 539ms (Views: 0.9ms | ActiveRecord: 1.7ms | Allocations: 585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:12 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 278ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 579)
Started GET "/api/v1/users/1/properties" for 127.0.0.1 at 2020-11-02 19:55:13 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
PropertiesControllerTest: test_destroy:_destroy_a_valid_property_id
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:13 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 379ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:13 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 267ms (Views: 1.2ms | ActiveRecord: 0.4ms | Allocations: 577)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started DELETE "/api/v1/users/100/properties/7" for 127.0.0.1 at 2020-11-02 19:55:13 -0500
Processing by Api::V1::PropertiesController#destroy as JSON
  Parameters: {"user_id"=>"100", "property_id"=>"7"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPhoto Load (0.2ms)[0m  [1m[34mSELECT "photos".* FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 7]]
  [1m[36mProperty Destroy (2.3ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 27ms (Views: 0.2ms | ActiveRecord: 7.8ms | Allocations: 1811)
  [1m[35m (2.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PropertiesControllerTest: test_check_update_of_the_city
-------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:13 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 602ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:14 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 265ms (Views: 2.2ms | ActiveRecord: 0.2ms | Allocations: 577)
Started PUT "/api/v1/users/100/properties/1" for 127.0.0.1 at 2020-11-02 19:55:14 -0500
Processing by Api::V1::PropertiesController#update as JSON
  Parameters: {"city"=>"Sabaneta", "user_id"=>"100", "property_id"=>"1"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :property_id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (2.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Update (0.7ms)[0m  [1m[33mUPDATE "properties" SET "city" = $1, "user_id" = $2, "updated_at" = $3 WHERE "properties"."id" = $4[0m  [["city", "Sabaneta"], ["user_id", 100], ["updated_at", "2020-11-03 00:55:14.756622"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 28ms (Views: 0.7ms | ActiveRecord: 8.1ms | Allocations: 2724)
  [1m[35m (4.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------
PropertiesControllerTest: test_create:_checks_the_creation_of_a_property_without_all_the_entries
------------------------------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:14 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 528ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:15 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 251ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 577)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
Started POST "/api/v1/users/100/properties/" for 127.0.0.1 at 2020-11-02 19:55:15 -0500
Processing by Api::V1::PropertiesController#create as JSON
  Parameters: {"built_type"=>"Casa", "price"=>"5000000", "admon"=>"80000", "rooms"=>"3", "user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameter: :format[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "price", "user_id", "created_at", "updated_at", "admon", "rooms") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["built_type", "Casa"], ["price", "5000000"], ["user_id", 100], ["created_at", "2020-11-03 00:55:15.588040"], ["updated_at", "2020-11-03 00:55:15.588040"], ["admon", "80000"], ["rooms", "3"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 19ms (Views: 0.8ms | ActiveRecord: 1.4ms | Allocations: 2736)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertiesControllerTest: test_index:_enter_with_a_loged_user
-------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:15 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 536ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:16 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 253ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 577)
Started GET "/api/v1/users/100/properties" for 127.0.0.1 at 2020-11-02 19:55:16 -0500
Processing by Api::V1::PropertiesController#index as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mProperty Load (5.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
Completed 200 OK in 17ms (Views: 1.3ms | ActiveRecord: 10.7ms | Allocations: 1587)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PropertyTest: test_Should_create_a_property
-------------------------------------------
  [1m[35m (3.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "properties" ("hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["hood", "Belen"], ["city", "Pizza"], ["user_id", 99], ["created_at", "2020-11-03 00:55:16.435369"], ["updated_at", "2020-11-03 00:55:16.435369"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_because_admon_exceeds_the_maximum_valor
------------------------------------------------------------------------------------
  [1m[35m (3.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (5.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_the_proper_built_type
--------------------------------------------------------------------------
  [1m[35m (3.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (4.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_social_class
---------------------------------------------------------------
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (4.6ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "social_class") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-11-03 00:55:16.476982"], ["updated_at", "2020-11-03 00:55:16.476982"], ["build_area", "hola"], ["social_class", "Industrial"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_property_tax_attribute
-------------------------------------------------------------------------
  [1m[35m (2.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (3.4ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "property_tax") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-11-03 00:55:16.489719"], ["updated_at", "2020-11-03 00:55:16.489719"], ["build_area", "hola"], ["property_tax", "500000"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_state
--------------------------------------------------------
  [1m[35m (2.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (5.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "social_class", "state") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-11-03 00:55:16.512502"], ["updated_at", "2020-11-03 00:55:16.512502"], ["social_class", "5"], ["state", "holiwis"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PropertyTest: test_Should_new,_save,_and_destroy_a_property
-----------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (1.1ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-11-03 00:55:16.544712"], ["updated_at", "2020-11-03 00:55:16.544712"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "photos" WHERE "photos"."property_id" = $1[0m  [["property_id", 19]]
  [1m[36mProperty Load (1.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[36mProperty Destroy (4.1ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 19]]
  [1m[36mProperty Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."user_id" = $1 LIMIT $2[0m  [["user_id", 99], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PropertyTest: test_Should_have_successfully_newd_a_property
-----------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (3.3ms)[0m  [1m[32mINSERT INTO "properties" ("built_type", "hood", "city", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["built_type", "Casa"], ["hood", "Belen"], ["city", "Medellin"], ["user_id", 99], ["created_at", "2020-11-03 00:55:16.583564"], ["updated_at", "2020-11-03 00:55:16.583564"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_admon
------------------------------------------------------
  [1m[35m (2.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (2.2ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-11-03 00:55:16.601120"], ["updated_at", "2020-11-03 00:55:16.601120"], ["admon", "7777777"]]
  [1m[35m (2.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_social_class
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (2.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_build_area
-------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (2.0ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "admon", "build_area") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-11-03 00:55:16.625061"], ["updated_at", "2020-11-03 00:55:16.625061"], ["admon", "500000"], ["build_area", "hola"]]
  [1m[35m (1.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_common_areas_attribute
-------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (2.4ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "common_areas") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-11-03 00:55:16.637031"], ["updated_at", "2020-11-03 00:55:16.637031"], ["build_area", "hola"], ["common_areas", "muchisimas"]]
  [1m[35m (3.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PropertyTest: test_Should_create_a_property_with_a_valid_rooms_attribute
------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mProperty Create (6.4ms)[0m  [1m[32mINSERT INTO "properties" ("user_id", "created_at", "updated_at", "build_area", "rooms") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 99], ["created_at", "2020-11-03 00:55:16.648579"], ["updated_at", "2020-11-03 00:55:16.648579"], ["build_area", "hola"], ["rooms", "500"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PropertyTest: test_Should_not_create_a_property_with_an_invalid_rooms_attribute
-------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PropertyTest: test_Should_not_new_a_property_without_a_user_id
--------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
PhotoTest: test_Should_create,_save_and_delete_a_property,_as_well_as_inspecting_the_link
-----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.7ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.linkdeprueba.com"], ["property_id", 1], ["created_at", "2020-11-03 00:55:16.683751"], ["updated_at", "2020-11-03 00:55:16.683751"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPhoto Destroy (0.6ms)[0m  [1m[31mDELETE FROM "photos" WHERE "photos"."id" = $1[0m  [["id", 298486376]]
  [1m[36mPhoto Exists? (3.8ms)[0m  [1m[34mSELECT 1 AS one FROM "photos" WHERE "photos"."property_id" = $1 LIMIT $2[0m  [["property_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PhotoTest: test_Should_successfully_create_a_photo
--------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPhoto Create (0.6ms)[0m  [1m[32mINSERT INTO "photos" ("url", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "http://www.zeldadeprueba.com"], ["property_id", 2], ["created_at", "2020-11-03 00:55:16.699312"], ["updated_at", "2020-11-03 00:55:16.699312"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_property_id
---------------------------------------------------------------
  [1m[35m (2.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PhotoTest: test_Should_not_create_a_photo_without_a_url
-------------------------------------------------------
  [1m[35m (1.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (3.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
UsersControllerTest: test_13_checks_creation_of_new_user
--------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:16 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 448ms (Views: 0.8ms | ActiveRecord: 1.7ms | Allocations: 585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:17 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 255ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 577)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/users/" for 127.0.0.1 at 2020-11-02 19:55:17 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"ejemplo2@mail.com", "password"=>"[FILTERED]", "full_name"=>"ejemplo2", "cellphone"=>"3001234567"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "ejemplo2@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "full_name", "cellphone") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "ejemplo2@mail.com"], ["password_digest", "$2a$04$FYJyFxrCzOhTy6Sj7z2cPuGlYBP58xpE87A5UHPekeI/tSXg8HFAa"], ["created_at", "2020-11-03 00:55:17.462586"], ["updated_at", "2020-11-03 00:55:17.462586"], ["full_name", "ejemplo2"], ["cellphone", "3001234567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 10ms (Views: 0.6ms | ActiveRecord: 1.2ms | Allocations: 1538)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_12_authorized_for_admin_to_delete_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:17 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 361ms (Views: 0.8ms | ActiveRecord: 4.7ms | Allocations: 585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:17 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 272ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 577)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-11-02 19:55:18 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (4.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (2.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 19ms (Views: 0.3ms | ActiveRecord: 8.6ms | Allocations: 2161)
  [1m[35m (1.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_4_Failed_log_in_due_to_empty_parameters
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:18 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 529ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:18 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 250ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 577)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:18 -0500
Processing by Api::V1::UsersController#login as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 368)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UsersControllerTest: test_3_Failed_log_in_due_to_invalid_email
--------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:18 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 353ms (Views: 1.1ms | ActiveRecord: 0.2ms | Allocations: 585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:19 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 253ms (Views: 0.9ms | ActiveRecord: 0.3ms | Allocations: 577)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:19 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 272)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UsersControllerTest: test_10_authorized_for_user_to_delete_himself
------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:19 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 361ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:19 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 265ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 577)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/100" for 127.0.0.1 at 2020-11-02 19:55:20 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."user_id" = $1[0m  [["user_id", 100]]
  [1m[36mUser Destroy (3.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 22ms (Views: 0.2ms | ActiveRecord: 7.4ms | Allocations: 1731)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
UsersControllerTest: test_8_unauthorized_user_to_show_any_other_user
--------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:20 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 516ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:20 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 285ms (Views: 1.1ms | ActiveRecord: 0.3ms | Allocations: 578)
Started GET "/api/v1/users/101" for 127.0.0.1 at 2020-11-02 19:55:21 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (4.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 14ms (Views: 0.2ms | ActiveRecord: 5.2ms | Allocations: 1601)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UsersControllerTest: test_11_unauthorized_for_user_to_delete_another_user
-------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 514ms (Views: 0.6ms | ActiveRecord: 4.2ms | Allocations: 585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 285ms (Views: 0.9ms | ActiveRecord: 0.6ms | Allocations: 577)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/api/v1/users/101" for 127.0.0.1 at 2020-11-02 19:55:21 -0500
Processing by Api::V1::UsersController#destroy as JSON
  Parameters: {"user_id"=>"101"}
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (5.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :correct_user rendered or redirected
Completed 401 Unauthorized in 14ms (Views: 0.2ms | ActiveRecord: 8.4ms | Allocations: 1601)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UsersControllerTest: test_15_Tests_the_update_method
----------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:21 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 540ms (Views: 0.8ms | ActiveRecord: 1.5ms | Allocations: 585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:22 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 273ms (Views: 1.1ms | ActiveRecord: 0.3ms | Allocations: 577)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "new_name"], ["updated_at", "2020-11-03 00:55:22.814395"], ["id", 100]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UsersControllerTest: test_5_unauthorized_for_user_for_index
-----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:22 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 367ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 262ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 577)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-11-02 19:55:23 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (5.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :isadmin? rendered or redirected
Completed 401 Unauthorized in 9ms (Views: 0.2ms | ActiveRecord: 5.3ms | Allocations: 1032)
  [1m[35m (5.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UsersControllerTest: test_14_check_correct_update_of_user_full_name
-------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:23 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 531ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 262ms (Views: 0.8ms | ActiveRecord: 0.5ms | Allocations: 577)
Started PUT "/api/v1/users/100/" for 127.0.0.1 at 2020-11-02 19:55:24 -0500
Processing by Api::V1::UsersController#update as JSON
  Parameters: {"full_name"=>"newname", "user_id"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
[31mUnpermitted parameters: :format, :user_id[0m
  [1m[35m (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "ejemplo1@mail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "full_name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["full_name", "newname"], ["updated_at", "2020-11-03 00:55:24.331244"], ["id", 100]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 21ms (Views: 0.5ms | ActiveRecord: 3.5ms | Allocations: 2493)
  [1m[35m (2.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UsersControllerTest: test_2_Failed_sing_up_due_to_invalid_email
---------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (6.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 627ms (Views: 4.2ms | ActiveRecord: 6.3ms | Allocations: 585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:24 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 653ms (Views: 0.6ms | ActiveRecord: 3.0ms | Allocations: 577)
Started POST "/api/v1/signup" for 127.0.0.1 at 2020-11-02 19:55:25 -0500
Processing by Api::V1::UsersController#create as JSON
  Parameters: {"email"=>"invalid", "password"=>"[FILTERED]"}
[31mUnpermitted parameter: :format[0m
  [1m[35m (3.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "invalid"], ["LIMIT", 1]]
  [1m[35m (2.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 24ms (Views: 0.5ms | ActiveRecord: 10.1ms | Allocations: 2499)
  [1m[35m (2.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UsersControllerTest: test_1_Attempt_accessing_without_logging_in_should_fail
----------------------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:25 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 570ms (Views: 0.9ms | ActiveRecord: 1.9ms | Allocations: 585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 435ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 577)
Started GET "/api/v1/users/1" for 127.0.0.1 at 2020-11-02 19:55:26 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"1"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 120)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UsersControllerTest: test_6_authorized_for_admin_for_index
----------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:26 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 350ms (Views: 0.7ms | ActiveRecord: 3.7ms | Allocations: 585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:27 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 270ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 577)
Started GET "/api/v1/users" for 127.0.0.1 at 2020-11-02 19:55:27 -0500
Processing by Api::V1::UsersController#index as JSON
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 15ms (Views: 4.7ms | ActiveRecord: 3.7ms | Allocations: 2140)
  [1m[36mUser Load (4.9ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UsersControllerTest: test_9_authorized_user_to_show_his_own_user
----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:27 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 522ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 585)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:27 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 276ms (Views: 1.2ms | ActiveRecord: 0.3ms | Allocations: 577)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-11-02 19:55:28 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 23ms (Views: 0.7ms | ActiveRecord: 3.2ms | Allocations: 1455)
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
UsersControllerTest: test_7_authorized_for_admin_to_show_any_user
-----------------------------------------------------------------
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"ejemplo1@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ejemplo1@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 543ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 586)
Started POST "/api/v1/login" for 127.0.0.1 at 2020-11-02 19:55:28 -0500
Processing by Api::V1::UsersController#login as JSON
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
Completed 200 OK in 250ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 577)
Started GET "/api/v1/users/100" for 127.0.0.1 at 2020-11-02 19:55:29 -0500
Processing by Api::V1::UsersController#show as JSON
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Completed 200 OK in 19ms (Views: 0.8ms | ActiveRecord: 3.0ms | Allocations: 1879)
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
